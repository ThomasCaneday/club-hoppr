(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function r(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(c){if(c.ep)return;c.ep=!0;const p=r(c);fetch(c.href,p)}})();function L_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ph={exports:{}},wa={},kh={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function Hg(){if(Pp)return Se;Pp=1;var s=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),k=Symbol.iterator;function R(T){return T===null||typeof T!="object"?null:(T=k&&T[k]||T["@@iterator"],typeof T=="function"?T:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,q={};function le(T,B,oe){this.props=T,this.context=B,this.refs=q,this.updater=oe||j}le.prototype.isReactComponent={},le.prototype.setState=function(T,B){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,B,"setState")},le.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function Le(){}Le.prototype=le.prototype;function De(T,B,oe){this.props=T,this.context=B,this.refs=q,this.updater=oe||j}var Me=De.prototype=new Le;Me.constructor=De,Y(Me,le.prototype),Me.isPureReactComponent=!0;var be=Array.isArray,lt=Object.prototype.hasOwnProperty,ot={current:null},ht={key:!0,ref:!0,__self:!0,__source:!0};function Et(T,B,oe){var ne,ie={},X=null,we=null;if(B!=null)for(ne in B.ref!==void 0&&(we=B.ref),B.key!==void 0&&(X=""+B.key),B)lt.call(B,ne)&&!ht.hasOwnProperty(ne)&&(ie[ne]=B[ne]);var Ce=arguments.length-2;if(Ce===1)ie.children=oe;else if(1<Ce){for(var We=Array(Ce),Tt=0;Tt<Ce;Tt++)We[Tt]=arguments[Tt+2];ie.children=We}if(T&&T.defaultProps)for(ne in Ce=T.defaultProps,Ce)ie[ne]===void 0&&(ie[ne]=Ce[ne]);return{$$typeof:s,type:T,key:X,ref:we,props:ie,_owner:ot.current}}function Wt(T,B){return{$$typeof:s,type:T.type,key:B,ref:T.ref,props:T.props,_owner:T._owner}}function Kt(T){return typeof T=="object"&&T!==null&&T.$$typeof===s}function qe(T){var B={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(oe){return B[oe]})}var $e=/\/+/g;function xt(T,B){return typeof T=="object"&&T!==null&&T.key!=null?qe(""+T.key):B.toString(36)}function Qe(T,B,oe,ne,ie){var X=typeof T;(X==="undefined"||X==="boolean")&&(T=null);var we=!1;if(T===null)we=!0;else switch(X){case"string":case"number":we=!0;break;case"object":switch(T.$$typeof){case s:case n:we=!0}}if(we)return we=T,ie=ie(we),T=ne===""?"."+xt(we,0):ne,be(ie)?(oe="",T!=null&&(oe=T.replace($e,"$&/")+"/"),Qe(ie,B,oe,"",function(Tt){return Tt})):ie!=null&&(Kt(ie)&&(ie=Wt(ie,oe+(!ie.key||we&&we.key===ie.key?"":(""+ie.key).replace($e,"$&/")+"/")+T)),B.push(ie)),1;if(we=0,ne=ne===""?".":ne+":",be(T))for(var Ce=0;Ce<T.length;Ce++){X=T[Ce];var We=ne+xt(X,Ce);we+=Qe(X,B,oe,We,ie)}else if(We=R(T),typeof We=="function")for(T=We.call(T),Ce=0;!(X=T.next()).done;)X=X.value,We=ne+xt(X,Ce++),we+=Qe(X,B,oe,We,ie);else if(X==="object")throw B=String(T),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return we}function sn(T,B,oe){if(T==null)return T;var ne=[],ie=0;return Qe(T,ne,"","",function(X){return B.call(oe,X,ie++)}),ne}function Oe(T){if(T._status===-1){var B=T._result;B=B(),B.then(function(oe){(T._status===0||T._status===-1)&&(T._status=1,T._result=oe)},function(oe){(T._status===0||T._status===-1)&&(T._status=2,T._result=oe)}),T._status===-1&&(T._status=0,T._result=B)}if(T._status===1)return T._result.default;throw T._result}var V={current:null},A={transition:null},$={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:A,ReactCurrentOwner:ot};function F(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:sn,forEach:function(T,B,oe){sn(T,function(){B.apply(this,arguments)},oe)},count:function(T){var B=0;return sn(T,function(){B++}),B},toArray:function(T){return sn(T,function(B){return B})||[]},only:function(T){if(!Kt(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Se.Component=le,Se.Fragment=r,Se.Profiler=c,Se.PureComponent=De,Se.StrictMode=l,Se.Suspense=C,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,Se.act=F,Se.cloneElement=function(T,B,oe){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var ne=Y({},T.props),ie=T.key,X=T.ref,we=T._owner;if(B!=null){if(B.ref!==void 0&&(X=B.ref,we=ot.current),B.key!==void 0&&(ie=""+B.key),T.type&&T.type.defaultProps)var Ce=T.type.defaultProps;for(We in B)lt.call(B,We)&&!ht.hasOwnProperty(We)&&(ne[We]=B[We]===void 0&&Ce!==void 0?Ce[We]:B[We])}var We=arguments.length-2;if(We===1)ne.children=oe;else if(1<We){Ce=Array(We);for(var Tt=0;Tt<We;Tt++)Ce[Tt]=arguments[Tt+2];ne.children=Ce}return{$$typeof:s,type:T.type,key:ie,ref:X,props:ne,_owner:we}},Se.createContext=function(T){return T={$$typeof:m,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:p,_context:T},T.Consumer=T},Se.createElement=Et,Se.createFactory=function(T){var B=Et.bind(null,T);return B.type=T,B},Se.createRef=function(){return{current:null}},Se.forwardRef=function(T){return{$$typeof:w,render:T}},Se.isValidElement=Kt,Se.lazy=function(T){return{$$typeof:N,_payload:{_status:-1,_result:T},_init:Oe}},Se.memo=function(T,B){return{$$typeof:S,type:T,compare:B===void 0?null:B}},Se.startTransition=function(T){var B=A.transition;A.transition={};try{T()}finally{A.transition=B}},Se.unstable_act=F,Se.useCallback=function(T,B){return V.current.useCallback(T,B)},Se.useContext=function(T){return V.current.useContext(T)},Se.useDebugValue=function(){},Se.useDeferredValue=function(T){return V.current.useDeferredValue(T)},Se.useEffect=function(T,B){return V.current.useEffect(T,B)},Se.useId=function(){return V.current.useId()},Se.useImperativeHandle=function(T,B,oe){return V.current.useImperativeHandle(T,B,oe)},Se.useInsertionEffect=function(T,B){return V.current.useInsertionEffect(T,B)},Se.useLayoutEffect=function(T,B){return V.current.useLayoutEffect(T,B)},Se.useMemo=function(T,B){return V.current.useMemo(T,B)},Se.useReducer=function(T,B,oe){return V.current.useReducer(T,B,oe)},Se.useRef=function(T){return V.current.useRef(T)},Se.useState=function(T){return V.current.useState(T)},Se.useSyncExternalStore=function(T,B,oe){return V.current.useSyncExternalStore(T,B,oe)},Se.useTransition=function(){return V.current.useTransition()},Se.version="18.3.1",Se}var kp;function cd(){return kp||(kp=1,kh.exports=Hg()),kh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp;function jg(){if(Lp)return wa;Lp=1;var s=cd(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function m(w,C,S){var N,k={},R=null,j=null;S!==void 0&&(R=""+S),C.key!==void 0&&(R=""+C.key),C.ref!==void 0&&(j=C.ref);for(N in C)l.call(C,N)&&!p.hasOwnProperty(N)&&(k[N]=C[N]);if(w&&w.defaultProps)for(N in C=w.defaultProps,C)k[N]===void 0&&(k[N]=C[N]);return{$$typeof:n,type:w,key:R,ref:j,props:k,_owner:c.current}}return wa.Fragment=r,wa.jsx=m,wa.jsxs=m,wa}var Ip;function Zg(){return Ip||(Ip=1,Ph.exports=jg()),Ph.exports}var ue=Zg(),ye=cd();const Hh=L_(ye);var Cu={},Lh={exports:{}},nn={},Ih={exports:{}},Nh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function Vg(){return Np||(Np=1,function(s){function n(A,$){var F=A.length;A.push($);e:for(;0<F;){var T=F-1>>>1,B=A[T];if(0<c(B,$))A[T]=$,A[F]=B,F=T;else break e}}function r(A){return A.length===0?null:A[0]}function l(A){if(A.length===0)return null;var $=A[0],F=A.pop();if(F!==$){A[0]=F;e:for(var T=0,B=A.length,oe=B>>>1;T<oe;){var ne=2*(T+1)-1,ie=A[ne],X=ne+1,we=A[X];if(0>c(ie,F))X<B&&0>c(we,ie)?(A[T]=we,A[X]=F,T=X):(A[T]=ie,A[ne]=F,T=ne);else if(X<B&&0>c(we,F))A[T]=we,A[X]=F,T=X;else break e}}return $}function c(A,$){var F=A.sortIndex-$.sortIndex;return F!==0?F:A.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;s.unstable_now=function(){return p.now()}}else{var m=Date,w=m.now();s.unstable_now=function(){return m.now()-w}}var C=[],S=[],N=1,k=null,R=3,j=!1,Y=!1,q=!1,le=typeof setTimeout=="function"?setTimeout:null,Le=typeof clearTimeout=="function"?clearTimeout:null,De=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Me(A){for(var $=r(S);$!==null;){if($.callback===null)l(S);else if($.startTime<=A)l(S),$.sortIndex=$.expirationTime,n(C,$);else break;$=r(S)}}function be(A){if(q=!1,Me(A),!Y)if(r(C)!==null)Y=!0,Oe(lt);else{var $=r(S);$!==null&&V(be,$.startTime-A)}}function lt(A,$){Y=!1,q&&(q=!1,Le(Et),Et=-1),j=!0;var F=R;try{for(Me($),k=r(C);k!==null&&(!(k.expirationTime>$)||A&&!qe());){var T=k.callback;if(typeof T=="function"){k.callback=null,R=k.priorityLevel;var B=T(k.expirationTime<=$);$=s.unstable_now(),typeof B=="function"?k.callback=B:k===r(C)&&l(C),Me($)}else l(C);k=r(C)}if(k!==null)var oe=!0;else{var ne=r(S);ne!==null&&V(be,ne.startTime-$),oe=!1}return oe}finally{k=null,R=F,j=!1}}var ot=!1,ht=null,Et=-1,Wt=5,Kt=-1;function qe(){return!(s.unstable_now()-Kt<Wt)}function $e(){if(ht!==null){var A=s.unstable_now();Kt=A;var $=!0;try{$=ht(!0,A)}finally{$?xt():(ot=!1,ht=null)}}else ot=!1}var xt;if(typeof De=="function")xt=function(){De($e)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,sn=Qe.port2;Qe.port1.onmessage=$e,xt=function(){sn.postMessage(null)}}else xt=function(){le($e,0)};function Oe(A){ht=A,ot||(ot=!0,xt())}function V(A,$){Et=le(function(){A(s.unstable_now())},$)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(A){A.callback=null},s.unstable_continueExecution=function(){Y||j||(Y=!0,Oe(lt))},s.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Wt=0<A?Math.floor(1e3/A):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_getFirstCallbackNode=function(){return r(C)},s.unstable_next=function(A){switch(R){case 1:case 2:case 3:var $=3;break;default:$=R}var F=R;R=$;try{return A()}finally{R=F}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(A,$){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var F=R;R=A;try{return $()}finally{R=F}},s.unstable_scheduleCallback=function(A,$,F){var T=s.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?T+F:T):F=T,A){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=F+B,A={id:N++,callback:$,priorityLevel:A,startTime:F,expirationTime:B,sortIndex:-1},F>T?(A.sortIndex=F,n(S,A),r(C)===null&&A===r(S)&&(q?(Le(Et),Et=-1):q=!0,V(be,F-T))):(A.sortIndex=B,n(C,A),Y||j||(Y=!0,Oe(lt))),A},s.unstable_shouldYield=qe,s.unstable_wrapCallback=function(A){var $=R;return function(){var F=R;R=$;try{return A.apply(this,arguments)}finally{R=F}}}}(Nh)),Nh}var Rp;function $g(){return Rp||(Rp=1,Ih.exports=Vg()),Ih.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp;function Gg(){if(Mp)return nn;Mp=1;var s=cd(),n=$g();function r(e){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,c={};function p(e,i){m(e,i),m(e+"Capture",i)}function m(e,i){for(c[e]=i,e=0;e<i.length;e++)l.add(i[e])}var w=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N={},k={};function R(e){return C.call(k,e)?!0:C.call(N,e)?!1:S.test(e)?k[e]=!0:(N[e]=!0,!1)}function j(e,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Y(e,i,a,h){if(i===null||typeof i>"u"||j(e,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function q(e,i,a,h,f,_,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=e,this.type=i,this.sanitizeURL=_,this.removeEmptyString=v}var le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){le[e]=new q(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0];le[i]=new q(i,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){le[e]=new q(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){le[e]=new q(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){le[e]=new q(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){le[e]=new q(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){le[e]=new q(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){le[e]=new q(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){le[e]=new q(e,5,!1,e.toLowerCase(),null,!1,!1)});var Le=/[\-:]([a-z])/g;function De(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var i=e.replace(Le,De);le[i]=new q(i,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var i=e.replace(Le,De);le[i]=new q(i,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(Le,De);le[i]=new q(i,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){le[e]=new q(e,1,!1,e.toLowerCase(),null,!1,!1)}),le.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){le[e]=new q(e,1,!1,e.toLowerCase(),null,!0,!0)});function Me(e,i,a,h){var f=le.hasOwnProperty(i)?le[i]:null;(f!==null?f.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(Y(i,a,f,h)&&(a=null),h||f===null?R(i)&&(a===null?e.removeAttribute(i):e.setAttribute(i,""+a)):f.mustUseProperty?e[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,h=f.attributeNamespace,a===null?e.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?e.setAttributeNS(h,i,a):e.setAttribute(i,a))))}var be=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lt=Symbol.for("react.element"),ot=Symbol.for("react.portal"),ht=Symbol.for("react.fragment"),Et=Symbol.for("react.strict_mode"),Wt=Symbol.for("react.profiler"),Kt=Symbol.for("react.provider"),qe=Symbol.for("react.context"),$e=Symbol.for("react.forward_ref"),xt=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),sn=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),A=Symbol.iterator;function $(e){return e===null||typeof e!="object"?null:(e=A&&e[A]||e["@@iterator"],typeof e=="function"?e:null)}var F=Object.assign,T;function B(e){if(T===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);T=i&&i[1]||""}return`
`+T+e}var oe=!1;function ne(e,i){if(!e||oe)return"";oe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(z){var h=z}Reflect.construct(e,[],i)}else{try{i.call()}catch(z){h=z}e.call(i.prototype)}else{try{throw Error()}catch(z){h=z}e()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var f=z.stack.split(`
`),_=h.stack.split(`
`),v=f.length-1,E=_.length-1;1<=v&&0<=E&&f[v]!==_[E];)E--;for(;1<=v&&0<=E;v--,E--)if(f[v]!==_[E]){if(v!==1||E!==1)do if(v--,E--,0>E||f[v]!==_[E]){var P=`
`+f[v].replace(" at new "," at ");return e.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",e.displayName)),P}while(1<=v&&0<=E);break}}}finally{oe=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?B(e):""}function ie(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=ne(e.type,!1),e;case 11:return e=ne(e.type.render,!1),e;case 1:return e=ne(e.type,!0),e;default:return""}}function X(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ht:return"Fragment";case ot:return"Portal";case Wt:return"Profiler";case Et:return"StrictMode";case xt:return"Suspense";case Qe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qe:return(e.displayName||"Context")+".Consumer";case Kt:return(e._context.displayName||"Context")+".Provider";case $e:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sn:return i=e.displayName||null,i!==null?i:X(e.type)||"Memo";case Oe:i=e._payload,e=e._init;try{return X(e(i))}catch{}}return null}function we(e){var i=e.type;switch(e.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=i.render,e=e.displayName||e.name||"",i.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X(i);case 8:return i===Et?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ce(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function We(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Tt(e){var i=We(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),h=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,_=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){h=""+v,_.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(v){h=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Oi(e){e._valueTracker||(e._valueTracker=Tt(e))}function Ai(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return e&&(h=We(e)?e.checked?"true":"false":e.value),e=h,e!==a?(i.setValue(e),!0):!1}function Di(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wo(e,i){var a=i.checked;return F({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function Co(e,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=Ce(i.value!=null?i.value:a),e._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function So(e,i){i=i.checked,i!=null&&Me(e,"checked",i,!1)}function Pr(e,i){So(e,i);var a=Ce(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(h==="submit"||h==="reset"){e.removeAttribute("value");return}i.hasOwnProperty("value")?Eo(e,i.type,a):i.hasOwnProperty("defaultValue")&&Eo(e,i.type,Ce(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(e.defaultChecked=!!i.defaultChecked)}function kr(e,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+e._wrapperState.initialValue,a||i===e.value||(e.value=i),e.defaultValue=i}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function Eo(e,i,a){(i!=="number"||Di(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var bi=Array.isArray;function Zn(e,i,a,h){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&h&&(e[a].defaultSelected=!0)}else{for(a=""+Ce(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,h&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function ds(e,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return F({},i,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xo(e,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(r(92));if(bi(a)){if(1<a.length)throw Error(r(93));a=a[0]}i=a}i==null&&(i=""),a=i}e._wrapperState={initialValue:Ce(a)}}function Ja(e,i){var a=Ce(i.value),h=Ce(i.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),i.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),h!=null&&(e.defaultValue=""+h)}function el(e){var i=e.textContent;i===e._wrapperState.initialValue&&i!==""&&i!==null&&(e.value=i)}function fs(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ps(e,i){return e==null||e==="http://www.w3.org/1999/xhtml"?fs(i):e==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Lr,tl=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,f){MSApp.execUnsafeLocalFunction(function(){return e(i,a,h,f)})}:e}(function(e,i){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=i;else{for(Lr=Lr||document.createElement("div"),Lr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Lr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;i.firstChild;)e.appendChild(i.firstChild)}});function zi(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nc=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(e){nc.forEach(function(i){i=i+e.charAt(0).toUpperCase()+e.substring(1),Fi[i]=Fi[e]})});function To(e,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Fi.hasOwnProperty(e)&&Fi[e]?(""+i).trim():i+"px"}function _s(e,i){e=e.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=To(a,i[a],h);a==="float"&&(a="cssFloat"),h?e.setProperty(a,f):e[a]=f}}var nl=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Po(e,i){if(i){if(nl[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function si(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ko=null;function Lo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ms=null,oi=null,ai=null;function il(e){if(e=yi(e)){if(typeof ms!="function")throw Error(r(280));var i=e.stateNode;i&&(i=js(i),ms(e.stateNode,e.type,i))}}function rl(e){oi?ai?ai.push(e):ai=[e]:oi=e}function sl(){if(oi){var e=oi,i=ai;if(ai=oi=null,il(e),i)for(e=0;e<i.length;e++)il(i[e])}}function ol(e,i){return e(i)}function al(){}var Io=!1;function gs(e,i,a){if(Io)return e(i,a);Io=!0;try{return ol(e,i,a)}finally{Io=!1,(oi!==null||ai!==null)&&(al(),sl())}}function Ir(e,i){var a=e.stateNode;if(a===null)return null;var h=js(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var No=!1;if(w)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){No=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{No=!1}function ic(e,i,a,h,f,_,v,E,P){var z=Array.prototype.slice.call(arguments,3);try{i.apply(a,z)}catch(H){this.onError(H)}}var Nt=!1,se=null,Rr=!1,vs=null,ll={onError:function(e){Nt=!0,se=e}};function ul(e,i,a,h,f,_,v,E,P){Nt=!1,se=null,ic.apply(ll,arguments)}function Ro(e,i,a,h,f,_,v,E,P){if(ul.apply(this,arguments),Nt){if(Nt){var z=se;Nt=!1,se=null}else throw Error(r(198));Rr||(Rr=!0,vs=z)}}function Vn(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function li(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function Mo(e){if(Vn(e)!==e)throw Error(r(188))}function rc(e){var i=e.alternate;if(!i){if(i=Vn(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,h=i;;){var f=a.return;if(f===null)break;var _=f.alternate;if(_===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===_.child){for(_=f.child;_;){if(_===a)return Mo(f),e;if(_===h)return Mo(f),i;_=_.sibling}throw Error(r(188))}if(a.return!==h.return)a=f,h=_;else{for(var v=!1,E=f.child;E;){if(E===a){v=!0,a=f,h=_;break}if(E===h){v=!0,h=f,a=_;break}E=E.sibling}if(!v){for(E=_.child;E;){if(E===a){v=!0,a=_,h=f;break}if(E===h){v=!0,h=_,a=f;break}E=E.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==h)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function cl(e){return e=rc(e),e!==null?hl(e):null}function hl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var i=hl(e);if(i!==null)return i;e=e.sibling}return null}var dl=n.unstable_scheduleCallback,Oo=n.unstable_cancelCallback,sc=n.unstable_shouldYield,ys=n.unstable_requestPaint,Xe=n.unstable_now,oc=n.unstable_getCurrentPriorityLevel,Ao=n.unstable_ImmediatePriority,fl=n.unstable_UserBlockingPriority,ws=n.unstable_NormalPriority,Do=n.unstable_LowPriority,Bi=n.unstable_IdlePriority,Mr=null,on=null;function Or(e){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Mr,e,void 0,(e.current.flags&128)===128)}catch{}}var ge=Math.clz32?Math.clz32:Wi,Ge=Math.log,Cs=Math.LN2;function Wi(e){return e>>>=0,e===0?32:31-(Ge(e)/Cs|0)|0}var Rn=64,Ui=4194304;function me(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ue(e,i){var a=e.pendingLanes;if(a===0)return 0;var h=0,f=e.suspendedLanes,_=e.pingedLanes,v=a&268435455;if(v!==0){var E=v&~f;E!==0?h=me(E):(_&=v,_!==0&&(h=me(_)))}else v=a&~f,v!==0?h=me(v):_!==0&&(h=me(_));if(h===0)return 0;if(i!==0&&i!==h&&!(i&f)&&(f=h&-h,_=i&-i,f>=_||f===16&&(_&4194240)!==0))return i;if(h&4&&(h|=a&16),i=e.entangledLanes,i!==0)for(e=e.entanglements,i&=h;0<i;)a=31-ge(i),f=1<<a,h|=e[a],i&=~f;return h}function bo(e,i){switch(e){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ss(e,i){for(var a=e.suspendedLanes,h=e.pingedLanes,f=e.expirationTimes,_=e.pendingLanes;0<_;){var v=31-ge(_),E=1<<v,P=f[v];P===-1?(!(E&a)||E&h)&&(f[v]=bo(E,i)):P<=i&&(e.expiredLanes|=E),_&=~E}}function Rt(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pl(){var e=Rn;return Rn<<=1,!(Rn&4194240)&&(Rn=64),e}function Hi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function an(e,i,a){e.pendingLanes|=i,i!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,i=31-ge(i),e[i]=a}function nt(e,i){var a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;var h=e.eventTimes;for(e=e.expirationTimes;0<a;){var f=31-ge(a),_=1<<f;i[f]=0,h[f]=-1,e[f]=-1,a&=~_}}function Mn(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var h=31-ge(a),f=1<<h;f&i|e[h]&i&&(e[h]|=i),a&=~f}}var ke=0;function ji(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Es,ui,xs,Ts,Ar,Dr=!1,Zi=[],ln=null,On=null,gn=null,br=new Map,pe=new Map,dt=[],ze="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zo(e,i){switch(e){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":br.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pe.delete(i.pointerId)}}function ci(e,i,a,h,f,_){return e===null||e.nativeEvent!==_?(e={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:_,targetContainers:[f]},i!==null&&(i=yi(i),i!==null&&ui(i)),e):(e.eventSystemFlags|=h,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function Fo(e,i,a,h,f){switch(i){case"focusin":return ln=ci(ln,e,i,a,h,f),!0;case"dragenter":return On=ci(On,e,i,a,h,f),!0;case"mouseover":return gn=ci(gn,e,i,a,h,f),!0;case"pointerover":var _=f.pointerId;return br.set(_,ci(br.get(_)||null,e,i,a,h,f)),!0;case"gotpointercapture":return _=f.pointerId,pe.set(_,ci(pe.get(_)||null,e,i,a,h,f)),!0}return!1}function Ps(e){var i=vi(e.target);if(i!==null){var a=Vn(i);if(a!==null){if(i=a.tag,i===13){if(i=li(a),i!==null){e.blockedOn=i,Ar(e.priority,function(){xs(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vn(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Is(e.domEventName,e.eventSystemFlags,i[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var h=new a.constructor(a.type,a);ko=h,a.target.dispatchEvent(h),ko=null}else return i=yi(a),i!==null&&ui(i),e.blockedOn=a,!1;i.shift()}return!0}function ks(e,i,a){vn(e)&&a.delete(i)}function zr(){Dr=!1,ln!==null&&vn(ln)&&(ln=null),On!==null&&vn(On)&&(On=null),gn!==null&&vn(gn)&&(gn=null),br.forEach(ks),pe.forEach(ks)}function Je(e,i){e.blockedOn===i&&(e.blockedOn=null,Dr||(Dr=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zr)))}function un(e){function i(f){return Je(f,e)}if(0<Zi.length){Je(Zi[0],e);for(var a=1;a<Zi.length;a++){var h=Zi[a];h.blockedOn===e&&(h.blockedOn=null)}}for(ln!==null&&Je(ln,e),On!==null&&Je(On,e),gn!==null&&Je(gn,e),br.forEach(i),pe.forEach(i),a=0;a<dt.length;a++)h=dt[a],h.blockedOn===e&&(h.blockedOn=null);for(;0<dt.length&&(a=dt[0],a.blockedOn===null);)Ps(a),a.blockedOn===null&&dt.shift()}var hi=be.ReactCurrentBatchConfig,Fr=!0;function ac(e,i,a,h){var f=ke,_=hi.transition;hi.transition=null;try{ke=1,Br(e,i,a,h)}finally{ke=f,hi.transition=_}}function _l(e,i,a,h){var f=ke,_=hi.transition;hi.transition=null;try{ke=4,Br(e,i,a,h)}finally{ke=f,hi.transition=_}}function Br(e,i,a,h){if(Fr){var f=Is(e,i,a,h);if(f===null)t(e,i,h,Ls,a),zo(e,h);else if(Fo(f,e,i,a,h))h.stopPropagation();else if(zo(e,h),i&4&&-1<ze.indexOf(e)){for(;f!==null;){var _=yi(f);if(_!==null&&Es(_),_=Is(e,i,a,h),_===null&&t(e,i,h,Ls,a),_===f)break;f=_}f!==null&&h.stopPropagation()}else t(e,i,h,null,a)}}var Ls=null;function Is(e,i,a,h){if(Ls=null,e=Lo(h),e=vi(e),e!==null)if(i=Vn(e),i===null)e=null;else if(a=i.tag,a===13){if(e=li(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null);return Ls=e,null}function Te(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oc()){case Ao:return 1;case fl:return 4;case ws:case Do:return 16;case Bi:return 536870912;default:return 16}default:return 16}}var $n=null,Ut=null,Gn=null;function Bo(){if(Gn)return Gn;var e,i=Ut,a=i.length,h,f="value"in $n?$n.value:$n.textContent,_=f.length;for(e=0;e<a&&i[e]===f[e];e++);var v=a-e;for(h=1;h<=v&&i[a-h]===f[_-h];h++);return Gn=f.slice(e,1<h?1-h:void 0)}function Ns(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Vi(){return!0}function ml(){return!1}function Mt(e){function i(a,h,f,_,v){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=_,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(_):_[E]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Vi:ml,this.isPropagationStopped=ml,this}return F(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),i}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=Mt($i),di=F({},$i,{view:0,detail:0}),lc=Mt(di),qt,Uo,Gi,cn=F({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gi&&(Gi&&e.type==="mousemove"?(qt=e.screenX-Gi.screenX,Uo=e.screenY-Gi.screenY):Uo=qt=0,Gi=e),qt)},movementY:function(e){return"movementY"in e?e.movementY:Uo}}),Ho=Mt(cn),gl=F({},cn,{dataTransfer:0}),jo=Mt(gl),uc=F({},di,{relatedTarget:0}),Rs=Mt(uc),vl=F({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),cc=Mt(vl),hc=F({},$i,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zo=Mt(hc),dc=F({},$i,{data:0}),Vo=Mt(dc),yl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ms={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=fi[e])?!!i[e]:!1}function pi(){return fc}var Yt=F({},di,{key:function(e){if(e.key){var i=yl[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Ns(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ms[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(e){return e.type==="keypress"?Ns(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ns(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wl=Mt(Yt),Cl=F({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sl=Mt(Cl),$o=F({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),Go=Mt($o),pc=F({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),_c=Mt(pc),El=F({},cn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mc=Mt(El),hn=[9,13,27,32],Kn=w&&"CompositionEvent"in window,Wr=null;w&&"documentMode"in document&&(Wr=document.documentMode);var An=w&&"TextEvent"in window&&!Wr,xl=w&&(!Kn||Wr&&8<Wr&&11>=Wr),_i=" ",Tl=!1;function Ki(e,i){switch(e){case"keyup":return hn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ko(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dn=!1;function gc(e,i){switch(e){case"compositionend":return Ko(i);case"keypress":return i.which!==32?null:(Tl=!0,_i);case"textInput":return e=i.data,e===_i&&Tl?null:e;default:return null}}function qn(e,i){if(Dn)return e==="compositionend"||!Kn&&Ki(e,i)?(e=Bo(),Gn=Ut=$n=null,Dn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return xl&&i.locale!=="ko"?null:i.data;default:return null}}var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pl(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Os[e.type]:i==="textarea"}function As(e,i,a,h){rl(h),i=u(i,"onChange"),0<i.length&&(a=new Wo("onChange","change",null,a,h),e.push({event:a,listeners:i}))}var Ur=null,Ht=null;function vc(e){ia(e,0)}function bn(e){var i=wi(e);if(Ai(i))return e}function yc(e,i){if(e==="change")return i}var yn=!1;if(w){var qi;if(w){var Ds="oninput"in document;if(!Ds){var bs=document.createElement("div");bs.setAttribute("oninput","return;"),Ds=typeof bs.oninput=="function"}qi=Ds}else qi=!1;yn=qi&&(!document.documentMode||9<document.documentMode)}function Hr(){Ur&&(Ur.detachEvent("onpropertychange",zs),Ht=Ur=null)}function zs(e){if(e.propertyName==="value"&&bn(Ht)){var i=[];As(i,Ht,e,Lo(e)),gs(vc,i)}}function Fs(e,i,a){e==="focusin"?(Hr(),Ur=i,Ht=a,Ur.attachEvent("onpropertychange",zs)):e==="focusout"&&Hr()}function Yi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bn(Ht)}function Bs(e,i){if(e==="click")return bn(i)}function qo(e,i){if(e==="input"||e==="change")return bn(i)}function kl(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var dn=typeof Object.is=="function"?Object.is:kl;function Yn(e,i){if(dn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!C.call(i,f)||!dn(e[f],i[f]))return!1}return!0}function Ll(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yo(e,i){var a=Ll(e);e=0;for(var h;a;){if(a.nodeType===3){if(h=e+a.textContent.length,e<=i&&h>=i)return{node:a,offset:i-e};e=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ll(a)}}function Il(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Il(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Qo(){for(var e=window,i=Di();i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Di(e.document)}return i}function Xo(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function wn(e){var i=Qo(),a=e.focusedElem,h=e.selectionRange;if(i!==a&&a&&a.ownerDocument&&Il(a.ownerDocument.documentElement,a)){if(h!==null&&Xo(a)){if(i=h.start,e=h.end,e===void 0&&(e=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(e,a.value.length);else if(e=(i=a.ownerDocument||document)&&i.defaultView||window,e.getSelection){e=e.getSelection();var f=a.textContent.length,_=Math.min(h.start,f);h=h.end===void 0?_:Math.min(h.end,f),!e.extend&&_>h&&(f=h,h=_,_=f),f=Yo(a,_);var v=Yo(a,h);f&&v&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),e.removeAllRanges(),_>h?(e.addRange(i),e.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),e.addRange(i)))}}for(i=[],e=a;e=e.parentNode;)e.nodeType===1&&i.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)e=i[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ws=w&&"documentMode"in document&&11>=document.documentMode,Qi=null,Xi=null,jr=null,Us=!1;function Nl(e,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Us||Qi==null||Qi!==Di(h)||(h=Qi,"selectionStart"in h&&Xo(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),jr&&Yn(jr,h)||(jr=h,h=u(Xi,"onSelect"),0<h.length&&(i=new Wo("onSelect","select",null,i,a),e.push({event:i,listeners:h}),i.target=Qi)))}function Qn(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Ji={animationend:Qn("Animation","AnimationEnd"),animationiteration:Qn("Animation","AnimationIteration"),animationstart:Qn("Animation","AnimationStart"),transitionend:Qn("Transition","TransitionEnd")},Xn={},Jo={};w&&(Jo=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function Zr(e){if(Xn[e])return Xn[e];if(!Ji[e])return e;var i=Ji[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Jo)return Xn[e]=i[a];return e}var Rl=Zr("animationend"),Cn=Zr("animationiteration"),ea=Zr("animationstart"),ta=Zr("transitionend"),er=new Map,Ml="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fn(e,i){er.set(e,i),p(i,[e])}for(var mi=0;mi<Ml.length;mi++){var Hs=Ml[mi],Ol=Hs.toLowerCase(),wc=Hs[0].toUpperCase()+Hs.slice(1);fn(Ol,"on"+wc)}fn(Rl,"onAnimationEnd"),fn(Cn,"onAnimationIteration"),fn(ea,"onAnimationStart"),fn("dblclick","onDoubleClick"),fn("focusin","onFocus"),fn("focusout","onBlur"),fn(ta,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Al=new Set("cancel close invalid load scroll toggle".split(" ").concat(tr));function na(e,i,a){var h=e.type||"unknown-event";e.currentTarget=a,Ro(h,i,void 0,e),e.currentTarget=null}function ia(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var h=e[a],f=h.event;h=h.listeners;e:{var _=void 0;if(i)for(var v=h.length-1;0<=v;v--){var E=h[v],P=E.instance,z=E.currentTarget;if(E=E.listener,P!==_&&f.isPropagationStopped())break e;na(f,E,z),_=P}else for(v=0;v<h.length;v++){if(E=h[v],P=E.instance,z=E.currentTarget,E=E.listener,P!==_&&f.isPropagationStopped())break e;na(f,E,z),_=P}}}if(Rr)throw e=vs,Rr=!1,vs=null,e}function Fe(e,i){var a=i[sr];a===void 0&&(a=i[sr]=new Set);var h=e+"__bubble";a.has(h)||(Dl(i,e,2,!1),a.add(h))}function ra(e,i,a){var h=0;i&&(h|=4),Dl(a,e,h,i)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function nr(e){if(!e[Vr]){e[Vr]=!0,l.forEach(function(a){a!=="selectionchange"&&(Al.has(a)||ra(a,!1,e),ra(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Vr]||(i[Vr]=!0,ra("selectionchange",!1,i))}}function Dl(e,i,a,h){switch(Te(i)){case 1:var f=ac;break;case 4:f=_l;break;default:f=Br}a=f.bind(null,i,a,e),f=void 0,!No||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),h?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function t(e,i,a,h,f){var _=h;if(!(i&1)&&!(i&2)&&h!==null)e:for(;;){if(h===null)return;var v=h.tag;if(v===3||v===4){var E=h.stateNode.containerInfo;if(E===f||E.nodeType===8&&E.parentNode===f)break;if(v===4)for(v=h.return;v!==null;){var P=v.tag;if((P===3||P===4)&&(P=v.stateNode.containerInfo,P===f||P.nodeType===8&&P.parentNode===f))return;v=v.return}for(;E!==null;){if(v=vi(E),v===null)return;if(P=v.tag,P===5||P===6){h=_=v;continue e}E=E.parentNode}}h=h.return}gs(function(){var z=_,H=Lo(a),Z=[];e:{var U=er.get(e);if(U!==void 0){var J=Wo,te=e;switch(e){case"keypress":if(Ns(a)===0)break e;case"keydown":case"keyup":J=wl;break;case"focusin":te="focus",J=Rs;break;case"focusout":te="blur",J=Rs;break;case"beforeblur":case"afterblur":J=Rs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Ho;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=jo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Go;break;case Rl:case Cn:case ea:J=cc;break;case ta:J=_c;break;case"scroll":J=lc;break;case"wheel":J=mc;break;case"copy":case"cut":case"paste":J=Zo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Sl}var re=(i&4)!==0,at=!re&&e==="scroll",O=re?U!==null?U+"Capture":null:U;re=[];for(var I=z,D;I!==null;){D=I;var G=D.stateNode;if(D.tag===5&&G!==null&&(D=G,O!==null&&(G=Ir(I,O),G!=null&&re.push(o(I,G,D)))),at)break;I=I.return}0<re.length&&(U=new J(U,te,null,a,H),Z.push({event:U,listeners:re}))}}if(!(i&7)){e:{if(U=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",U&&a!==ko&&(te=a.relatedTarget||a.fromElement)&&(vi(te)||te[Ae]))break e;if((J||U)&&(U=H.window===H?H:(U=H.ownerDocument)?U.defaultView||U.parentWindow:window,J?(te=a.relatedTarget||a.toElement,J=z,te=te?vi(te):null,te!==null&&(at=Vn(te),te!==at||te.tag!==5&&te.tag!==6)&&(te=null)):(J=null,te=z),J!==te)){if(re=Ho,G="onMouseLeave",O="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(re=Sl,G="onPointerLeave",O="onPointerEnter",I="pointer"),at=J==null?U:wi(J),D=te==null?U:wi(te),U=new re(G,I+"leave",J,a,H),U.target=at,U.relatedTarget=D,G=null,vi(H)===z&&(re=new re(O,I+"enter",te,a,H),re.target=D,re.relatedTarget=at,G=re),at=G,J&&te)t:{for(re=J,O=te,I=0,D=re;D;D=d(D))I++;for(D=0,G=O;G;G=d(G))D++;for(;0<I-D;)re=d(re),I--;for(;0<D-I;)O=d(O),D--;for(;I--;){if(re===O||O!==null&&re===O.alternate)break t;re=d(re),O=d(O)}re=null}else re=null;J!==null&&g(Z,U,J,re,!1),te!==null&&at!==null&&g(Z,at,te,re,!0)}}e:{if(U=z?wi(z):window,J=U.nodeName&&U.nodeName.toLowerCase(),J==="select"||J==="input"&&U.type==="file")var ae=yc;else if(Pl(U))if(yn)ae=qo;else{ae=Yi;var he=Fs}else(J=U.nodeName)&&J.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(ae=Bs);if(ae&&(ae=ae(e,z))){As(Z,ae,a,H);break e}he&&he(e,U,z),e==="focusout"&&(he=U._wrapperState)&&he.controlled&&U.type==="number"&&Eo(U,"number",U.value)}switch(he=z?wi(z):window,e){case"focusin":(Pl(he)||he.contentEditable==="true")&&(Qi=he,Xi=z,jr=null);break;case"focusout":jr=Xi=Qi=null;break;case"mousedown":Us=!0;break;case"contextmenu":case"mouseup":case"dragend":Us=!1,Nl(Z,a,H);break;case"selectionchange":if(Ws)break;case"keydown":case"keyup":Nl(Z,a,H)}var de;if(Kn)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Dn?Ki(e,a)&&(_e="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(xl&&a.locale!=="ko"&&(Dn||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Dn&&(de=Bo()):($n=H,Ut="value"in $n?$n.value:$n.textContent,Dn=!0)),he=u(z,_e),0<he.length&&(_e=new Vo(_e,e,null,a,H),Z.push({event:_e,listeners:he}),de?_e.data=de:(de=Ko(a),de!==null&&(_e.data=de)))),(de=An?gc(e,a):qn(e,a))&&(z=u(z,"onBeforeInput"),0<z.length&&(H=new Vo("onBeforeInput","beforeinput",null,a,H),Z.push({event:H,listeners:z}),H.data=de))}ia(Z,i)})}function o(e,i,a){return{instance:e,listener:i,currentTarget:a}}function u(e,i){for(var a=i+"Capture",h=[];e!==null;){var f=e,_=f.stateNode;f.tag===5&&_!==null&&(f=_,_=Ir(e,a),_!=null&&h.unshift(o(e,_,f)),_=Ir(e,i),_!=null&&h.push(o(e,_,f))),e=e.return}return h}function d(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function g(e,i,a,h,f){for(var _=i._reactName,v=[];a!==null&&a!==h;){var E=a,P=E.alternate,z=E.stateNode;if(P!==null&&P===h)break;E.tag===5&&z!==null&&(E=z,f?(P=Ir(a,_),P!=null&&v.unshift(o(a,P,E))):f||(P=Ir(a,_),P!=null&&v.push(o(a,P,E)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var y=/\r\n?/g,x=/\u0000|\uFFFD/g;function M(e){return(typeof e=="string"?e:""+e).replace(y,`
`).replace(x,"")}function b(e,i,a){if(i=M(i),M(e)!==i&&a)throw Error(r(425))}function W(){}var Q=null,ce=null;function ve(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ft=typeof setTimeout=="function"?setTimeout:void 0,ut=typeof clearTimeout=="function"?clearTimeout:void 0,jt=typeof Promise=="function"?Promise:void 0,Ot=typeof queueMicrotask=="function"?queueMicrotask:typeof jt<"u"?function(e){return jt.resolve(null).then(e).catch(ir)}:ft;function ir(e){setTimeout(function(){throw e})}function sa(e,i){var a=i,h=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){e.removeChild(f),un(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);un(i)}function Jn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return e}function bl(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}var gi=Math.random().toString(36).slice(2),Sn="__reactFiber$"+gi,rr="__reactProps$"+gi,Ae="__reactContainer$"+gi,sr="__reactEvents$"+gi,Cc="__reactListeners$"+gi,Sc="__reactHandles$"+gi;function vi(e){var i=e[Sn];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Ae]||a[Sn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=bl(e);e!==null;){if(a=e[Sn])return a;e=bl(e)}return i}e=a,a=e.parentNode}return null}function yi(e){return e=e[Sn]||e[Ae],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function js(e){return e[rr]||null}var Ec=[],Zs=-1;function or(e){return{current:e}}function Ke(e){0>Zs||(e.current=Ec[Zs],Ec[Zs]=null,Zs--)}function He(e,i){Zs++,Ec[Zs]=e.current,e.current=i}var ar={},At=or(ar),Qt=or(!1),$r=ar;function Vs(e,i){var a=e.type.contextTypes;if(!a)return ar;var h=e.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var f={},_;for(_ in a)f[_]=i[_];return h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=f),f}function Xt(e){return e=e.childContextTypes,e!=null}function zl(){Ke(Qt),Ke(At)}function Gd(e,i,a){if(At.current!==ar)throw Error(r(168));He(At,i),He(Qt,a)}function Kd(e,i,a){var h=e.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in i))throw Error(r(108,we(e)||"Unknown",f));return F({},a,h)}function Fl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ar,$r=At.current,He(At,e),He(Qt,Qt.current),!0}function qd(e,i,a){var h=e.stateNode;if(!h)throw Error(r(169));a?(e=Kd(e,i,$r),h.__reactInternalMemoizedMergedChildContext=e,Ke(Qt),Ke(At),He(At,e)):Ke(Qt),He(Qt,a)}var Ci=null,Bl=!1,xc=!1;function Yd(e){Ci===null?Ci=[e]:Ci.push(e)}function lg(e){Bl=!0,Yd(e)}function lr(){if(!xc&&Ci!==null){xc=!0;var e=0,i=ke;try{var a=Ci;for(ke=1;e<a.length;e++){var h=a[e];do h=h(!0);while(h!==null)}Ci=null,Bl=!1}catch(f){throw Ci!==null&&(Ci=Ci.slice(e+1)),dl(Ao,lr),f}finally{ke=i,xc=!1}}return null}var $s=[],Gs=0,Wl=null,Ul=0,En=[],xn=0,Gr=null,Si=1,Ei="";function Kr(e,i){$s[Gs++]=Ul,$s[Gs++]=Wl,Wl=e,Ul=i}function Qd(e,i,a){En[xn++]=Si,En[xn++]=Ei,En[xn++]=Gr,Gr=e;var h=Si;e=Ei;var f=32-ge(h)-1;h&=~(1<<f),a+=1;var _=32-ge(i)+f;if(30<_){var v=f-f%5;_=(h&(1<<v)-1).toString(32),h>>=v,f-=v,Si=1<<32-ge(i)+f|a<<f|h,Ei=_+e}else Si=1<<_|a<<f|h,Ei=e}function Tc(e){e.return!==null&&(Kr(e,1),Qd(e,1,0))}function Pc(e){for(;e===Wl;)Wl=$s[--Gs],$s[Gs]=null,Ul=$s[--Gs],$s[Gs]=null;for(;e===Gr;)Gr=En[--xn],En[xn]=null,Ei=En[--xn],En[xn]=null,Si=En[--xn],En[xn]=null}var pn=null,_n=null,Ye=!1,zn=null;function Xd(e,i){var a=Ln(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=e,i=e.deletions,i===null?(e.deletions=[a],e.flags|=16):i.push(a)}function Jd(e,i){switch(e.tag){case 5:var a=e.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(e.stateNode=i,pn=e,_n=Jn(i.firstChild),!0):!1;case 6:return i=e.pendingProps===""||i.nodeType!==3?null:i,i!==null?(e.stateNode=i,pn=e,_n=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Gr!==null?{id:Si,overflow:Ei}:null,e.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Ln(18,null,null,0),a.stateNode=i,a.return=e,e.child=a,pn=e,_n=null,!0):!1;default:return!1}}function kc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Lc(e){if(Ye){var i=_n;if(i){var a=i;if(!Jd(e,i)){if(kc(e))throw Error(r(418));i=Jn(a.nextSibling);var h=pn;i&&Jd(e,i)?Xd(h,a):(e.flags=e.flags&-4097|2,Ye=!1,pn=e)}}else{if(kc(e))throw Error(r(418));e.flags=e.flags&-4097|2,Ye=!1,pn=e}}}function ef(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pn=e}function Hl(e){if(e!==pn)return!1;if(!Ye)return ef(e),Ye=!0,!1;var i;if((i=e.tag!==3)&&!(i=e.tag!==5)&&(i=e.type,i=i!=="head"&&i!=="body"&&!ve(e.type,e.memoizedProps)),i&&(i=_n)){if(kc(e))throw tf(),Error(r(418));for(;i;)Xd(e,i),i=Jn(i.nextSibling)}if(ef(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(i===0){_n=Jn(e.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}e=e.nextSibling}_n=null}}else _n=pn?Jn(e.stateNode.nextSibling):null;return!0}function tf(){for(var e=_n;e;)e=Jn(e.nextSibling)}function Ks(){_n=pn=null,Ye=!1}function Ic(e){zn===null?zn=[e]:zn.push(e)}var ug=be.ReactCurrentBatchConfig;function oa(e,i,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var h=a.stateNode}if(!h)throw Error(r(147,e));var f=h,_=""+e;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===_?i.ref:(i=function(v){var E=f.refs;v===null?delete E[_]:E[_]=v},i._stringRef=_,i)}if(typeof e!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,e))}return e}function jl(e,i){throw e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e))}function nf(e){var i=e._init;return i(e._payload)}function rf(e){function i(O,I){if(e){var D=O.deletions;D===null?(O.deletions=[I],O.flags|=16):D.push(I)}}function a(O,I){if(!e)return null;for(;I!==null;)i(O,I),I=I.sibling;return null}function h(O,I){for(O=new Map;I!==null;)I.key!==null?O.set(I.key,I):O.set(I.index,I),I=I.sibling;return O}function f(O,I){return O=mr(O,I),O.index=0,O.sibling=null,O}function _(O,I,D){return O.index=D,e?(D=O.alternate,D!==null?(D=D.index,D<I?(O.flags|=2,I):D):(O.flags|=2,I)):(O.flags|=1048576,I)}function v(O){return e&&O.alternate===null&&(O.flags|=2),O}function E(O,I,D,G){return I===null||I.tag!==6?(I=wh(D,O.mode,G),I.return=O,I):(I=f(I,D),I.return=O,I)}function P(O,I,D,G){var ae=D.type;return ae===ht?H(O,I,D.props.children,G,D.key):I!==null&&(I.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Oe&&nf(ae)===I.type)?(G=f(I,D.props),G.ref=oa(O,I,D),G.return=O,G):(G=fu(D.type,D.key,D.props,null,O.mode,G),G.ref=oa(O,I,D),G.return=O,G)}function z(O,I,D,G){return I===null||I.tag!==4||I.stateNode.containerInfo!==D.containerInfo||I.stateNode.implementation!==D.implementation?(I=Ch(D,O.mode,G),I.return=O,I):(I=f(I,D.children||[]),I.return=O,I)}function H(O,I,D,G,ae){return I===null||I.tag!==7?(I=ns(D,O.mode,G,ae),I.return=O,I):(I=f(I,D),I.return=O,I)}function Z(O,I,D){if(typeof I=="string"&&I!==""||typeof I=="number")return I=wh(""+I,O.mode,D),I.return=O,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case lt:return D=fu(I.type,I.key,I.props,null,O.mode,D),D.ref=oa(O,null,I),D.return=O,D;case ot:return I=Ch(I,O.mode,D),I.return=O,I;case Oe:var G=I._init;return Z(O,G(I._payload),D)}if(bi(I)||$(I))return I=ns(I,O.mode,D,null),I.return=O,I;jl(O,I)}return null}function U(O,I,D,G){var ae=I!==null?I.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return ae!==null?null:E(O,I,""+D,G);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case lt:return D.key===ae?P(O,I,D,G):null;case ot:return D.key===ae?z(O,I,D,G):null;case Oe:return ae=D._init,U(O,I,ae(D._payload),G)}if(bi(D)||$(D))return ae!==null?null:H(O,I,D,G,null);jl(O,D)}return null}function J(O,I,D,G,ae){if(typeof G=="string"&&G!==""||typeof G=="number")return O=O.get(D)||null,E(I,O,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case lt:return O=O.get(G.key===null?D:G.key)||null,P(I,O,G,ae);case ot:return O=O.get(G.key===null?D:G.key)||null,z(I,O,G,ae);case Oe:var he=G._init;return J(O,I,D,he(G._payload),ae)}if(bi(G)||$(G))return O=O.get(D)||null,H(I,O,G,ae,null);jl(I,G)}return null}function te(O,I,D,G){for(var ae=null,he=null,de=I,_e=I=0,wt=null;de!==null&&_e<D.length;_e++){de.index>_e?(wt=de,de=null):wt=de.sibling;var Ne=U(O,de,D[_e],G);if(Ne===null){de===null&&(de=wt);break}e&&de&&Ne.alternate===null&&i(O,de),I=_(Ne,I,_e),he===null?ae=Ne:he.sibling=Ne,he=Ne,de=wt}if(_e===D.length)return a(O,de),Ye&&Kr(O,_e),ae;if(de===null){for(;_e<D.length;_e++)de=Z(O,D[_e],G),de!==null&&(I=_(de,I,_e),he===null?ae=de:he.sibling=de,he=de);return Ye&&Kr(O,_e),ae}for(de=h(O,de);_e<D.length;_e++)wt=J(de,O,_e,D[_e],G),wt!==null&&(e&&wt.alternate!==null&&de.delete(wt.key===null?_e:wt.key),I=_(wt,I,_e),he===null?ae=wt:he.sibling=wt,he=wt);return e&&de.forEach(function(gr){return i(O,gr)}),Ye&&Kr(O,_e),ae}function re(O,I,D,G){var ae=$(D);if(typeof ae!="function")throw Error(r(150));if(D=ae.call(D),D==null)throw Error(r(151));for(var he=ae=null,de=I,_e=I=0,wt=null,Ne=D.next();de!==null&&!Ne.done;_e++,Ne=D.next()){de.index>_e?(wt=de,de=null):wt=de.sibling;var gr=U(O,de,Ne.value,G);if(gr===null){de===null&&(de=wt);break}e&&de&&gr.alternate===null&&i(O,de),I=_(gr,I,_e),he===null?ae=gr:he.sibling=gr,he=gr,de=wt}if(Ne.done)return a(O,de),Ye&&Kr(O,_e),ae;if(de===null){for(;!Ne.done;_e++,Ne=D.next())Ne=Z(O,Ne.value,G),Ne!==null&&(I=_(Ne,I,_e),he===null?ae=Ne:he.sibling=Ne,he=Ne);return Ye&&Kr(O,_e),ae}for(de=h(O,de);!Ne.done;_e++,Ne=D.next())Ne=J(de,O,_e,Ne.value,G),Ne!==null&&(e&&Ne.alternate!==null&&de.delete(Ne.key===null?_e:Ne.key),I=_(Ne,I,_e),he===null?ae=Ne:he.sibling=Ne,he=Ne);return e&&de.forEach(function(Ug){return i(O,Ug)}),Ye&&Kr(O,_e),ae}function at(O,I,D,G){if(typeof D=="object"&&D!==null&&D.type===ht&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case lt:e:{for(var ae=D.key,he=I;he!==null;){if(he.key===ae){if(ae=D.type,ae===ht){if(he.tag===7){a(O,he.sibling),I=f(he,D.props.children),I.return=O,O=I;break e}}else if(he.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Oe&&nf(ae)===he.type){a(O,he.sibling),I=f(he,D.props),I.ref=oa(O,he,D),I.return=O,O=I;break e}a(O,he);break}else i(O,he);he=he.sibling}D.type===ht?(I=ns(D.props.children,O.mode,G,D.key),I.return=O,O=I):(G=fu(D.type,D.key,D.props,null,O.mode,G),G.ref=oa(O,I,D),G.return=O,O=G)}return v(O);case ot:e:{for(he=D.key;I!==null;){if(I.key===he)if(I.tag===4&&I.stateNode.containerInfo===D.containerInfo&&I.stateNode.implementation===D.implementation){a(O,I.sibling),I=f(I,D.children||[]),I.return=O,O=I;break e}else{a(O,I);break}else i(O,I);I=I.sibling}I=Ch(D,O.mode,G),I.return=O,O=I}return v(O);case Oe:return he=D._init,at(O,I,he(D._payload),G)}if(bi(D))return te(O,I,D,G);if($(D))return re(O,I,D,G);jl(O,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,I!==null&&I.tag===6?(a(O,I.sibling),I=f(I,D),I.return=O,O=I):(a(O,I),I=wh(D,O.mode,G),I.return=O,O=I),v(O)):a(O,I)}return at}var qs=rf(!0),sf=rf(!1),Zl=or(null),Vl=null,Ys=null,Nc=null;function Rc(){Nc=Ys=Vl=null}function Mc(e){var i=Zl.current;Ke(Zl),e._currentValue=i}function Oc(e,i,a){for(;e!==null;){var h=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),e===a)break;e=e.return}}function Qs(e,i){Vl=e,Nc=Ys=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&i&&(Jt=!0),e.firstContext=null)}function Tn(e){var i=e._currentValue;if(Nc!==e)if(e={context:e,memoizedValue:i,next:null},Ys===null){if(Vl===null)throw Error(r(308));Ys=e,Vl.dependencies={lanes:0,firstContext:e}}else Ys=Ys.next=e;return i}var qr=null;function Ac(e){qr===null?qr=[e]:qr.push(e)}function of(e,i,a,h){var f=i.interleaved;return f===null?(a.next=a,Ac(i)):(a.next=f.next,f.next=a),i.interleaved=a,xi(e,h)}function xi(e,i){e.lanes|=i;var a=e.alternate;for(a!==null&&(a.lanes|=i),a=e,e=e.return;e!==null;)e.childLanes|=i,a=e.alternate,a!==null&&(a.childLanes|=i),a=e,e=e.return;return a.tag===3?a.stateNode:null}var ur=!1;function Dc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function af(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ti(e,i){return{eventTime:e,lane:i,tag:0,payload:null,callback:null,next:null}}function cr(e,i,a){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,Ie&2){var f=h.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),h.pending=i,xi(e,a)}return f=h.interleaved,f===null?(i.next=i,Ac(h)):(i.next=f.next,f.next=i),h.interleaved=i,xi(e,a)}function $l(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=e.pendingLanes,a|=h,i.lanes=a,Mn(e,a)}}function lf(e,i){var a=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};_===null?f=_=v:_=_.next=v,a=a.next}while(a!==null);_===null?f=_=i:_=_.next=i}else f=_=i;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:_,shared:h.shared,effects:h.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}function Gl(e,i,a,h){var f=e.updateQueue;ur=!1;var _=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var P=E,z=P.next;P.next=null,v===null?_=z:v.next=z,v=P;var H=e.alternate;H!==null&&(H=H.updateQueue,E=H.lastBaseUpdate,E!==v&&(E===null?H.firstBaseUpdate=z:E.next=z,H.lastBaseUpdate=P))}if(_!==null){var Z=f.baseState;v=0,H=z=P=null,E=_;do{var U=E.lane,J=E.eventTime;if((h&U)===U){H!==null&&(H=H.next={eventTime:J,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var te=e,re=E;switch(U=i,J=a,re.tag){case 1:if(te=re.payload,typeof te=="function"){Z=te.call(J,Z,U);break e}Z=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=re.payload,U=typeof te=="function"?te.call(J,Z,U):te,U==null)break e;Z=F({},Z,U);break e;case 2:ur=!0}}E.callback!==null&&E.lane!==0&&(e.flags|=64,U=f.effects,U===null?f.effects=[E]:U.push(E))}else J={eventTime:J,lane:U,tag:E.tag,payload:E.payload,callback:E.callback,next:null},H===null?(z=H=J,P=Z):H=H.next=J,v|=U;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;U=E,E=U.next,U.next=null,f.lastBaseUpdate=U,f.shared.pending=null}}while(!0);if(H===null&&(P=Z),f.baseState=P,f.firstBaseUpdate=z,f.lastBaseUpdate=H,i=f.shared.interleaved,i!==null){f=i;do v|=f.lane,f=f.next;while(f!==i)}else _===null&&(f.shared.lanes=0);Xr|=v,e.lanes=v,e.memoizedState=Z}}function uf(e,i,a){if(e=i.effects,i.effects=null,e!==null)for(i=0;i<e.length;i++){var h=e[i],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(r(191,f));f.call(h)}}}var aa={},ei=or(aa),la=or(aa),ua=or(aa);function Yr(e){if(e===aa)throw Error(r(174));return e}function bc(e,i){switch(He(ua,i),He(la,e),He(ei,aa),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ps(null,"");break;default:e=e===8?i.parentNode:i,i=e.namespaceURI||null,e=e.tagName,i=ps(i,e)}Ke(ei),He(ei,i)}function Xs(){Ke(ei),Ke(la),Ke(ua)}function cf(e){Yr(ua.current);var i=Yr(ei.current),a=ps(i,e.type);i!==a&&(He(la,e),He(ei,a))}function zc(e){la.current===e&&(Ke(ei),Ke(la))}var et=or(0);function Kl(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Fc=[];function Bc(){for(var e=0;e<Fc.length;e++)Fc[e]._workInProgressVersionPrimary=null;Fc.length=0}var ql=be.ReactCurrentDispatcher,Wc=be.ReactCurrentBatchConfig,Qr=0,tt=null,pt=null,vt=null,Yl=!1,ca=!1,ha=0,cg=0;function Dt(){throw Error(r(321))}function Uc(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!dn(e[a],i[a]))return!1;return!0}function Hc(e,i,a,h,f,_){if(Qr=_,tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ql.current=e===null||e.memoizedState===null?pg:_g,e=a(h,f),ca){_=0;do{if(ca=!1,ha=0,25<=_)throw Error(r(301));_+=1,vt=pt=null,i.updateQueue=null,ql.current=mg,e=a(h,f)}while(ca)}if(ql.current=Jl,i=pt!==null&&pt.next!==null,Qr=0,vt=pt=tt=null,Yl=!1,i)throw Error(r(300));return e}function jc(){var e=ha!==0;return ha=0,e}function ti(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?tt.memoizedState=vt=e:vt=vt.next=e,vt}function Pn(){if(pt===null){var e=tt.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var i=vt===null?tt.memoizedState:vt.next;if(i!==null)vt=i,pt=e;else{if(e===null)throw Error(r(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},vt===null?tt.memoizedState=vt=e:vt=vt.next=e}return vt}function da(e,i){return typeof i=="function"?i(e):i}function Zc(e){var i=Pn(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var h=pt,f=h.baseQueue,_=a.pending;if(_!==null){if(f!==null){var v=f.next;f.next=_.next,_.next=v}h.baseQueue=f=_,a.pending=null}if(f!==null){_=f.next,h=h.baseState;var E=v=null,P=null,z=_;do{var H=z.lane;if((Qr&H)===H)P!==null&&(P=P.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:e(h,z.action);else{var Z={lane:H,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};P===null?(E=P=Z,v=h):P=P.next=Z,tt.lanes|=H,Xr|=H}z=z.next}while(z!==null&&z!==_);P===null?v=h:P.next=E,dn(h,i.memoizedState)||(Jt=!0),i.memoizedState=h,i.baseState=v,i.baseQueue=P,a.lastRenderedState=h}if(e=a.interleaved,e!==null){f=e;do _=f.lane,tt.lanes|=_,Xr|=_,f=f.next;while(f!==e)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Vc(e){var i=Pn(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var h=a.dispatch,f=a.pending,_=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do _=e(_,v.action),v=v.next;while(v!==f);dn(_,i.memoizedState)||(Jt=!0),i.memoizedState=_,i.baseQueue===null&&(i.baseState=_),a.lastRenderedState=_}return[_,h]}function hf(){}function df(e,i){var a=tt,h=Pn(),f=i(),_=!dn(h.memoizedState,f);if(_&&(h.memoizedState=f,Jt=!0),h=h.queue,$c(_f.bind(null,a,h,e),[e]),h.getSnapshot!==i||_||vt!==null&&vt.memoizedState.tag&1){if(a.flags|=2048,fa(9,pf.bind(null,a,h,f,i),void 0,null),yt===null)throw Error(r(349));Qr&30||ff(a,i,f)}return f}function ff(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=tt.updateQueue,i===null?(i={lastEffect:null,stores:null},tt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function pf(e,i,a,h){i.value=a,i.getSnapshot=h,mf(i)&&gf(e)}function _f(e,i,a){return a(function(){mf(i)&&gf(e)})}function mf(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!dn(e,a)}catch{return!0}}function gf(e){var i=xi(e,1);i!==null&&Un(i,e,1,-1)}function vf(e){var i=ti();return typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},i.queue=e,e=e.dispatch=fg.bind(null,tt,e),[i.memoizedState,e]}function fa(e,i,a,h){return e={tag:e,create:i,destroy:a,deps:h,next:null},i=tt.updateQueue,i===null?(i={lastEffect:null,stores:null},tt.updateQueue=i,i.lastEffect=e.next=e):(a=i.lastEffect,a===null?i.lastEffect=e.next=e:(h=a.next,a.next=e,e.next=h,i.lastEffect=e)),e}function yf(){return Pn().memoizedState}function Ql(e,i,a,h){var f=ti();tt.flags|=e,f.memoizedState=fa(1|i,a,void 0,h===void 0?null:h)}function Xl(e,i,a,h){var f=Pn();h=h===void 0?null:h;var _=void 0;if(pt!==null){var v=pt.memoizedState;if(_=v.destroy,h!==null&&Uc(h,v.deps)){f.memoizedState=fa(i,a,_,h);return}}tt.flags|=e,f.memoizedState=fa(1|i,a,_,h)}function wf(e,i){return Ql(8390656,8,e,i)}function $c(e,i){return Xl(2048,8,e,i)}function Cf(e,i){return Xl(4,2,e,i)}function Sf(e,i){return Xl(4,4,e,i)}function Ef(e,i){if(typeof i=="function")return e=e(),i(e),function(){i(null)};if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function xf(e,i,a){return a=a!=null?a.concat([e]):null,Xl(4,4,Ef.bind(null,i,e),a)}function Gc(){}function Tf(e,i){var a=Pn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Uc(i,h[1])?h[0]:(a.memoizedState=[e,i],e)}function Pf(e,i){var a=Pn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Uc(i,h[1])?h[0]:(e=e(),a.memoizedState=[e,i],e)}function kf(e,i,a){return Qr&21?(dn(a,i)||(a=pl(),tt.lanes|=a,Xr|=a,e.baseState=!0),i):(e.baseState&&(e.baseState=!1,Jt=!0),e.memoizedState=a)}function hg(e,i){var a=ke;ke=a!==0&&4>a?a:4,e(!0);var h=Wc.transition;Wc.transition={};try{e(!1),i()}finally{ke=a,Wc.transition=h}}function Lf(){return Pn().memoizedState}function dg(e,i,a){var h=pr(e);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},If(e))Nf(i,a);else if(a=of(e,i,a,h),a!==null){var f=Vt();Un(a,e,h,f),Rf(a,i,h)}}function fg(e,i,a){var h=pr(e),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(If(e))Nf(i,f);else{var _=e.alternate;if(e.lanes===0&&(_===null||_.lanes===0)&&(_=i.lastRenderedReducer,_!==null))try{var v=i.lastRenderedState,E=_(v,a);if(f.hasEagerState=!0,f.eagerState=E,dn(E,v)){var P=i.interleaved;P===null?(f.next=f,Ac(i)):(f.next=P.next,P.next=f),i.interleaved=f;return}}catch{}finally{}a=of(e,i,f,h),a!==null&&(f=Vt(),Un(a,e,h,f),Rf(a,i,h))}}function If(e){var i=e.alternate;return e===tt||i!==null&&i===tt}function Nf(e,i){ca=Yl=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Rf(e,i,a){if(a&4194240){var h=i.lanes;h&=e.pendingLanes,a|=h,i.lanes=a,Mn(e,a)}}var Jl={readContext:Tn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},pg={readContext:Tn,useCallback:function(e,i){return ti().memoizedState=[e,i===void 0?null:i],e},useContext:Tn,useEffect:wf,useImperativeHandle:function(e,i,a){return a=a!=null?a.concat([e]):null,Ql(4194308,4,Ef.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Ql(4194308,4,e,i)},useInsertionEffect:function(e,i){return Ql(4,2,e,i)},useMemo:function(e,i){var a=ti();return i=i===void 0?null:i,e=e(),a.memoizedState=[e,i],e},useReducer:function(e,i,a){var h=ti();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},h.queue=e,e=e.dispatch=dg.bind(null,tt,e),[h.memoizedState,e]},useRef:function(e){var i=ti();return e={current:e},i.memoizedState=e},useState:vf,useDebugValue:Gc,useDeferredValue:function(e){return ti().memoizedState=e},useTransition:function(){var e=vf(!1),i=e[0];return e=hg.bind(null,e[1]),ti().memoizedState=e,[i,e]},useMutableSource:function(){},useSyncExternalStore:function(e,i,a){var h=tt,f=ti();if(Ye){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),yt===null)throw Error(r(349));Qr&30||ff(h,i,a)}f.memoizedState=a;var _={value:a,getSnapshot:i};return f.queue=_,wf(_f.bind(null,h,_,e),[e]),h.flags|=2048,fa(9,pf.bind(null,h,_,a,i),void 0,null),a},useId:function(){var e=ti(),i=yt.identifierPrefix;if(Ye){var a=Ei,h=Si;a=(h&~(1<<32-ge(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=ha++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=cg++,i=":"+i+"r"+a.toString(32)+":";return e.memoizedState=i},unstable_isNewReconciler:!1},_g={readContext:Tn,useCallback:Tf,useContext:Tn,useEffect:$c,useImperativeHandle:xf,useInsertionEffect:Cf,useLayoutEffect:Sf,useMemo:Pf,useReducer:Zc,useRef:yf,useState:function(){return Zc(da)},useDebugValue:Gc,useDeferredValue:function(e){var i=Pn();return kf(i,pt.memoizedState,e)},useTransition:function(){var e=Zc(da)[0],i=Pn().memoizedState;return[e,i]},useMutableSource:hf,useSyncExternalStore:df,useId:Lf,unstable_isNewReconciler:!1},mg={readContext:Tn,useCallback:Tf,useContext:Tn,useEffect:$c,useImperativeHandle:xf,useInsertionEffect:Cf,useLayoutEffect:Sf,useMemo:Pf,useReducer:Vc,useRef:yf,useState:function(){return Vc(da)},useDebugValue:Gc,useDeferredValue:function(e){var i=Pn();return pt===null?i.memoizedState=e:kf(i,pt.memoizedState,e)},useTransition:function(){var e=Vc(da)[0],i=Pn().memoizedState;return[e,i]},useMutableSource:hf,useSyncExternalStore:df,useId:Lf,unstable_isNewReconciler:!1};function Fn(e,i){if(e&&e.defaultProps){i=F({},i),e=e.defaultProps;for(var a in e)i[a]===void 0&&(i[a]=e[a]);return i}return i}function Kc(e,i,a,h){i=e.memoizedState,a=a(h,i),a=a==null?i:F({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var eu={isMounted:function(e){return(e=e._reactInternals)?Vn(e)===e:!1},enqueueSetState:function(e,i,a){e=e._reactInternals;var h=Vt(),f=pr(e),_=Ti(h,f);_.payload=i,a!=null&&(_.callback=a),i=cr(e,_,f),i!==null&&(Un(i,e,f,h),$l(i,e,f))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var h=Vt(),f=pr(e),_=Ti(h,f);_.tag=1,_.payload=i,a!=null&&(_.callback=a),i=cr(e,_,f),i!==null&&(Un(i,e,f,h),$l(i,e,f))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=Vt(),h=pr(e),f=Ti(a,h);f.tag=2,i!=null&&(f.callback=i),i=cr(e,f,h),i!==null&&(Un(i,e,h,a),$l(i,e,h))}};function Mf(e,i,a,h,f,_,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,_,v):i.prototype&&i.prototype.isPureReactComponent?!Yn(a,h)||!Yn(f,_):!0}function Of(e,i,a){var h=!1,f=ar,_=i.contextType;return typeof _=="object"&&_!==null?_=Tn(_):(f=Xt(i)?$r:At.current,h=i.contextTypes,_=(h=h!=null)?Vs(e,f):ar),i=new i(a,_),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=eu,e.stateNode=i,i._reactInternals=e,h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=_),i}function Af(e,i,a,h){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==e&&eu.enqueueReplaceState(i,i.state,null)}function qc(e,i,a,h){var f=e.stateNode;f.props=a,f.state=e.memoizedState,f.refs={},Dc(e);var _=i.contextType;typeof _=="object"&&_!==null?f.context=Tn(_):(_=Xt(i)?$r:At.current,f.context=Vs(e,_)),f.state=e.memoizedState,_=i.getDerivedStateFromProps,typeof _=="function"&&(Kc(e,i,_,a),f.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&eu.enqueueReplaceState(f,f.state,null),Gl(e,a,f,h),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function Js(e,i){try{var a="",h=i;do a+=ie(h),h=h.return;while(h);var f=a}catch(_){f=`
Error generating stack: `+_.message+`
`+_.stack}return{value:e,source:i,stack:f,digest:null}}function Yc(e,i,a){return{value:e,source:null,stack:a??null,digest:i??null}}function Qc(e,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var gg=typeof WeakMap=="function"?WeakMap:Map;function Df(e,i,a){a=Ti(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){au||(au=!0,dh=h),Qc(e,i)},a}function bf(e,i,a){a=Ti(-1,a),a.tag=3;var h=e.type.getDerivedStateFromError;if(typeof h=="function"){var f=i.value;a.payload=function(){return h(f)},a.callback=function(){Qc(e,i)}}var _=e.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(a.callback=function(){Qc(e,i),typeof h!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function zf(e,i,a){var h=e.pingCache;if(h===null){h=e.pingCache=new gg;var f=new Set;h.set(i,f)}else f=h.get(i),f===void 0&&(f=new Set,h.set(i,f));f.has(a)||(f.add(a),e=Rg.bind(null,e,i,a),i.then(e,e))}function Ff(e){do{var i;if((i=e.tag===13)&&(i=e.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return e;e=e.return}while(e!==null);return null}function Bf(e,i,a,h,f){return e.mode&1?(e.flags|=65536,e.lanes=f,e):(e===i?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Ti(-1,1),i.tag=2,cr(a,i,1))),a.lanes|=1),e)}var vg=be.ReactCurrentOwner,Jt=!1;function Zt(e,i,a,h){i.child=e===null?sf(i,null,a,h):qs(i,e.child,a,h)}function Wf(e,i,a,h,f){a=a.render;var _=i.ref;return Qs(i,f),h=Hc(e,i,a,h,_,f),a=jc(),e!==null&&!Jt?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~f,Pi(e,i,f)):(Ye&&a&&Tc(i),i.flags|=1,Zt(e,i,h,f),i.child)}function Uf(e,i,a,h,f){if(e===null){var _=a.type;return typeof _=="function"&&!yh(_)&&_.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=_,Hf(e,i,_,h,f)):(e=fu(a.type,null,h,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(_=e.child,!(e.lanes&f)){var v=_.memoizedProps;if(a=a.compare,a=a!==null?a:Yn,a(v,h)&&e.ref===i.ref)return Pi(e,i,f)}return i.flags|=1,e=mr(_,h),e.ref=i.ref,e.return=i,i.child=e}function Hf(e,i,a,h,f){if(e!==null){var _=e.memoizedProps;if(Yn(_,h)&&e.ref===i.ref)if(Jt=!1,i.pendingProps=h=_,(e.lanes&f)!==0)e.flags&131072&&(Jt=!0);else return i.lanes=e.lanes,Pi(e,i,f)}return Xc(e,i,a,h,f)}function jf(e,i,a){var h=i.pendingProps,f=h.children,_=e!==null?e.memoizedState:null;if(h.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(to,mn),mn|=a;else{if(!(a&1073741824))return e=_!==null?_.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:e,cachePool:null,transitions:null},i.updateQueue=null,He(to,mn),mn|=e,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=_!==null?_.baseLanes:a,He(to,mn),mn|=h}else _!==null?(h=_.baseLanes|a,i.memoizedState=null):h=a,He(to,mn),mn|=h;return Zt(e,i,f,a),i.child}function Zf(e,i){var a=i.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Xc(e,i,a,h,f){var _=Xt(a)?$r:At.current;return _=Vs(i,_),Qs(i,f),a=Hc(e,i,a,h,_,f),h=jc(),e!==null&&!Jt?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~f,Pi(e,i,f)):(Ye&&h&&Tc(i),i.flags|=1,Zt(e,i,a,f),i.child)}function Vf(e,i,a,h,f){if(Xt(a)){var _=!0;Fl(i)}else _=!1;if(Qs(i,f),i.stateNode===null)nu(e,i),Of(i,a,h),qc(i,a,h,f),h=!0;else if(e===null){var v=i.stateNode,E=i.memoizedProps;v.props=E;var P=v.context,z=a.contextType;typeof z=="object"&&z!==null?z=Tn(z):(z=Xt(a)?$r:At.current,z=Vs(i,z));var H=a.getDerivedStateFromProps,Z=typeof H=="function"||typeof v.getSnapshotBeforeUpdate=="function";Z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==h||P!==z)&&Af(i,v,h,z),ur=!1;var U=i.memoizedState;v.state=U,Gl(i,h,v,f),P=i.memoizedState,E!==h||U!==P||Qt.current||ur?(typeof H=="function"&&(Kc(i,a,H,h),P=i.memoizedState),(E=ur||Mf(i,a,E,h,U,P,z))?(Z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=P),v.props=h,v.state=P,v.context=z,h=E):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{v=i.stateNode,af(e,i),E=i.memoizedProps,z=i.type===i.elementType?E:Fn(i.type,E),v.props=z,Z=i.pendingProps,U=v.context,P=a.contextType,typeof P=="object"&&P!==null?P=Tn(P):(P=Xt(a)?$r:At.current,P=Vs(i,P));var J=a.getDerivedStateFromProps;(H=typeof J=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==Z||U!==P)&&Af(i,v,h,P),ur=!1,U=i.memoizedState,v.state=U,Gl(i,h,v,f);var te=i.memoizedState;E!==Z||U!==te||Qt.current||ur?(typeof J=="function"&&(Kc(i,a,J,h),te=i.memoizedState),(z=ur||Mf(i,a,z,h,U,te,P)||!1)?(H||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,te,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,te,P)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||E===e.memoizedProps&&U===e.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&U===e.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=te),v.props=h,v.state=te,v.context=P,h=z):(typeof v.componentDidUpdate!="function"||E===e.memoizedProps&&U===e.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&U===e.memoizedState||(i.flags|=1024),h=!1)}return Jc(e,i,a,h,_,f)}function Jc(e,i,a,h,f,_){Zf(e,i);var v=(i.flags&128)!==0;if(!h&&!v)return f&&qd(i,a,!1),Pi(e,i,_);h=i.stateNode,vg.current=i;var E=v&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,e!==null&&v?(i.child=qs(i,e.child,null,_),i.child=qs(i,null,E,_)):Zt(e,i,E,_),i.memoizedState=h.state,f&&qd(i,a,!0),i.child}function $f(e){var i=e.stateNode;i.pendingContext?Gd(e,i.pendingContext,i.pendingContext!==i.context):i.context&&Gd(e,i.context,!1),bc(e,i.containerInfo)}function Gf(e,i,a,h,f){return Ks(),Ic(f),i.flags|=256,Zt(e,i,a,h),i.child}var eh={dehydrated:null,treeContext:null,retryLane:0};function th(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kf(e,i,a){var h=i.pendingProps,f=et.current,_=!1,v=(i.flags&128)!==0,E;if((E=v)||(E=e!==null&&e.memoizedState===null?!1:(f&2)!==0),E?(_=!0,i.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),He(et,f&1),e===null)return Lc(i),e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(i.mode&1?e.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(v=h.children,e=h.fallback,_?(h=i.mode,_=i.child,v={mode:"hidden",children:v},!(h&1)&&_!==null?(_.childLanes=0,_.pendingProps=v):_=pu(v,h,0,null),e=ns(e,h,a,null),_.return=i,e.return=i,_.sibling=e,i.child=_,i.child.memoizedState=th(a),i.memoizedState=eh,e):nh(i,v));if(f=e.memoizedState,f!==null&&(E=f.dehydrated,E!==null))return yg(e,i,v,h,E,f,a);if(_){_=h.fallback,v=i.mode,f=e.child,E=f.sibling;var P={mode:"hidden",children:h.children};return!(v&1)&&i.child!==f?(h=i.child,h.childLanes=0,h.pendingProps=P,i.deletions=null):(h=mr(f,P),h.subtreeFlags=f.subtreeFlags&14680064),E!==null?_=mr(E,_):(_=ns(_,v,a,null),_.flags|=2),_.return=i,h.return=i,h.sibling=_,i.child=h,h=_,_=i.child,v=e.child.memoizedState,v=v===null?th(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},_.memoizedState=v,_.childLanes=e.childLanes&~a,i.memoizedState=eh,h}return _=e.child,e=_.sibling,h=mr(_,{mode:"visible",children:h.children}),!(i.mode&1)&&(h.lanes=a),h.return=i,h.sibling=null,e!==null&&(a=i.deletions,a===null?(i.deletions=[e],i.flags|=16):a.push(e)),i.child=h,i.memoizedState=null,h}function nh(e,i){return i=pu({mode:"visible",children:i},e.mode,0,null),i.return=e,e.child=i}function tu(e,i,a,h){return h!==null&&Ic(h),qs(i,e.child,null,a),e=nh(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function yg(e,i,a,h,f,_,v){if(a)return i.flags&256?(i.flags&=-257,h=Yc(Error(r(422))),tu(e,i,v,h)):i.memoizedState!==null?(i.child=e.child,i.flags|=128,null):(_=h.fallback,f=i.mode,h=pu({mode:"visible",children:h.children},f,0,null),_=ns(_,f,v,null),_.flags|=2,h.return=i,_.return=i,h.sibling=_,i.child=h,i.mode&1&&qs(i,e.child,null,v),i.child.memoizedState=th(v),i.memoizedState=eh,_);if(!(i.mode&1))return tu(e,i,v,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var E=h.dgst;return h=E,_=Error(r(419)),h=Yc(_,h,void 0),tu(e,i,v,h)}if(E=(v&e.childLanes)!==0,Jt||E){if(h=yt,h!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(h.suspendedLanes|v)?0:f,f!==0&&f!==_.retryLane&&(_.retryLane=f,xi(e,f),Un(h,e,f,-1))}return vh(),h=Yc(Error(r(421))),tu(e,i,v,h)}return f.data==="$?"?(i.flags|=128,i.child=e.child,i=Mg.bind(null,e),f._reactRetry=i,null):(e=_.treeContext,_n=Jn(f.nextSibling),pn=i,Ye=!0,zn=null,e!==null&&(En[xn++]=Si,En[xn++]=Ei,En[xn++]=Gr,Si=e.id,Ei=e.overflow,Gr=i),i=nh(i,h.children),i.flags|=4096,i)}function qf(e,i,a){e.lanes|=i;var h=e.alternate;h!==null&&(h.lanes|=i),Oc(e.return,i,a)}function ih(e,i,a,h,f){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=a,_.tailMode=f)}function Yf(e,i,a){var h=i.pendingProps,f=h.revealOrder,_=h.tail;if(Zt(e,i,h.children,a),h=et.current,h&2)h=h&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qf(e,a,i);else if(e.tag===19)qf(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}if(He(et,h),!(i.mode&1))i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&Kl(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),ih(i,!1,f,a,_);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&Kl(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}ih(i,!0,a,null,_);break;case"together":ih(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function nu(e,i){!(i.mode&1)&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=2)}function Pi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Xr|=i.lanes,!(a&i.childLanes))return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=mr(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=mr(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function wg(e,i,a){switch(i.tag){case 3:$f(i),Ks();break;case 5:cf(i);break;case 1:Xt(i.type)&&Fl(i);break;case 4:bc(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,f=i.memoizedProps.value;He(Zl,h._currentValue),h._currentValue=f;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(He(et,et.current&1),i.flags|=128,null):a&i.child.childLanes?Kf(e,i,a):(He(et,et.current&1),e=Pi(e,i,a),e!==null?e.sibling:null);He(et,et.current&1);break;case 19:if(h=(a&i.childLanes)!==0,e.flags&128){if(h)return Yf(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),He(et,et.current),h)break;return null;case 22:case 23:return i.lanes=0,jf(e,i,a)}return Pi(e,i,a)}var Qf,rh,Xf,Jf;Qf=function(e,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},rh=function(){},Xf=function(e,i,a,h){var f=e.memoizedProps;if(f!==h){e=i.stateNode,Yr(ei.current);var _=null;switch(a){case"input":f=wo(e,f),h=wo(e,h),_=[];break;case"select":f=F({},f,{value:void 0}),h=F({},h,{value:void 0}),_=[];break;case"textarea":f=ds(e,f),h=ds(e,h),_=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(e.onclick=W)}Po(a,h);var v;a=null;for(z in f)if(!h.hasOwnProperty(z)&&f.hasOwnProperty(z)&&f[z]!=null)if(z==="style"){var E=f[z];for(v in E)E.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(c.hasOwnProperty(z)?_||(_=[]):(_=_||[]).push(z,null));for(z in h){var P=h[z];if(E=f!=null?f[z]:void 0,h.hasOwnProperty(z)&&P!==E&&(P!=null||E!=null))if(z==="style")if(E){for(v in E)!E.hasOwnProperty(v)||P&&P.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in P)P.hasOwnProperty(v)&&E[v]!==P[v]&&(a||(a={}),a[v]=P[v])}else a||(_||(_=[]),_.push(z,a)),a=P;else z==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,E=E?E.__html:void 0,P!=null&&E!==P&&(_=_||[]).push(z,P)):z==="children"?typeof P!="string"&&typeof P!="number"||(_=_||[]).push(z,""+P):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(c.hasOwnProperty(z)?(P!=null&&z==="onScroll"&&Fe("scroll",e),_||E===P||(_=[])):(_=_||[]).push(z,P))}a&&(_=_||[]).push("style",a);var z=_;(i.updateQueue=z)&&(i.flags|=4)}},Jf=function(e,i,a,h){a!==h&&(i.flags|=4)};function pa(e,i){if(!Ye)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function bt(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,h=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=h,e.childLanes=a,i}function Cg(e,i,a){var h=i.pendingProps;switch(Pc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(i),null;case 1:return Xt(i.type)&&zl(),bt(i),null;case 3:return h=i.stateNode,Xs(),Ke(Qt),Ke(At),Bc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(e===null||e.child===null)&&(Hl(i)?i.flags|=4:e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,zn!==null&&(_h(zn),zn=null))),rh(e,i),bt(i),null;case 5:zc(i);var f=Yr(ua.current);if(a=i.type,e!==null&&i.stateNode!=null)Xf(e,i,a,h,f),e.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(r(166));return bt(i),null}if(e=Yr(ei.current),Hl(i)){h=i.stateNode,a=i.type;var _=i.memoizedProps;switch(h[Sn]=i,h[rr]=_,e=(i.mode&1)!==0,a){case"dialog":Fe("cancel",h),Fe("close",h);break;case"iframe":case"object":case"embed":Fe("load",h);break;case"video":case"audio":for(f=0;f<tr.length;f++)Fe(tr[f],h);break;case"source":Fe("error",h);break;case"img":case"image":case"link":Fe("error",h),Fe("load",h);break;case"details":Fe("toggle",h);break;case"input":Co(h,_),Fe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!_.multiple},Fe("invalid",h);break;case"textarea":xo(h,_),Fe("invalid",h)}Po(a,_),f=null;for(var v in _)if(_.hasOwnProperty(v)){var E=_[v];v==="children"?typeof E=="string"?h.textContent!==E&&(_.suppressHydrationWarning!==!0&&b(h.textContent,E,e),f=["children",E]):typeof E=="number"&&h.textContent!==""+E&&(_.suppressHydrationWarning!==!0&&b(h.textContent,E,e),f=["children",""+E]):c.hasOwnProperty(v)&&E!=null&&v==="onScroll"&&Fe("scroll",h)}switch(a){case"input":Oi(h),kr(h,_,!0);break;case"textarea":Oi(h),el(h);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(h.onclick=W)}h=f,i.updateQueue=h,h!==null&&(i.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fs(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof h.is=="string"?e=v.createElement(a,{is:h.is}):(e=v.createElement(a),a==="select"&&(v=e,h.multiple?v.multiple=!0:h.size&&(v.size=h.size))):e=v.createElementNS(e,a),e[Sn]=i,e[rr]=h,Qf(e,i,!1,!1),i.stateNode=e;e:{switch(v=si(a,h),a){case"dialog":Fe("cancel",e),Fe("close",e),f=h;break;case"iframe":case"object":case"embed":Fe("load",e),f=h;break;case"video":case"audio":for(f=0;f<tr.length;f++)Fe(tr[f],e);f=h;break;case"source":Fe("error",e),f=h;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),f=h;break;case"details":Fe("toggle",e),f=h;break;case"input":Co(e,h),f=wo(e,h),Fe("invalid",e);break;case"option":f=h;break;case"select":e._wrapperState={wasMultiple:!!h.multiple},f=F({},h,{value:void 0}),Fe("invalid",e);break;case"textarea":xo(e,h),f=ds(e,h),Fe("invalid",e);break;default:f=h}Po(a,f),E=f;for(_ in E)if(E.hasOwnProperty(_)){var P=E[_];_==="style"?_s(e,P):_==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&tl(e,P)):_==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&zi(e,P):typeof P=="number"&&zi(e,""+P):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(c.hasOwnProperty(_)?P!=null&&_==="onScroll"&&Fe("scroll",e):P!=null&&Me(e,_,P,v))}switch(a){case"input":Oi(e),kr(e,h,!1);break;case"textarea":Oi(e),el(e);break;case"option":h.value!=null&&e.setAttribute("value",""+Ce(h.value));break;case"select":e.multiple=!!h.multiple,_=h.value,_!=null?Zn(e,!!h.multiple,_,!1):h.defaultValue!=null&&Zn(e,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=W)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return bt(i),null;case 6:if(e&&i.stateNode!=null)Jf(e,i,e.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(r(166));if(a=Yr(ua.current),Yr(ei.current),Hl(i)){if(h=i.stateNode,a=i.memoizedProps,h[Sn]=i,(_=h.nodeValue!==a)&&(e=pn,e!==null))switch(e.tag){case 3:b(h.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&b(h.nodeValue,a,(e.mode&1)!==0)}_&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Sn]=i,i.stateNode=h}return bt(i),null;case 13:if(Ke(et),h=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ye&&_n!==null&&i.mode&1&&!(i.flags&128))tf(),Ks(),i.flags|=98560,_=!1;else if(_=Hl(i),h!==null&&h.dehydrated!==null){if(e===null){if(!_)throw Error(r(318));if(_=i.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[Sn]=i}else Ks(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;bt(i),_=!1}else zn!==null&&(_h(zn),zn=null),_=!0;if(!_)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(h=h!==null,h!==(e!==null&&e.memoizedState!==null)&&h&&(i.child.flags|=8192,i.mode&1&&(e===null||et.current&1?_t===0&&(_t=3):vh())),i.updateQueue!==null&&(i.flags|=4),bt(i),null);case 4:return Xs(),rh(e,i),e===null&&nr(i.stateNode.containerInfo),bt(i),null;case 10:return Mc(i.type._context),bt(i),null;case 17:return Xt(i.type)&&zl(),bt(i),null;case 19:if(Ke(et),_=i.memoizedState,_===null)return bt(i),null;if(h=(i.flags&128)!==0,v=_.rendering,v===null)if(h)pa(_,!1);else{if(_t!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(v=Kl(e),v!==null){for(i.flags|=128,pa(_,!1),h=v.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)_=a,e=h,_.flags&=14680066,v=_.alternate,v===null?(_.childLanes=0,_.lanes=e,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=v.childLanes,_.lanes=v.lanes,_.child=v.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=v.memoizedProps,_.memoizedState=v.memoizedState,_.updateQueue=v.updateQueue,_.type=v.type,e=v.dependencies,_.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return He(et,et.current&1|2),i.child}e=e.sibling}_.tail!==null&&Xe()>no&&(i.flags|=128,h=!0,pa(_,!1),i.lanes=4194304)}else{if(!h)if(e=Kl(v),e!==null){if(i.flags|=128,h=!0,a=e.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),pa(_,!0),_.tail===null&&_.tailMode==="hidden"&&!v.alternate&&!Ye)return bt(i),null}else 2*Xe()-_.renderingStartTime>no&&a!==1073741824&&(i.flags|=128,h=!0,pa(_,!1),i.lanes=4194304);_.isBackwards?(v.sibling=i.child,i.child=v):(a=_.last,a!==null?a.sibling=v:i.child=v,_.last=v)}return _.tail!==null?(i=_.tail,_.rendering=i,_.tail=i.sibling,_.renderingStartTime=Xe(),i.sibling=null,a=et.current,He(et,h?a&1|2:a&1),i):(bt(i),null);case 22:case 23:return gh(),h=i.memoizedState!==null,e!==null&&e.memoizedState!==null!==h&&(i.flags|=8192),h&&i.mode&1?mn&1073741824&&(bt(i),i.subtreeFlags&6&&(i.flags|=8192)):bt(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function Sg(e,i){switch(Pc(i),i.tag){case 1:return Xt(i.type)&&zl(),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Xs(),Ke(Qt),Ke(At),Bc(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 5:return zc(i),null;case 13:if(Ke(et),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ks()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return Ke(et),null;case 4:return Xs(),null;case 10:return Mc(i.type._context),null;case 22:case 23:return gh(),null;case 24:return null;default:return null}}var iu=!1,zt=!1,Eg=typeof WeakSet=="function"?WeakSet:Set,ee=null;function eo(e,i){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){it(e,i,h)}else a.current=null}function sh(e,i,a){try{a()}catch(h){it(e,i,h)}}var ep=!1;function xg(e,i){if(Q=Fr,e=Qo(),Xo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var v=0,E=-1,P=-1,z=0,H=0,Z=e,U=null;t:for(;;){for(var J;Z!==a||f!==0&&Z.nodeType!==3||(E=v+f),Z!==_||h!==0&&Z.nodeType!==3||(P=v+h),Z.nodeType===3&&(v+=Z.nodeValue.length),(J=Z.firstChild)!==null;)U=Z,Z=J;for(;;){if(Z===e)break t;if(U===a&&++z===f&&(E=v),U===_&&++H===h&&(P=v),(J=Z.nextSibling)!==null)break;Z=U,U=Z.parentNode}Z=J}a=E===-1||P===-1?null:{start:E,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(ce={focusedElem:e,selectionRange:a},Fr=!1,ee=i;ee!==null;)if(i=ee,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,ee=e;else for(;ee!==null;){i=ee;try{var te=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var re=te.memoizedProps,at=te.memoizedState,O=i.stateNode,I=O.getSnapshotBeforeUpdate(i.elementType===i.type?re:Fn(i.type,re),at);O.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var D=i.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(G){it(i,i.return,G)}if(e=i.sibling,e!==null){e.return=i.return,ee=e;break}ee=i.return}return te=ep,ep=!1,te}function _a(e,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&e)===e){var _=f.destroy;f.destroy=void 0,_!==void 0&&sh(i,a,_)}f=f.next}while(f!==h)}}function ru(e,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function oh(e){var i=e.ref;if(i!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof i=="function"?i(e):i.current=e}}function tp(e){var i=e.alternate;i!==null&&(e.alternate=null,tp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&(delete i[Sn],delete i[rr],delete i[sr],delete i[Cc],delete i[Sc])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function np(e){return e.tag===5||e.tag===3||e.tag===4}function ip(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||np(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ah(e,i,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(e,i):a.insertBefore(e,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(e,a)):(i=a,i.appendChild(e)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=W));else if(h!==4&&(e=e.child,e!==null))for(ah(e,i,a),e=e.sibling;e!==null;)ah(e,i,a),e=e.sibling}function lh(e,i,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(h!==4&&(e=e.child,e!==null))for(lh(e,i,a),e=e.sibling;e!==null;)lh(e,i,a),e=e.sibling}var Pt=null,Bn=!1;function hr(e,i,a){for(a=a.child;a!==null;)rp(e,i,a),a=a.sibling}function rp(e,i,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Mr,a)}catch{}switch(a.tag){case 5:zt||eo(a,i);case 6:var h=Pt,f=Bn;Pt=null,hr(e,i,a),Pt=h,Bn=f,Pt!==null&&(Bn?(e=Pt,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Pt.removeChild(a.stateNode));break;case 18:Pt!==null&&(Bn?(e=Pt,a=a.stateNode,e.nodeType===8?sa(e.parentNode,a):e.nodeType===1&&sa(e,a),un(e)):sa(Pt,a.stateNode));break;case 4:h=Pt,f=Bn,Pt=a.stateNode.containerInfo,Bn=!0,hr(e,i,a),Pt=h,Bn=f;break;case 0:case 11:case 14:case 15:if(!zt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var _=f,v=_.destroy;_=_.tag,v!==void 0&&(_&2||_&4)&&sh(a,i,v),f=f.next}while(f!==h)}hr(e,i,a);break;case 1:if(!zt&&(eo(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(E){it(a,i,E)}hr(e,i,a);break;case 21:hr(e,i,a);break;case 22:a.mode&1?(zt=(h=zt)||a.memoizedState!==null,hr(e,i,a),zt=h):hr(e,i,a);break;default:hr(e,i,a)}}function sp(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Eg),i.forEach(function(h){var f=Og.bind(null,e,h);a.has(h)||(a.add(h),h.then(f,f))})}}function Wn(e,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var _=e,v=i,E=v;e:for(;E!==null;){switch(E.tag){case 5:Pt=E.stateNode,Bn=!1;break e;case 3:Pt=E.stateNode.containerInfo,Bn=!0;break e;case 4:Pt=E.stateNode.containerInfo,Bn=!0;break e}E=E.return}if(Pt===null)throw Error(r(160));rp(_,v,f),Pt=null,Bn=!1;var P=f.alternate;P!==null&&(P.return=null),f.return=null}catch(z){it(f,i,z)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)op(i,e),i=i.sibling}function op(e,i){var a=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wn(i,e),ni(e),h&4){try{_a(3,e,e.return),ru(3,e)}catch(re){it(e,e.return,re)}try{_a(5,e,e.return)}catch(re){it(e,e.return,re)}}break;case 1:Wn(i,e),ni(e),h&512&&a!==null&&eo(a,a.return);break;case 5:if(Wn(i,e),ni(e),h&512&&a!==null&&eo(a,a.return),e.flags&32){var f=e.stateNode;try{zi(f,"")}catch(re){it(e,e.return,re)}}if(h&4&&(f=e.stateNode,f!=null)){var _=e.memoizedProps,v=a!==null?a.memoizedProps:_,E=e.type,P=e.updateQueue;if(e.updateQueue=null,P!==null)try{E==="input"&&_.type==="radio"&&_.name!=null&&So(f,_),si(E,v);var z=si(E,_);for(v=0;v<P.length;v+=2){var H=P[v],Z=P[v+1];H==="style"?_s(f,Z):H==="dangerouslySetInnerHTML"?tl(f,Z):H==="children"?zi(f,Z):Me(f,H,Z,z)}switch(E){case"input":Pr(f,_);break;case"textarea":Ja(f,_);break;case"select":var U=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!_.multiple;var J=_.value;J!=null?Zn(f,!!_.multiple,J,!1):U!==!!_.multiple&&(_.defaultValue!=null?Zn(f,!!_.multiple,_.defaultValue,!0):Zn(f,!!_.multiple,_.multiple?[]:"",!1))}f[rr]=_}catch(re){it(e,e.return,re)}}break;case 6:if(Wn(i,e),ni(e),h&4){if(e.stateNode===null)throw Error(r(162));f=e.stateNode,_=e.memoizedProps;try{f.nodeValue=_}catch(re){it(e,e.return,re)}}break;case 3:if(Wn(i,e),ni(e),h&4&&a!==null&&a.memoizedState.isDehydrated)try{un(i.containerInfo)}catch(re){it(e,e.return,re)}break;case 4:Wn(i,e),ni(e);break;case 13:Wn(i,e),ni(e),f=e.child,f.flags&8192&&(_=f.memoizedState!==null,f.stateNode.isHidden=_,!_||f.alternate!==null&&f.alternate.memoizedState!==null||(hh=Xe())),h&4&&sp(e);break;case 22:if(H=a!==null&&a.memoizedState!==null,e.mode&1?(zt=(z=zt)||H,Wn(i,e),zt=z):Wn(i,e),ni(e),h&8192){if(z=e.memoizedState!==null,(e.stateNode.isHidden=z)&&!H&&e.mode&1)for(ee=e,H=e.child;H!==null;){for(Z=ee=H;ee!==null;){switch(U=ee,J=U.child,U.tag){case 0:case 11:case 14:case 15:_a(4,U,U.return);break;case 1:eo(U,U.return);var te=U.stateNode;if(typeof te.componentWillUnmount=="function"){h=U,a=U.return;try{i=h,te.props=i.memoizedProps,te.state=i.memoizedState,te.componentWillUnmount()}catch(re){it(h,a,re)}}break;case 5:eo(U,U.return);break;case 22:if(U.memoizedState!==null){up(Z);continue}}J!==null?(J.return=U,ee=J):up(Z)}H=H.sibling}e:for(H=null,Z=e;;){if(Z.tag===5){if(H===null){H=Z;try{f=Z.stateNode,z?(_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(E=Z.stateNode,P=Z.memoizedProps.style,v=P!=null&&P.hasOwnProperty("display")?P.display:null,E.style.display=To("display",v))}catch(re){it(e,e.return,re)}}}else if(Z.tag===6){if(H===null)try{Z.stateNode.nodeValue=z?"":Z.memoizedProps}catch(re){it(e,e.return,re)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===e)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===e)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===e)break e;H===Z&&(H=null),Z=Z.return}H===Z&&(H=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Wn(i,e),ni(e),h&4&&sp(e);break;case 21:break;default:Wn(i,e),ni(e)}}function ni(e){var i=e.flags;if(i&2){try{e:{for(var a=e.return;a!==null;){if(np(a)){var h=a;break e}a=a.return}throw Error(r(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(zi(f,""),h.flags&=-33);var _=ip(e);lh(e,_,f);break;case 3:case 4:var v=h.stateNode.containerInfo,E=ip(e);ah(e,E,v);break;default:throw Error(r(161))}}catch(P){it(e,e.return,P)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Tg(e,i,a){ee=e,ap(e)}function ap(e,i,a){for(var h=(e.mode&1)!==0;ee!==null;){var f=ee,_=f.child;if(f.tag===22&&h){var v=f.memoizedState!==null||iu;if(!v){var E=f.alternate,P=E!==null&&E.memoizedState!==null||zt;E=iu;var z=zt;if(iu=v,(zt=P)&&!z)for(ee=f;ee!==null;)v=ee,P=v.child,v.tag===22&&v.memoizedState!==null?cp(f):P!==null?(P.return=v,ee=P):cp(f);for(;_!==null;)ee=_,ap(_),_=_.sibling;ee=f,iu=E,zt=z}lp(e)}else f.subtreeFlags&8772&&_!==null?(_.return=f,ee=_):lp(e)}}function lp(e){for(;ee!==null;){var i=ee;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:zt||ru(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!zt)if(a===null)h.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:Fn(i.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var _=i.updateQueue;_!==null&&uf(i,_,h);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}uf(i,v,a)}break;case 5:var E=i.stateNode;if(a===null&&i.flags&4){a=E;var P=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var z=i.alternate;if(z!==null){var H=z.memoizedState;if(H!==null){var Z=H.dehydrated;Z!==null&&un(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}zt||i.flags&512&&oh(i)}catch(U){it(i,i.return,U)}}if(i===e){ee=null;break}if(a=i.sibling,a!==null){a.return=i.return,ee=a;break}ee=i.return}}function up(e){for(;ee!==null;){var i=ee;if(i===e){ee=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ee=a;break}ee=i.return}}function cp(e){for(;ee!==null;){var i=ee;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{ru(4,i)}catch(P){it(i,a,P)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var f=i.return;try{h.componentDidMount()}catch(P){it(i,f,P)}}var _=i.return;try{oh(i)}catch(P){it(i,_,P)}break;case 5:var v=i.return;try{oh(i)}catch(P){it(i,v,P)}}}catch(P){it(i,i.return,P)}if(i===e){ee=null;break}var E=i.sibling;if(E!==null){E.return=i.return,ee=E;break}ee=i.return}}var Pg=Math.ceil,su=be.ReactCurrentDispatcher,uh=be.ReactCurrentOwner,kn=be.ReactCurrentBatchConfig,Ie=0,yt=null,ct=null,kt=0,mn=0,to=or(0),_t=0,ma=null,Xr=0,ou=0,ch=0,ga=null,en=null,hh=0,no=1/0,ki=null,au=!1,dh=null,dr=null,lu=!1,fr=null,uu=0,va=0,fh=null,cu=-1,hu=0;function Vt(){return Ie&6?Xe():cu!==-1?cu:cu=Xe()}function pr(e){return e.mode&1?Ie&2&&kt!==0?kt&-kt:ug.transition!==null?(hu===0&&(hu=pl()),hu):(e=ke,e!==0||(e=window.event,e=e===void 0?16:Te(e.type)),e):1}function Un(e,i,a,h){if(50<va)throw va=0,fh=null,Error(r(185));an(e,a,h),(!(Ie&2)||e!==yt)&&(e===yt&&(!(Ie&2)&&(ou|=a),_t===4&&_r(e,kt)),tn(e,h),a===1&&Ie===0&&!(i.mode&1)&&(no=Xe()+500,Bl&&lr()))}function tn(e,i){var a=e.callbackNode;Ss(e,i);var h=Ue(e,e===yt?kt:0);if(h===0)a!==null&&Oo(a),e.callbackNode=null,e.callbackPriority=0;else if(i=h&-h,e.callbackPriority!==i){if(a!=null&&Oo(a),i===1)e.tag===0?lg(dp.bind(null,e)):Yd(dp.bind(null,e)),Ot(function(){!(Ie&6)&&lr()}),a=null;else{switch(ji(h)){case 1:a=Ao;break;case 4:a=fl;break;case 16:a=ws;break;case 536870912:a=Bi;break;default:a=ws}a=wp(a,hp.bind(null,e))}e.callbackPriority=i,e.callbackNode=a}}function hp(e,i){if(cu=-1,hu=0,Ie&6)throw Error(r(327));var a=e.callbackNode;if(io()&&e.callbackNode!==a)return null;var h=Ue(e,e===yt?kt:0);if(h===0)return null;if(h&30||h&e.expiredLanes||i)i=du(e,h);else{i=h;var f=Ie;Ie|=2;var _=pp();(yt!==e||kt!==i)&&(ki=null,no=Xe()+500,es(e,i));do try{Ig();break}catch(E){fp(e,E)}while(!0);Rc(),su.current=_,Ie=f,ct!==null?i=0:(yt=null,kt=0,i=_t)}if(i!==0){if(i===2&&(f=Rt(e),f!==0&&(h=f,i=ph(e,f))),i===1)throw a=ma,es(e,0),_r(e,h),tn(e,Xe()),a;if(i===6)_r(e,h);else{if(f=e.current.alternate,!(h&30)&&!kg(f)&&(i=du(e,h),i===2&&(_=Rt(e),_!==0&&(h=_,i=ph(e,_))),i===1))throw a=ma,es(e,0),_r(e,h),tn(e,Xe()),a;switch(e.finishedWork=f,e.finishedLanes=h,i){case 0:case 1:throw Error(r(345));case 2:ts(e,en,ki);break;case 3:if(_r(e,h),(h&130023424)===h&&(i=hh+500-Xe(),10<i)){if(Ue(e,0)!==0)break;if(f=e.suspendedLanes,(f&h)!==h){Vt(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=ft(ts.bind(null,e,en,ki),i);break}ts(e,en,ki);break;case 4:if(_r(e,h),(h&4194240)===h)break;for(i=e.eventTimes,f=-1;0<h;){var v=31-ge(h);_=1<<v,v=i[v],v>f&&(f=v),h&=~_}if(h=f,h=Xe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Pg(h/1960))-h,10<h){e.timeoutHandle=ft(ts.bind(null,e,en,ki),h);break}ts(e,en,ki);break;case 5:ts(e,en,ki);break;default:throw Error(r(329))}}}return tn(e,Xe()),e.callbackNode===a?hp.bind(null,e):null}function ph(e,i){var a=ga;return e.current.memoizedState.isDehydrated&&(es(e,i).flags|=256),e=du(e,i),e!==2&&(i=en,en=a,i!==null&&_h(i)),e}function _h(e){en===null?en=e:en.push.apply(en,e)}function kg(e){for(var i=e;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],_=f.getSnapshot;f=f.value;try{if(!dn(_(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function _r(e,i){for(i&=~ch,i&=~ou,e.suspendedLanes|=i,e.pingedLanes&=~i,e=e.expirationTimes;0<i;){var a=31-ge(i),h=1<<a;e[a]=-1,i&=~h}}function dp(e){if(Ie&6)throw Error(r(327));io();var i=Ue(e,0);if(!(i&1))return tn(e,Xe()),null;var a=du(e,i);if(e.tag!==0&&a===2){var h=Rt(e);h!==0&&(i=h,a=ph(e,h))}if(a===1)throw a=ma,es(e,0),_r(e,i),tn(e,Xe()),a;if(a===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=i,ts(e,en,ki),tn(e,Xe()),null}function mh(e,i){var a=Ie;Ie|=1;try{return e(i)}finally{Ie=a,Ie===0&&(no=Xe()+500,Bl&&lr())}}function Jr(e){fr!==null&&fr.tag===0&&!(Ie&6)&&io();var i=Ie;Ie|=1;var a=kn.transition,h=ke;try{if(kn.transition=null,ke=1,e)return e()}finally{ke=h,kn.transition=a,Ie=i,!(Ie&6)&&lr()}}function gh(){mn=to.current,Ke(to)}function es(e,i){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,ut(a)),ct!==null)for(a=ct.return;a!==null;){var h=a;switch(Pc(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&zl();break;case 3:Xs(),Ke(Qt),Ke(At),Bc();break;case 5:zc(h);break;case 4:Xs();break;case 13:Ke(et);break;case 19:Ke(et);break;case 10:Mc(h.type._context);break;case 22:case 23:gh()}a=a.return}if(yt=e,ct=e=mr(e.current,null),kt=mn=i,_t=0,ma=null,ch=ou=Xr=0,en=ga=null,qr!==null){for(i=0;i<qr.length;i++)if(a=qr[i],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,_=a.pending;if(_!==null){var v=_.next;_.next=f,h.next=v}a.pending=h}qr=null}return e}function fp(e,i){do{var a=ct;try{if(Rc(),ql.current=Jl,Yl){for(var h=tt.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Yl=!1}if(Qr=0,vt=pt=tt=null,ca=!1,ha=0,uh.current=null,a===null||a.return===null){_t=1,ma=i,ct=null;break}e:{var _=e,v=a.return,E=a,P=i;if(i=kt,E.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var z=P,H=E,Z=H.tag;if(!(H.mode&1)&&(Z===0||Z===11||Z===15)){var U=H.alternate;U?(H.updateQueue=U.updateQueue,H.memoizedState=U.memoizedState,H.lanes=U.lanes):(H.updateQueue=null,H.memoizedState=null)}var J=Ff(v);if(J!==null){J.flags&=-257,Bf(J,v,E,_,i),J.mode&1&&zf(_,z,i),i=J,P=z;var te=i.updateQueue;if(te===null){var re=new Set;re.add(P),i.updateQueue=re}else te.add(P);break e}else{if(!(i&1)){zf(_,z,i),vh();break e}P=Error(r(426))}}else if(Ye&&E.mode&1){var at=Ff(v);if(at!==null){!(at.flags&65536)&&(at.flags|=256),Bf(at,v,E,_,i),Ic(Js(P,E));break e}}_=P=Js(P,E),_t!==4&&(_t=2),ga===null?ga=[_]:ga.push(_),_=v;do{switch(_.tag){case 3:_.flags|=65536,i&=-i,_.lanes|=i;var O=Df(_,P,i);lf(_,O);break e;case 1:E=P;var I=_.type,D=_.stateNode;if(!(_.flags&128)&&(typeof I.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(dr===null||!dr.has(D)))){_.flags|=65536,i&=-i,_.lanes|=i;var G=bf(_,E,i);lf(_,G);break e}}_=_.return}while(_!==null)}mp(a)}catch(ae){i=ae,ct===a&&a!==null&&(ct=a=a.return);continue}break}while(!0)}function pp(){var e=su.current;return su.current=Jl,e===null?Jl:e}function vh(){(_t===0||_t===3||_t===2)&&(_t=4),yt===null||!(Xr&268435455)&&!(ou&268435455)||_r(yt,kt)}function du(e,i){var a=Ie;Ie|=2;var h=pp();(yt!==e||kt!==i)&&(ki=null,es(e,i));do try{Lg();break}catch(f){fp(e,f)}while(!0);if(Rc(),Ie=a,su.current=h,ct!==null)throw Error(r(261));return yt=null,kt=0,_t}function Lg(){for(;ct!==null;)_p(ct)}function Ig(){for(;ct!==null&&!sc();)_p(ct)}function _p(e){var i=yp(e.alternate,e,mn);e.memoizedProps=e.pendingProps,i===null?mp(e):ct=i,uh.current=null}function mp(e){var i=e;do{var a=i.alternate;if(e=i.return,i.flags&32768){if(a=Sg(a,i),a!==null){a.flags&=32767,ct=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_t=6,ct=null;return}}else if(a=Cg(a,i,mn),a!==null){ct=a;return}if(i=i.sibling,i!==null){ct=i;return}ct=i=e}while(i!==null);_t===0&&(_t=5)}function ts(e,i,a){var h=ke,f=kn.transition;try{kn.transition=null,ke=1,Ng(e,i,a,h)}finally{kn.transition=f,ke=h}return null}function Ng(e,i,a,h){do io();while(fr!==null);if(Ie&6)throw Error(r(327));a=e.finishedWork;var f=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var _=a.lanes|a.childLanes;if(nt(e,_),e===yt&&(ct=yt=null,kt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||lu||(lu=!0,wp(ws,function(){return io(),null})),_=(a.flags&15990)!==0,a.subtreeFlags&15990||_){_=kn.transition,kn.transition=null;var v=ke;ke=1;var E=Ie;Ie|=4,uh.current=null,xg(e,a),op(a,e),wn(ce),Fr=!!Q,ce=Q=null,e.current=a,Tg(a),ys(),Ie=E,ke=v,kn.transition=_}else e.current=a;if(lu&&(lu=!1,fr=e,uu=f),_=e.pendingLanes,_===0&&(dr=null),Or(a.stateNode),tn(e,Xe()),i!==null)for(h=e.onRecoverableError,a=0;a<i.length;a++)f=i[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(au)throw au=!1,e=dh,dh=null,e;return uu&1&&e.tag!==0&&io(),_=e.pendingLanes,_&1?e===fh?va++:(va=0,fh=e):va=0,lr(),null}function io(){if(fr!==null){var e=ji(uu),i=kn.transition,a=ke;try{if(kn.transition=null,ke=16>e?16:e,fr===null)var h=!1;else{if(e=fr,fr=null,uu=0,Ie&6)throw Error(r(331));var f=Ie;for(Ie|=4,ee=e.current;ee!==null;){var _=ee,v=_.child;if(ee.flags&16){var E=_.deletions;if(E!==null){for(var P=0;P<E.length;P++){var z=E[P];for(ee=z;ee!==null;){var H=ee;switch(H.tag){case 0:case 11:case 15:_a(8,H,_)}var Z=H.child;if(Z!==null)Z.return=H,ee=Z;else for(;ee!==null;){H=ee;var U=H.sibling,J=H.return;if(tp(H),H===z){ee=null;break}if(U!==null){U.return=J,ee=U;break}ee=J}}}var te=_.alternate;if(te!==null){var re=te.child;if(re!==null){te.child=null;do{var at=re.sibling;re.sibling=null,re=at}while(re!==null)}}ee=_}}if(_.subtreeFlags&2064&&v!==null)v.return=_,ee=v;else e:for(;ee!==null;){if(_=ee,_.flags&2048)switch(_.tag){case 0:case 11:case 15:_a(9,_,_.return)}var O=_.sibling;if(O!==null){O.return=_.return,ee=O;break e}ee=_.return}}var I=e.current;for(ee=I;ee!==null;){v=ee;var D=v.child;if(v.subtreeFlags&2064&&D!==null)D.return=v,ee=D;else e:for(v=I;ee!==null;){if(E=ee,E.flags&2048)try{switch(E.tag){case 0:case 11:case 15:ru(9,E)}}catch(ae){it(E,E.return,ae)}if(E===v){ee=null;break e}var G=E.sibling;if(G!==null){G.return=E.return,ee=G;break e}ee=E.return}}if(Ie=f,lr(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Mr,e)}catch{}h=!0}return h}finally{ke=a,kn.transition=i}}return!1}function gp(e,i,a){i=Js(a,i),i=Df(e,i,1),e=cr(e,i,1),i=Vt(),e!==null&&(an(e,1,i),tn(e,i))}function it(e,i,a){if(e.tag===3)gp(e,e,a);else for(;i!==null;){if(i.tag===3){gp(i,e,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(dr===null||!dr.has(h))){e=Js(a,e),e=bf(i,e,1),i=cr(i,e,1),e=Vt(),i!==null&&(an(i,1,e),tn(i,e));break}}i=i.return}}function Rg(e,i,a){var h=e.pingCache;h!==null&&h.delete(i),i=Vt(),e.pingedLanes|=e.suspendedLanes&a,yt===e&&(kt&a)===a&&(_t===4||_t===3&&(kt&130023424)===kt&&500>Xe()-hh?es(e,0):ch|=a),tn(e,i)}function vp(e,i){i===0&&(e.mode&1?(i=Ui,Ui<<=1,!(Ui&130023424)&&(Ui=4194304)):i=1);var a=Vt();e=xi(e,i),e!==null&&(an(e,i,a),tn(e,a))}function Mg(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),vp(e,a)}function Og(e,i){var a=0;switch(e.tag){case 13:var h=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=e.stateNode;break;default:throw Error(r(314))}h!==null&&h.delete(i),vp(e,a)}var yp;yp=function(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps||Qt.current)Jt=!0;else{if(!(e.lanes&a)&&!(i.flags&128))return Jt=!1,wg(e,i,a);Jt=!!(e.flags&131072)}else Jt=!1,Ye&&i.flags&1048576&&Qd(i,Ul,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;nu(e,i),e=i.pendingProps;var f=Vs(i,At.current);Qs(i,a),f=Hc(null,i,h,e,f,a);var _=jc();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Xt(h)?(_=!0,Fl(i)):_=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Dc(i),f.updater=eu,i.stateNode=f,f._reactInternals=i,qc(i,h,e,a),i=Jc(null,i,h,!0,_,a)):(i.tag=0,Ye&&_&&Tc(i),Zt(null,i,f,a),i=i.child),i;case 16:h=i.elementType;e:{switch(nu(e,i),e=i.pendingProps,f=h._init,h=f(h._payload),i.type=h,f=i.tag=Dg(h),e=Fn(h,e),f){case 0:i=Xc(null,i,h,e,a);break e;case 1:i=Vf(null,i,h,e,a);break e;case 11:i=Wf(null,i,h,e,a);break e;case 14:i=Uf(null,i,h,Fn(h.type,e),a);break e}throw Error(r(306,h,""))}return i;case 0:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:Fn(h,f),Xc(e,i,h,f,a);case 1:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:Fn(h,f),Vf(e,i,h,f,a);case 3:e:{if($f(i),e===null)throw Error(r(387));h=i.pendingProps,_=i.memoizedState,f=_.element,af(e,i),Gl(i,h,null,a);var v=i.memoizedState;if(h=v.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=_,i.memoizedState=_,i.flags&256){f=Js(Error(r(423)),i),i=Gf(e,i,h,a,f);break e}else if(h!==f){f=Js(Error(r(424)),i),i=Gf(e,i,h,a,f);break e}else for(_n=Jn(i.stateNode.containerInfo.firstChild),pn=i,Ye=!0,zn=null,a=sf(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ks(),h===f){i=Pi(e,i,a);break e}Zt(e,i,h,a)}i=i.child}return i;case 5:return cf(i),e===null&&Lc(i),h=i.type,f=i.pendingProps,_=e!==null?e.memoizedProps:null,v=f.children,ve(h,f)?v=null:_!==null&&ve(h,_)&&(i.flags|=32),Zf(e,i),Zt(e,i,v,a),i.child;case 6:return e===null&&Lc(i),null;case 13:return Kf(e,i,a);case 4:return bc(i,i.stateNode.containerInfo),h=i.pendingProps,e===null?i.child=qs(i,null,h,a):Zt(e,i,h,a),i.child;case 11:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:Fn(h,f),Wf(e,i,h,f,a);case 7:return Zt(e,i,i.pendingProps,a),i.child;case 8:return Zt(e,i,i.pendingProps.children,a),i.child;case 12:return Zt(e,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,f=i.pendingProps,_=i.memoizedProps,v=f.value,He(Zl,h._currentValue),h._currentValue=v,_!==null)if(dn(_.value,v)){if(_.children===f.children&&!Qt.current){i=Pi(e,i,a);break e}}else for(_=i.child,_!==null&&(_.return=i);_!==null;){var E=_.dependencies;if(E!==null){v=_.child;for(var P=E.firstContext;P!==null;){if(P.context===h){if(_.tag===1){P=Ti(-1,a&-a),P.tag=2;var z=_.updateQueue;if(z!==null){z=z.shared;var H=z.pending;H===null?P.next=P:(P.next=H.next,H.next=P),z.pending=P}}_.lanes|=a,P=_.alternate,P!==null&&(P.lanes|=a),Oc(_.return,a,i),E.lanes|=a;break}P=P.next}}else if(_.tag===10)v=_.type===i.type?null:_.child;else if(_.tag===18){if(v=_.return,v===null)throw Error(r(341));v.lanes|=a,E=v.alternate,E!==null&&(E.lanes|=a),Oc(v,a,i),v=_.sibling}else v=_.child;if(v!==null)v.return=_;else for(v=_;v!==null;){if(v===i){v=null;break}if(_=v.sibling,_!==null){_.return=v.return,v=_;break}v=v.return}_=v}Zt(e,i,f.children,a),i=i.child}return i;case 9:return f=i.type,h=i.pendingProps.children,Qs(i,a),f=Tn(f),h=h(f),i.flags|=1,Zt(e,i,h,a),i.child;case 14:return h=i.type,f=Fn(h,i.pendingProps),f=Fn(h.type,f),Uf(e,i,h,f,a);case 15:return Hf(e,i,i.type,i.pendingProps,a);case 17:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:Fn(h,f),nu(e,i),i.tag=1,Xt(h)?(e=!0,Fl(i)):e=!1,Qs(i,a),Of(i,h,f),qc(i,h,f,a),Jc(null,i,h,!0,e,a);case 19:return Yf(e,i,a);case 22:return jf(e,i,a)}throw Error(r(156,i.tag))};function wp(e,i){return dl(e,i)}function Ag(e,i,a,h){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(e,i,a,h){return new Ag(e,i,a,h)}function yh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Dg(e){if(typeof e=="function")return yh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$e)return 11;if(e===sn)return 14}return 2}function mr(e,i){var a=e.alternate;return a===null?(a=Ln(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function fu(e,i,a,h,f,_){var v=2;if(h=e,typeof e=="function")yh(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case ht:return ns(a.children,f,_,i);case Et:v=8,f|=8;break;case Wt:return e=Ln(12,a,i,f|2),e.elementType=Wt,e.lanes=_,e;case xt:return e=Ln(13,a,i,f),e.elementType=xt,e.lanes=_,e;case Qe:return e=Ln(19,a,i,f),e.elementType=Qe,e.lanes=_,e;case V:return pu(a,f,_,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Kt:v=10;break e;case qe:v=9;break e;case $e:v=11;break e;case sn:v=14;break e;case Oe:v=16,h=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return i=Ln(v,a,i,f),i.elementType=e,i.type=h,i.lanes=_,i}function ns(e,i,a,h){return e=Ln(7,e,h,i),e.lanes=a,e}function pu(e,i,a,h){return e=Ln(22,e,h,i),e.elementType=V,e.lanes=a,e.stateNode={isHidden:!1},e}function wh(e,i,a){return e=Ln(6,e,null,i),e.lanes=a,e}function Ch(e,i,a){return i=Ln(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function bg(e,i,a,h,f){this.tag=i,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hi(0),this.expirationTimes=Hi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Sh(e,i,a,h,f,_,v,E,P){return e=new bg(e,i,a,E,P),i===1?(i=1,_===!0&&(i|=8)):i=0,_=Ln(3,null,null,i),e.current=_,_.stateNode=e,_.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dc(_),e}function zg(e,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ot,key:h==null?null:""+h,children:e,containerInfo:i,implementation:a}}function Cp(e){if(!e)return ar;e=e._reactInternals;e:{if(Vn(e)!==e||e.tag!==1)throw Error(r(170));var i=e;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Xt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(e.tag===1){var a=e.type;if(Xt(a))return Kd(e,a,i)}return i}function Sp(e,i,a,h,f,_,v,E,P){return e=Sh(a,h,!0,e,f,_,v,E,P),e.context=Cp(null),a=e.current,h=Vt(),f=pr(a),_=Ti(h,f),_.callback=i??null,cr(a,_,f),e.current.lanes=f,an(e,f,h),tn(e,h),e}function _u(e,i,a,h){var f=i.current,_=Vt(),v=pr(f);return a=Cp(a),i.context===null?i.context=a:i.pendingContext=a,i=Ti(_,v),i.payload={element:e},h=h===void 0?null:h,h!==null&&(i.callback=h),e=cr(f,i,v),e!==null&&(Un(e,f,v,_),$l(e,f,v)),v}function mu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ep(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Eh(e,i){Ep(e,i),(e=e.alternate)&&Ep(e,i)}var xp=typeof reportError=="function"?reportError:function(e){console.error(e)};function xh(e){this._internalRoot=e}gu.prototype.render=xh.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));_u(e,i,null,null)},gu.prototype.unmount=xh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Jr(function(){_u(null,e,null,null)}),i[Ae]=null}};function gu(e){this._internalRoot=e}gu.prototype.unstable_scheduleHydration=function(e){if(e){var i=Ts();e={blockedOn:null,target:e,priority:i};for(var a=0;a<dt.length&&i!==0&&i<dt[a].priority;a++);dt.splice(a,0,e),a===0&&Ps(e)}};function Th(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tp(){}function Fg(e,i,a,h,f){if(f){if(typeof h=="function"){var _=h;h=function(){var z=mu(v);_.call(z)}}var v=Sp(i,h,e,0,null,!1,!1,"",Tp);return e._reactRootContainer=v,e[Ae]=v.current,nr(e.nodeType===8?e.parentNode:e),Jr(),v}for(;f=e.lastChild;)e.removeChild(f);if(typeof h=="function"){var E=h;h=function(){var z=mu(P);E.call(z)}}var P=Sh(e,0,!1,null,null,!1,!1,"",Tp);return e._reactRootContainer=P,e[Ae]=P.current,nr(e.nodeType===8?e.parentNode:e),Jr(function(){_u(i,P,a,h)}),P}function yu(e,i,a,h,f){var _=a._reactRootContainer;if(_){var v=_;if(typeof f=="function"){var E=f;f=function(){var P=mu(v);E.call(P)}}_u(i,v,e,f)}else v=Fg(a,i,e,f,h);return mu(v)}Es=function(e){switch(e.tag){case 3:var i=e.stateNode;if(i.current.memoizedState.isDehydrated){var a=me(i.pendingLanes);a!==0&&(Mn(i,a|1),tn(i,Xe()),!(Ie&6)&&(no=Xe()+500,lr()))}break;case 13:Jr(function(){var h=xi(e,1);if(h!==null){var f=Vt();Un(h,e,1,f)}}),Eh(e,1)}},ui=function(e){if(e.tag===13){var i=xi(e,134217728);if(i!==null){var a=Vt();Un(i,e,134217728,a)}Eh(e,134217728)}},xs=function(e){if(e.tag===13){var i=pr(e),a=xi(e,i);if(a!==null){var h=Vt();Un(a,e,i,h)}Eh(e,i)}},Ts=function(){return ke},Ar=function(e,i){var a=ke;try{return ke=e,i()}finally{ke=a}},ms=function(e,i,a){switch(i){case"input":if(Pr(e,a),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==e&&h.form===e.form){var f=js(h);if(!f)throw Error(r(90));Ai(h),Pr(h,f)}}}break;case"textarea":Ja(e,a);break;case"select":i=a.value,i!=null&&Zn(e,!!a.multiple,i,!1)}},ol=mh,al=Jr;var Bg={usingClientEntryPoint:!1,Events:[yi,wi,js,rl,sl,mh]},ya={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wg={bundleType:ya.bundleType,version:ya.version,rendererPackageName:ya.rendererPackageName,rendererConfig:ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:be.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cl(e),e===null?null:e.stateNode},findFiberByHostInstance:ya.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wu.isDisabled&&wu.supportsFiber)try{Mr=wu.inject(Wg),on=wu}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bg,nn.createPortal=function(e,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Th(i))throw Error(r(200));return zg(e,i,null,a)},nn.createRoot=function(e,i){if(!Th(e))throw Error(r(299));var a=!1,h="",f=xp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=Sh(e,1,!1,null,null,a,!1,h,f),e[Ae]=i.current,nr(e.nodeType===8?e.parentNode:e),new xh(i)},nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=cl(i),e=e===null?null:e.stateNode,e},nn.flushSync=function(e){return Jr(e)},nn.hydrate=function(e,i,a){if(!vu(i))throw Error(r(200));return yu(null,e,i,!0,a)},nn.hydrateRoot=function(e,i,a){if(!Th(e))throw Error(r(405));var h=a!=null&&a.hydratedSources||null,f=!1,_="",v=xp;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(_=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=Sp(i,null,e,1,a??null,f,!1,_,v),e[Ae]=i.current,nr(e),h)for(e=0;e<h.length;e++)a=h[e],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new gu(i)},nn.render=function(e,i,a){if(!vu(i))throw Error(r(200));return yu(null,e,i,!1,a)},nn.unmountComponentAtNode=function(e){if(!vu(e))throw Error(r(40));return e._reactRootContainer?(Jr(function(){yu(null,null,e,!1,function(){e._reactRootContainer=null,e[Ae]=null})}),!0):!1},nn.unstable_batchedUpdates=mh,nn.unstable_renderSubtreeIntoContainer=function(e,i,a,h){if(!vu(a))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return yu(e,i,a,!1,h)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var Op;function I_(){if(Op)return Lh.exports;Op=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Lh.exports=Gg(),Lh.exports}var Ap;function Kg(){if(Ap)return Cu;Ap=1;var s=I_();return Cu.createRoot=s.createRoot,Cu.hydrateRoot=s.hydrateRoot,Cu}var qg=Kg(),Dp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(s,n){if(!s)throw mo(n)},mo=function(s){return new Error("Firebase Database ("+N_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=function(s){const n=[];let r=0;for(let l=0;l<s.length;l++){let c=s.charCodeAt(l);c<128?n[r++]=c:c<2048?(n[r++]=c>>6|192,n[r++]=c&63|128):(c&64512)===55296&&l+1<s.length&&(s.charCodeAt(l+1)&64512)===56320?(c=65536+((c&1023)<<10)+(s.charCodeAt(++l)&1023),n[r++]=c>>18|240,n[r++]=c>>12&63|128,n[r++]=c>>6&63|128,n[r++]=c&63|128):(n[r++]=c>>12|224,n[r++]=c>>6&63|128,n[r++]=c&63|128)}return n},Yg=function(s){const n=[];let r=0,l=0;for(;r<s.length;){const c=s[r++];if(c<128)n[l++]=String.fromCharCode(c);else if(c>191&&c<224){const p=s[r++];n[l++]=String.fromCharCode((c&31)<<6|p&63)}else if(c>239&&c<365){const p=s[r++],m=s[r++],w=s[r++],C=((c&7)<<18|(p&63)<<12|(m&63)<<6|w&63)-65536;n[l++]=String.fromCharCode(55296+(C>>10)),n[l++]=String.fromCharCode(56320+(C&1023))}else{const p=s[r++],m=s[r++];n[l++]=String.fromCharCode((c&15)<<12|(p&63)<<6|m&63)}}return n.join("")},hd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,n){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,l=[];for(let c=0;c<s.length;c+=3){const p=s[c],m=c+1<s.length,w=m?s[c+1]:0,C=c+2<s.length,S=C?s[c+2]:0,N=p>>2,k=(p&3)<<4|w>>4;let R=(w&15)<<2|S>>6,j=S&63;C||(j=64,m||(R=64)),l.push(r[N],r[k],r[R],r[j])}return l.join("")},encodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(s):this.encodeByteArray(R_(s),n)},decodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(s):Yg(this.decodeStringToByteArray(s,n))},decodeStringToByteArray(s,n){this.init_();const r=n?this.charToByteMapWebSafe_:this.charToByteMap_,l=[];for(let c=0;c<s.length;){const p=r[s.charAt(c++)],w=c<s.length?r[s.charAt(c)]:0;++c;const S=c<s.length?r[s.charAt(c)]:64;++c;const k=c<s.length?r[s.charAt(c)]:64;if(++c,p==null||w==null||S==null||k==null)throw new Qg;const R=p<<2|w>>4;if(l.push(R),S!==64){const j=w<<4&240|S>>2;if(l.push(j),k!==64){const Y=S<<6&192|k;l.push(Y)}}}return l},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Qg extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M_=function(s){const n=R_(s);return hd.encodeByteArray(n,!0)},Pu=function(s){return M_(s).replace(/\./g,"")},jh=function(s){try{return hd.decodeString(s,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(s){return O_(void 0,s)}function O_(s,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:const r=n;return new Date(r.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return n}for(const r in n)!n.hasOwnProperty(r)||!Jg(r)||(s[r]=O_(s[r],n[r]));return s}function Jg(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=()=>ev().__FIREBASE_DEFAULTS__,nv=()=>{if(typeof process>"u"||typeof Dp>"u")return;const s=Dp.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},iv=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=s&&jh(s[1]);return n&&JSON.parse(n)},A_=()=>{try{return tv()||nv()||iv()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},rv=s=>{var n,r;return(r=(n=A_())===null||n===void 0?void 0:n.emulatorHosts)===null||r===void 0?void 0:r[s]},sv=s=>{const n=rv(s);if(!n)return;const r=n.lastIndexOf(":");if(r<=0||r+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const l=parseInt(n.substring(r+1),10);return n[0]==="["?[n.substring(1,r-1),l]:[n.substring(0,r),l]},D_=()=>{var s;return(s=A_())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}wrapCallback(n){return(r,l)=>{r?this.reject(r):this.resolve(l),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(r):n(r,l))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(s,n){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},l=n||"demo-project",c=s.iat||0,p=s.sub||s.user_id;if(!p)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m=Object.assign({iss:`https://securetoken.google.com/${l}`,aud:l,iat:c,exp:c+3600,auth_time:c,sub:p,user_id:p,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Pu(JSON.stringify(r)),Pu(JSON.stringify(m)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(av())}function lv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uv(){return N_.NODE_ADMIN===!0}function cv(){try{return typeof indexedDB=="object"}catch{return!1}}function hv(){return new Promise((s,n)=>{try{let r=!0;const l="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(l);c.onsuccess=()=>{c.result.close(),r||self.indexedDB.deleteDatabase(l),s(!0)},c.onupgradeneeded=()=>{r=!1},c.onerror=()=>{var p;n(((p=c.error)===null||p===void 0?void 0:p.message)||"")}}catch(r){n(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="FirebaseError";class $a extends Error{constructor(n,r,l){super(r),this.code=n,this.customData=l,this.name=dv,Object.setPrototypeOf(this,$a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,z_.prototype.create)}}class z_{constructor(n,r,l){this.service=n,this.serviceName=r,this.errors=l}create(n,...r){const l=r[0]||{},c=`${this.service}/${n}`,p=this.errors[n],m=p?fv(p,l):"Error",w=`${this.serviceName}: ${m} (${c}).`;return new $a(c,w,l)}}function fv(s,n){return s.replace(pv,(r,l)=>{const c=n[l];return c!=null?String(c):`<${l}?>`})}const pv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(s){return JSON.parse(s)}function gt(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=function(s){let n={},r={},l={},c="";try{const p=s.split(".");n=Oa(jh(p[0])||""),r=Oa(jh(p[1])||""),c=p[2],l=r.d||{},delete r.d}catch{}return{header:n,claims:r,data:l,signature:c}},_v=function(s){const n=F_(s),r=n.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},mv=function(s){const n=F_(s).claims;return typeof n=="object"&&n.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(s,n){return Object.prototype.hasOwnProperty.call(s,n)}function uo(s,n){if(Object.prototype.hasOwnProperty.call(s,n))return s[n]}function bp(s){for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n))return!1;return!0}function ku(s,n,r){const l={};for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&(l[c]=n.call(r,s[c],c,s));return l}function Zh(s,n){if(s===n)return!0;const r=Object.keys(s),l=Object.keys(n);for(const c of r){if(!l.includes(c))return!1;const p=s[c],m=n[c];if(zp(p)&&zp(m)){if(!Zh(p,m))return!1}else if(p!==m)return!1}for(const c of l)if(!r.includes(c))return!1;return!0}function zp(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(s){const n=[];for(const[r,l]of Object.entries(s))Array.isArray(l)?l.forEach(c=>{n.push(encodeURIComponent(r)+"="+encodeURIComponent(c))}):n.push(encodeURIComponent(r)+"="+encodeURIComponent(l));return n.length?"&"+n.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,r){r||(r=0);const l=this.W_;if(typeof n=="string")for(let k=0;k<16;k++)l[k]=n.charCodeAt(r)<<24|n.charCodeAt(r+1)<<16|n.charCodeAt(r+2)<<8|n.charCodeAt(r+3),r+=4;else for(let k=0;k<16;k++)l[k]=n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3],r+=4;for(let k=16;k<80;k++){const R=l[k-3]^l[k-8]^l[k-14]^l[k-16];l[k]=(R<<1|R>>>31)&4294967295}let c=this.chain_[0],p=this.chain_[1],m=this.chain_[2],w=this.chain_[3],C=this.chain_[4],S,N;for(let k=0;k<80;k++){k<40?k<20?(S=w^p&(m^w),N=1518500249):(S=p^m^w,N=1859775393):k<60?(S=p&m|w&(p|m),N=2400959708):(S=p^m^w,N=3395469782);const R=(c<<5|c>>>27)+S+C+N+l[k]&4294967295;C=w,w=m,m=(p<<30|p>>>2)&4294967295,p=c,c=R}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+p&4294967295,this.chain_[2]=this.chain_[2]+m&4294967295,this.chain_[3]=this.chain_[3]+w&4294967295,this.chain_[4]=this.chain_[4]+C&4294967295}update(n,r){if(n==null)return;r===void 0&&(r=n.length);const l=r-this.blockSize;let c=0;const p=this.buf_;let m=this.inbuf_;for(;c<r;){if(m===0)for(;c<=l;)this.compress_(n,c),c+=this.blockSize;if(typeof n=="string"){for(;c<r;)if(p[m]=n.charCodeAt(c),++m,++c,m===this.blockSize){this.compress_(p),m=0;break}}else for(;c<r;)if(p[m]=n[c],++m,++c,m===this.blockSize){this.compress_(p),m=0;break}}this.inbuf_=m,this.total_+=r}digest(){const n=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let c=this.blockSize-1;c>=56;c--)this.buf_[c]=r&255,r/=256;this.compress_(this.buf_);let l=0;for(let c=0;c<5;c++)for(let p=24;p>=0;p-=8)n[l]=this.chain_[c]>>p&255,++l;return n}}function ju(s,n){return`${s} failed: ${n} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=function(s){const n=[];let r=0;for(let l=0;l<s.length;l++){let c=s.charCodeAt(l);if(c>=55296&&c<=56319){const p=c-55296;l++,K(l<s.length,"Surrogate pair missing trail surrogate.");const m=s.charCodeAt(l)-56320;c=65536+(p<<10)+m}c<128?n[r++]=c:c<2048?(n[r++]=c>>6|192,n[r++]=c&63|128):c<65536?(n[r++]=c>>12|224,n[r++]=c>>6&63|128,n[r++]=c&63|128):(n[r++]=c>>18|240,n[r++]=c>>12&63|128,n[r++]=c>>6&63|128,n[r++]=c&63|128)}return n},Zu=function(s){let n=0;for(let r=0;r<s.length;r++){const l=s.charCodeAt(r);l<128?n++:l<2048?n+=2:l>=55296&&l<=56319?(n+=4,r++):n+=3}return n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(s){return s&&s._delegate?s._delegate:s}class Aa{constructor(n,r,l){this.name=n,this.instanceFactory=r,this.type=l,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(n,r){this.name=n,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const r=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(r)){const l=new Va;if(this.instancesDeferred.set(r,l),this.isInitialized(r)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:r});c&&l.resolve(c)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(n){var r;const l=this.normalizeInstanceIdentifier(n==null?void 0:n.identifier),c=(r=n==null?void 0:n.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(l)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:l})}catch(p){if(c)return null;throw p}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(Sv(n))try{this.getOrInitializeService({instanceIdentifier:is})}catch{}for(const[r,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(r);try{const p=this.getOrInitializeService({instanceIdentifier:c});l.resolve(p)}catch{}}}}clearInstance(n=is){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=is){return this.instances.has(n)}getOptions(n=is){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:r={}}=n,l=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(l))throw Error(`${this.name}(${l}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:l,options:r});for(const[p,m]of this.instancesDeferred.entries()){const w=this.normalizeInstanceIdentifier(p);l===w&&m.resolve(c)}return c}onInit(n,r){var l;const c=this.normalizeInstanceIdentifier(r),p=(l=this.onInitCallbacks.get(c))!==null&&l!==void 0?l:new Set;p.add(n),this.onInitCallbacks.set(c,p);const m=this.instances.get(c);return m&&n(m,c),()=>{p.delete(n)}}invokeOnInitCallbacks(n,r){const l=this.onInitCallbacks.get(r);if(l)for(const c of l)try{c(n,r)}catch{}}getOrInitializeService({instanceIdentifier:n,options:r={}}){let l=this.instances.get(n);if(!l&&this.component&&(l=this.component.instanceFactory(this.container,{instanceIdentifier:Cv(n),options:r}),this.instances.set(n,l),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(l,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,l)}catch{}return l||null}normalizeInstanceIdentifier(n=is){return this.component?this.component.multipleInstances?n:is:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cv(s){return s===is?void 0:s}function Sv(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const r=this.getProvider(n.name);if(r.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);r.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const r=new wv(n,this);return this.providers.set(n,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ze||(Ze={}));const xv={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},Tv=Ze.INFO,Pv={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},kv=(s,n,...r)=>{if(n<s.logLevel)return;const l=new Date().toISOString(),c=Pv[n];if(c)console[c](`[${l}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class B_{constructor(n){this.name=n,this._logLevel=Tv,this._logHandler=kv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in Ze))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?xv[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...n),this._logHandler(this,Ze.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...n),this._logHandler(this,Ze.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...n),this._logHandler(this,Ze.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...n),this._logHandler(this,Ze.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...n),this._logHandler(this,Ze.ERROR,...n)}}const Lv=(s,n)=>n.some(r=>s instanceof r);let Fp,Bp;function Iv(){return Fp||(Fp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nv(){return Bp||(Bp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W_=new WeakMap,Vh=new WeakMap,U_=new WeakMap,Rh=new WeakMap,dd=new WeakMap;function Rv(s){const n=new Promise((r,l)=>{const c=()=>{s.removeEventListener("success",p),s.removeEventListener("error",m)},p=()=>{r(yr(s.result)),c()},m=()=>{l(s.error),c()};s.addEventListener("success",p),s.addEventListener("error",m)});return n.then(r=>{r instanceof IDBCursor&&W_.set(r,s)}).catch(()=>{}),dd.set(n,s),n}function Mv(s){if(Vh.has(s))return;const n=new Promise((r,l)=>{const c=()=>{s.removeEventListener("complete",p),s.removeEventListener("error",m),s.removeEventListener("abort",m)},p=()=>{r(),c()},m=()=>{l(s.error||new DOMException("AbortError","AbortError")),c()};s.addEventListener("complete",p),s.addEventListener("error",m),s.addEventListener("abort",m)});Vh.set(s,n)}let $h={get(s,n,r){if(s instanceof IDBTransaction){if(n==="done")return Vh.get(s);if(n==="objectStoreNames")return s.objectStoreNames||U_.get(s);if(n==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return yr(s[n])},set(s,n,r){return s[n]=r,!0},has(s,n){return s instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in s}};function Ov(s){$h=s($h)}function Av(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...r){const l=s.call(Mh(this),n,...r);return U_.set(l,n.sort?n.sort():[n]),yr(l)}:Nv().includes(s)?function(...n){return s.apply(Mh(this),n),yr(W_.get(this))}:function(...n){return yr(s.apply(Mh(this),n))}}function Dv(s){return typeof s=="function"?Av(s):(s instanceof IDBTransaction&&Mv(s),Lv(s,Iv())?new Proxy(s,$h):s)}function yr(s){if(s instanceof IDBRequest)return Rv(s);if(Rh.has(s))return Rh.get(s);const n=Dv(s);return n!==s&&(Rh.set(s,n),dd.set(n,s)),n}const Mh=s=>dd.get(s);function bv(s,n,{blocked:r,upgrade:l,blocking:c,terminated:p}={}){const m=indexedDB.open(s,n),w=yr(m);return l&&m.addEventListener("upgradeneeded",C=>{l(yr(m.result),C.oldVersion,C.newVersion,yr(m.transaction),C)}),r&&m.addEventListener("blocked",C=>r(C.oldVersion,C.newVersion,C)),w.then(C=>{p&&C.addEventListener("close",()=>p()),c&&C.addEventListener("versionchange",S=>c(S.oldVersion,S.newVersion,S))}).catch(()=>{}),w}const zv=["get","getKey","getAll","getAllKeys","count"],Fv=["put","add","delete","clear"],Oh=new Map;function Wp(s,n){if(!(s instanceof IDBDatabase&&!(n in s)&&typeof n=="string"))return;if(Oh.get(n))return Oh.get(n);const r=n.replace(/FromIndex$/,""),l=n!==r,c=Fv.includes(r);if(!(r in(l?IDBIndex:IDBObjectStore).prototype)||!(c||zv.includes(r)))return;const p=async function(m,...w){const C=this.transaction(m,c?"readwrite":"readonly");let S=C.store;return l&&(S=S.index(w.shift())),(await Promise.all([S[r](...w),c&&C.done]))[0]};return Oh.set(n,p),p}Ov(s=>({...s,get:(n,r,l)=>Wp(n,r)||s.get(n,r,l),has:(n,r)=>!!Wp(n,r)||s.has(n,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Wv(r)){const l=r.getImmediate();return`${l.library}/${l.version}`}else return null}).filter(r=>r).join(" ")}}function Wv(s){const n=s.getComponent();return(n==null?void 0:n.type)==="VERSION"}const Gh="@firebase/app",Up="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new B_("@firebase/app"),Uv="@firebase/app-compat",Hv="@firebase/analytics-compat",jv="@firebase/analytics",Zv="@firebase/app-check-compat",Vv="@firebase/app-check",$v="@firebase/auth",Gv="@firebase/auth-compat",Kv="@firebase/database",qv="@firebase/data-connect",Yv="@firebase/database-compat",Qv="@firebase/functions",Xv="@firebase/functions-compat",Jv="@firebase/installations",ey="@firebase/installations-compat",ty="@firebase/messaging",ny="@firebase/messaging-compat",iy="@firebase/performance",ry="@firebase/performance-compat",sy="@firebase/remote-config",oy="@firebase/remote-config-compat",ay="@firebase/storage",ly="@firebase/storage-compat",uy="@firebase/firestore",cy="@firebase/vertexai",hy="@firebase/firestore-compat",dy="firebase",fy="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="[DEFAULT]",py={[Gh]:"fire-core",[Uv]:"fire-core-compat",[jv]:"fire-analytics",[Hv]:"fire-analytics-compat",[Vv]:"fire-app-check",[Zv]:"fire-app-check-compat",[$v]:"fire-auth",[Gv]:"fire-auth-compat",[Kv]:"fire-rtdb",[qv]:"fire-data-connect",[Yv]:"fire-rtdb-compat",[Qv]:"fire-fn",[Xv]:"fire-fn-compat",[Jv]:"fire-iid",[ey]:"fire-iid-compat",[ty]:"fire-fcm",[ny]:"fire-fcm-compat",[iy]:"fire-perf",[ry]:"fire-perf-compat",[sy]:"fire-rc",[oy]:"fire-rc-compat",[ay]:"fire-gcs",[ly]:"fire-gcs-compat",[uy]:"fire-fst",[hy]:"fire-fst-compat",[cy]:"fire-vertex","fire-js":"fire-js",[dy]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new Map,_y=new Map,qh=new Map;function Hp(s,n){try{s.container.addComponent(n)}catch(r){Ni.debug(`Component ${n.name} failed to register with FirebaseApp ${s.name}`,r)}}function Iu(s){const n=s.name;if(qh.has(n))return Ni.debug(`There were multiple attempts to register component ${n}.`),!1;qh.set(n,s);for(const r of Lu.values())Hp(r,s);for(const r of _y.values())Hp(r,s);return!0}function my(s,n){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new z_("app","Firebase",gy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(n,r,l){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=l,this.container.addComponent(new Aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=fy;function H_(s,n={}){let r=s;typeof n!="object"&&(n={name:n});const l=Object.assign({name:Kh,automaticDataCollectionEnabled:!1},n),c=l.name;if(typeof c!="string"||!c)throw wr.create("bad-app-name",{appName:String(c)});if(r||(r=D_()),!r)throw wr.create("no-options");const p=Lu.get(c);if(p){if(Zh(r,p.options)&&Zh(l,p.config))return p;throw wr.create("duplicate-app",{appName:c})}const m=new Ev(c);for(const C of qh.values())m.addComponent(C);const w=new vy(r,l,m);return Lu.set(c,w),w}function wy(s=Kh){const n=Lu.get(s);if(!n&&s===Kh&&D_())return H_();if(!n)throw wr.create("no-app",{appName:s});return n}function oo(s,n,r){var l;let c=(l=py[s])!==null&&l!==void 0?l:s;r&&(c+=`-${r}`);const p=c.match(/\s|\//),m=n.match(/\s|\//);if(p||m){const w=[`Unable to register library "${c}" with version "${n}":`];p&&w.push(`library name "${c}" contains illegal characters (whitespace or "/")`),p&&m&&w.push("and"),m&&w.push(`version name "${n}" contains illegal characters (whitespace or "/")`),Ni.warn(w.join(" "));return}Iu(new Aa(`${c}-version`,()=>({library:c,version:n}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="firebase-heartbeat-database",Sy=1,Da="firebase-heartbeat-store";let Ah=null;function j_(){return Ah||(Ah=bv(Cy,Sy,{upgrade:(s,n)=>{switch(n){case 0:try{s.createObjectStore(Da)}catch(r){console.warn(r)}}}}).catch(s=>{throw wr.create("idb-open",{originalErrorMessage:s.message})})),Ah}async function Ey(s){try{const r=(await j_()).transaction(Da),l=await r.objectStore(Da).get(Z_(s));return await r.done,l}catch(n){if(n instanceof $a)Ni.warn(n.message);else{const r=wr.create("idb-get",{originalErrorMessage:n==null?void 0:n.message});Ni.warn(r.message)}}}async function jp(s,n){try{const l=(await j_()).transaction(Da,"readwrite");await l.objectStore(Da).put(n,Z_(s)),await l.done}catch(r){if(r instanceof $a)Ni.warn(r.message);else{const l=wr.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ni.warn(l.message)}}}function Z_(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=1024,Ty=30*24*60*60*1e3;class Py{constructor(n){this.container=n,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Ly(r),this._heartbeatsCachePromise=this._storage.read().then(l=>(this._heartbeatsCache=l,l))}async triggerHeartbeat(){var n,r;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),p=Zp();return((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===p||this._heartbeatsCache.heartbeats.some(m=>m.date===p)?void 0:(this._heartbeatsCache.heartbeats.push({date:p,agent:c}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(m=>{const w=new Date(m.date).valueOf();return Date.now()-w<=Ty}),this._storage.overwrite(this._heartbeatsCache))}catch(l){Ni.warn(l)}}async getHeartbeatsHeader(){var n;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Zp(),{heartbeatsToSend:l,unsentEntries:c}=ky(this._heartbeatsCache.heartbeats),p=Pu(JSON.stringify({version:2,heartbeats:l}));return this._heartbeatsCache.lastSentHeartbeatDate=r,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),p}catch(r){return Ni.warn(r),""}}}function Zp(){return new Date().toISOString().substring(0,10)}function ky(s,n=xy){const r=[];let l=s.slice();for(const c of s){const p=r.find(m=>m.agent===c.agent);if(p){if(p.dates.push(c.date),Vp(r)>n){p.dates.pop();break}}else if(r.push({agent:c.agent,dates:[c.date]}),Vp(r)>n){r.pop();break}l=l.slice(1)}return{heartbeatsToSend:r,unsentEntries:l}}class Ly{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cv()?hv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Ey(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(n){var r;if(await this._canUseIndexedDBPromise){const c=await this.read();return jp(this.app,{lastSentHeartbeatDate:(r=n.lastSentHeartbeatDate)!==null&&r!==void 0?r:c.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){var r;if(await this._canUseIndexedDBPromise){const c=await this.read();return jp(this.app,{lastSentHeartbeatDate:(r=n.lastSentHeartbeatDate)!==null&&r!==void 0?r:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...n.heartbeats]})}else return}}function Vp(s){return Pu(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(s){Iu(new Aa("platform-logger",n=>new Bv(n),"PRIVATE")),Iu(new Aa("heartbeat",n=>new Py(n),"PRIVATE")),oo(Gh,Up,s),oo(Gh,Up,"esm2017"),oo("fire-js","")}Iy("");var $p={};const Gp="@firebase/database",Kp="1.0.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V_="";function Ny(s){V_=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,r){r==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),gt(r))}get(n){const r=this.domStorage_.getItem(this.prefixedName_(n));return r==null?null:Oa(r)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,r){r==null?delete this.cache_[n]:this.cache_[n]=r}get(n){return ri(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const n=window[s];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new Ry(n)}}catch{}return new My},ss=$_("localStorage"),Oy=$_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new B_("@firebase/database"),Ay=function(){let s=1;return function(){return s++}}(),G_=function(s){const n=yv(s),r=new vv;r.update(n);const l=r.digest();return hd.encodeByteArray(l)},Ga=function(...s){let n="";for(let r=0;r<s.length;r++){const l=s[r];Array.isArray(l)||l&&typeof l=="object"&&typeof l.length=="number"?n+=Ga.apply(null,l):typeof l=="object"?n+=gt(l):n+=l,n+=" "}return n};let La=null,qp=!0;const Dy=function(s,n){K(!0,"Can't turn on custom loggers persistently."),ao.logLevel=Ze.VERBOSE,La=ao.log.bind(ao)},Lt=function(...s){if(qp===!0&&(qp=!1,La===null&&Oy.get("logging_enabled")===!0&&Dy()),La){const n=Ga.apply(null,s);La(n)}},Ka=function(s){return function(...n){Lt(s,...n)}},Yh=function(...s){const n="FIREBASE INTERNAL ERROR: "+Ga(...s);ao.error(n)},Ri=function(...s){const n=`FIREBASE FATAL ERROR: ${Ga(...s)}`;throw ao.error(n),new Error(n)},Gt=function(...s){const n="FIREBASE WARNING: "+Ga(...s);ao.warn(n)},by=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},fd=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},zy=function(s){if(document.readyState==="complete")s();else{let n=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}n||(n=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},co="[MIN_NAME]",os="[MAX_NAME]",cs=function(s,n){if(s===n)return 0;if(s===co||n===os)return-1;if(n===co||s===os)return 1;{const r=Yp(s),l=Yp(n);return r!==null?l!==null?r-l===0?s.length-n.length:r-l:-1:l!==null?1:s<n?-1:1}},Fy=function(s,n){return s===n?0:s<n?-1:1},Ca=function(s,n){if(n&&s in n)return n[s];throw new Error("Missing required key ("+s+") in object: "+gt(n))},pd=function(s){if(typeof s!="object"||s===null)return gt(s);const n=[];for(const l in s)n.push(l);n.sort();let r="{";for(let l=0;l<n.length;l++)l!==0&&(r+=","),r+=gt(n[l]),r+=":",r+=pd(s[n[l]]);return r+="}",r},K_=function(s,n){const r=s.length;if(r<=n)return[s];const l=[];for(let c=0;c<r;c+=n)c+n>r?l.push(s.substring(c,r)):l.push(s.substring(c,c+n));return l};function It(s,n){for(const r in s)s.hasOwnProperty(r)&&n(r,s[r])}const q_=function(s){K(!fd(s),"Invalid JSON number");const n=11,r=52,l=(1<<n-1)-1;let c,p,m,w,C;s===0?(p=0,m=0,c=1/s===-1/0?1:0):(c=s<0,s=Math.abs(s),s>=Math.pow(2,1-l)?(w=Math.min(Math.floor(Math.log(s)/Math.LN2),l),p=w+l,m=Math.round(s*Math.pow(2,r-w)-Math.pow(2,r))):(p=0,m=Math.round(s/Math.pow(2,1-l-r))));const S=[];for(C=r;C;C-=1)S.push(m%2?1:0),m=Math.floor(m/2);for(C=n;C;C-=1)S.push(p%2?1:0),p=Math.floor(p/2);S.push(c?1:0),S.reverse();const N=S.join("");let k="";for(C=0;C<64;C+=8){let R=parseInt(N.substr(C,8),2).toString(16);R.length===1&&(R="0"+R),k=k+R}return k.toLowerCase()},By=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Wy=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Uy(s,n){let r="Unknown Error";s==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?r="Client doesn't have permission to access the desired data.":s==="unavailable"&&(r="The service is unavailable");const l=new Error(s+" at "+n._path.toString()+": "+r);return l.code=s.toUpperCase(),l}const Hy=new RegExp("^-?(0*)\\d{1,10}$"),jy=-2147483648,Zy=2147483647,Yp=function(s){if(Hy.test(s)){const n=Number(s);if(n>=jy&&n<=Zy)return n}return null},go=function(s){try{s()}catch(n){setTimeout(()=>{const r=n.stack||"";throw Gt("Exception was thrown by user callback.",r),n},Math.floor(0))}},Vy=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ia=function(s,n){const r=setTimeout(s,n);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(n,r){this.appName_=n,this.appCheckProvider=r,this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(l=>this.appCheck=l)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((r,l)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(r,l):r(null)},0)})}addTokenChangeListener(n){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(l=>l.addTokenListener(n))}notifyForInvalidToken(){Gt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(n,r,l){this.appName_=n,this.firebaseOptions_=r,this.authProvider_=l,this.auth_=null,this.auth_=l.getImmediate({optional:!0}),this.auth_||l.onInit(c=>this.auth_=c)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(r=>r&&r.code==="auth/token-not-initialized"?(Lt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,l)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(r,l):r(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(r=>r.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(r=>r.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gt(n)}}class Tu{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}Tu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="5",Y_="v",Q_="s",X_="r",J_="f",em=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tm="ls",nm="p",Qh="ac",im="websocket",rm="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(n,r,l,c,p=!1,m="",w=!1,C=!1){this.secure=r,this.namespace=l,this.webSocketOnly=c,this.nodeAdmin=p,this.persistenceKey=m,this.includeNamespaceInQueryParams=w,this.isUsingEmulator=C,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ss.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&ss.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){const n=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${r}`}}function Ky(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function om(s,n,r){K(typeof n=="string","typeof type must == string"),K(typeof r=="object","typeof params must == object");let l;if(n===im)l=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(n===rm)l=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);Ky(s)&&(r.ns=s.namespace);const c=[];return It(r,(p,m)=>{c.push(p+"="+m)}),l+c.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.counters_={}}incrementCounter(n,r=1){ri(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=r}get(){return Xg(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh={},bh={};function md(s){const n=s.toString();return Dh[n]||(Dh[n]=new qy),Dh[n]}function Yy(s,n){const r=s.toString();return bh[r]||(bh[r]=n()),bh[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,r){this.closeAfterResponse=n,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,r){for(this.pendingResponses[n]=r;this.pendingResponses[this.currentResponseNum];){const l=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let c=0;c<l.length;++c)l[c]&&go(()=>{this.onMessage_(l[c])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="start",Xy="close",Jy="pLPCommand",ew="pRTLPCB",am="id",lm="pw",um="ser",tw="cb",nw="seg",iw="ts",rw="d",sw="dframe",cm=1870,hm=30,ow=cm-hm,aw=25e3,lw=3e4;class so{constructor(n,r,l,c,p,m,w){this.connId=n,this.repoInfo=r,this.applicationId=l,this.appCheckToken=c,this.authToken=p,this.transportSessionId=m,this.lastSessionId=w,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ka(n),this.stats_=md(r),this.urlFn=C=>(this.appCheckToken&&(C[Qh]=this.appCheckToken),om(r,rm,C))}open(n,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Qy(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lw)),zy(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gd((...p)=>{const[m,w,C,S,N]=p;if(this.incrementIncomingBytes_(p),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,m===Qp)this.id=w,this.password=C;else if(m===Xy)w?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(w,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+m)},(...p)=>{const[m,w]=p;this.incrementIncomingBytes_(p),this.myPacketOrderer.handleResponse(m,w)},()=>{this.onClosed_()},this.urlFn);const l={};l[Qp]="t",l[um]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(l[tw]=this.scriptTagHolder.uniqueCallbackIdentifier),l[Y_]=_d,this.transportSessionId&&(l[Q_]=this.transportSessionId),this.lastSessionId&&(l[tm]=this.lastSessionId),this.applicationId&&(l[nm]=this.applicationId),this.appCheckToken&&(l[Qh]=this.appCheckToken),typeof location<"u"&&location.hostname&&em.test(location.hostname)&&(l[X_]=J_);const c=this.urlFn(l);this.log_("Connecting via long-poll to "+c),this.scriptTagHolder.addTag(c,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){so.forceAllow_=!0}static forceDisallow(){so.forceDisallow_=!0}static isAvailable(){return so.forceAllow_?!0:!so.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!By()&&!Wy()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const r=gt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const l=M_(r),c=K_(l,ow);for(let p=0;p<c.length;p++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,c.length,c[p]),this.curSegmentNum++}addDisconnectPingFrame(n,r){this.myDisconnFrame=document.createElement("iframe");const l={};l[sw]="t",l[am]=n,l[lm]=r,this.myDisconnFrame.src=this.urlFn(l),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const r=gt(n).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class gd{constructor(n,r,l,c){this.onDisconnect=l,this.urlFn=c,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Ay(),window[Jy+this.uniqueCallbackIdentifier]=n,window[ew+this.uniqueCallbackIdentifier]=r,this.myIFrame=gd.createIFrame_();let p="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(p='<script>document.domain="'+document.domain+'";<\/script>');const m="<html><body>"+p+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(m),this.myIFrame.doc.close()}catch(w){Lt("frame writing exception"),w.stack&&Lt(w.stack),Lt(w)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||Lt("No IE domain setting required")}catch{const l=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+l+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,r){for(this.myID=n,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n[am]=this.myID,n[lm]=this.myPW,n[um]=this.currentSerial;let r=this.urlFn(n),l="",c=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+hm+l.length<=cm;){const m=this.pendingSegs.shift();l=l+"&"+nw+c+"="+m.seg+"&"+iw+c+"="+m.ts+"&"+rw+c+"="+m.d,c++}return r=r+l,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(n,r,l){this.pendingSegs.push({seg:n,ts:r,d:l}),this.alive&&this.newRequest_()}addLongPollTag_(n,r){this.outstandingRequests.add(r);const l=()=>{this.outstandingRequests.delete(r),this.newRequest_()},c=setTimeout(l,Math.floor(aw)),p=()=>{clearTimeout(c),l()};this.addTag(n,p)}addTag(n,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const l=this.myIFrame.doc.createElement("script");l.type="text/javascript",l.async=!0,l.src=n,l.onload=l.onreadystatechange=function(){const c=l.readyState;(!c||c==="loaded"||c==="complete")&&(l.onload=l.onreadystatechange=null,l.parentNode&&l.parentNode.removeChild(l),r())},l.onerror=()=>{Lt("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(l)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=16384,cw=45e3;let Nu=null;typeof MozWebSocket<"u"?Nu=MozWebSocket:typeof WebSocket<"u"&&(Nu=WebSocket);class ii{constructor(n,r,l,c,p,m,w){this.connId=n,this.applicationId=l,this.appCheckToken=c,this.authToken=p,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ka(this.connId),this.stats_=md(r),this.connURL=ii.connectionURL_(r,m,w,c,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,l,c,p){const m={};return m[Y_]=_d,typeof location<"u"&&location.hostname&&em.test(location.hostname)&&(m[X_]=J_),r&&(m[Q_]=r),l&&(m[tm]=l),c&&(m[Qh]=c),p&&(m[nm]=p),om(n,im,m)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ss.set("previous_websocket_failure",!0);try{let l;uv(),this.mySock=new Nu(this.connURL,[],l)}catch(l){this.log_("Error instantiating WebSocket.");const c=l.message||l.data;c&&this.log_(c),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=l=>{this.handleIncomingFrame(l)},this.mySock.onerror=l=>{this.log_("WebSocket error.  Closing connection.");const c=l.message||l.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){ii.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,l=navigator.userAgent.match(r);l&&l.length>1&&parseFloat(l[1])<4.4&&(n=!0)}return!n&&Nu!==null&&!ii.forceDisallow_}static previouslyFailed(){return ss.isInMemoryStorage||ss.get("previous_websocket_failure")===!0}markConnectionHealthy(){ss.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const l=Oa(r);this.onMessage(l)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(K(this.frames===null,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const l=this.extractFrameCount_(r);l!==null&&this.appendFrame_(l)}}send(n){this.resetKeepAlive();const r=gt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const l=K_(r,uw);l.length>1&&this.sendString_(String(l.length));for(let c=0;c<l.length;c++)this.sendString_(l[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(cw))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ii.responsesRequiredToBeHealthy=2;ii.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{static get ALL_TRANSPORTS(){return[so,ii]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){const r=ii.isAvailable();let l=r&&!ii.previouslyFailed();if(n.webSocketOnly&&(r||Gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),l=!0),l)this.transports_=[ii];else{const c=this.transports_=[];for(const p of ba.ALL_TRANSPORTS)p&&p.isAvailable()&&c.push(p);ba.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ba.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=6e4,dw=5e3,fw=10*1024,pw=100*1024,zh="t",Xp="d",_w="s",Jp="r",mw="e",e_="o",t_="a",n_="n",i_="p",gw="h";class vw{constructor(n,r,l,c,p,m,w,C,S,N){this.id=n,this.repoInfo_=r,this.applicationId_=l,this.appCheckToken_=c,this.authToken_=p,this.onMessage_=m,this.onReady_=w,this.onDisconnect_=C,this.onKill_=S,this.lastSessionId=N,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ka("c:"+this.id+":"),this.transportManager_=new ba(r),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),l=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,l)},Math.floor(0));const c=n.healthyTimeout||0;c>0&&(this.healthyTimeout_=Ia(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>pw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>fw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(c)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return r=>{n===this.conn_?this.onConnectionLost_(r):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return r=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(r):n===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(n){const r={t:"d",d:n};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(zh in n){const r=n[zh];r===t_?this.upgradeIfSecondaryHealthy_():r===Jp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===e_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const r=Ca("t",n),l=Ca("d",n);if(r==="c")this.onSecondaryControl_(l);else if(r==="d")this.pendingDataMessages.push(l);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:i_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:t_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:n_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const r=Ca("t",n),l=Ca("d",n);r==="c"?this.onControl_(l):r==="d"&&this.onDataMessage_(l)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const r=Ca(zh,n);if(Xp in n){const l=n[Xp];if(r===gw){const c=Object.assign({},l);this.repoInfo_.isUsingEmulator&&(c.h=this.repoInfo_.host),this.onHandshake_(c)}else if(r===n_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let c=0;c<this.pendingDataMessages.length;++c)this.onDataMessage_(this.pendingDataMessages[c]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===_w?this.onConnectionShutdown_(l):r===Jp?this.onReset_(l):r===mw?Yh("Server Error: "+l):r===e_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yh("Unknown control packet command: "+r)}}onHandshake_(n){const r=n.ts,l=n.v,c=n.h;this.sessionId=n.s,this.repoInfo_.host=c,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),_d!==l&&Gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),l=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,l),Ia(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(hw))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,r){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ia(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:i_,d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ss.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{put(n,r,l,c){}merge(n,r,l,c){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,r,l){}onDisconnectMerge(n,r,l){}onDisconnectCancel(n,r){}reportStats(n){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(n){this.allowedEvents_=n,this.listeners_={},K(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...r){if(Array.isArray(this.listeners_[n])){const l=[...this.listeners_[n]];for(let c=0;c<l.length;c++)l[c].callback.apply(l[c].context,r)}}on(n,r,l){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:r,context:l});const c=this.getInitialEvent(n);c&&r.apply(l,c)}off(n,r,l){this.validateEventType_(n);const c=this.listeners_[n]||[];for(let p=0;p<c.length;p++)if(c[p].callback===r&&(!l||l===c[p].context)){c.splice(p,1);return}}validateEventType_(n){K(this.allowedEvents_.find(r=>r===n),"Unknown event: "+n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends fm{static getInstance(){return new Ru}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!b_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(n){return K(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=32,s_=768;class Be{constructor(n,r){if(r===void 0){this.pieces_=n.split("/");let l=0;for(let c=0;c<this.pieces_.length;c++)this.pieces_[c].length>0&&(this.pieces_[l]=this.pieces_[c],l++);this.pieces_.length=l,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=r}toString(){let n="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(n+="/"+this.pieces_[r]);return n||"/"}}function Re(){return new Be("")}function Ee(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function Er(s){return s.pieces_.length-s.pieceNum_}function Ve(s){let n=s.pieceNum_;return n<s.pieces_.length&&n++,new Be(s.pieces_,n)}function vd(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function yw(s){let n="";for(let r=s.pieceNum_;r<s.pieces_.length;r++)s.pieces_[r]!==""&&(n+="/"+encodeURIComponent(String(s.pieces_[r])));return n||"/"}function za(s,n=0){return s.pieces_.slice(s.pieceNum_+n)}function pm(s){if(s.pieceNum_>=s.pieces_.length)return null;const n=[];for(let r=s.pieceNum_;r<s.pieces_.length-1;r++)n.push(s.pieces_[r]);return new Be(n,0)}function rt(s,n){const r=[];for(let l=s.pieceNum_;l<s.pieces_.length;l++)r.push(s.pieces_[l]);if(n instanceof Be)for(let l=n.pieceNum_;l<n.pieces_.length;l++)r.push(n.pieces_[l]);else{const l=n.split("/");for(let c=0;c<l.length;c++)l[c].length>0&&r.push(l[c])}return new Be(r,0)}function Pe(s){return s.pieceNum_>=s.pieces_.length}function $t(s,n){const r=Ee(s),l=Ee(n);if(r===null)return n;if(r===l)return $t(Ve(s),Ve(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+s+")")}function ww(s,n){const r=za(s,0),l=za(n,0);for(let c=0;c<r.length&&c<l.length;c++){const p=cs(r[c],l[c]);if(p!==0)return p}return r.length===l.length?0:r.length<l.length?-1:1}function yd(s,n){if(Er(s)!==Er(n))return!1;for(let r=s.pieceNum_,l=n.pieceNum_;r<=s.pieces_.length;r++,l++)if(s.pieces_[r]!==n.pieces_[l])return!1;return!0}function In(s,n){let r=s.pieceNum_,l=n.pieceNum_;if(Er(s)>Er(n))return!1;for(;r<s.pieces_.length;){if(s.pieces_[r]!==n.pieces_[l])return!1;++r,++l}return!0}class Cw{constructor(n,r){this.errorPrefix_=r,this.parts_=za(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let l=0;l<this.parts_.length;l++)this.byteLength_+=Zu(this.parts_[l]);_m(this)}}function Sw(s,n){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(n),s.byteLength_+=Zu(n),_m(s)}function Ew(s){const n=s.parts_.pop();s.byteLength_-=Zu(n),s.parts_.length>0&&(s.byteLength_-=1)}function _m(s){if(s.byteLength_>s_)throw new Error(s.errorPrefix_+"has a key path longer than "+s_+" bytes ("+s.byteLength_+").");if(s.parts_.length>r_)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+r_+") or object contains a cycle "+rs(s))}function rs(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends fm{static getInstance(){return new wd}constructor(){super(["visible"]);let n,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const l=!document[n];l!==this.visible_&&(this.visible_=l,this.trigger("visible",l))},!1)}getInitialEvent(n){return K(n==="visible","Unknown event type: "+n),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=1e3,xw=60*5*1e3,o_=30*1e3,Tw=1.3,Pw=3e4,kw="server_kill",a_=3;class Ii extends dm{constructor(n,r,l,c,p,m,w,C){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=l,this.onConnectStatus_=c,this.onServerInfoUpdate_=p,this.authTokenProvider_=m,this.appCheckTokenProvider_=w,this.authOverride_=C,this.id=Ii.nextPersistentConnectionId_++,this.log_=Ka("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Sa,this.maxReconnectDelay_=xw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wd.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Ru.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,l){const c=++this.requestNumber_,p={r:c,a:n,b:r};this.log_(gt(p)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(p),l&&(this.requestCBHash_[c]=l)}get(n){this.initConnection_();const r=new Va,c={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:m=>{const w=m.d;m.s==="ok"?r.resolve(w):r.reject(w)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const p=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(p),r.promise}listen(n,r,l,c){this.initConnection_();const p=n._queryIdentifier,m=n._path.toString();this.log_("Listen called for "+m+" "+p),this.listens.has(m)||this.listens.set(m,new Map),K(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(m).has(p),"listen() called twice for same path/queryId.");const w={onComplete:c,hashFn:r,query:n,tag:l};this.listens.get(m).set(p,w),this.connected_&&this.sendListen_(w)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,l=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(l)})}sendListen_(n){const r=n.query,l=r._path.toString(),c=r._queryIdentifier;this.log_("Listen on "+l+" for "+c);const p={p:l},m="q";n.tag&&(p.q=r._queryObject,p.t=n.tag),p.h=n.hashFn(),this.sendRequest(m,p,w=>{const C=w.d,S=w.s;Ii.warnOnListenWarnings_(C,r),(this.listens.get(l)&&this.listens.get(l).get(c))===n&&(this.log_("listen response",w),S!=="ok"&&this.removeListen_(l,c),n.onComplete&&n.onComplete(S,C))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&ri(n,"w")){const l=uo(n,"w");if(Array.isArray(l)&&~l.indexOf("no_index")){const c='".indexOn": "'+r._queryParams.getIndex().toString()+'"',p=r._path.toString();Gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${p} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||mv(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=o_)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=_v(n)?"auth":"gauth",l={cred:n};this.authOverride_===null?l.noauth=!0:typeof this.authOverride_=="object"&&(l.authvar=this.authOverride_),this.sendRequest(r,l,c=>{const p=c.s,m=c.d||"error";this.authToken_===n&&(p==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(p,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,l=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,l)})}unlisten(n,r){const l=n._path.toString(),c=n._queryIdentifier;this.log_("Unlisten called for "+l+" "+c),K(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(l,c)&&this.connected_&&this.sendUnlisten_(l,c,n._queryObject,r)}sendUnlisten_(n,r,l,c){this.log_("Unlisten on "+n+" for "+r);const p={p:n},m="n";c&&(p.q=l,p.t=c),this.sendRequest(m,p)}onDisconnectPut(n,r,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,l):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:l})}onDisconnectMerge(n,r,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,l):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:l})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,l,c){const p={p:r,d:l};this.log_("onDisconnect "+n,p),this.sendRequest(n,p,m=>{c&&setTimeout(()=>{c(m.s,m.d)},Math.floor(0))})}put(n,r,l,c){this.putInternal("p",n,r,l,c)}merge(n,r,l,c){this.putInternal("m",n,r,l,c)}putInternal(n,r,l,c,p){this.initConnection_();const m={p:r,d:l};p!==void 0&&(m.h=p),this.outstandingPuts_.push({action:n,request:m,onComplete:c}),this.outstandingPutCount_++;const w=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(w):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,l=this.outstandingPuts_[n].request,c=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,l,p=>{this.log_(r+" response",p),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),c&&c(p.s,p.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,l=>{if(l.s!=="ok"){const p=l.d;this.log_("reportStats","Error sending stats: "+p)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+gt(n));const r=n.r,l=this.requestCBHash_[r];l&&(delete this.requestCBHash_[r],l(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Yh("Unrecognized action received from server: "+gt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Sa,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Sa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Pw&&(this.reconnectDelay_=Sa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const n=new Date().getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Tw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),l=this.onRealtimeDisconnect_.bind(this),c=this.id+":"+Ii.nextConnectionId_++,p=this.lastSessionId;let m=!1,w=null;const C=function(){w?w.close():(m=!0,l())},S=function(k){K(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(k)};this.realtime_={close:C,sendRequest:S};const N=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[k,R]=await Promise.all([this.authTokenProvider_.getToken(N),this.appCheckTokenProvider_.getToken(N)]);m?Lt("getToken() completed but was canceled"):(Lt("getToken() completed. Creating connection."),this.authToken_=k&&k.accessToken,this.appCheckToken_=R&&R.token,w=new vw(c,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,l,j=>{Gt(j+" ("+this.repoInfo_.toString()+")"),this.interrupt(kw)},p))}catch(k){this.log_("Failed to get token: "+k),m||(this.repoInfo_.nodeAdmin&&Gt(k),C())}}}interrupt(n){Lt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Lt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],bp(this.interruptReasons_)&&(this.reconnectDelay_=Sa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let l;r?l=r.map(p=>pd(p)).join("$"):l="default";const c=this.removeListen_(n,l);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(n,r){const l=new Be(n).toString();let c;if(this.listens.has(l)){const p=this.listens.get(l);c=p.get(r),p.delete(r),p.size===0&&this.listens.delete(l)}else c=void 0;return c}onAuthRevoked_(n,r){Lt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=a_&&(this.reconnectDelay_=o_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Lt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=a_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+V_.replace(/\./g,"-")]=1,b_()?n["framework.cordova"]=1:lv()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Ru.getInstance().currentlyOnline();return bp(this.interruptReasons_)&&n}}Ii.nextPersistentConnectionId_=0;Ii.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(n,r){this.name=n,this.node=r}static Wrap(n,r){return new xe(n,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,r){const l=new xe(co,n),c=new xe(co,r);return this.compare(l,c)!==0}minPost(){return xe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su;class mm extends Vu{static get __EMPTY_NODE(){return Su}static set __EMPTY_NODE(n){Su=n}compare(n,r){return cs(n.name,r.name)}isDefinedOn(n){throw mo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,r){return!1}minPost(){return xe.MIN}maxPost(){return new xe(os,Su)}makePost(n,r){return K(typeof n=="string","KeyIndex indexValue must always be a string."),new xe(n,Su)}toString(){return".key"}}const lo=new mm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(n,r,l,c,p=null){this.isReverse_=c,this.resultGenerator_=p,this.nodeStack_=[];let m=1;for(;!n.isEmpty();)if(n=n,m=r?l(n.key,r):1,c&&(m*=-1),m<0)this.isReverse_?n=n.left:n=n.right;else if(m===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(n.key,n.value):r={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}class St{constructor(n,r,l,c,p){this.key=n,this.value=r,this.color=l??St.RED,this.left=c??rn.EMPTY_NODE,this.right=p??rn.EMPTY_NODE}copy(n,r,l,c,p){return new St(n??this.key,r??this.value,l??this.color,c??this.left,p??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,l){let c=this;const p=l(n,c.key);return p<0?c=c.copy(null,null,null,c.left.insert(n,r,l),null):p===0?c=c.copy(null,r,null,null,null):c=c.copy(null,null,null,null,c.right.insert(n,r,l)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return rn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let l,c;if(l=this,r(n,l.key)<0)!l.left.isEmpty()&&!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.remove(n,r),null);else{if(l.left.isRed_()&&(l=l.rotateRight_()),!l.right.isEmpty()&&!l.right.isRed_()&&!l.right.left.isRed_()&&(l=l.moveRedRight_()),r(n,l.key)===0){if(l.right.isEmpty())return rn.EMPTY_NODE;c=l.right.min_(),l=l.copy(c.key,c.value,null,null,l.right.removeMin_())}l=l.copy(null,null,null,null,l.right.remove(n,r))}return l.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}St.RED=!0;St.BLACK=!1;class Lw{copy(n,r,l,c,p){return this}insert(n,r,l){return new St(n,r,null)}remove(n,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class rn{constructor(n,r=rn.EMPTY_NODE){this.comparator_=n,this.root_=r}insert(n,r){return new rn(this.comparator_,this.root_.insert(n,r,this.comparator_).copy(null,null,St.BLACK,null,null))}remove(n){return new rn(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,St.BLACK,null,null))}get(n){let r,l=this.root_;for(;!l.isEmpty();){if(r=this.comparator_(n,l.key),r===0)return l.value;r<0?l=l.left:r>0&&(l=l.right)}return null}getPredecessorKey(n){let r,l=this.root_,c=null;for(;!l.isEmpty();)if(r=this.comparator_(n,l.key),r===0){if(l.left.isEmpty())return c?c.key:null;for(l=l.left;!l.right.isEmpty();)l=l.right;return l.key}else r<0?l=l.left:r>0&&(c=l,l=l.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new Eu(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,r){return new Eu(this.root_,n,this.comparator_,!1,r)}getReverseIteratorFrom(n,r){return new Eu(this.root_,n,this.comparator_,!0,r)}getReverseIterator(n){return new Eu(this.root_,null,this.comparator_,!0,n)}}rn.EMPTY_NODE=new Lw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(s,n){return cs(s.name,n.name)}function Cd(s,n){return cs(s,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh;function Nw(s){Xh=s}const gm=function(s){return typeof s=="number"?"number:"+q_(s):"string:"+s},vm=function(s){if(s.isLeafNode()){const n=s.val();K(typeof n=="string"||typeof n=="number"||typeof n=="object"&&ri(n,".sv"),"Priority must be a string or number.")}else K(s===Xh||s.isEmpty(),"priority of unexpected type.");K(s===Xh||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l_;class Ct{static set __childrenNodeConstructor(n){l_=n}static get __childrenNodeConstructor(){return l_}constructor(n,r=Ct.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),vm(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new Ct(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:Ct.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Pe(n)?this:Ee(n)===".priority"?this.priorityNode_:Ct.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:Ct.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const l=Ee(n);return l===null?r:r.isEmpty()&&l!==".priority"?this:(K(l!==".priority"||Er(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(l,Ct.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ve(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+gm(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",r==="number"?n+=q_(this.value_):n+=this.value_,this.lazyHash_=G_(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===Ct.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof Ct.__childrenNodeConstructor?-1:(K(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,l=typeof this.value_,c=Ct.VALUE_TYPE_ORDER.indexOf(r),p=Ct.VALUE_TYPE_ORDER.indexOf(l);return K(c>=0,"Unknown leaf type: "+r),K(p>=0,"Unknown leaf type: "+l),c===p?l==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:p-c}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}Ct.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym,wm;function Rw(s){ym=s}function Mw(s){wm=s}class Ow extends Vu{compare(n,r){const l=n.node.getPriority(),c=r.node.getPriority(),p=l.compareTo(c);return p===0?cs(n.name,r.name):p}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,r){return!n.getPriority().equals(r.getPriority())}minPost(){return xe.MIN}maxPost(){return new xe(os,new Ct("[PRIORITY-POST]",wm))}makePost(n,r){const l=ym(n);return new xe(r,new Ct("[PRIORITY-POST]",l))}toString(){return".priority"}}const st=new Ow;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=Math.log(2);class Dw{constructor(n){const r=p=>parseInt(Math.log(p)/Aw,10),l=p=>parseInt(Array(p+1).join("1"),2);this.count=r(n+1),this.current_=this.count-1;const c=l(this.count);this.bits_=n+1&c}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const Mu=function(s,n,r,l){s.sort(n);const c=function(C,S){const N=S-C;let k,R;if(N===0)return null;if(N===1)return k=s[C],R=r?r(k):k,new St(R,k.node,St.BLACK,null,null);{const j=parseInt(N/2,10)+C,Y=c(C,j),q=c(j+1,S);return k=s[j],R=r?r(k):k,new St(R,k.node,St.BLACK,Y,q)}},p=function(C){let S=null,N=null,k=s.length;const R=function(Y,q){const le=k-Y,Le=k;k-=Y;const De=c(le+1,Le),Me=s[le],be=r?r(Me):Me;j(new St(be,Me.node,q,null,De))},j=function(Y){S?(S.left=Y,S=Y):(N=Y,S=Y)};for(let Y=0;Y<C.count;++Y){const q=C.nextBitIsOne(),le=Math.pow(2,C.count-(Y+1));q?R(le,St.BLACK):(R(le,St.BLACK),R(le,St.RED))}return N},m=new Dw(s.length),w=p(m);return new rn(l||n,w)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh;const Ea={};class Li{static get Default(){return K(st,"ChildrenNode.ts has not been loaded"),Fh=Fh||new Li({".priority":Ea},{".priority":st}),Fh}constructor(n,r){this.indexes_=n,this.indexSet_=r}get(n){const r=uo(this.indexes_,n);if(!r)throw new Error("No index defined for "+n);return r instanceof rn?r:null}hasIndex(n){return ri(this.indexSet_,n.toString())}addIndex(n,r){K(n!==lo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const l=[];let c=!1;const p=r.getIterator(xe.Wrap);let m=p.getNext();for(;m;)c=c||n.isDefinedOn(m.node),l.push(m),m=p.getNext();let w;c?w=Mu(l,n.getCompare()):w=Ea;const C=n.toString(),S=Object.assign({},this.indexSet_);S[C]=n;const N=Object.assign({},this.indexes_);return N[C]=w,new Li(N,S)}addToIndexes(n,r){const l=ku(this.indexes_,(c,p)=>{const m=uo(this.indexSet_,p);if(K(m,"Missing index implementation for "+p),c===Ea)if(m.isDefinedOn(n.node)){const w=[],C=r.getIterator(xe.Wrap);let S=C.getNext();for(;S;)S.name!==n.name&&w.push(S),S=C.getNext();return w.push(n),Mu(w,m.getCompare())}else return Ea;else{const w=r.get(n.name);let C=c;return w&&(C=C.remove(new xe(n.name,w))),C.insert(n,n.node)}});return new Li(l,this.indexSet_)}removeFromIndexes(n,r){const l=ku(this.indexes_,c=>{if(c===Ea)return c;{const p=r.get(n.name);return p?c.remove(new xe(n.name,p)):c}});return new Li(l,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa;class fe{static get EMPTY_NODE(){return xa||(xa=new fe(new rn(Cd),null,Li.Default))}constructor(n,r,l){this.children_=n,this.priorityNode_=r,this.indexMap_=l,this.lazyHash_=null,this.priorityNode_&&vm(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xa}updatePriority(n){return this.children_.isEmpty()?this:new fe(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{const r=this.children_.get(n);return r===null?xa:r}}getChild(n){const r=Ee(n);return r===null?this:this.getImmediateChild(r).getChild(Ve(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(K(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{const l=new xe(n,r);let c,p;r.isEmpty()?(c=this.children_.remove(n),p=this.indexMap_.removeFromIndexes(l,this.children_)):(c=this.children_.insert(n,r),p=this.indexMap_.addToIndexes(l,this.children_));const m=c.isEmpty()?xa:this.priorityNode_;return new fe(c,m,p)}}updateChild(n,r){const l=Ee(n);if(l===null)return r;{K(Ee(n)!==".priority"||Er(n)===1,".priority must be the last token in a path");const c=this.getImmediateChild(l).updateChild(Ve(n),r);return this.updateImmediateChild(l,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let l=0,c=0,p=!0;if(this.forEachChild(st,(m,w)=>{r[m]=w.val(n),l++,p&&fe.INTEGER_REGEXP_.test(m)?c=Math.max(c,Number(m)):p=!1}),!n&&p&&c<2*l){const m=[];for(const w in r)m[w]=r[w];return m}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+gm(this.getPriority().val())+":"),this.forEachChild(st,(r,l)=>{const c=l.hash();c!==""&&(n+=":"+r+":"+c)}),this.lazyHash_=n===""?"":G_(n)}return this.lazyHash_}getPredecessorChildName(n,r,l){const c=this.resolveIndex_(l);if(c){const p=c.getPredecessorKey(new xe(n,r));return p?p.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const l=r.minKey();return l&&l.name}else return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new xe(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const l=r.maxKey();return l&&l.name}else return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new xe(r,this.children_.get(r)):null}forEachChild(n,r){const l=this.resolveIndex_(n);return l?l.inorderTraversal(c=>r(c.name,c.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const l=this.resolveIndex_(r);if(l)return l.getIteratorFrom(n,c=>c);{const c=this.children_.getIteratorFrom(n.name,xe.Wrap);let p=c.peek();for(;p!=null&&r.compare(p,n)<0;)c.getNext(),p=c.peek();return c}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const l=this.resolveIndex_(r);if(l)return l.getReverseIteratorFrom(n,c=>c);{const c=this.children_.getReverseIteratorFrom(n.name,xe.Wrap);let p=c.peek();for(;p!=null&&r.compare(p,n)>0;)c.getNext(),p=c.peek();return c}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===qa?-1:0}withIndex(n){if(n===lo||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new fe(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===lo||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const l=this.getIterator(st),c=r.getIterator(st);let p=l.getNext(),m=c.getNext();for(;p&&m;){if(p.name!==m.name||!p.node.equals(m.node))return!1;p=l.getNext(),m=c.getNext()}return p===null&&m===null}else return!1;else return!1}}resolveIndex_(n){return n===lo?null:this.indexMap_.get(n.toString())}}fe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class bw extends fe{constructor(){super(new rn(Cd),fe.EMPTY_NODE,Li.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return fe.EMPTY_NODE}isEmpty(){return!1}}const qa=new bw;Object.defineProperties(xe,{MIN:{value:new xe(co,fe.EMPTY_NODE)},MAX:{value:new xe(os,qa)}});mm.__EMPTY_NODE=fe.EMPTY_NODE;Ct.__childrenNodeConstructor=fe;Nw(qa);Mw(qa);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=!0;function mt(s,n=null){if(s===null)return fe.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(n=s[".priority"]),K(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const r=s;return new Ct(r,mt(n))}if(!(s instanceof Array)&&zw){const r=[];let l=!1;if(It(s,(m,w)=>{if(m.substring(0,1)!=="."){const C=mt(w);C.isEmpty()||(l=l||!C.getPriority().isEmpty(),r.push(new xe(m,C)))}}),r.length===0)return fe.EMPTY_NODE;const p=Mu(r,Iw,m=>m.name,Cd);if(l){const m=Mu(r,st.getCompare());return new fe(p,mt(n),new Li({".priority":m},{".priority":st}))}else return new fe(p,mt(n),Li.Default)}else{let r=fe.EMPTY_NODE;return It(s,(l,c)=>{if(ri(s,l)&&l.substring(0,1)!=="."){const p=mt(c);(p.isLeafNode()||!p.isEmpty())&&(r=r.updateImmediateChild(l,p))}}),r.updatePriority(mt(n))}}Rw(mt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw extends Vu{constructor(n){super(),this.indexPath_=n,K(!Pe(n)&&Ee(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,r){const l=this.extractChild(n.node),c=this.extractChild(r.node),p=l.compareTo(c);return p===0?cs(n.name,r.name):p}makePost(n,r){const l=mt(n),c=fe.EMPTY_NODE.updateChild(this.indexPath_,l);return new xe(r,c)}maxPost(){const n=fe.EMPTY_NODE.updateChild(this.indexPath_,qa);return new xe(os,n)}toString(){return za(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw extends Vu{compare(n,r){const l=n.node.compareTo(r.node);return l===0?cs(n.name,r.name):l}isDefinedOn(n){return!0}indexedValueChanged(n,r){return!n.equals(r)}minPost(){return xe.MIN}maxPost(){return xe.MAX}makePost(n,r){const l=mt(n);return new xe(r,l)}toString(){return".value"}}const Ww=new Bw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(s){return{type:"value",snapshotNode:s}}function ho(s,n){return{type:"child_added",snapshotNode:n,childName:s}}function Fa(s,n){return{type:"child_removed",snapshotNode:n,childName:s}}function Ba(s,n,r){return{type:"child_changed",snapshotNode:n,childName:s,oldSnap:r}}function Uw(s,n){return{type:"child_moved",snapshotNode:n,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(n){this.index_=n}updateChild(n,r,l,c,p,m){K(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const w=n.getImmediateChild(r);return w.getChild(c).equals(l.getChild(c))&&w.isEmpty()===l.isEmpty()||(m!=null&&(l.isEmpty()?n.hasChild(r)?m.trackChildChange(Fa(r,w)):K(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):w.isEmpty()?m.trackChildChange(ho(r,l)):m.trackChildChange(Ba(r,l,w))),n.isLeafNode()&&l.isEmpty())?n:n.updateImmediateChild(r,l).withIndex(this.index_)}updateFullNode(n,r,l){return l!=null&&(n.isLeafNode()||n.forEachChild(st,(c,p)=>{r.hasChild(c)||l.trackChildChange(Fa(c,p))}),r.isLeafNode()||r.forEachChild(st,(c,p)=>{if(n.hasChild(c)){const m=n.getImmediateChild(c);m.equals(p)||l.trackChildChange(Ba(c,p,m))}else l.trackChildChange(ho(c,p))})),r.withIndex(this.index_)}updatePriority(n,r){return n.isEmpty()?fe.EMPTY_NODE:n.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(n){this.indexedFilter_=new Sd(n.getIndex()),this.index_=n.getIndex(),this.startPost_=Wa.getStartPost_(n),this.endPost_=Wa.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,l=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return r&&l}updateChild(n,r,l,c,p,m){return this.matches(new xe(r,l))||(l=fe.EMPTY_NODE),this.indexedFilter_.updateChild(n,r,l,c,p,m)}updateFullNode(n,r,l){r.isLeafNode()&&(r=fe.EMPTY_NODE);let c=r.withIndex(this.index_);c=c.updatePriority(fe.EMPTY_NODE);const p=this;return r.forEachChild(st,(m,w)=>{p.matches(new xe(m,w))||(c=c.updateImmediateChild(m,fe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,c,l)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const r=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),r)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const r=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),r)}else return n.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(n){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const l=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?l<=0:l<0},this.withinEndPost=r=>{const l=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?l<=0:l<0},this.rangedFilter_=new Wa(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,r,l,c,p,m){return this.rangedFilter_.matches(new xe(r,l))||(l=fe.EMPTY_NODE),n.getImmediateChild(r).equals(l)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,r,l,c,p,m):this.fullLimitUpdateChild_(n,r,l,p,m)}updateFullNode(n,r,l){let c;if(r.isLeafNode()||r.isEmpty())c=fe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){c=fe.EMPTY_NODE.withIndex(this.index_);let p;this.reverse_?p=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):p=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let m=0;for(;p.hasNext()&&m<this.limit_;){const w=p.getNext();if(this.withinDirectionalStart(w))if(this.withinDirectionalEnd(w))c=c.updateImmediateChild(w.name,w.node),m++;else break;else continue}}else{c=r.withIndex(this.index_),c=c.updatePriority(fe.EMPTY_NODE);let p;this.reverse_?p=c.getReverseIterator(this.index_):p=c.getIterator(this.index_);let m=0;for(;p.hasNext();){const w=p.getNext();m<this.limit_&&this.withinDirectionalStart(w)&&this.withinDirectionalEnd(w)?m++:c=c.updateImmediateChild(w.name,fe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,c,l)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,r,l,c,p){let m;if(this.reverse_){const k=this.index_.getCompare();m=(R,j)=>k(j,R)}else m=this.index_.getCompare();const w=n;K(w.numChildren()===this.limit_,"");const C=new xe(r,l),S=this.reverse_?w.getFirstChild(this.index_):w.getLastChild(this.index_),N=this.rangedFilter_.matches(C);if(w.hasChild(r)){const k=w.getImmediateChild(r);let R=c.getChildAfterChild(this.index_,S,this.reverse_);for(;R!=null&&(R.name===r||w.hasChild(R.name));)R=c.getChildAfterChild(this.index_,R,this.reverse_);const j=R==null?1:m(R,C);if(N&&!l.isEmpty()&&j>=0)return p!=null&&p.trackChildChange(Ba(r,l,k)),w.updateImmediateChild(r,l);{p!=null&&p.trackChildChange(Fa(r,k));const q=w.updateImmediateChild(r,fe.EMPTY_NODE);return R!=null&&this.rangedFilter_.matches(R)?(p!=null&&p.trackChildChange(ho(R.name,R.node)),q.updateImmediateChild(R.name,R.node)):q}}else return l.isEmpty()?n:N&&m(S,C)>=0?(p!=null&&(p.trackChildChange(Fa(S.name,S.node)),p.trackChildChange(ho(r,l))),w.updateImmediateChild(r,l).updateImmediateChild(S.name,fe.EMPTY_NODE)):n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=st}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:co}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:os}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===st}copy(){const n=new Ed;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function jw(s){return s.loadsAllData()?new Sd(s.getIndex()):s.hasLimit()?new Hw(s):new Wa(s)}function u_(s){const n={};if(s.isDefault())return n;let r;if(s.index_===st?r="$priority":s.index_===Ww?r="$value":s.index_===lo?r="$key":(K(s.index_ instanceof Fw,"Unrecognized index type!"),r=s.index_.toString()),n.orderBy=gt(r),s.startSet_){const l=s.startAfterSet_?"startAfter":"startAt";n[l]=gt(s.indexStartValue_),s.startNameSet_&&(n[l]+=","+gt(s.indexStartName_))}if(s.endSet_){const l=s.endBeforeSet_?"endBefore":"endAt";n[l]=gt(s.indexEndValue_),s.endNameSet_&&(n[l]+=","+gt(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?n.limitToFirst=s.limit_:n.limitToLast=s.limit_),n}function c_(s){const n={};if(s.startSet_&&(n.sp=s.indexStartValue_,s.startNameSet_&&(n.sn=s.indexStartName_),n.sin=!s.startAfterSet_),s.endSet_&&(n.ep=s.indexEndValue_,s.endNameSet_&&(n.en=s.indexEndName_),n.ein=!s.endBeforeSet_),s.limitSet_){n.l=s.limit_;let r=s.viewFrom_;r===""&&(s.isViewFromLeft()?r="l":r="r"),n.vf=r}return s.index_!==st&&(n.i=s.index_.toString()),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends dm{reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,r){return r!==void 0?"tag$"+r:(K(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}constructor(n,r,l,c){super(),this.repoInfo_=n,this.onDataUpdate_=r,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.log_=Ka("p:rest:"),this.listens_={}}listen(n,r,l,c){const p=n._path.toString();this.log_("Listen called for "+p+" "+n._queryIdentifier);const m=Ou.getListenId_(n,l),w={};this.listens_[m]=w;const C=u_(n._queryParams);this.restRequest_(p+".json",C,(S,N)=>{let k=N;if(S===404&&(k=null,S=null),S===null&&this.onDataUpdate_(p,k,!1,l),uo(this.listens_,m)===w){let R;S?S===401?R="permission_denied":R="rest_error:"+S:R="ok",c(R,null)}})}unlisten(n,r){const l=Ou.getListenId_(n,r);delete this.listens_[l]}get(n){const r=u_(n._queryParams),l=n._path.toString(),c=new Va;return this.restRequest_(l+".json",r,(p,m)=>{let w=m;p===404&&(w=null,p=null),p===null?(this.onDataUpdate_(l,w,!1,null),c.resolve(w)):c.reject(new Error(w))}),c.promise}refreshAuthToken(n){}restRequest_(n,r={},l){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([c,p])=>{c&&c.accessToken&&(r.auth=c.accessToken),p&&p.token&&(r.ac=p.token);const m=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+gv(r);this.log_("Sending REST request for "+m);const w=new XMLHttpRequest;w.onreadystatechange=()=>{if(l&&w.readyState===4){this.log_("REST Response for "+m+" received. status:",w.status,"response:",w.responseText);let C=null;if(w.status>=200&&w.status<300){try{C=Oa(w.responseText)}catch{Gt("Failed to parse JSON response for "+m+": "+w.responseText)}l(null,C)}else w.status!==401&&w.status!==404&&Gt("Got unsuccessful REST response for "+m+" Status: "+w.status),l(w.status);l=null}},w.open("GET",m,!0),w.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.rootNode_=fe.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,r){this.rootNode_=this.rootNode_.updateChild(n,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(){return{value:null,children:new Map}}function Sm(s,n,r){if(Pe(n))s.value=r,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(n,r);else{const l=Ee(n);s.children.has(l)||s.children.set(l,Au());const c=s.children.get(l);n=Ve(n),Sm(c,n,r)}}function Jh(s,n,r){s.value!==null?r(n,s.value):Vw(s,(l,c)=>{const p=new Be(n.toString()+"/"+l);Jh(c,p,r)})}function Vw(s,n){s.children.forEach((r,l)=>{n(l,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),r=Object.assign({},n);return this.last_&&It(this.last_,(l,c)=>{r[l]=r[l]-c}),this.last_=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=10*1e3,Gw=30*1e3,Kw=5*60*1e3;class qw{constructor(n,r){this.server_=r,this.statsToReport_={},this.statsListener_=new $w(n);const l=h_+(Gw-h_)*Math.random();Ia(this.reportStats_.bind(this),Math.floor(l))}reportStats_(){const n=this.statsListener_.get(),r={};let l=!1;It(n,(c,p)=>{p>0&&ri(this.statsToReport_,c)&&(r[c]=p,l=!0)}),l&&this.server_.reportStats(r),Ia(this.reportStats_.bind(this),Math.floor(Math.random()*2*Kw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Hn||(Hn={}));function xd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Td(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Pd(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(n,r,l){this.path=n,this.affectedTree=r,this.revert=l,this.type=Hn.ACK_USER_WRITE,this.source=xd()}operationForChild(n){if(Pe(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new Be(n));return new Du(Re(),r,this.revert)}}else return K(Ee(this.path)===n,"operationForChild called for unrelated child."),new Du(Ve(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(n,r){this.source=n,this.path=r,this.type=Hn.LISTEN_COMPLETE}operationForChild(n){return Pe(this.path)?new Ua(this.source,Re()):new Ua(this.source,Ve(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(n,r,l){this.source=n,this.path=r,this.snap=l,this.type=Hn.OVERWRITE}operationForChild(n){return Pe(this.path)?new as(this.source,Re(),this.snap.getImmediateChild(n)):new as(this.source,Ve(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(n,r,l){this.source=n,this.path=r,this.children=l,this.type=Hn.MERGE}operationForChild(n){if(Pe(this.path)){const r=this.children.subtree(new Be(n));return r.isEmpty()?null:r.value?new as(this.source,Re(),r.value):new fo(this.source,Re(),r)}else return K(Ee(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new fo(this.source,Ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(n,r,l){this.node_=n,this.fullyInitialized_=r,this.filtered_=l}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(Pe(n))return this.isFullyInitialized()&&!this.filtered_;const r=Ee(n);return this.isCompleteForChild(r)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function Qw(s,n,r,l){const c=[],p=[];return n.forEach(m=>{m.type==="child_changed"&&s.index_.indexedValueChanged(m.oldSnap,m.snapshotNode)&&p.push(Uw(m.childName,m.snapshotNode))}),Ta(s,c,"child_removed",n,l,r),Ta(s,c,"child_added",n,l,r),Ta(s,c,"child_moved",p,l,r),Ta(s,c,"child_changed",n,l,r),Ta(s,c,"value",n,l,r),c}function Ta(s,n,r,l,c,p){const m=l.filter(w=>w.type===r);m.sort((w,C)=>Jw(s,w,C)),m.forEach(w=>{const C=Xw(s,w,p);c.forEach(S=>{S.respondsTo(w.type)&&n.push(S.createEvent(C,s.query_))})})}function Xw(s,n,r){return n.type==="value"||n.type==="child_removed"||(n.prevName=r.getPredecessorChildName(n.childName,n.snapshotNode,s.index_)),n}function Jw(s,n,r){if(n.childName==null||r.childName==null)throw mo("Should only compare child_ events.");const l=new xe(n.childName,n.snapshotNode),c=new xe(r.childName,r.snapshotNode);return s.index_.compare(l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(s,n){return{eventCache:s,serverCache:n}}function Na(s,n,r,l){return $u(new xr(n,r,l),s.serverCache)}function Em(s,n,r,l){return $u(s.eventCache,new xr(n,r,l))}function bu(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function ls(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh;const e0=()=>(Bh||(Bh=new rn(Fy)),Bh);class je{static fromObject(n){let r=new je(null);return It(n,(l,c)=>{r=r.set(new Be(l),c)}),r}constructor(n,r=e0()){this.value=n,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,r){if(this.value!=null&&r(this.value))return{path:Re(),value:this.value};if(Pe(n))return null;{const l=Ee(n),c=this.children.get(l);if(c!==null){const p=c.findRootMostMatchingPathAndValue(Ve(n),r);return p!=null?{path:rt(new Be(l),p.path),value:p.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(Pe(n))return this;{const r=Ee(n),l=this.children.get(r);return l!==null?l.subtree(Ve(n)):new je(null)}}set(n,r){if(Pe(n))return new je(r,this.children);{const l=Ee(n),p=(this.children.get(l)||new je(null)).set(Ve(n),r),m=this.children.insert(l,p);return new je(this.value,m)}}remove(n){if(Pe(n))return this.children.isEmpty()?new je(null):new je(null,this.children);{const r=Ee(n),l=this.children.get(r);if(l){const c=l.remove(Ve(n));let p;return c.isEmpty()?p=this.children.remove(r):p=this.children.insert(r,c),this.value===null&&p.isEmpty()?new je(null):new je(this.value,p)}else return this}}get(n){if(Pe(n))return this.value;{const r=Ee(n),l=this.children.get(r);return l?l.get(Ve(n)):null}}setTree(n,r){if(Pe(n))return r;{const l=Ee(n),p=(this.children.get(l)||new je(null)).setTree(Ve(n),r);let m;return p.isEmpty()?m=this.children.remove(l):m=this.children.insert(l,p),new je(this.value,m)}}fold(n){return this.fold_(Re(),n)}fold_(n,r){const l={};return this.children.inorderTraversal((c,p)=>{l[c]=p.fold_(rt(n,c),r)}),r(n,this.value,l)}findOnPath(n,r){return this.findOnPath_(n,Re(),r)}findOnPath_(n,r,l){const c=this.value?l(r,this.value):!1;if(c)return c;if(Pe(n))return null;{const p=Ee(n),m=this.children.get(p);return m?m.findOnPath_(Ve(n),rt(r,p),l):null}}foreachOnPath(n,r){return this.foreachOnPath_(n,Re(),r)}foreachOnPath_(n,r,l){if(Pe(n))return this;{this.value&&l(r,this.value);const c=Ee(n),p=this.children.get(c);return p?p.foreachOnPath_(Ve(n),rt(r,c),l):new je(null)}}foreach(n){this.foreach_(Re(),n)}foreach_(n,r){this.children.inorderTraversal((l,c)=>{c.foreach_(rt(n,l),r)}),this.value&&r(n,this.value)}foreachChild(n){this.children.inorderTraversal((r,l)=>{l.value&&n(r,l.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(n){this.writeTree_=n}static empty(){return new jn(new je(null))}}function Ra(s,n,r){if(Pe(n))return new jn(new je(r));{const l=s.writeTree_.findRootMostValueAndPath(n);if(l!=null){const c=l.path;let p=l.value;const m=$t(c,n);return p=p.updateChild(m,r),new jn(s.writeTree_.set(c,p))}else{const c=new je(r),p=s.writeTree_.setTree(n,c);return new jn(p)}}}function ed(s,n,r){let l=s;return It(r,(c,p)=>{l=Ra(l,rt(n,c),p)}),l}function d_(s,n){if(Pe(n))return jn.empty();{const r=s.writeTree_.setTree(n,new je(null));return new jn(r)}}function td(s,n){return hs(s,n)!=null}function hs(s,n){const r=s.writeTree_.findRootMostValueAndPath(n);return r!=null?s.writeTree_.get(r.path).getChild($t(r.path,n)):null}function f_(s){const n=[],r=s.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(st,(l,c)=>{n.push(new xe(l,c))}):s.writeTree_.children.inorderTraversal((l,c)=>{c.value!=null&&n.push(new xe(l,c.value))}),n}function Cr(s,n){if(Pe(n))return s;{const r=hs(s,n);return r!=null?new jn(new je(r)):new jn(s.writeTree_.subtree(n))}}function nd(s){return s.writeTree_.isEmpty()}function po(s,n){return xm(Re(),s.writeTree_,n)}function xm(s,n,r){if(n.value!=null)return r.updateChild(s,n.value);{let l=null;return n.children.inorderTraversal((c,p)=>{c===".priority"?(K(p.value!==null,"Priority writes must always be leaf nodes"),l=p.value):r=xm(rt(s,c),p,r)}),!r.getChild(s).isEmpty()&&l!==null&&(r=r.updateChild(rt(s,".priority"),l)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(s,n){return Lm(n,s)}function t0(s,n,r,l,c){K(l>s.lastWriteId,"Stacking an older write on top of newer ones"),c===void 0&&(c=!0),s.allWrites.push({path:n,snap:r,writeId:l,visible:c}),c&&(s.visibleWrites=Ra(s.visibleWrites,n,r)),s.lastWriteId=l}function n0(s,n,r,l){K(l>s.lastWriteId,"Stacking an older merge on top of newer ones"),s.allWrites.push({path:n,children:r,writeId:l,visible:!0}),s.visibleWrites=ed(s.visibleWrites,n,r),s.lastWriteId=l}function i0(s,n){for(let r=0;r<s.allWrites.length;r++){const l=s.allWrites[r];if(l.writeId===n)return l}return null}function r0(s,n){const r=s.allWrites.findIndex(w=>w.writeId===n);K(r>=0,"removeWrite called with nonexistent writeId.");const l=s.allWrites[r];s.allWrites.splice(r,1);let c=l.visible,p=!1,m=s.allWrites.length-1;for(;c&&m>=0;){const w=s.allWrites[m];w.visible&&(m>=r&&s0(w,l.path)?c=!1:In(l.path,w.path)&&(p=!0)),m--}if(c){if(p)return o0(s),!0;if(l.snap)s.visibleWrites=d_(s.visibleWrites,l.path);else{const w=l.children;It(w,C=>{s.visibleWrites=d_(s.visibleWrites,rt(l.path,C))})}return!0}else return!1}function s0(s,n){if(s.snap)return In(s.path,n);for(const r in s.children)if(s.children.hasOwnProperty(r)&&In(rt(s.path,r),n))return!0;return!1}function o0(s){s.visibleWrites=Tm(s.allWrites,a0,Re()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function a0(s){return s.visible}function Tm(s,n,r){let l=jn.empty();for(let c=0;c<s.length;++c){const p=s[c];if(n(p)){const m=p.path;let w;if(p.snap)In(r,m)?(w=$t(r,m),l=Ra(l,w,p.snap)):In(m,r)&&(w=$t(m,r),l=Ra(l,Re(),p.snap.getChild(w)));else if(p.children){if(In(r,m))w=$t(r,m),l=ed(l,w,p.children);else if(In(m,r))if(w=$t(m,r),Pe(w))l=ed(l,Re(),p.children);else{const C=uo(p.children,Ee(w));if(C){const S=C.getChild(Ve(w));l=Ra(l,Re(),S)}}}else throw mo("WriteRecord should have .snap or .children")}}return l}function Pm(s,n,r,l,c){if(!l&&!c){const p=hs(s.visibleWrites,n);if(p!=null)return p;{const m=Cr(s.visibleWrites,n);if(nd(m))return r;if(r==null&&!td(m,Re()))return null;{const w=r||fe.EMPTY_NODE;return po(m,w)}}}else{const p=Cr(s.visibleWrites,n);if(!c&&nd(p))return r;if(!c&&r==null&&!td(p,Re()))return null;{const m=function(S){return(S.visible||c)&&(!l||!~l.indexOf(S.writeId))&&(In(S.path,n)||In(n,S.path))},w=Tm(s.allWrites,m,n),C=r||fe.EMPTY_NODE;return po(w,C)}}}function l0(s,n,r){let l=fe.EMPTY_NODE;const c=hs(s.visibleWrites,n);if(c)return c.isLeafNode()||c.forEachChild(st,(p,m)=>{l=l.updateImmediateChild(p,m)}),l;if(r){const p=Cr(s.visibleWrites,n);return r.forEachChild(st,(m,w)=>{const C=po(Cr(p,new Be(m)),w);l=l.updateImmediateChild(m,C)}),f_(p).forEach(m=>{l=l.updateImmediateChild(m.name,m.node)}),l}else{const p=Cr(s.visibleWrites,n);return f_(p).forEach(m=>{l=l.updateImmediateChild(m.name,m.node)}),l}}function u0(s,n,r,l,c){K(l||c,"Either existingEventSnap or existingServerSnap must exist");const p=rt(n,r);if(td(s.visibleWrites,p))return null;{const m=Cr(s.visibleWrites,p);return nd(m)?c.getChild(r):po(m,c.getChild(r))}}function c0(s,n,r,l){const c=rt(n,r),p=hs(s.visibleWrites,c);if(p!=null)return p;if(l.isCompleteForChild(r)){const m=Cr(s.visibleWrites,c);return po(m,l.getNode().getImmediateChild(r))}else return null}function h0(s,n){return hs(s.visibleWrites,n)}function d0(s,n,r,l,c,p,m){let w;const C=Cr(s.visibleWrites,n),S=hs(C,Re());if(S!=null)w=S;else if(r!=null)w=po(C,r);else return[];if(w=w.withIndex(m),!w.isEmpty()&&!w.isLeafNode()){const N=[],k=m.getCompare(),R=p?w.getReverseIteratorFrom(l,m):w.getIteratorFrom(l,m);let j=R.getNext();for(;j&&N.length<c;)k(j,l)!==0&&N.push(j),j=R.getNext();return N}else return[]}function f0(){return{visibleWrites:jn.empty(),allWrites:[],lastWriteId:-1}}function zu(s,n,r,l){return Pm(s.writeTree,s.treePath,n,r,l)}function kd(s,n){return l0(s.writeTree,s.treePath,n)}function p_(s,n,r,l){return u0(s.writeTree,s.treePath,n,r,l)}function Fu(s,n){return h0(s.writeTree,rt(s.treePath,n))}function p0(s,n,r,l,c,p){return d0(s.writeTree,s.treePath,n,r,l,c,p)}function Ld(s,n,r){return c0(s.writeTree,s.treePath,n,r)}function km(s,n){return Lm(rt(s.treePath,n),s.writeTree)}function Lm(s,n){return{treePath:s,writeTree:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.changeMap=new Map}trackChildChange(n){const r=n.type,l=n.childName;K(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),K(l!==".priority","Only non-priority child changes can be tracked.");const c=this.changeMap.get(l);if(c){const p=c.type;if(r==="child_added"&&p==="child_removed")this.changeMap.set(l,Ba(l,n.snapshotNode,c.snapshotNode));else if(r==="child_removed"&&p==="child_added")this.changeMap.delete(l);else if(r==="child_removed"&&p==="child_changed")this.changeMap.set(l,Fa(l,c.oldSnap));else if(r==="child_changed"&&p==="child_added")this.changeMap.set(l,ho(l,n.snapshotNode));else if(r==="child_changed"&&p==="child_changed")this.changeMap.set(l,Ba(l,n.snapshotNode,c.oldSnap));else throw mo("Illegal combination of changes: "+n+" occurred after "+c)}else this.changeMap.set(l,n)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{getCompleteChild(n){return null}getChildAfterChild(n,r,l){return null}}const Im=new m0;class Id{constructor(n,r,l=null){this.writes_=n,this.viewCache_=r,this.optCompleteServerCache_=l}getCompleteChild(n){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(n))return r.getNode().getImmediateChild(n);{const l=this.optCompleteServerCache_!=null?new xr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ld(this.writes_,n,l)}}getChildAfterChild(n,r,l){const c=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ls(this.viewCache_),p=p0(this.writes_,c,r,1,l,n);return p.length===0?null:p[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(s){return{filter:s}}function v0(s,n){K(n.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),K(n.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function y0(s,n,r,l,c){const p=new _0;let m,w;if(r.type===Hn.OVERWRITE){const S=r;S.source.fromUser?m=id(s,n,S.path,S.snap,l,c,p):(K(S.source.fromServer,"Unknown source."),w=S.source.tagged||n.serverCache.isFiltered()&&!Pe(S.path),m=Bu(s,n,S.path,S.snap,l,c,w,p))}else if(r.type===Hn.MERGE){const S=r;S.source.fromUser?m=C0(s,n,S.path,S.children,l,c,p):(K(S.source.fromServer,"Unknown source."),w=S.source.tagged||n.serverCache.isFiltered(),m=rd(s,n,S.path,S.children,l,c,w,p))}else if(r.type===Hn.ACK_USER_WRITE){const S=r;S.revert?m=x0(s,n,S.path,l,c,p):m=S0(s,n,S.path,S.affectedTree,l,c,p)}else if(r.type===Hn.LISTEN_COMPLETE)m=E0(s,n,r.path,l,p);else throw mo("Unknown operation type: "+r.type);const C=p.getChanges();return w0(n,m,C),{viewCache:m,changes:C}}function w0(s,n,r){const l=n.eventCache;if(l.isFullyInitialized()){const c=l.getNode().isLeafNode()||l.getNode().isEmpty(),p=bu(s);(r.length>0||!s.eventCache.isFullyInitialized()||c&&!l.getNode().equals(p)||!l.getNode().getPriority().equals(p.getPriority()))&&r.push(Cm(bu(n)))}}function Nm(s,n,r,l,c,p){const m=n.eventCache;if(Fu(l,r)!=null)return n;{let w,C;if(Pe(r))if(K(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const S=ls(n),N=S instanceof fe?S:fe.EMPTY_NODE,k=kd(l,N);w=s.filter.updateFullNode(n.eventCache.getNode(),k,p)}else{const S=zu(l,ls(n));w=s.filter.updateFullNode(n.eventCache.getNode(),S,p)}else{const S=Ee(r);if(S===".priority"){K(Er(r)===1,"Can't have a priority with additional path components");const N=m.getNode();C=n.serverCache.getNode();const k=p_(l,r,N,C);k!=null?w=s.filter.updatePriority(N,k):w=m.getNode()}else{const N=Ve(r);let k;if(m.isCompleteForChild(S)){C=n.serverCache.getNode();const R=p_(l,r,m.getNode(),C);R!=null?k=m.getNode().getImmediateChild(S).updateChild(N,R):k=m.getNode().getImmediateChild(S)}else k=Ld(l,S,n.serverCache);k!=null?w=s.filter.updateChild(m.getNode(),S,k,N,c,p):w=m.getNode()}}return Na(n,w,m.isFullyInitialized()||Pe(r),s.filter.filtersNodes())}}function Bu(s,n,r,l,c,p,m,w){const C=n.serverCache;let S;const N=m?s.filter:s.filter.getIndexedFilter();if(Pe(r))S=N.updateFullNode(C.getNode(),l,null);else if(N.filtersNodes()&&!C.isFiltered()){const j=C.getNode().updateChild(r,l);S=N.updateFullNode(C.getNode(),j,null)}else{const j=Ee(r);if(!C.isCompleteForPath(r)&&Er(r)>1)return n;const Y=Ve(r),le=C.getNode().getImmediateChild(j).updateChild(Y,l);j===".priority"?S=N.updatePriority(C.getNode(),le):S=N.updateChild(C.getNode(),j,le,Y,Im,null)}const k=Em(n,S,C.isFullyInitialized()||Pe(r),N.filtersNodes()),R=new Id(c,k,p);return Nm(s,k,r,c,R,w)}function id(s,n,r,l,c,p,m){const w=n.eventCache;let C,S;const N=new Id(c,n,p);if(Pe(r))S=s.filter.updateFullNode(n.eventCache.getNode(),l,m),C=Na(n,S,!0,s.filter.filtersNodes());else{const k=Ee(r);if(k===".priority")S=s.filter.updatePriority(n.eventCache.getNode(),l),C=Na(n,S,w.isFullyInitialized(),w.isFiltered());else{const R=Ve(r),j=w.getNode().getImmediateChild(k);let Y;if(Pe(R))Y=l;else{const q=N.getCompleteChild(k);q!=null?vd(R)===".priority"&&q.getChild(pm(R)).isEmpty()?Y=q:Y=q.updateChild(R,l):Y=fe.EMPTY_NODE}if(j.equals(Y))C=n;else{const q=s.filter.updateChild(w.getNode(),k,Y,R,N,m);C=Na(n,q,w.isFullyInitialized(),s.filter.filtersNodes())}}}return C}function __(s,n){return s.eventCache.isCompleteForChild(n)}function C0(s,n,r,l,c,p,m){let w=n;return l.foreach((C,S)=>{const N=rt(r,C);__(n,Ee(N))&&(w=id(s,w,N,S,c,p,m))}),l.foreach((C,S)=>{const N=rt(r,C);__(n,Ee(N))||(w=id(s,w,N,S,c,p,m))}),w}function m_(s,n,r){return r.foreach((l,c)=>{n=n.updateChild(l,c)}),n}function rd(s,n,r,l,c,p,m,w){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let C=n,S;Pe(r)?S=l:S=new je(null).setTree(r,l);const N=n.serverCache.getNode();return S.children.inorderTraversal((k,R)=>{if(N.hasChild(k)){const j=n.serverCache.getNode().getImmediateChild(k),Y=m_(s,j,R);C=Bu(s,C,new Be(k),Y,c,p,m,w)}}),S.children.inorderTraversal((k,R)=>{const j=!n.serverCache.isCompleteForChild(k)&&R.value===null;if(!N.hasChild(k)&&!j){const Y=n.serverCache.getNode().getImmediateChild(k),q=m_(s,Y,R);C=Bu(s,C,new Be(k),q,c,p,m,w)}}),C}function S0(s,n,r,l,c,p,m){if(Fu(c,r)!=null)return n;const w=n.serverCache.isFiltered(),C=n.serverCache;if(l.value!=null){if(Pe(r)&&C.isFullyInitialized()||C.isCompleteForPath(r))return Bu(s,n,r,C.getNode().getChild(r),c,p,w,m);if(Pe(r)){let S=new je(null);return C.getNode().forEachChild(lo,(N,k)=>{S=S.set(new Be(N),k)}),rd(s,n,r,S,c,p,w,m)}else return n}else{let S=new je(null);return l.foreach((N,k)=>{const R=rt(r,N);C.isCompleteForPath(R)&&(S=S.set(N,C.getNode().getChild(R)))}),rd(s,n,r,S,c,p,w,m)}}function E0(s,n,r,l,c){const p=n.serverCache,m=Em(n,p.getNode(),p.isFullyInitialized()||Pe(r),p.isFiltered());return Nm(s,m,r,l,Im,c)}function x0(s,n,r,l,c,p){let m;if(Fu(l,r)!=null)return n;{const w=new Id(l,n,c),C=n.eventCache.getNode();let S;if(Pe(r)||Ee(r)===".priority"){let N;if(n.serverCache.isFullyInitialized())N=zu(l,ls(n));else{const k=n.serverCache.getNode();K(k instanceof fe,"serverChildren would be complete if leaf node"),N=kd(l,k)}N=N,S=s.filter.updateFullNode(C,N,p)}else{const N=Ee(r);let k=Ld(l,N,n.serverCache);k==null&&n.serverCache.isCompleteForChild(N)&&(k=C.getImmediateChild(N)),k!=null?S=s.filter.updateChild(C,N,k,Ve(r),w,p):n.eventCache.getNode().hasChild(N)?S=s.filter.updateChild(C,N,fe.EMPTY_NODE,Ve(r),w,p):S=C,S.isEmpty()&&n.serverCache.isFullyInitialized()&&(m=zu(l,ls(n)),m.isLeafNode()&&(S=s.filter.updateFullNode(S,m,p)))}return m=n.serverCache.isFullyInitialized()||Fu(l,Re())!=null,Na(n,S,m,s.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(n,r){this.query_=n,this.eventRegistrations_=[];const l=this.query_._queryParams,c=new Sd(l.getIndex()),p=jw(l);this.processor_=g0(p);const m=r.serverCache,w=r.eventCache,C=c.updateFullNode(fe.EMPTY_NODE,m.getNode(),null),S=p.updateFullNode(fe.EMPTY_NODE,w.getNode(),null),N=new xr(C,m.isFullyInitialized(),c.filtersNodes()),k=new xr(S,w.isFullyInitialized(),p.filtersNodes());this.viewCache_=$u(k,N),this.eventGenerator_=new Yw(this.query_)}get query(){return this.query_}}function P0(s){return s.viewCache_.serverCache.getNode()}function k0(s){return bu(s.viewCache_)}function L0(s,n){const r=ls(s.viewCache_);return r&&(s.query._queryParams.loadsAllData()||!Pe(n)&&!r.getImmediateChild(Ee(n)).isEmpty())?r.getChild(n):null}function g_(s){return s.eventRegistrations_.length===0}function I0(s,n){s.eventRegistrations_.push(n)}function v_(s,n,r){const l=[];if(r){K(n==null,"A cancel should cancel all event registrations.");const c=s.query._path;s.eventRegistrations_.forEach(p=>{const m=p.createCancelEvent(r,c);m&&l.push(m)})}if(n){let c=[];for(let p=0;p<s.eventRegistrations_.length;++p){const m=s.eventRegistrations_[p];if(!m.matches(n))c.push(m);else if(n.hasAnyCallback()){c=c.concat(s.eventRegistrations_.slice(p+1));break}}s.eventRegistrations_=c}else s.eventRegistrations_=[];return l}function y_(s,n,r,l){n.type===Hn.MERGE&&n.source.queryId!==null&&(K(ls(s.viewCache_),"We should always have a full cache before handling merges"),K(bu(s.viewCache_),"Missing event cache, even though we have a server cache"));const c=s.viewCache_,p=y0(s.processor_,c,n,r,l);return v0(s.processor_,p.viewCache),K(p.viewCache.serverCache.isFullyInitialized()||!c.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=p.viewCache,Rm(s,p.changes,p.viewCache.eventCache.getNode(),null)}function N0(s,n){const r=s.viewCache_.eventCache,l=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(st,(p,m)=>{l.push(ho(p,m))}),r.isFullyInitialized()&&l.push(Cm(r.getNode())),Rm(s,l,r.getNode(),n)}function Rm(s,n,r,l){const c=l?[l]:s.eventRegistrations_;return Qw(s.eventGenerator_,n,r,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu;class Mm{constructor(){this.views=new Map}}function R0(s){K(!Wu,"__referenceConstructor has already been defined"),Wu=s}function M0(){return K(Wu,"Reference.ts has not been loaded"),Wu}function O0(s){return s.views.size===0}function Nd(s,n,r,l){const c=n.source.queryId;if(c!==null){const p=s.views.get(c);return K(p!=null,"SyncTree gave us an op for an invalid query."),y_(p,n,r,l)}else{let p=[];for(const m of s.views.values())p=p.concat(y_(m,n,r,l));return p}}function Om(s,n,r,l,c){const p=n._queryIdentifier,m=s.views.get(p);if(!m){let w=zu(r,c?l:null),C=!1;w?C=!0:l instanceof fe?(w=kd(r,l),C=!1):(w=fe.EMPTY_NODE,C=!1);const S=$u(new xr(w,C,!1),new xr(l,c,!1));return new T0(n,S)}return m}function A0(s,n,r,l,c,p){const m=Om(s,n,l,c,p);return s.views.has(n._queryIdentifier)||s.views.set(n._queryIdentifier,m),I0(m,r),N0(m,r)}function D0(s,n,r,l){const c=n._queryIdentifier,p=[];let m=[];const w=Tr(s);if(c==="default")for(const[C,S]of s.views.entries())m=m.concat(v_(S,r,l)),g_(S)&&(s.views.delete(C),S.query._queryParams.loadsAllData()||p.push(S.query));else{const C=s.views.get(c);C&&(m=m.concat(v_(C,r,l)),g_(C)&&(s.views.delete(c),C.query._queryParams.loadsAllData()||p.push(C.query)))}return w&&!Tr(s)&&p.push(new(M0())(n._repo,n._path)),{removed:p,events:m}}function Am(s){const n=[];for(const r of s.views.values())r.query._queryParams.loadsAllData()||n.push(r);return n}function Sr(s,n){let r=null;for(const l of s.views.values())r=r||L0(l,n);return r}function Dm(s,n){if(n._queryParams.loadsAllData())return Ku(s);{const l=n._queryIdentifier;return s.views.get(l)}}function bm(s,n){return Dm(s,n)!=null}function Tr(s){return Ku(s)!=null}function Ku(s){for(const n of s.views.values())if(n.query._queryParams.loadsAllData())return n;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu;function b0(s){K(!Uu,"__referenceConstructor has already been defined"),Uu=s}function z0(){return K(Uu,"Reference.ts has not been loaded"),Uu}let F0=1;class w_{constructor(n){this.listenProvider_=n,this.syncPointTree_=new je(null),this.pendingWriteTree_=f0(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zm(s,n,r,l,c){return t0(s.pendingWriteTree_,n,r,l,c),c?vo(s,new as(xd(),n,r)):[]}function B0(s,n,r,l){n0(s.pendingWriteTree_,n,r,l);const c=je.fromObject(r);return vo(s,new fo(xd(),n,c))}function vr(s,n,r=!1){const l=i0(s.pendingWriteTree_,n);if(r0(s.pendingWriteTree_,n)){let p=new je(null);return l.snap!=null?p=p.set(Re(),!0):It(l.children,m=>{p=p.set(new Be(m),!0)}),vo(s,new Du(l.path,p,r))}else return[]}function Ya(s,n,r){return vo(s,new as(Td(),n,r))}function W0(s,n,r){const l=je.fromObject(r);return vo(s,new fo(Td(),n,l))}function U0(s,n){return vo(s,new Ua(Td(),n))}function H0(s,n,r){const l=Md(s,r);if(l){const c=Od(l),p=c.path,m=c.queryId,w=$t(p,n),C=new Ua(Pd(m),w);return Ad(s,p,C)}else return[]}function Hu(s,n,r,l,c=!1){const p=n._path,m=s.syncPointTree_.get(p);let w=[];if(m&&(n._queryIdentifier==="default"||bm(m,n))){const C=D0(m,n,r,l);O0(m)&&(s.syncPointTree_=s.syncPointTree_.remove(p));const S=C.removed;if(w=C.events,!c){const N=S.findIndex(R=>R._queryParams.loadsAllData())!==-1,k=s.syncPointTree_.findOnPath(p,(R,j)=>Tr(j));if(N&&!k){const R=s.syncPointTree_.subtree(p);if(!R.isEmpty()){const j=V0(R);for(let Y=0;Y<j.length;++Y){const q=j[Y],le=q.query,Le=Um(s,q);s.listenProvider_.startListening(Ma(le),Ha(s,le),Le.hashFn,Le.onComplete)}}}!k&&S.length>0&&!l&&(N?s.listenProvider_.stopListening(Ma(n),null):S.forEach(R=>{const j=s.queryToTagMap.get(qu(R));s.listenProvider_.stopListening(Ma(R),j)}))}$0(s,S)}return w}function Fm(s,n,r,l){const c=Md(s,l);if(c!=null){const p=Od(c),m=p.path,w=p.queryId,C=$t(m,n),S=new as(Pd(w),C,r);return Ad(s,m,S)}else return[]}function j0(s,n,r,l){const c=Md(s,l);if(c){const p=Od(c),m=p.path,w=p.queryId,C=$t(m,n),S=je.fromObject(r),N=new fo(Pd(w),C,S);return Ad(s,m,N)}else return[]}function sd(s,n,r,l=!1){const c=n._path;let p=null,m=!1;s.syncPointTree_.foreachOnPath(c,(R,j)=>{const Y=$t(R,c);p=p||Sr(j,Y),m=m||Tr(j)});let w=s.syncPointTree_.get(c);w?(m=m||Tr(w),p=p||Sr(w,Re())):(w=new Mm,s.syncPointTree_=s.syncPointTree_.set(c,w));let C;p!=null?C=!0:(C=!1,p=fe.EMPTY_NODE,s.syncPointTree_.subtree(c).foreachChild((j,Y)=>{const q=Sr(Y,Re());q&&(p=p.updateImmediateChild(j,q))}));const S=bm(w,n);if(!S&&!n._queryParams.loadsAllData()){const R=qu(n);K(!s.queryToTagMap.has(R),"View does not exist, but we have a tag");const j=G0();s.queryToTagMap.set(R,j),s.tagToQueryMap.set(j,R)}const N=Gu(s.pendingWriteTree_,c);let k=A0(w,n,r,N,p,C);if(!S&&!m&&!l){const R=Dm(w,n);k=k.concat(K0(s,n,R))}return k}function Rd(s,n,r){const c=s.pendingWriteTree_,p=s.syncPointTree_.findOnPath(n,(m,w)=>{const C=$t(m,n),S=Sr(w,C);if(S)return S});return Pm(c,n,p,r,!0)}function Z0(s,n){const r=n._path;let l=null;s.syncPointTree_.foreachOnPath(r,(S,N)=>{const k=$t(S,r);l=l||Sr(N,k)});let c=s.syncPointTree_.get(r);c?l=l||Sr(c,Re()):(c=new Mm,s.syncPointTree_=s.syncPointTree_.set(r,c));const p=l!=null,m=p?new xr(l,!0,!1):null,w=Gu(s.pendingWriteTree_,n._path),C=Om(c,n,w,p?m.getNode():fe.EMPTY_NODE,p);return k0(C)}function vo(s,n){return Bm(n,s.syncPointTree_,null,Gu(s.pendingWriteTree_,Re()))}function Bm(s,n,r,l){if(Pe(s.path))return Wm(s,n,r,l);{const c=n.get(Re());r==null&&c!=null&&(r=Sr(c,Re()));let p=[];const m=Ee(s.path),w=s.operationForChild(m),C=n.children.get(m);if(C&&w){const S=r?r.getImmediateChild(m):null,N=km(l,m);p=p.concat(Bm(w,C,S,N))}return c&&(p=p.concat(Nd(c,s,l,r))),p}}function Wm(s,n,r,l){const c=n.get(Re());r==null&&c!=null&&(r=Sr(c,Re()));let p=[];return n.children.inorderTraversal((m,w)=>{const C=r?r.getImmediateChild(m):null,S=km(l,m),N=s.operationForChild(m);N&&(p=p.concat(Wm(N,w,C,S)))}),c&&(p=p.concat(Nd(c,s,l,r))),p}function Um(s,n){const r=n.query,l=Ha(s,r);return{hashFn:()=>(P0(n)||fe.EMPTY_NODE).hash(),onComplete:c=>{if(c==="ok")return l?H0(s,r._path,l):U0(s,r._path);{const p=Uy(c,r);return Hu(s,r,null,p)}}}}function Ha(s,n){const r=qu(n);return s.queryToTagMap.get(r)}function qu(s){return s._path.toString()+"$"+s._queryIdentifier}function Md(s,n){return s.tagToQueryMap.get(n)}function Od(s){const n=s.indexOf("$");return K(n!==-1&&n<s.length-1,"Bad queryKey."),{queryId:s.substr(n+1),path:new Be(s.substr(0,n))}}function Ad(s,n,r){const l=s.syncPointTree_.get(n);K(l,"Missing sync point for query tag that we're tracking");const c=Gu(s.pendingWriteTree_,n);return Nd(l,r,c,null)}function V0(s){return s.fold((n,r,l)=>{if(r&&Tr(r))return[Ku(r)];{let c=[];return r&&(c=Am(r)),It(l,(p,m)=>{c=c.concat(m)}),c}})}function Ma(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(z0())(s._repo,s._path):s}function $0(s,n){for(let r=0;r<n.length;++r){const l=n[r];if(!l._queryParams.loadsAllData()){const c=qu(l),p=s.queryToTagMap.get(c);s.queryToTagMap.delete(c),s.tagToQueryMap.delete(p)}}}function G0(){return F0++}function K0(s,n,r){const l=n._path,c=Ha(s,n),p=Um(s,r),m=s.listenProvider_.startListening(Ma(n),c,p.hashFn,p.onComplete),w=s.syncPointTree_.subtree(l);if(c)K(!Tr(w.value),"If we're adding a query, it shouldn't be shadowed");else{const C=w.fold((S,N,k)=>{if(!Pe(S)&&N&&Tr(N))return[Ku(N).query];{let R=[];return N&&(R=R.concat(Am(N).map(j=>j.query))),It(k,(j,Y)=>{R=R.concat(Y)}),R}});for(let S=0;S<C.length;++S){const N=C[S];s.listenProvider_.stopListening(Ma(N),Ha(s,N))}}return m}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(n){this.node_=n}getImmediateChild(n){const r=this.node_.getImmediateChild(n);return new Dd(r)}node(){return this.node_}}class bd{constructor(n,r){this.syncTree_=n,this.path_=r}getImmediateChild(n){const r=rt(this.path_,n);return new bd(this.syncTree_,r)}node(){return Rd(this.syncTree_,this.path_)}}const q0=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},C_=function(s,n,r){if(!s||typeof s!="object")return s;if(K(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return Y0(s[".sv"],n,r);if(typeof s[".sv"]=="object")return Q0(s[".sv"],n);K(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},Y0=function(s,n,r){switch(s){case"timestamp":return r.timestamp;default:K(!1,"Unexpected server value: "+s)}},Q0=function(s,n,r){s.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const l=s.increment;typeof l!="number"&&K(!1,"Unexpected increment value: "+l);const c=n.node();if(K(c!==null&&typeof c<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!c.isLeafNode())return l;const m=c.getValue();return typeof m!="number"?l:m+l},Hm=function(s,n,r,l){return zd(n,new bd(r,s),l)},jm=function(s,n,r){return zd(s,new Dd(n),r)};function zd(s,n,r){const l=s.getPriority().val(),c=C_(l,n.getImmediateChild(".priority"),r);let p;if(s.isLeafNode()){const m=s,w=C_(m.getValue(),n,r);return w!==m.getValue()||c!==m.getPriority().val()?new Ct(w,mt(c)):s}else{const m=s;return p=m,c!==m.getPriority().val()&&(p=p.updatePriority(new Ct(c))),m.forEachChild(st,(w,C)=>{const S=zd(C,n.getImmediateChild(w),r);S!==C&&(p=p.updateImmediateChild(w,S))}),p}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(n="",r=null,l={children:{},childCount:0}){this.name=n,this.parent=r,this.node=l}}function Bd(s,n){let r=n instanceof Be?n:new Be(n),l=s,c=Ee(r);for(;c!==null;){const p=uo(l.node.children,c)||{children:{},childCount:0};l=new Fd(c,l,p),r=Ve(r),c=Ee(r)}return l}function yo(s){return s.node.value}function Zm(s,n){s.node.value=n,od(s)}function Vm(s){return s.node.childCount>0}function X0(s){return yo(s)===void 0&&!Vm(s)}function Yu(s,n){It(s.node.children,(r,l)=>{n(new Fd(r,s,l))})}function $m(s,n,r,l){r&&n(s),Yu(s,c=>{$m(c,n,!0)})}function J0(s,n,r){let l=s.parent;for(;l!==null;){if(n(l))return!0;l=l.parent}return!1}function Qa(s){return new Be(s.parent===null?s.name:Qa(s.parent)+"/"+s.name)}function od(s){s.parent!==null&&eC(s.parent,s.name,s)}function eC(s,n,r){const l=X0(r),c=ri(s.node.children,n);l&&c?(delete s.node.children[n],s.node.childCount--,od(s)):!l&&!c&&(s.node.children[n]=r.node,s.node.childCount++,od(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=/[\[\].#$\/\u0000-\u001F\u007F]/,nC=/[\[\].#$\u0000-\u001F\u007F]/,Wh=10*1024*1024,Wd=function(s){return typeof s=="string"&&s.length!==0&&!tC.test(s)},Gm=function(s){return typeof s=="string"&&s.length!==0&&!nC.test(s)},iC=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Gm(s)},rC=function(s){return s===null||typeof s=="string"||typeof s=="number"&&!fd(s)||s&&typeof s=="object"&&ri(s,".sv")},Km=function(s,n,r,l){l&&n===void 0||Qu(ju(s,"value"),n,r)},Qu=function(s,n,r){const l=r instanceof Be?new Cw(r,s):r;if(n===void 0)throw new Error(s+"contains undefined "+rs(l));if(typeof n=="function")throw new Error(s+"contains a function "+rs(l)+" with contents = "+n.toString());if(fd(n))throw new Error(s+"contains "+n.toString()+" "+rs(l));if(typeof n=="string"&&n.length>Wh/3&&Zu(n)>Wh)throw new Error(s+"contains a string greater than "+Wh+" utf8 bytes "+rs(l)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let c=!1,p=!1;if(It(n,(m,w)=>{if(m===".value")c=!0;else if(m!==".priority"&&m!==".sv"&&(p=!0,!Wd(m)))throw new Error(s+" contains an invalid key ("+m+") "+rs(l)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Sw(l,m),Qu(s,w,l),Ew(l)}),c&&p)throw new Error(s+' contains ".value" child '+rs(l)+" in addition to actual children.")}},sC=function(s,n){let r,l;for(r=0;r<n.length;r++){l=n[r];const p=za(l);for(let m=0;m<p.length;m++)if(!(p[m]===".priority"&&m===p.length-1)){if(!Wd(p[m]))throw new Error(s+"contains an invalid key ("+p[m]+") in path "+l.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}n.sort(ww);let c=null;for(r=0;r<n.length;r++){if(l=n[r],c!==null&&In(c,l))throw new Error(s+"contains a path "+c.toString()+" that is ancestor of another path "+l.toString());c=l}},oC=function(s,n,r,l){const c=ju(s,"values");if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(c+" must be an object containing the children to replace.");const p=[];It(n,(m,w)=>{const C=new Be(m);if(Qu(c,w,rt(r,C)),vd(C)===".priority"&&!rC(w))throw new Error(c+"contains an invalid value for '"+C.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");p.push(C)}),sC(c,p)},qm=function(s,n,r,l){if(!Gm(r))throw new Error(ju(s,n)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},aC=function(s,n,r,l){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),qm(s,n,r)},Ym=function(s,n){if(Ee(n)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},lC=function(s,n){const r=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!Wd(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!iC(r))throw new Error(ju(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Xu(s,n){let r=null;for(let l=0;l<n.length;l++){const c=n[l],p=c.getPath();r!==null&&!yd(p,r.path)&&(s.eventLists_.push(r),r=null),r===null&&(r={events:[],path:p}),r.events.push(c)}r&&s.eventLists_.push(r)}function Qm(s,n,r){Xu(s,r),Xm(s,l=>yd(l,n))}function Nn(s,n,r){Xu(s,r),Xm(s,l=>In(l,n)||In(n,l))}function Xm(s,n){s.recursionDepth_++;let r=!0;for(let l=0;l<s.eventLists_.length;l++){const c=s.eventLists_[l];if(c){const p=c.path;n(p)?(cC(s.eventLists_[l]),s.eventLists_[l]=null):r=!1}}r&&(s.eventLists_=[]),s.recursionDepth_--}function cC(s){for(let n=0;n<s.events.length;n++){const r=s.events[n];if(r!==null){s.events[n]=null;const l=r.getEventRunner();La&&Lt("event: "+r.toString()),go(l)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="repo_interrupt",dC=25;class fC{constructor(n,r,l,c){this.repoInfo_=n,this.forceRestClient_=r,this.authTokenProvider_=l,this.appCheckProvider_=c,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Au(),this.transactionQueueTree_=new Fd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pC(s,n,r){if(s.stats_=md(s.repoInfo_),s.forceRestClient_||Vy())s.server_=new Ou(s.repoInfo_,(l,c,p,m)=>{S_(s,l,c,p,m)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>E_(s,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{gt(r)}catch(l){throw new Error("Invalid authOverride provided: "+l)}}s.persistentConnection_=new Ii(s.repoInfo_,n,(l,c,p,m)=>{S_(s,l,c,p,m)},l=>{E_(s,l)},l=>{_C(s,l)},s.authTokenProvider_,s.appCheckProvider_,r),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(l=>{s.server_.refreshAuthToken(l)}),s.appCheckProvider_.addTokenChangeListener(l=>{s.server_.refreshAppCheckToken(l.token)}),s.statsReporter_=Yy(s.repoInfo_,()=>new qw(s.stats_,s.server_)),s.infoData_=new Zw,s.infoSyncTree_=new w_({startListening:(l,c,p,m)=>{let w=[];const C=s.infoData_.getNode(l._path);return C.isEmpty()||(w=Ya(s.infoSyncTree_,l._path,C),setTimeout(()=>{m("ok")},0)),w},stopListening:()=>{}}),Ud(s,"connected",!1),s.serverSyncTree_=new w_({startListening:(l,c,p,m)=>(s.server_.listen(l,p,c,(w,C)=>{const S=m(w,C);Nn(s.eventQueue_,l._path,S)}),[]),stopListening:(l,c)=>{s.server_.unlisten(l,c)}})}function Jm(s){const r=s.infoData_.getNode(new Be(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function Ju(s){return q0({timestamp:Jm(s)})}function S_(s,n,r,l,c){s.dataUpdateCount++;const p=new Be(n);r=s.interceptServerDataCallback_?s.interceptServerDataCallback_(n,r):r;let m=[];if(c)if(l){const C=ku(r,S=>mt(S));m=j0(s.serverSyncTree_,p,C,c)}else{const C=mt(r);m=Fm(s.serverSyncTree_,p,C,c)}else if(l){const C=ku(r,S=>mt(S));m=W0(s.serverSyncTree_,p,C)}else{const C=mt(r);m=Ya(s.serverSyncTree_,p,C)}let w=p;m.length>0&&(w=_o(s,p)),Nn(s.eventQueue_,w,m)}function E_(s,n){Ud(s,"connected",n),n===!1&&yC(s)}function _C(s,n){It(n,(r,l)=>{Ud(s,r,l)})}function Ud(s,n,r){const l=new Be("/.info/"+n),c=mt(r);s.infoData_.updateSnapshot(l,c);const p=Ya(s.infoSyncTree_,l,c);Nn(s.eventQueue_,l,p)}function Hd(s){return s.nextWriteId_++}function mC(s,n,r){const l=Z0(s.serverSyncTree_,n);return l!=null?Promise.resolve(l):s.server_.get(n).then(c=>{const p=mt(c).withIndex(n._queryParams.getIndex());sd(s.serverSyncTree_,n,r,!0);let m;if(n._queryParams.loadsAllData())m=Ya(s.serverSyncTree_,n._path,p);else{const w=Ha(s.serverSyncTree_,n);m=Fm(s.serverSyncTree_,n._path,p,w)}return Nn(s.eventQueue_,n._path,m),Hu(s.serverSyncTree_,n,r,null,!0),p},c=>(Xa(s,"get for query "+gt(n)+" failed: "+c),Promise.reject(new Error(c))))}function gC(s,n,r,l,c){Xa(s,"set",{path:n.toString(),value:r,priority:l});const p=Ju(s),m=mt(r,l),w=Rd(s.serverSyncTree_,n),C=jm(m,w,p),S=Hd(s),N=zm(s.serverSyncTree_,n,C,S,!0);Xu(s.eventQueue_,N),s.server_.put(n.toString(),m.val(!0),(R,j)=>{const Y=R==="ok";Y||Gt("set at "+n+" failed: "+R);const q=vr(s.serverSyncTree_,S,!Y);Nn(s.eventQueue_,n,q),ad(s,c,R,j)});const k=Zd(s,n);_o(s,k),Nn(s.eventQueue_,k,[])}function vC(s,n,r,l){Xa(s,"update",{path:n.toString(),value:r});let c=!0;const p=Ju(s),m={};if(It(r,(w,C)=>{c=!1,m[w]=Hm(rt(n,w),mt(C),s.serverSyncTree_,p)}),c)Lt("update() called with empty data.  Don't do anything."),ad(s,l,"ok",void 0);else{const w=Hd(s),C=B0(s.serverSyncTree_,n,m,w);Xu(s.eventQueue_,C),s.server_.merge(n.toString(),r,(S,N)=>{const k=S==="ok";k||Gt("update at "+n+" failed: "+S);const R=vr(s.serverSyncTree_,w,!k),j=R.length>0?_o(s,n):n;Nn(s.eventQueue_,j,R),ad(s,l,S,N)}),It(r,S=>{const N=Zd(s,rt(n,S));_o(s,N)}),Nn(s.eventQueue_,n,[])}}function yC(s){Xa(s,"onDisconnectEvents");const n=Ju(s),r=Au();Jh(s.onDisconnect_,Re(),(c,p)=>{const m=Hm(c,p,s.serverSyncTree_,n);Sm(r,c,m)});let l=[];Jh(r,Re(),(c,p)=>{l=l.concat(Ya(s.serverSyncTree_,c,p));const m=Zd(s,c);_o(s,m)}),s.onDisconnect_=Au(),Nn(s.eventQueue_,Re(),l)}function wC(s,n,r){let l;Ee(n._path)===".info"?l=sd(s.infoSyncTree_,n,r):l=sd(s.serverSyncTree_,n,r),Qm(s.eventQueue_,n._path,l)}function CC(s,n,r){let l;Ee(n._path)===".info"?l=Hu(s.infoSyncTree_,n,r):l=Hu(s.serverSyncTree_,n,r),Qm(s.eventQueue_,n._path,l)}function SC(s){s.persistentConnection_&&s.persistentConnection_.interrupt(hC)}function Xa(s,...n){let r="";s.persistentConnection_&&(r=s.persistentConnection_.id+":"),Lt(r,...n)}function ad(s,n,r,l){n&&go(()=>{if(r==="ok")n(null);else{const c=(r||"error").toUpperCase();let p=c;l&&(p+=": "+l);const m=new Error(p);m.code=c,n(m)}})}function eg(s,n,r){return Rd(s.serverSyncTree_,n,r)||fe.EMPTY_NODE}function jd(s,n=s.transactionQueueTree_){if(n||ec(s,n),yo(n)){const r=ng(s,n);K(r.length>0,"Sending zero length transaction queue"),r.every(c=>c.status===0)&&EC(s,Qa(n),r)}else Vm(n)&&Yu(n,r=>{jd(s,r)})}function EC(s,n,r){const l=r.map(S=>S.currentWriteId),c=eg(s,n,l);let p=c;const m=c.hash();for(let S=0;S<r.length;S++){const N=r[S];K(N.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),N.status=1,N.retryCount++;const k=$t(n,N.path);p=p.updateChild(k,N.currentOutputSnapshotRaw)}const w=p.val(!0),C=n;s.server_.put(C.toString(),w,S=>{Xa(s,"transaction put response",{path:C.toString(),status:S});let N=[];if(S==="ok"){const k=[];for(let R=0;R<r.length;R++)r[R].status=2,N=N.concat(vr(s.serverSyncTree_,r[R].currentWriteId)),r[R].onComplete&&k.push(()=>r[R].onComplete(null,!0,r[R].currentOutputSnapshotResolved)),r[R].unwatcher();ec(s,Bd(s.transactionQueueTree_,n)),jd(s,s.transactionQueueTree_),Nn(s.eventQueue_,n,N);for(let R=0;R<k.length;R++)go(k[R])}else{if(S==="datastale")for(let k=0;k<r.length;k++)r[k].status===3?r[k].status=4:r[k].status=0;else{Gt("transaction at "+C.toString()+" failed: "+S);for(let k=0;k<r.length;k++)r[k].status=4,r[k].abortReason=S}_o(s,n)}},m)}function _o(s,n){const r=tg(s,n),l=Qa(r),c=ng(s,r);return xC(s,c,l),l}function xC(s,n,r){if(n.length===0)return;const l=[];let c=[];const m=n.filter(w=>w.status===0).map(w=>w.currentWriteId);for(let w=0;w<n.length;w++){const C=n[w],S=$t(r,C.path);let N=!1,k;if(K(S!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),C.status===4)N=!0,k=C.abortReason,c=c.concat(vr(s.serverSyncTree_,C.currentWriteId,!0));else if(C.status===0)if(C.retryCount>=dC)N=!0,k="maxretry",c=c.concat(vr(s.serverSyncTree_,C.currentWriteId,!0));else{const R=eg(s,C.path,m);C.currentInputSnapshot=R;const j=n[w].update(R.val());if(j!==void 0){Qu("transaction failed: Data returned ",j,C.path);let Y=mt(j);typeof j=="object"&&j!=null&&ri(j,".priority")||(Y=Y.updatePriority(R.getPriority()));const le=C.currentWriteId,Le=Ju(s),De=jm(Y,R,Le);C.currentOutputSnapshotRaw=Y,C.currentOutputSnapshotResolved=De,C.currentWriteId=Hd(s),m.splice(m.indexOf(le),1),c=c.concat(zm(s.serverSyncTree_,C.path,De,C.currentWriteId,C.applyLocally)),c=c.concat(vr(s.serverSyncTree_,le,!0))}else N=!0,k="nodata",c=c.concat(vr(s.serverSyncTree_,C.currentWriteId,!0))}Nn(s.eventQueue_,r,c),c=[],N&&(n[w].status=2,function(R){setTimeout(R,Math.floor(0))}(n[w].unwatcher),n[w].onComplete&&(k==="nodata"?l.push(()=>n[w].onComplete(null,!1,n[w].currentInputSnapshot)):l.push(()=>n[w].onComplete(new Error(k),!1,null))))}ec(s,s.transactionQueueTree_);for(let w=0;w<l.length;w++)go(l[w]);jd(s,s.transactionQueueTree_)}function tg(s,n){let r,l=s.transactionQueueTree_;for(r=Ee(n);r!==null&&yo(l)===void 0;)l=Bd(l,r),n=Ve(n),r=Ee(n);return l}function ng(s,n){const r=[];return ig(s,n,r),r.sort((l,c)=>l.order-c.order),r}function ig(s,n,r){const l=yo(n);if(l)for(let c=0;c<l.length;c++)r.push(l[c]);Yu(n,c=>{ig(s,c,r)})}function ec(s,n){const r=yo(n);if(r){let l=0;for(let c=0;c<r.length;c++)r[c].status!==2&&(r[l]=r[c],l++);r.length=l,Zm(n,r.length>0?r:void 0)}Yu(n,l=>{ec(s,l)})}function Zd(s,n){const r=Qa(tg(s,n)),l=Bd(s.transactionQueueTree_,n);return J0(l,c=>{Uh(s,c)}),Uh(s,l),$m(l,c=>{Uh(s,c)}),r}function Uh(s,n){const r=yo(n);if(r){const l=[];let c=[],p=-1;for(let m=0;m<r.length;m++)r[m].status===3||(r[m].status===1?(K(p===m-1,"All SENT items should be at beginning of queue."),p=m,r[m].status=3,r[m].abortReason="set"):(K(r[m].status===0,"Unexpected transaction status in abort"),r[m].unwatcher(),c=c.concat(vr(s.serverSyncTree_,r[m].currentWriteId,!0)),r[m].onComplete&&l.push(r[m].onComplete.bind(null,new Error("set"),!1,null))));p===-1?Zm(n,void 0):r.length=p+1,Nn(s.eventQueue_,Qa(n),c);for(let m=0;m<l.length;m++)go(l[m])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(s){let n="";const r=s.split("/");for(let l=0;l<r.length;l++)if(r[l].length>0){let c=r[l];try{c=decodeURIComponent(c.replace(/\+/g," "))}catch{}n+="/"+c}return n}function PC(s){const n={};s.charAt(0)==="?"&&(s=s.substring(1));for(const r of s.split("&")){if(r.length===0)continue;const l=r.split("=");l.length===2?n[decodeURIComponent(l[0])]=decodeURIComponent(l[1]):Gt(`Invalid query segment '${r}' in query '${s}'`)}return n}const x_=function(s,n){const r=kC(s),l=r.namespace;r.domain==="firebase.com"&&Ri(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!l||l==="undefined")&&r.domain!=="localhost"&&Ri("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||by();const c=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new sm(r.host,r.secure,l,c,n,"",l!==r.subdomain),path:new Be(r.pathString)}},kC=function(s){let n="",r="",l="",c="",p="",m=!0,w="https",C=443;if(typeof s=="string"){let S=s.indexOf("//");S>=0&&(w=s.substring(0,S-1),s=s.substring(S+2));let N=s.indexOf("/");N===-1&&(N=s.length);let k=s.indexOf("?");k===-1&&(k=s.length),n=s.substring(0,Math.min(N,k)),N<k&&(c=TC(s.substring(N,k)));const R=PC(s.substring(Math.min(s.length,k)));S=n.indexOf(":"),S>=0?(m=w==="https"||w==="wss",C=parseInt(n.substring(S+1),10)):S=n.length;const j=n.slice(0,S);if(j.toLowerCase()==="localhost")r="localhost";else if(j.split(".").length<=2)r=j;else{const Y=n.indexOf(".");l=n.substring(0,Y).toLowerCase(),r=n.substring(Y+1),p=l}"ns"in R&&(p=R.ns)}return{host:n,port:C,domain:r,subdomain:l,secure:m,scheme:w,pathString:c,namespace:p}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",LC=function(){let s=0;const n=[];return function(r){const l=r===s;s=r;let c;const p=new Array(8);for(c=7;c>=0;c--)p[c]=T_.charAt(r%64),r=Math.floor(r/64);K(r===0,"Cannot push at time == 0");let m=p.join("");if(l){for(c=11;c>=0&&n[c]===63;c--)n[c]=0;n[c]++}else for(c=0;c<12;c++)n[c]=Math.floor(Math.random()*64);for(c=0;c<12;c++)m+=T_.charAt(n[c]);return K(m.length===20,"nextPushId: Length should be 20."),m}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(n,r,l,c){this.eventType=n,this.eventRegistration=r,this.snapshot=l,this.prevName=c}getPath(){const n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+gt(this.snapshot.exportVal())}}class NC{constructor(n,r,l){this.eventRegistration=n,this.error=r,this.path=l}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(n,r){this.snapshotCallback=n,this.cancelCallback=r}onValue(n,r){this.snapshotCallback.call(null,n,r)}onCancel(n){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(n,r,l,c){this._repo=n,this._path=r,this._queryParams=l,this._orderByCalled=c}get key(){return Pe(this._path)?null:vd(this._path)}get ref(){return new Mi(this._repo,this._path)}get _queryIdentifier(){const n=c_(this._queryParams),r=pd(n);return r==="{}"?"default":r}get _queryObject(){return c_(this._queryParams)}isEqual(n){if(n=us(n),!(n instanceof Vd))return!1;const r=this._repo===n._repo,l=yd(this._path,n._path),c=this._queryIdentifier===n._queryIdentifier;return r&&l&&c}toJSON(){return this.toString()}toString(){return this._repo.toString()+yw(this._path)}}class Mi extends Vd{constructor(n,r){super(n,r,new Ed,!1)}get parent(){const n=pm(this._path);return n===null?null:new Mi(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}}class ja{constructor(n,r,l){this._node=n,this.ref=r,this._index=l}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const r=new Be(n),l=Za(this.ref,n);return new ja(this._node.getChild(r),l,st)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(l,c)=>n(new ja(c,Za(this.ref,l),st)))}hasChild(n){const r=new Be(n);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ft(s,n){return s=us(s),s._checkNotDeleted("ref"),n!==void 0?Za(s._root,n):s._root}function Za(s,n){return s=us(s),Ee(s._path)===null?aC("child","path",n):qm("child","path",n),new Mi(s._repo,rt(s._path,n))}function RC(s,n){s=us(s),Ym("push",s._path),Km("push",n,s._path,!0);const r=Jm(s._repo),l=LC(r),c=Za(s,l),p=Za(s,l);let m;return m=Promise.resolve(p),c.then=m.then.bind(m),c.catch=m.then.bind(m,void 0),c}function ro(s,n){s=us(s),Ym("set",s._path),Km("set",n,s._path,!1);const r=new Va;return gC(s._repo,s._path,n,null,r.wrapCallback(()=>{})),r.promise}function xu(s,n){oC("update",n,s._path);const r=new Va;return vC(s._repo,s._path,n,r.wrapCallback(()=>{})),r.promise}function MC(s){s=us(s);const n=new rg(()=>{}),r=new tc(n);return mC(s._repo,s,r).then(l=>new ja(l,new Mi(s._repo,s._path),s._queryParams.getIndex()))}class tc{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,r){const l=r._queryParams.getIndex();return new IC("value",this,new ja(n.snapshotNode,new Mi(r._repo,r._path),l))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,r){return this.callbackContext.hasCancelCallback?new NC(this,n,r):null}matches(n){return n instanceof tc?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function OC(s,n,r,l,c){const p=new rg(r,void 0),m=new tc(p);return wC(s._repo,s,m),()=>CC(s._repo,s,m)}function Pa(s,n,r,l){return OC(s,"value",n)}R0(Mi);b0(Mi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="FIREBASE_DATABASE_EMULATOR_HOST",ld={};let DC=!1;function bC(s,n,r,l){s.repoInfo_=new sm(`${n}:${r}`,!1,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0),l&&(s.authTokenProvider_=l)}function zC(s,n,r,l,c){let p=l||s.options.databaseURL;p===void 0&&(s.options.projectId||Ri("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Lt("Using default host for project ",s.options.projectId),p=`${s.options.projectId}-default-rtdb.firebaseio.com`);let m=x_(p,c),w=m.repoInfo,C;typeof process<"u"&&$p&&(C=$p[AC]),C?(p=`http://${C}?ns=${w.namespace}`,m=x_(p,c),w=m.repoInfo):m.repoInfo.secure;const S=new Gy(s.name,s.options,n);lC("Invalid Firebase Database URL",m),Pe(m.path)||Ri("Database URL must point to the root of a Firebase Database (not including a child path).");const N=BC(w,s,S,new $y(s.name,r));return new WC(N,s)}function FC(s,n){const r=ld[n];(!r||r[s.key]!==s)&&Ri(`Database ${n}(${s.repoInfo_}) has already been deleted.`),SC(s),delete r[s.key]}function BC(s,n,r,l){let c=ld[n.name];c||(c={},ld[n.name]=c);let p=c[s.toURLString()];return p&&Ri("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),p=new fC(s,DC,r,l),c[s.toURLString()]=p,p}class WC{constructor(n,r){this._repoInternal=n,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(pC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Mi(this._repo,Re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(FC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&Ri("Cannot call "+n+" on a deleted database.")}}function UC(s=wy(),n){const r=my(s,"database").getImmediate({identifier:n});if(!r._instanceStarted){const l=sv("database");l&&HC(r,...l)}return r}function HC(s,n,r,l={}){s=us(s),s._checkNotDeleted("useEmulator"),s._instanceStarted&&Ri("Cannot call useEmulator() after instance has already been initialized.");const c=s._repoInternal;let p;if(c.repoInfo_.nodeAdmin)l.mockUserToken&&Ri('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),p=new Tu(Tu.OWNER);else if(l.mockUserToken){const m=typeof l.mockUserToken=="string"?l.mockUserToken:ov(l.mockUserToken,s.app.options.projectId);p=new Tu(m)}bC(c,n,r,p)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(s){Ny(yy),Iu(new Aa("database",(n,{instanceIdentifier:r})=>{const l=n.getProvider("app").getImmediate(),c=n.getProvider("auth-internal"),p=n.getProvider("app-check-internal");return zC(l,c,p,r)},"PUBLIC").setMultipleInstances(!0)),oo(Gp,Kp,s),oo(Gp,Kp,"esm2017")}Ii.prototype.simpleListen=function(s,n){this.sendRequest("q",{p:s},n)};Ii.prototype.echo=function(s,n){this.sendRequest("echo",{d:s},n)};jC();var ZC="firebase",VC="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oo(ZC,VC,"app");const $C="AIzaSyAeTblY8O6XxWYrRfRl0Ar1TE-uOzPbF0M",GC="nightline-dce44.firebaseapp.com",KC=void 0,qC="nightline-dce44",YC="nightline-dce44.firebasestorage.app",QC="610185897381",XC="1:610185897381:web:753908ea29d825a6e9344c",JC="G-EFV275663B",eS={apiKey:$C,authDomain:GC,databaseURL:KC,projectId:qC,storageBucket:YC,messagingSenderId:QC,appId:XC,measurementId:JC},tS=H_(eS),Bt=UC(tS),nS=({items:s})=>ue.jsx("div",{className:`
        w-screen
        bg-[#111]
        text-yellow-400
        whitespace-nowrap
        overflow-hidden
        box-border
        px-4
        py-2
        mb-2
      `,children:ue.jsx("div",{className:`
          inline-block
          pl-[100%]
          animate-news-ticker
        `,children:s.map((n,r)=>ue.jsx("span",{className:`
              inline-block
              mr-40
              font-bold
            `,children:n},r))})});function iS(s,n){const r=ye.useRef(n);ye.useEffect(function(){n!==r.current&&s.attributionControl!=null&&(r.current!=null&&s.attributionControl.removeAttribution(r.current),n!=null&&s.attributionControl.addAttribution(n)),r.current=n},[s,n])}I_();const rS=1;function sS(s){return Object.freeze({__version:rS,map:s})}const sg=ye.createContext(null),oS=sg.Provider;function og(){const s=ye.useContext(sg);if(s==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return s}function aS(s){function n(r,l){const{instance:c}=s(r).current;return ye.useImperativeHandle(l,()=>c),null}return ye.forwardRef(n)}function lS(s,n){const r=ye.useRef();ye.useEffect(function(){return n!=null&&s.instance.on(n),r.current=n,function(){r.current!=null&&s.instance.off(r.current),r.current=null}},[s,n])}function ag(s,n){const r=s.pane??n.pane;return r?{...s,pane:r}:s}var ka={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var uS=ka.exports,P_;function cS(){return P_||(P_=1,function(s,n){(function(r,l){l(n)})(uS,function(r){var l="1.9.4";function c(t){var o,u,d,g;for(u=1,d=arguments.length;u<d;u++){g=arguments[u];for(o in g)t[o]=g[o]}return t}var p=Object.create||function(){function t(){}return function(o){return t.prototype=o,new t}}();function m(t,o){var u=Array.prototype.slice;if(t.bind)return t.bind.apply(t,u.call(arguments,1));var d=u.call(arguments,2);return function(){return t.apply(o,d.length?d.concat(u.call(arguments)):arguments)}}var w=0;function C(t){return"_leaflet_id"in t||(t._leaflet_id=++w),t._leaflet_id}function S(t,o,u){var d,g,y,x;return x=function(){d=!1,g&&(y.apply(u,g),g=!1)},y=function(){d?g=arguments:(t.apply(u,arguments),setTimeout(x,o),d=!0)},y}function N(t,o,u){var d=o[1],g=o[0],y=d-g;return t===d&&u?t:((t-g)%y+y)%y+g}function k(){return!1}function R(t,o){if(o===!1)return t;var u=Math.pow(10,o===void 0?6:o);return Math.round(t*u)/u}function j(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return j(t).split(/\s+/)}function q(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?p(t.options):{});for(var u in o)t.options[u]=o[u];return t.options}function le(t,o,u){var d=[];for(var g in t)d.push(encodeURIComponent(u?g.toUpperCase():g)+"="+encodeURIComponent(t[g]));return(!o||o.indexOf("?")===-1?"?":"&")+d.join("&")}var Le=/\{ *([\w_ -]+) *\}/g;function De(t,o){return t.replace(Le,function(u,d){var g=o[d];if(g===void 0)throw new Error("No value provided for variable "+u);return typeof g=="function"&&(g=g(o)),g})}var Me=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function be(t,o){for(var u=0;u<t.length;u++)if(t[u]===o)return u;return-1}var lt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ot(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var ht=0;function Et(t){var o=+new Date,u=Math.max(0,16-(o-ht));return ht=o+u,window.setTimeout(t,u)}var Wt=window.requestAnimationFrame||ot("RequestAnimationFrame")||Et,Kt=window.cancelAnimationFrame||ot("CancelAnimationFrame")||ot("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function qe(t,o,u){if(u&&Wt===Et)t.call(o);else return Wt.call(window,m(t,o))}function $e(t){t&&Kt.call(window,t)}var xt={__proto__:null,extend:c,create:p,bind:m,get lastId(){return w},stamp:C,throttle:S,wrapNum:N,falseFn:k,formatNum:R,trim:j,splitWords:Y,setOptions:q,getParamString:le,template:De,isArray:Me,indexOf:be,emptyImageUrl:lt,requestFn:Wt,cancelFn:Kt,requestAnimFrame:qe,cancelAnimFrame:$e};function Qe(){}Qe.extend=function(t){var o=function(){q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,d=p(u);d.constructor=o,o.prototype=d;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(o[g]=this[g]);return t.statics&&c(o,t.statics),t.includes&&(sn(t.includes),c.apply(null,[d].concat(t.includes))),c(d,t),delete d.statics,delete d.includes,d.options&&(d.options=u.options?p(u.options):{},c(d.options,t.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,x=d._initHooks.length;y<x;y++)d._initHooks[y].call(this)}},o},Qe.include=function(t){var o=this.prototype.options;return c(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},Qe.mergeOptions=function(t){return c(this.prototype.options,t),this},Qe.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),u=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function sn(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=Me(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Oe={on:function(t,o,u){if(typeof t=="object")for(var d in t)this._on(d,t[d],o);else{t=Y(t);for(var g=0,y=t.length;g<y;g++)this._on(t[g],o,u)}return this},off:function(t,o,u){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var d in t)this._off(d,t[d],o);else{t=Y(t);for(var g=arguments.length===1,y=0,x=t.length;y<x;y++)g?this._off(t[y]):this._off(t[y],o,u)}return this},_on:function(t,o,u,d){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,u)===!1){u===this&&(u=void 0);var g={fn:o,ctx:u};d&&(g.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(g)}},_off:function(t,o,u){var d,g,y;if(this._events&&(d=this._events[t],!!d)){if(arguments.length===1){if(this._firingCount)for(g=0,y=d.length;g<y;g++)d[g].fn=k;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var x=this._listens(t,o,u);if(x!==!1){var M=d[x];this._firingCount&&(M.fn=k,this._events[t]=d=d.slice()),d.splice(x,1)}}},fire:function(t,o,u){if(!this.listens(t,u))return this;var d=c({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var g=this._events[t];if(g){this._firingCount=this._firingCount+1||1;for(var y=0,x=g.length;y<x;y++){var M=g[y],b=M.fn;M.once&&this.off(t,b,M.ctx),b.call(M.ctx||this,d)}this._firingCount--}}return u&&this._propagateEvent(d),this},listens:function(t,o,u,d){typeof t!="string"&&console.warn('"string" type argument expected');var g=o;typeof o!="function"&&(d=!!o,g=void 0,u=void 0);var y=this._events&&this._events[t];if(y&&y.length&&this._listens(t,g,u)!==!1)return!0;if(d){for(var x in this._eventParents)if(this._eventParents[x].listens(t,o,u,d))return!0}return!1},_listens:function(t,o,u){if(!this._events)return!1;var d=this._events[t]||[];if(!o)return!!d.length;u===this&&(u=void 0);for(var g=0,y=d.length;g<y;g++)if(d[g].fn===o&&d[g].ctx===u)return g;return!1},once:function(t,o,u){if(typeof t=="object")for(var d in t)this._on(d,t[d],o,!0);else{t=Y(t);for(var g=0,y=t.length;g<y;g++)this._on(t[g],o,u,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[C(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[C(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,c({layer:t.target,propagatedFrom:t.target},t),!0)}};Oe.addEventListener=Oe.on,Oe.removeEventListener=Oe.clearAllEventListeners=Oe.off,Oe.addOneTimeEventListener=Oe.once,Oe.fireEvent=Oe.fire,Oe.hasEventListeners=Oe.listens;var V=Qe.extend(Oe);function A(t,o,u){this.x=u?Math.round(t):t,this.y=u?Math.round(o):o}var $=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};A.prototype={clone:function(){return new A(this.x,this.y)},add:function(t){return this.clone()._add(F(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(F(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new A(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new A(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=$(this.x),this.y=$(this.y),this},distanceTo:function(t){t=F(t);var o=t.x-this.x,u=t.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(t){return t=F(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=F(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+R(this.x)+", "+R(this.y)+")"}};function F(t,o,u){return t instanceof A?t:Me(t)?new A(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new A(t.x,t.y):new A(t,o,u)}function T(t,o){if(t)for(var u=o?[t,o]:t,d=0,g=u.length;d<g;d++)this.extend(u[d])}T.prototype={extend:function(t){var o,u;if(!t)return this;if(t instanceof A||typeof t[0]=="number"||"x"in t)o=u=F(t);else if(t=B(t),o=t.min,u=t.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(t){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,u;return typeof t[0]=="number"||t instanceof A?t=F(t):t=B(t),t instanceof T?(o=t.min,u=t.max):o=u=t,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(t){t=B(t);var o=this.min,u=this.max,d=t.min,g=t.max,y=g.x>=o.x&&d.x<=u.x,x=g.y>=o.y&&d.y<=u.y;return y&&x},overlaps:function(t){t=B(t);var o=this.min,u=this.max,d=t.min,g=t.max,y=g.x>o.x&&d.x<u.x,x=g.y>o.y&&d.y<u.y;return y&&x},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,u=this.max,d=Math.abs(o.x-u.x)*t,g=Math.abs(o.y-u.y)*t;return B(F(o.x-d,o.y-g),F(u.x+d,u.y+g))},equals:function(t){return t?(t=B(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function B(t,o){return!t||t instanceof T?t:new T(t,o)}function oe(t,o){if(t)for(var u=o?[t,o]:t,d=0,g=u.length;d<g;d++)this.extend(u[d])}oe.prototype={extend:function(t){var o=this._southWest,u=this._northEast,d,g;if(t instanceof ie)d=t,g=t;else if(t instanceof oe){if(d=t._southWest,g=t._northEast,!d||!g)return this}else return t?this.extend(X(t)||ne(t)):this;return!o&&!u?(this._southWest=new ie(d.lat,d.lng),this._northEast=new ie(g.lat,g.lng)):(o.lat=Math.min(d.lat,o.lat),o.lng=Math.min(d.lng,o.lng),u.lat=Math.max(g.lat,u.lat),u.lng=Math.max(g.lng,u.lng)),this},pad:function(t){var o=this._southWest,u=this._northEast,d=Math.abs(o.lat-u.lat)*t,g=Math.abs(o.lng-u.lng)*t;return new oe(new ie(o.lat-d,o.lng-g),new ie(u.lat+d,u.lng+g))},getCenter:function(){return new ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ie||"lat"in t?t=X(t):t=ne(t);var o=this._southWest,u=this._northEast,d,g;return t instanceof oe?(d=t.getSouthWest(),g=t.getNorthEast()):d=g=t,d.lat>=o.lat&&g.lat<=u.lat&&d.lng>=o.lng&&g.lng<=u.lng},intersects:function(t){t=ne(t);var o=this._southWest,u=this._northEast,d=t.getSouthWest(),g=t.getNorthEast(),y=g.lat>=o.lat&&d.lat<=u.lat,x=g.lng>=o.lng&&d.lng<=u.lng;return y&&x},overlaps:function(t){t=ne(t);var o=this._southWest,u=this._northEast,d=t.getSouthWest(),g=t.getNorthEast(),y=g.lat>o.lat&&d.lat<u.lat,x=g.lng>o.lng&&d.lng<u.lng;return y&&x},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=ne(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ne(t,o){return t instanceof oe?t:new oe(t,o)}function ie(t,o,u){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,u!==void 0&&(this.alt=+u)}ie.prototype={equals:function(t,o){if(!t)return!1;t=X(t);var u=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return u<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+R(this.lat,t)+", "+R(this.lng,t)+")"},distanceTo:function(t){return Ce.distance(this,X(t))},wrap:function(){return Ce.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,u=o/Math.cos(Math.PI/180*this.lat);return ne([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new ie(this.lat,this.lng,this.alt)}};function X(t,o,u){return t instanceof ie?t:Me(t)&&typeof t[0]!="object"?t.length===3?new ie(t[0],t[1],t[2]):t.length===2?new ie(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ie(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new ie(t,o,u)}var we={latLngToPoint:function(t,o){var u=this.projection.project(t),d=this.scale(o);return this.transformation._transform(u,d)},pointToLatLng:function(t,o){var u=this.scale(o),d=this.transformation.untransform(t,u);return this.projection.unproject(d)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(t),d=this.transformation.transform(o.min,u),g=this.transformation.transform(o.max,u);return new T(d,g)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?N(t.lng,this.wrapLng,!0):t.lng,u=this.wrapLat?N(t.lat,this.wrapLat,!0):t.lat,d=t.alt;return new ie(u,o,d)},wrapLatLngBounds:function(t){var o=t.getCenter(),u=this.wrapLatLng(o),d=o.lat-u.lat,g=o.lng-u.lng;if(d===0&&g===0)return t;var y=t.getSouthWest(),x=t.getNorthEast(),M=new ie(y.lat-d,y.lng-g),b=new ie(x.lat-d,x.lng-g);return new oe(M,b)}},Ce=c({},we,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var u=Math.PI/180,d=t.lat*u,g=o.lat*u,y=Math.sin((o.lat-t.lat)*u/2),x=Math.sin((o.lng-t.lng)*u/2),M=y*y+Math.cos(d)*Math.cos(g)*x*x,b=2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M));return this.R*b}}),We=6378137,Tt={R:We,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,u=this.MAX_LATITUDE,d=Math.max(Math.min(u,t.lat),-u),g=Math.sin(d*o);return new A(this.R*t.lng*o,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(t){var o=180/Math.PI;return new ie((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:function(){var t=We*Math.PI;return new T([-t,-t],[t,t])}()};function Oi(t,o,u,d){if(Me(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=u,this._d=d}Oi.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new A((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function Ai(t,o,u,d){return new Oi(t,o,u,d)}var Di=c({},Ce,{code:"EPSG:3857",projection:Tt,transformation:function(){var t=.5/(Math.PI*Tt.R);return Ai(t,.5,-t,.5)}()}),wo=c({},Di,{code:"EPSG:900913"});function Co(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function So(t,o){var u="",d,g,y,x,M,b;for(d=0,y=t.length;d<y;d++){for(M=t[d],g=0,x=M.length;g<x;g++)b=M[g],u+=(g?"L":"M")+b.x+" "+b.y;u+=o?se.svg?"z":"x":""}return u||"M0 0"}var Pr=document.documentElement.style,kr="ActiveXObject"in window,Eo=kr&&!document.addEventListener,bi="msLaunchUri"in navigator&&!("documentMode"in document),Zn=Nt("webkit"),ds=Nt("android"),xo=Nt("android 2")||Nt("android 3"),Ja=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),el=ds&&Nt("Google")&&Ja<537&&!("AudioNode"in window),fs=!!window.opera,ps=!bi&&Nt("chrome"),Lr=Nt("gecko")&&!Zn&&!fs&&!kr,tl=!ps&&Nt("safari"),zi=Nt("phantom"),Fi="OTransition"in Pr,nc=navigator.platform.indexOf("Win")===0,To=kr&&"transition"in Pr,_s="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!xo,nl="MozPerspective"in Pr,Po=!window.L_DISABLE_3D&&(To||_s||nl)&&!Fi&&!zi,si=typeof orientation<"u"||Nt("mobile"),ko=si&&Zn,Lo=si&&_s,ms=!window.PointerEvent&&window.MSPointerEvent,oi=!!(window.PointerEvent||ms),ai="ontouchstart"in window||!!window.TouchEvent,il=!window.L_NO_TOUCH&&(ai||oi),rl=si&&fs,sl=si&&Lr,ol=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,al=function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",k,o),window.removeEventListener("testPassiveEventSupport",k,o)}catch{}return t}(),Io=function(){return!!document.createElement("canvas").getContext}(),gs=!!(document.createElementNS&&Co("svg").createSVGRect),Ir=!!gs&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),No=!gs&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Nr=navigator.platform.indexOf("Mac")===0,ic=navigator.platform.indexOf("Linux")===0;function Nt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var se={ie:kr,ielt9:Eo,edge:bi,webkit:Zn,android:ds,android23:xo,androidStock:el,opera:fs,chrome:ps,gecko:Lr,safari:tl,phantom:zi,opera12:Fi,win:nc,ie3d:To,webkit3d:_s,gecko3d:nl,any3d:Po,mobile:si,mobileWebkit:ko,mobileWebkit3d:Lo,msPointer:ms,pointer:oi,touch:il,touchNative:ai,mobileOpera:rl,mobileGecko:sl,retina:ol,passiveEvents:al,canvas:Io,svg:gs,vml:No,inlineSvg:Ir,mac:Nr,linux:ic},Rr=se.msPointer?"MSPointerDown":"pointerdown",vs=se.msPointer?"MSPointerMove":"pointermove",ll=se.msPointer?"MSPointerUp":"pointerup",ul=se.msPointer?"MSPointerCancel":"pointercancel",Ro={touchstart:Rr,touchmove:vs,touchend:ll,touchcancel:ul},Vn={touchstart:Xe,touchmove:ys,touchend:ys,touchcancel:ys},li={},Mo=!1;function rc(t,o,u){return o==="touchstart"&&sc(),Vn[o]?(u=Vn[o].bind(this,u),t.addEventListener(Ro[o],u,!1),u):(console.warn("wrong event specified:",o),k)}function cl(t,o,u){if(!Ro[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(Ro[o],u,!1)}function hl(t){li[t.pointerId]=t}function dl(t){li[t.pointerId]&&(li[t.pointerId]=t)}function Oo(t){delete li[t.pointerId]}function sc(){Mo||(document.addEventListener(Rr,hl,!0),document.addEventListener(vs,dl,!0),document.addEventListener(ll,Oo,!0),document.addEventListener(ul,Oo,!0),Mo=!0)}function ys(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in li)o.touches.push(li[u]);o.changedTouches=[o],t(o)}}function Xe(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Je(o),ys(t,o)}function oc(t){var o={},u,d;for(d in t)u=t[d],o[d]=u&&u.bind?u.bind(t):u;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Ao=200;function fl(t,o){t.addEventListener("dblclick",o);var u=0,d;function g(y){if(y.detail!==1){d=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var x=hi(y);if(!(x.some(function(b){return b instanceof HTMLLabelElement&&b.attributes.for})&&!x.some(function(b){return b instanceof HTMLInputElement||b instanceof HTMLSelectElement}))){var M=Date.now();M-u<=Ao?(d++,d===2&&o(oc(y))):d=1,u=M}}}return t.addEventListener("click",g),{dblclick:o,simDblclick:g}}function ws(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var Do=Hi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Bi=Hi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Mr=Bi==="webkitTransition"||Bi==="OTransition"?Bi+"End":"transitionend";function on(t){return typeof t=="string"?document.getElementById(t):t}function Or(t,o){var u=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(t,null);u=d?d[o]:null}return u==="auto"?null:u}function ge(t,o,u){var d=document.createElement(t);return d.className=o||"",u&&u.appendChild(d),d}function Ge(t){var o=t.parentNode;o&&o.removeChild(t)}function Cs(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Wi(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function Rn(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function Ui(t,o){if(t.classList!==void 0)return t.classList.contains(o);var u=Ss(t);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function me(t,o){if(t.classList!==void 0)for(var u=Y(o),d=0,g=u.length;d<g;d++)t.classList.add(u[d]);else if(!Ui(t,o)){var y=Ss(t);bo(t,(y?y+" ":"")+o)}}function Ue(t,o){t.classList!==void 0?t.classList.remove(o):bo(t,j((" "+Ss(t)+" ").replace(" "+o+" "," ")))}function bo(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function Ss(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Rt(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&pl(t,o)}function pl(t,o){var u=!1,d="DXImageTransform.Microsoft.Alpha";try{u=t.filters.item(d)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):t.style.filter+=" progid:"+d+"(opacity="+o+")"}function Hi(t){for(var o=document.documentElement.style,u=0;u<t.length;u++)if(t[u]in o)return t[u];return!1}function an(t,o,u){var d=o||new A(0,0);t.style[Do]=(se.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(u?" scale("+u+")":"")}function nt(t,o){t._leaflet_pos=o,se.any3d?an(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function Mn(t){return t._leaflet_pos||new A(0,0)}var ke,ji,Es;if("onselectstart"in document)ke=function(){pe(window,"selectstart",Je)},ji=function(){ze(window,"selectstart",Je)};else{var ui=Hi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ke=function(){if(ui){var t=document.documentElement.style;Es=t[ui],t[ui]="none"}},ji=function(){ui&&(document.documentElement.style[ui]=Es,Es=void 0)}}function xs(){pe(window,"dragstart",Je)}function Ts(){ze(window,"dragstart",Je)}var Ar,Dr;function Zi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(ln(),Ar=t,Dr=t.style.outlineStyle,t.style.outlineStyle="none",pe(window,"keydown",ln))}function ln(){Ar&&(Ar.style.outlineStyle=Dr,Ar=void 0,Dr=void 0,ze(window,"keydown",ln))}function On(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function gn(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var br={__proto__:null,TRANSFORM:Do,TRANSITION:Bi,TRANSITION_END:Mr,get:on,getStyle:Or,create:ge,remove:Ge,empty:Cs,toFront:Wi,toBack:Rn,hasClass:Ui,addClass:me,removeClass:Ue,setClass:bo,getClass:Ss,setOpacity:Rt,testProp:Hi,setTransform:an,setPosition:nt,getPosition:Mn,get disableTextSelection(){return ke},get enableTextSelection(){return ji},disableImageDrag:xs,enableImageDrag:Ts,preventOutline:Zi,restoreOutline:ln,getSizedParentNode:On,getScale:gn};function pe(t,o,u,d){if(o&&typeof o=="object")for(var g in o)Fo(t,g,o[g],u);else{o=Y(o);for(var y=0,x=o.length;y<x;y++)Fo(t,o[y],u,d)}return this}var dt="_leaflet_events";function ze(t,o,u,d){if(arguments.length===1)zo(t),delete t[dt];else if(o&&typeof o=="object")for(var g in o)Ps(t,g,o[g],u);else if(o=Y(o),arguments.length===2)zo(t,function(M){return be(o,M)!==-1});else for(var y=0,x=o.length;y<x;y++)Ps(t,o[y],u,d);return this}function zo(t,o){for(var u in t[dt]){var d=u.split(/\d/)[0];(!o||o(d))&&Ps(t,d,null,null,u)}}var ci={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Fo(t,o,u,d){var g=o+C(u)+(d?"_"+C(d):"");if(t[dt]&&t[dt][g])return this;var y=function(M){return u.call(d||t,M||window.event)},x=y;!se.touchNative&&se.pointer&&o.indexOf("touch")===0?y=rc(t,o,y):se.touch&&o==="dblclick"?y=fl(t,y):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(ci[o]||o,y,se.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(y=function(M){M=M||window.event,Br(t,M)&&x(M)},t.addEventListener(ci[o],y,!1)):t.addEventListener(o,x,!1):t.attachEvent("on"+o,y),t[dt]=t[dt]||{},t[dt][g]=y}function Ps(t,o,u,d,g){g=g||o+C(u)+(d?"_"+C(d):"");var y=t[dt]&&t[dt][g];if(!y)return this;!se.touchNative&&se.pointer&&o.indexOf("touch")===0?cl(t,o,y):se.touch&&o==="dblclick"?ws(t,y):"removeEventListener"in t?t.removeEventListener(ci[o]||o,y,!1):t.detachEvent("on"+o,y),t[dt][g]=null}function vn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function ks(t){return Fo(t,"wheel",vn),this}function zr(t){return pe(t,"mousedown touchstart dblclick contextmenu",vn),t._leaflet_disable_click=!0,this}function Je(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function un(t){return Je(t),vn(t),this}function hi(t){if(t.composedPath)return t.composedPath();for(var o=[],u=t.target;u;)o.push(u),u=u.parentNode;return o}function Fr(t,o){if(!o)return new A(t.clientX,t.clientY);var u=gn(o),d=u.boundingClientRect;return new A((t.clientX-d.left)/u.x-o.clientLeft,(t.clientY-d.top)/u.y-o.clientTop)}var ac=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function _l(t){return se.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ac:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Br(t,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==t;)u=u.parentNode}catch{return!1}return u!==t}var Ls={__proto__:null,on:pe,off:ze,stopPropagation:vn,disableScrollPropagation:ks,disableClickPropagation:zr,preventDefault:Je,stop:un,getPropagationPath:hi,getMousePosition:Fr,getWheelDelta:_l,isExternalTarget:Br,addListener:pe,removeListener:ze},Is=V.extend({run:function(t,o,u,d){this.stop(),this._el=t,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=Mn(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=qe(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var u=this._startPos.add(this._offset.multiplyBy(t));o&&u._round(),nt(this._el,u),this.fire("step")},_complete:function(){$e(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Te=V.extend({options:{crs:Di,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=q(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(X(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Bi&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),pe(this._proxy,Mr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(X(t),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=c({animate:u.animate},u.zoom),u.pan=c({animate:u.animate,duration:u.duration},u.pan));var d=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,u.zoom):this._tryAnimatedPan(t,u.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,u){var d=this.getZoomScale(o),g=this.getSize().divideBy(2),y=t instanceof A?t:this.latLngToContainerPoint(t),x=y.subtract(g).multiplyBy(1-1/d),M=this.containerPointToLatLng(g.add(x));return this.setView(M,o,{zoom:u})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():ne(t);var u=F(o.paddingTopLeft||o.padding||[0,0]),d=F(o.paddingBottomRight||o.padding||[0,0]),g=this.getBoundsZoom(t,!1,u.add(d));if(g=typeof o.maxZoom=="number"?Math.min(o.maxZoom,g):g,g===1/0)return{center:t.getCenter(),zoom:g};var y=d.subtract(u).divideBy(2),x=this.project(t.getSouthWest(),g),M=this.project(t.getNorthEast(),g),b=this.unproject(x.add(M).divideBy(2).add(y),g);return{center:b,zoom:g}},fitBounds:function(t,o){if(t=ne(t),!t.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(t,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=F(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Is,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){me(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,u){if(u=u||{},u.animate===!1||!se.any3d)return this.setView(t,o,u);this._stop();var d=this.project(this.getCenter()),g=this.project(t),y=this.getSize(),x=this._zoom;t=X(t),o=o===void 0?x:o;var M=Math.max(y.x,y.y),b=M*this.getZoomScale(x,o),W=g.distanceTo(d)||1,Q=1.42,ce=Q*Q;function ve(Ae){var sr=Ae?-1:1,Cc=Ae?b:M,Sc=b*b-M*M+sr*ce*ce*W*W,vi=2*Cc*ce*W,yi=Sc/vi,wi=Math.sqrt(yi*yi+1)-yi,js=wi<1e-9?-18:Math.log(wi);return js}function ft(Ae){return(Math.exp(Ae)-Math.exp(-Ae))/2}function ut(Ae){return(Math.exp(Ae)+Math.exp(-Ae))/2}function jt(Ae){return ft(Ae)/ut(Ae)}var Ot=ve(0);function ir(Ae){return M*(ut(Ot)/ut(Ot+Q*Ae))}function sa(Ae){return M*(ut(Ot)*jt(Ot+Q*Ae)-ft(Ot))/ce}function Jn(Ae){return 1-Math.pow(1-Ae,1.5)}var bl=Date.now(),gi=(ve(1)-Ot)/Q,Sn=u.duration?1e3*u.duration:1e3*gi*.8;function rr(){var Ae=(Date.now()-bl)/Sn,sr=Jn(Ae)*gi;Ae<=1?(this._flyToFrame=qe(rr,this),this._move(this.unproject(d.add(g.subtract(d).multiplyBy(sa(sr)/W)),x),this.getScaleZoom(M/ir(sr),x),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),rr.call(this),this},flyToBounds:function(t,o){var u=this._getBoundsCenterZoom(t,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(t){return t=ne(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var u=this.getCenter(),d=this._limitCenter(u,this._zoom,ne(t));return u.equals(d)||this.panTo(d,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var u=F(o.paddingTopLeft||o.padding||[0,0]),d=F(o.paddingBottomRight||o.padding||[0,0]),g=this.project(this.getCenter()),y=this.project(t),x=this.getPixelBounds(),M=B([x.min.add(u),x.max.subtract(d)]),b=M.getSize();if(!M.contains(y)){this._enforcingBounds=!0;var W=y.subtract(M.getCenter()),Q=M.extend(y).getSize().subtract(b);g.x+=W.x<0?-Q.x:Q.x,g.y+=W.y<0?-Q.y:Q.y,this.panTo(this.unproject(g),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=c({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),d=o.divideBy(2).round(),g=u.divideBy(2).round(),y=d.subtract(g);return!y.x&&!y.y?this:(t.animate&&t.pan?this.panBy(y):(t.pan&&this._rawPanBy(y),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=c({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=m(this._handleGeolocationResponse,this),u=m(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,t):navigator.geolocation.getCurrentPosition(o,u,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,u=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,u=t.coords.longitude,d=new ie(o,u),g=d.toBounds(t.coords.accuracy*2),y=this._locateOptions;if(y.setView){var x=this.getBoundsZoom(g);this.setView(d,y.maxZoom?Math.min(x,y.maxZoom):x)}var M={latlng:d,bounds:g,timestamp:t.timestamp};for(var b in t.coords)typeof t.coords[b]=="number"&&(M[b]=t.coords[b]);this.fire("locationfound",M)}},addHandler:function(t,o){if(!o)return this;var u=this[t]=new o(this);return this._handlers.push(u),this.options[t]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ge(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($e(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Ge(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var u="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),d=ge("div",u,o||this._mapPane);return t&&(this._panes[t]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),u=this.unproject(t.getTopRight());return new oe(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,u){t=ne(t),u=F(u||[0,0]);var d=this.getZoom()||0,g=this.getMinZoom(),y=this.getMaxZoom(),x=t.getNorthWest(),M=t.getSouthEast(),b=this.getSize().subtract(u),W=B(this.project(M,d),this.project(x,d)).getSize(),Q=se.any3d?this.options.zoomSnap:1,ce=b.x/W.x,ve=b.y/W.y,ft=o?Math.max(ce,ve):Math.min(ce,ve);return d=this.getScaleZoom(ft,d),Q&&(d=Math.round(d/(Q/100))*(Q/100),d=o?Math.ceil(d/Q)*Q:Math.floor(d/Q)*Q),Math.max(g,Math.min(y,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new A(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var u=this._getTopLeftPoint(t,o);return new T(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(t)/u.scale(o)},getScaleZoom:function(t,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var d=u.zoom(t*u.scale(o));return isNaN(d)?1/0:d},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(X(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(F(t),o)},layerPointToLatLng:function(t){var o=F(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(X(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(X(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ne(t))},distance:function(t,o){return this.options.crs.distance(X(t),X(o))},containerPointToLayerPoint:function(t){return F(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return F(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(F(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(X(t)))},mouseEventToContainerPoint:function(t){return Fr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=on(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");pe(o,"scroll",this._onScroll,this),this._containerId=C(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,me(t,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Or(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),nt(this._mapPane,new A(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(me(t.markerPane,"leaflet-zoom-hide"),me(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,u){nt(this._mapPane,new A(0,0));var d=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var g=this._zoom!==o;this._moveStart(g,u)._move(t,o)._moveEnd(g),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,u,d){o===void 0&&(o=this._zoom);var g=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),d?u&&u.pinch&&this.fire("zoom",u):((g||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $e(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){nt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[C(this._container)]=this;var o=t?ze:pe;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$e(this._resizeRequest),this._resizeRequest=qe(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var u=[],d,g=o==="mouseout"||o==="mouseover",y=t.target||t.srcElement,x=!1;y;){if(d=this._targets[C(y)],d&&(o==="click"||o==="preclick")&&this._draggableMoved(d)){x=!0;break}if(d&&d.listens(o,!0)&&(g&&!Br(y,t)||(u.push(d),g))||y===this._container)break;y=y.parentNode}return!u.length&&!x&&!g&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var u=t.type;u==="mousedown"&&Zi(o),this._fireDOMEvent(t,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,u){if(t.type==="click"){var d=c({},t);d.type="preclick",this._fireDOMEvent(d,d.type,u)}var g=this._findEventTargets(t,o);if(u){for(var y=[],x=0;x<u.length;x++)u[x].listens(o,!0)&&y.push(u[x]);g=y.concat(g)}if(g.length){o==="contextmenu"&&Je(t);var M=g[0],b={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var W=M.getLatLng&&(!M._radius||M._radius<=10);b.containerPoint=W?this.latLngToContainerPoint(M.getLatLng()):this.mouseEventToContainerPoint(t),b.layerPoint=this.containerPointToLayerPoint(b.containerPoint),b.latlng=W?M.getLatLng():this.layerPointToLatLng(b.layerPoint)}for(x=0;x<g.length;x++)if(g[x].fire(o,b,!0),b.originalEvent._stopped||g[x].options.bubblingMouseEvents===!1&&be(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return Mn(this._mapPane)||new A(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var u=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var u=this.getSize()._divideBy(2);return this.project(t,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,u){var d=this._getNewPixelOrigin(u,o);return this.project(t,o)._subtract(d)},_latLngBoundsToNewLayerBounds:function(t,o,u){var d=this._getNewPixelOrigin(u,o);return B([this.project(t.getSouthWest(),o)._subtract(d),this.project(t.getNorthWest(),o)._subtract(d),this.project(t.getSouthEast(),o)._subtract(d),this.project(t.getNorthEast(),o)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,u){if(!u)return t;var d=this.project(t,o),g=this.getSize().divideBy(2),y=new T(d.subtract(g),d.add(g)),x=this._getBoundsOffset(y,u,o);return Math.abs(x.x)<=1&&Math.abs(x.y)<=1?t:this.unproject(d.add(x),o)},_limitOffset:function(t,o){if(!o)return t;var u=this.getPixelBounds(),d=new T(u.min.add(t),u.max.add(t));return t.add(this._getBoundsOffset(d,o))},_getBoundsOffset:function(t,o,u){var d=B(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),g=d.min.subtract(t.min),y=d.max.subtract(t.max),x=this._rebound(g.x,-y.x),M=this._rebound(g.y,-y.y);return new A(x,M)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),u=this.getMaxZoom(),d=se.any3d?this.options.zoomSnap:1;return d&&(t=Math.round(t/d)*d),Math.max(o,Math.min(u,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var u=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var t=this._proxy=ge("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var u=Do,d=this._proxy.style[u];an(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),d===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ge(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();an(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(o),g=this._getCenterOffset(t)._divideBy(1-1/d);return u.animate!==!0&&!this.getSize().contains(g)?!1:(qe(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,u,d){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $n(t,o){return new Te(t,o)}var Ut=Qe.extend({options:{position:"topright"},initialize:function(t){q(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),u=this.getPosition(),d=t._controlCorners[u];return me(o,"leaflet-control"),u.indexOf("bottom")!==-1?d.insertBefore(o,d.firstChild):d.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ge(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Gn=function(t){return new Ut(t)};Te.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",u=this._controlContainer=ge("div",o+"control-container",this._container);function d(g,y){var x=o+g+" "+o+y;t[g+y]=ge("div",x,u)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ge(this._controlCorners[t]);Ge(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Bo=Ut.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,u,d){return u<d?-1:d<u?1:0}},initialize:function(t,o,u){q(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in t)this._addLayer(t[d],d);for(d in o)this._addLayer(o[d],d,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ut.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(C(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=ge("div",t),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),zr(o),ks(o);var d=this._section=ge("section",t+"-list");u&&(this._map.on("click",this.collapse,this),pe(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=ge("a",t+"-toggle",o);g.href="#",g.title="Layers",g.setAttribute("role","button"),pe(g,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){Je(y),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=ge("div",t+"-base",d),this._separator=ge("div",t+"-separator",d),this._overlaysList=ge("div",t+"-overlays",d),o.appendChild(d)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&C(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,u){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(m(function(d,g){return this.options.sortFunction(d.layer,g.layer,d.name,g.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Cs(this._baseLayersList),Cs(this._overlaysList),this._layerControlInputs=[];var t,o,u,d,g=0;for(u=0;u<this._layers.length;u++)d=this._layers[u],this._addItem(d),o=o||d.overlay,t=t||!d.overlay,g+=d.overlay?0:1;return this.options.hideSingleBase&&(t=t&&g>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(C(t.target)),u=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(t,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=u,d.firstChild},_addItem:function(t){var o=document.createElement("label"),u=this._map.hasLayer(t.layer),d;t.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=u):d=this._createRadioElement("leaflet-base-layers_"+C(this),u),this._layerControlInputs.push(d),d.layerId=C(t.layer),pe(d,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+t.name;var y=document.createElement("span");o.appendChild(y),y.appendChild(d),y.appendChild(g);var x=t.overlay?this._overlaysList:this._baseLayersList;return x.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,u,d=[],g=[];this._handlingClick=!0;for(var y=t.length-1;y>=0;y--)o=t[y],u=this._getLayer(o.layerId).layer,o.checked?d.push(u):o.checked||g.push(u);for(y=0;y<g.length;y++)this._map.hasLayer(g[y])&&this._map.removeLayer(g[y]);for(y=0;y<d.length;y++)this._map.hasLayer(d[y])||this._map.addLayer(d[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,u,d=this._map.getZoom(),g=t.length-1;g>=0;g--)o=t[g],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&d<u.options.minZoom||u.options.maxZoom!==void 0&&d>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,pe(t,"click",Je),this.expand();var o=this;setTimeout(function(){ze(t,"click",Je),o._preventClick=!1})}}),Ns=function(t,o,u){return new Bo(t,o,u)},Vi=Ut.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",u=ge("div",o+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,u,d,g){var y=ge("a",u,d);return y.innerHTML=t,y.href="#",y.title=o,y.setAttribute("role","button"),y.setAttribute("aria-label",o),zr(y),pe(y,"click",un),pe(y,"click",g,this),pe(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";Ue(this._zoomInButton,o),Ue(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(me(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(me(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Te.mergeOptions({zoomControl:!0}),Te.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Vi,this.addControl(this.zoomControl))});var ml=function(t){return new Vi(t)},Mt=Ut.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",u=ge("div",o),d=this.options;return this._addScales(d,o+"-line",u),t.on(d.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),u},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,u){t.metric&&(this._mScale=ge("div",o,u)),t.imperial&&(this._iScale=ge("div",o,u))},_update:function(){var t=this._map,o=t.getSize().y/2,u=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/t)},_updateImperial:function(t){var o=t*3.2808399,u,d,g;o>5280?(u=o/5280,d=this._getRoundNum(u),this._updateScale(this._iScale,d+" mi",d/u)):(g=this._getRoundNum(o),this._updateScale(this._iScale,g+" ft",g/o))},_updateScale:function(t,o,u){t.style.width=Math.round(this.options.maxWidth*u)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),u=t/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),$i=function(t){return new Mt(t)},Wo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',di=Ut.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?Wo+" ":"")+"Leaflet</a>"},initialize:function(t){q(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ge("div","leaflet-control-attribution"),zr(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),t.length&&u.push(t.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});Te.mergeOptions({attributionControl:!0}),Te.addInitHook(function(){this.options.attributionControl&&new di().addTo(this)});var lc=function(t){return new di(t)};Ut.Layers=Bo,Ut.Zoom=Vi,Ut.Scale=Mt,Ut.Attribution=di,Gn.layers=Ns,Gn.zoom=ml,Gn.scale=$i,Gn.attribution=lc;var qt=Qe.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});qt.addTo=function(t,o){return t.addHandler(o,this),this};var Uo={Events:Oe},Gi=se.touch?"touchstart mousedown":"mousedown",cn=V.extend({options:{clickTolerance:3},initialize:function(t,o,u,d){q(this,d),this._element=t,this._dragStartTarget=o||t,this._preventOutline=u},enable:function(){this._enabled||(pe(this._dragStartTarget,Gi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(cn._dragging===this&&this.finishDrag(!0),ze(this._dragStartTarget,Gi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Ui(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){cn._dragging===this&&this.finishDrag();return}if(!(cn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(cn._dragging=this,this._preventOutline&&Zi(this._element),xs(),ke(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,u=On(this._element);this._startPoint=new A(o.clientX,o.clientY),this._startPos=Mn(this._element),this._parentScale=gn(u);var d=t.type==="mousedown";pe(document,d?"mousemove":"touchmove",this._onMove,this),pe(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,u=new A(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Je(t),this._moved||(this.fire("dragstart"),this._moved=!0,me(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),nt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Ue(document.body,"leaflet-dragging"),this._lastTarget&&(Ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ze(document,"mousemove touchmove",this._onMove,this),ze(document,"mouseup touchend touchcancel",this._onUp,this),Ts(),ji();var o=this._moved&&this._moving;this._moving=!1,cn._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Ho(t,o,u){var d,g=[1,4,2,8],y,x,M,b,W,Q,ce,ve;for(y=0,Q=t.length;y<Q;y++)t[y]._code=fi(t[y],o);for(M=0;M<4;M++){for(ce=g[M],d=[],y=0,Q=t.length,x=Q-1;y<Q;x=y++)b=t[y],W=t[x],b._code&ce?W._code&ce||(ve=Ms(W,b,ce,o,u),ve._code=fi(ve,o),d.push(ve)):(W._code&ce&&(ve=Ms(W,b,ce,o,u),ve._code=fi(ve,o),d.push(ve)),d.push(b));t=d}return t}function gl(t,o){var u,d,g,y,x,M,b,W,Q;if(!t||t.length===0)throw new Error("latlngs not passed");Yt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var ce=X([0,0]),ve=ne(t),ft=ve.getNorthWest().distanceTo(ve.getSouthWest())*ve.getNorthEast().distanceTo(ve.getNorthWest());ft<1700&&(ce=jo(t));var ut=t.length,jt=[];for(u=0;u<ut;u++){var Ot=X(t[u]);jt.push(o.project(X([Ot.lat-ce.lat,Ot.lng-ce.lng])))}for(M=b=W=0,u=0,d=ut-1;u<ut;d=u++)g=jt[u],y=jt[d],x=g.y*y.x-y.y*g.x,b+=(g.x+y.x)*x,W+=(g.y+y.y)*x,M+=x*3;M===0?Q=jt[0]:Q=[b/M,W/M];var ir=o.unproject(F(Q));return X([ir.lat+ce.lat,ir.lng+ce.lng])}function jo(t){for(var o=0,u=0,d=0,g=0;g<t.length;g++){var y=X(t[g]);o+=y.lat,u+=y.lng,d++}return X([o/d,u/d])}var uc={__proto__:null,clipPolygon:Ho,polygonCenter:gl,centroid:jo};function Rs(t,o){if(!o||!t.length)return t.slice();var u=o*o;return t=dc(t,u),t=hc(t,u),t}function vl(t,o,u){return Math.sqrt(pi(t,o,u,!0))}function cc(t,o,u){return pi(t,o,u)}function hc(t,o){var u=t.length,d=typeof Uint8Array<"u"?Uint8Array:Array,g=new d(u);g[0]=g[u-1]=1,Zo(t,g,o,0,u-1);var y,x=[];for(y=0;y<u;y++)g[y]&&x.push(t[y]);return x}function Zo(t,o,u,d,g){var y=0,x,M,b;for(M=d+1;M<=g-1;M++)b=pi(t[M],t[d],t[g],!0),b>y&&(x=M,y=b);y>u&&(o[x]=1,Zo(t,o,u,d,x),Zo(t,o,u,x,g))}function dc(t,o){for(var u=[t[0]],d=1,g=0,y=t.length;d<y;d++)fc(t[d],t[g])>o&&(u.push(t[d]),g=d);return g<y-1&&u.push(t[y-1]),u}var Vo;function yl(t,o,u,d,g){var y=d?Vo:fi(t,u),x=fi(o,u),M,b,W;for(Vo=x;;){if(!(y|x))return[t,o];if(y&x)return!1;M=y||x,b=Ms(t,o,M,u,g),W=fi(b,u),M===y?(t=b,y=W):(o=b,x=W)}}function Ms(t,o,u,d,g){var y=o.x-t.x,x=o.y-t.y,M=d.min,b=d.max,W,Q;return u&8?(W=t.x+y*(b.y-t.y)/x,Q=b.y):u&4?(W=t.x+y*(M.y-t.y)/x,Q=M.y):u&2?(W=b.x,Q=t.y+x*(b.x-t.x)/y):u&1&&(W=M.x,Q=t.y+x*(M.x-t.x)/y),new A(W,Q,g)}function fi(t,o){var u=0;return t.x<o.min.x?u|=1:t.x>o.max.x&&(u|=2),t.y<o.min.y?u|=4:t.y>o.max.y&&(u|=8),u}function fc(t,o){var u=o.x-t.x,d=o.y-t.y;return u*u+d*d}function pi(t,o,u,d){var g=o.x,y=o.y,x=u.x-g,M=u.y-y,b=x*x+M*M,W;return b>0&&(W=((t.x-g)*x+(t.y-y)*M)/b,W>1?(g=u.x,y=u.y):W>0&&(g+=x*W,y+=M*W)),x=t.x-g,M=t.y-y,d?x*x+M*M:new A(g,y)}function Yt(t){return!Me(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function wl(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Yt(t)}function Cl(t,o){var u,d,g,y,x,M,b,W;if(!t||t.length===0)throw new Error("latlngs not passed");Yt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Q=X([0,0]),ce=ne(t),ve=ce.getNorthWest().distanceTo(ce.getSouthWest())*ce.getNorthEast().distanceTo(ce.getNorthWest());ve<1700&&(Q=jo(t));var ft=t.length,ut=[];for(u=0;u<ft;u++){var jt=X(t[u]);ut.push(o.project(X([jt.lat-Q.lat,jt.lng-Q.lng])))}for(u=0,d=0;u<ft-1;u++)d+=ut[u].distanceTo(ut[u+1])/2;if(d===0)W=ut[0];else for(u=0,y=0;u<ft-1;u++)if(x=ut[u],M=ut[u+1],g=x.distanceTo(M),y+=g,y>d){b=(y-d)/g,W=[M.x-b*(M.x-x.x),M.y-b*(M.y-x.y)];break}var Ot=o.unproject(F(W));return X([Ot.lat+Q.lat,Ot.lng+Q.lng])}var Sl={__proto__:null,simplify:Rs,pointToSegmentDistance:vl,closestPointOnSegment:cc,clipSegment:yl,_getEdgeIntersection:Ms,_getBitCode:fi,_sqClosestPointOnSegment:pi,isFlat:Yt,_flat:wl,polylineCenter:Cl},$o={project:function(t){return new A(t.lng,t.lat)},unproject:function(t){return new ie(t.y,t.x)},bounds:new T([-180,-90],[180,90])},Go={R:6378137,R_MINOR:6356752314245179e-9,bounds:new T([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,u=this.R,d=t.lat*o,g=this.R_MINOR/u,y=Math.sqrt(1-g*g),x=y*Math.sin(d),M=Math.tan(Math.PI/4-d/2)/Math.pow((1-x)/(1+x),y/2);return d=-u*Math.log(Math.max(M,1e-10)),new A(t.lng*o*u,d)},unproject:function(t){for(var o=180/Math.PI,u=this.R,d=this.R_MINOR/u,g=Math.sqrt(1-d*d),y=Math.exp(-t.y/u),x=Math.PI/2-2*Math.atan(y),M=0,b=.1,W;M<15&&Math.abs(b)>1e-7;M++)W=g*Math.sin(x),W=Math.pow((1-W)/(1+W),g/2),b=Math.PI/2-2*Math.atan(y*W)-x,x+=b;return new ie(x*o,t.x*o/u)}},pc={__proto__:null,LonLat:$o,Mercator:Go,SphericalMercator:Tt},_c=c({},Ce,{code:"EPSG:3395",projection:Go,transformation:function(){var t=.5/(Math.PI*Go.R);return Ai(t,.5,-t,.5)}()}),El=c({},Ce,{code:"EPSG:4326",projection:$o,transformation:Ai(1/180,1,-1/180,.5)}),mc=c({},we,{projection:$o,transformation:Ai(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var u=o.lng-t.lng,d=o.lat-t.lat;return Math.sqrt(u*u+d*d)},infinite:!0});we.Earth=Ce,we.EPSG3395=_c,we.EPSG3857=Di,we.EPSG900913=wo,we.EPSG4326=El,we.Simple=mc;var hn=V.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[C(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[C(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Te.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=C(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=C(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return C(t)in this._layers},eachLayer:function(t,o){for(var u in this._layers)t.call(o,this._layers[u]);return this},_addLayers:function(t){t=t?Me(t)?t:[t]:[];for(var o=0,u=t.length;o<u;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[C(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=C(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,u=this._getZoomSpan();for(var d in this._zoomBoundLayers){var g=this._zoomBoundLayers[d].options;t=g.minZoom===void 0?t:Math.min(t,g.minZoom),o=g.maxZoom===void 0?o:Math.max(o,g.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Kn=hn.extend({initialize:function(t,o){q(this,o),this._layers={};var u,d;if(t)for(u=0,d=t.length;u<d;u++)this.addLayer(t[u])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),u,d;for(u in this._layers)d=this._layers[u],d[t]&&d[t].apply(d,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var u in this._layers)t.call(o,this._layers[u]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return C(t)}}),Wr=function(t,o){return new Kn(t,o)},An=Kn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Kn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Kn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new oe;for(var o in this._layers){var u=this._layers[o];t.extend(u.getBounds?u.getBounds():u.getLatLng())}return t}}),xl=function(t,o){return new An(t,o)},_i=Qe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){q(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var u=this._getIconUrl(t);if(!u){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(d,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(t,o){var u=this.options,d=u[o+"Size"];typeof d=="number"&&(d=[d,d]);var g=F(d),y=F(o==="shadow"&&u.shadowAnchor||u.iconAnchor||g&&g.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(u.className||""),y&&(t.style.marginLeft=-y.x+"px",t.style.marginTop=-y.y+"px"),g&&(t.style.width=g.x+"px",t.style.height=g.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return se.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Tl(t){return new _i(t)}var Ki=_i.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ki.imagePath!="string"&&(Ki.imagePath=this._detectIconPath()),(this.options.imagePath||Ki.imagePath)+_i.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(u,d,g){var y=d.exec(u);return y&&y[g]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ge("div","leaflet-default-icon-path",document.body),o=Or(t,"background-image")||Or(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Ko=qt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new cn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),me(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,u=o._map,d=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,y=Mn(o._icon),x=u.getPixelBounds(),M=u.getPixelOrigin(),b=B(x.min._subtract(M).add(g),x.max._subtract(M).subtract(g));if(!b.contains(y)){var W=F((Math.max(b.max.x,y.x)-b.max.x)/(x.max.x-b.max.x)-(Math.min(b.min.x,y.x)-b.min.x)/(x.min.x-b.min.x),(Math.max(b.max.y,y.y)-b.max.y)/(x.max.y-b.max.y)-(Math.min(b.min.y,y.y)-b.min.y)/(x.min.y-b.min.y)).multiplyBy(d);u.panBy(W,{animate:!1}),this._draggable._newPos._add(W),this._draggable._startPos._add(W),nt(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=qe(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&($e(this._panRequest),this._panRequest=qe(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,u=o._shadow,d=Mn(o._icon),g=o._map.layerPointToLatLng(d);u&&nt(u,d),o._latlng=g,t.latlng=g,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){$e(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Dn=hn.extend({options:{icon:new Ki,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){q(this,o),this._latlng=X(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=X(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=t.icon.createIcon(this._icon),d=!1;u!==this._icon&&(this._icon&&this._removeIcon(),d=!0,t.title&&(u.title=t.title),u.tagName==="IMG"&&(u.alt=t.alt||"")),me(u,o),t.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pe(u,"focus",this._panOnFocus,this);var g=t.icon.createShadow(this._shadow),y=!1;g!==this._shadow&&(this._removeShadow(),y=!0),g&&(me(g,o),g.alt=""),this._shadow=g,t.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&y&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(this._icon,"focus",this._panOnFocus,this),Ge(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ge(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&nt(this._icon,t),this._shadow&&nt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ko)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ko(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Rt(this._icon,t),this._shadow&&Rt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,u=o.iconSize?F(o.iconSize):F(0,0),d=o.iconAnchor?F(o.iconAnchor):F(0,0);t.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:u.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function gc(t,o){return new Dn(t,o)}var qn=hn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return q(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Os=qn.extend({options:{fill:!0,radius:10},initialize:function(t,o){q(this,o),this._latlng=X(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=X(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return qn.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,u=this._clickTolerance(),d=[t+u,o+u];this._pxBounds=new T(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Pl(t,o){return new Os(t,o)}var As=Os.extend({initialize:function(t,o,u){if(typeof o=="number"&&(o=c({},u,{radius:o})),q(this,o),this._latlng=X(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new oe(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:qn.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,u=this._map,d=u.options.crs;if(d.distance===Ce.distance){var g=Math.PI/180,y=this._mRadius/Ce.R/g,x=u.project([o+y,t]),M=u.project([o-y,t]),b=x.add(M).divideBy(2),W=u.unproject(b).lat,Q=Math.acos((Math.cos(y*g)-Math.sin(o*g)*Math.sin(W*g))/(Math.cos(o*g)*Math.cos(W*g)))/g;(isNaN(Q)||Q===0)&&(Q=y/Math.cos(Math.PI/180*o)),this._point=b.subtract(u.getPixelOrigin()),this._radius=isNaN(Q)?0:b.x-u.project([W,t-Q]).x,this._radiusY=b.y-x.y}else{var ce=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(ce).x}this._updateBounds()}});function Ur(t,o,u){return new As(t,o,u)}var Ht=qn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){q(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,u=null,d=pi,g,y,x=0,M=this._parts.length;x<M;x++)for(var b=this._parts[x],W=1,Q=b.length;W<Q;W++){g=b[W-1],y=b[W];var ce=d(t,g,y,!0);ce<o&&(o=ce,u=d(t,g,y))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Cl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=X(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new oe,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Yt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],u=Yt(t),d=0,g=t.length;d<g;d++)u?(o[d]=X(t[d]),this._bounds.extend(o[d])):o[d]=this._convertLatLngs(t[d]);return o},_project:function(){var t=new T;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new A(t,t);this._rawPxBounds&&(this._pxBounds=new T([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,u){var d=t[0]instanceof ie,g=t.length,y,x;if(d){for(x=[],y=0;y<g;y++)x[y]=this._map.latLngToLayerPoint(t[y]),u.extend(x[y]);o.push(x)}else for(y=0;y<g;y++)this._projectLatlngs(t[y],o,u)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,d,g,y,x,M,b;for(u=0,g=0,y=this._rings.length;u<y;u++)for(b=this._rings[u],d=0,x=b.length;d<x-1;d++)M=yl(b[d],b[d+1],t,d,!0),M&&(o[g]=o[g]||[],o[g].push(M[0]),(M[1]!==b[d+1]||d===x-2)&&(o[g].push(M[1]),g++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,u=0,d=t.length;u<d;u++)t[u]=Rs(t[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var u,d,g,y,x,M,b=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(u=0,y=this._parts.length;u<y;u++)for(M=this._parts[u],d=0,x=M.length,g=x-1;d<x;g=d++)if(!(!o&&d===0)&&vl(t,M[g],M[d])<=b)return!0;return!1}});function vc(t,o){return new Ht(t,o)}Ht._flat=wl;var bn=Ht.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return gl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=Ht.prototype._convertLatLngs.call(this,t),u=o.length;return u>=2&&o[0]instanceof ie&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(t){Ht.prototype._setLatLngs.call(this,t),Yt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Yt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,u=new A(o,o);if(t=new T(t.min.subtract(u),t.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,g=this._rings.length,y;d<g;d++)y=Ho(this._rings[d],t,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,u,d,g,y,x,M,b,W;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(y=0,b=this._parts.length;y<b;y++)for(u=this._parts[y],x=0,W=u.length,M=W-1;x<W;M=x++)d=u[x],g=u[M],d.y>t.y!=g.y>t.y&&t.x<(g.x-d.x)*(t.y-d.y)/(g.y-d.y)+d.x&&(o=!o);return o||Ht.prototype._containsPoint.call(this,t,!0)}});function yc(t,o){return new bn(t,o)}var yn=An.extend({initialize:function(t,o){q(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=Me(t)?t:t.features,u,d,g;if(o){for(u=0,d=o.length;u<d;u++)g=o[u],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var y=this.options;if(y.filter&&!y.filter(t))return this;var x=qi(t,y);return x?(x.feature=Bs(t),x.defaultOptions=x.options,this.resetStyle(x),y.onEachFeature&&y.onEachFeature(t,x),this.addLayer(x)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=c({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function qi(t,o){var u=t.type==="Feature"?t.geometry:t,d=u?u.coordinates:null,g=[],y=o&&o.pointToLayer,x=o&&o.coordsToLatLng||bs,M,b,W,Q;if(!d&&!u)return null;switch(u.type){case"Point":return M=x(d),Ds(y,t,M,o);case"MultiPoint":for(W=0,Q=d.length;W<Q;W++)M=x(d[W]),g.push(Ds(y,t,M,o));return new An(g);case"LineString":case"MultiLineString":return b=Hr(d,u.type==="LineString"?0:1,x),new Ht(b,o);case"Polygon":case"MultiPolygon":return b=Hr(d,u.type==="Polygon"?1:2,x),new bn(b,o);case"GeometryCollection":for(W=0,Q=u.geometries.length;W<Q;W++){var ce=qi({geometry:u.geometries[W],type:"Feature",properties:t.properties},o);ce&&g.push(ce)}return new An(g);case"FeatureCollection":for(W=0,Q=u.features.length;W<Q;W++){var ve=qi(u.features[W],o);ve&&g.push(ve)}return new An(g);default:throw new Error("Invalid GeoJSON object.")}}function Ds(t,o,u,d){return t?t(o,u):new Dn(u,d&&d.markersInheritOptions&&d)}function bs(t){return new ie(t[1],t[0],t[2])}function Hr(t,o,u){for(var d=[],g=0,y=t.length,x;g<y;g++)x=o?Hr(t[g],o-1,u):(u||bs)(t[g]),d.push(x);return d}function zs(t,o){return t=X(t),t.alt!==void 0?[R(t.lng,o),R(t.lat,o),R(t.alt,o)]:[R(t.lng,o),R(t.lat,o)]}function Fs(t,o,u,d){for(var g=[],y=0,x=t.length;y<x;y++)g.push(o?Fs(t[y],Yt(t[y])?0:o-1,u,d):zs(t[y],d));return!o&&u&&g.length>0&&g.push(g[0].slice()),g}function Yi(t,o){return t.feature?c({},t.feature,{geometry:o}):Bs(o)}function Bs(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var qo={toGeoJSON:function(t){return Yi(this,{type:"Point",coordinates:zs(this.getLatLng(),t)})}};Dn.include(qo),As.include(qo),Os.include(qo),Ht.include({toGeoJSON:function(t){var o=!Yt(this._latlngs),u=Fs(this._latlngs,o?1:0,!1,t);return Yi(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),bn.include({toGeoJSON:function(t){var o=!Yt(this._latlngs),u=o&&!Yt(this._latlngs[0]),d=Fs(this._latlngs,u?2:o?1:0,!0,t);return o||(d=[d]),Yi(this,{type:(u?"Multi":"")+"Polygon",coordinates:d})}}),Kn.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(t).geometry.coordinates)}),Yi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var u=o==="GeometryCollection",d=[];return this.eachLayer(function(g){if(g.toGeoJSON){var y=g.toGeoJSON(t);if(u)d.push(y.geometry);else{var x=Bs(y);x.type==="FeatureCollection"?d.push.apply(d,x.features):d.push(x)}}}),u?Yi(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function kl(t,o){return new yn(t,o)}var dn=kl,Yn=hn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,u){this._url=t,this._bounds=ne(o),q(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ge(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Wi(this._image),this},bringToBack:function(){return this._map&&Rn(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ne(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:ge("img");if(me(o,"leaflet-image-layer"),this._zoomAnimated&&me(o,"leaflet-zoom-animated"),this.options.className&&me(o,this.options.className),o.onselectstart=k,o.onmousemove=k,o.onload=m(this.fire,this,"load"),o.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;an(this._image,u,o)},_reset:function(){var t=this._image,o=new T(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();nt(t,o.min),t.style.width=u.x+"px",t.style.height=u.y+"px"},_updateOpacity:function(){Rt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Ll=function(t,o,u){return new Yn(t,o,u)},Yo=Yn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:ge("video");if(me(o,"leaflet-image-layer"),this._zoomAnimated&&me(o,"leaflet-zoom-animated"),this.options.className&&me(o,this.options.className),o.onselectstart=k,o.onmousemove=k,o.onloadeddata=m(this.fire,this,"load"),t){for(var u=o.getElementsByTagName("source"),d=[],g=0;g<u.length;g++)d.push(u[g].src);this._url=u.length>0?d:[o.src];return}Me(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var x=ge("source");x.src=this._url[y],o.appendChild(x)}}});function Il(t,o,u){return new Yo(t,o,u)}var Qo=Yn.extend({_initImage:function(){var t=this._image=this._url;me(t,"leaflet-image-layer"),this._zoomAnimated&&me(t,"leaflet-zoom-animated"),this.options.className&&me(t,this.options.className),t.onselectstart=k,t.onmousemove=k}});function Xo(t,o,u){return new Qo(t,o,u)}var wn=hn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof ie||Me(t))?(this._latlng=X(t),q(this,o)):(q(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Rt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Rt(this._container,1),this.bringToFront(),this.options.interactive&&(me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Rt(this._container,0),this._removeTimeout=setTimeout(m(Ge,void 0,this._container),200)):Ge(this._container),this.options.interactive&&(Ue(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=X(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Wi(this._container),this},bringToBack:function(){return this._map&&Rn(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof An){o=null;var u=this._source._layers;for(var d in u)if(u[d]._map){o=u[d];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=F(this.options.offset),u=this._getAnchor();this._zoomAnimated?nt(this._container,t.add(u)):o=o.add(t).add(u);var d=this._containerBottom=-o.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=d+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Te.include({_initOverlay:function(t,o,u,d){var g=o;return g instanceof t||(g=new t(d).setContent(o)),u&&g.setLatLng(u),g}}),hn.include({_initOverlay:function(t,o,u,d){var g=u;return g instanceof t?(q(g,d),g._source=this):(g=o&&!d?o:new t(d,this),g.setContent(u)),g}});var Ws=wn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,wn.prototype.openOn.call(this,t)},onAdd:function(t){wn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qn||this._source.on("preclick",vn))},onRemove:function(t){wn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qn||this._source.off("preclick",vn))},getEvents:function(){var t=wn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=ge("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=ge("div",t+"-content-wrapper",o);if(this._contentNode=ge("div",t+"-content",u),zr(o),ks(this._contentNode),pe(o,"contextmenu",vn),this._tipContainer=ge("div",t+"-tip-container",o),this._tip=ge("div",t+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=ge("a",t+"-close-button",o);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',pe(d,"click",function(g){Je(g),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var u=t.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var d=t.offsetHeight,g=this.options.maxHeight,y="leaflet-popup-scrolled";g&&d>g?(o.height=g+"px",me(t,y)):Ue(t,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),u=this._getAnchor();nt(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(Or(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,d=this._containerWidth,g=new A(this._containerLeft,-u-this._containerBottom);g._add(Mn(this._container));var y=t.layerPointToContainerPoint(g),x=F(this.options.autoPanPadding),M=F(this.options.autoPanPaddingTopLeft||x),b=F(this.options.autoPanPaddingBottomRight||x),W=t.getSize(),Q=0,ce=0;y.x+d+b.x>W.x&&(Q=y.x+d-W.x+b.x),y.x-Q-M.x<0&&(Q=y.x-M.x),y.y+u+b.y>W.y&&(ce=y.y+u-W.y+b.y),y.y-ce-M.y<0&&(ce=y.y-M.y),(Q||ce)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Q,ce]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Qi=function(t,o){return new Ws(t,o)};Te.mergeOptions({closePopupOnClick:!0}),Te.include({openPopup:function(t,o,u){return this._initOverlay(Ws,t,o,u).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),hn.include({bindPopup:function(t,o){return this._popup=this._initOverlay(Ws,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof An||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){un(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof qn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Xi=wn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){wn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){wn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=wn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ge("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+C(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,u,d=this._map,g=this._container,y=d.latLngToContainerPoint(d.getCenter()),x=d.layerPointToContainerPoint(t),M=this.options.direction,b=g.offsetWidth,W=g.offsetHeight,Q=F(this.options.offset),ce=this._getAnchor();M==="top"?(o=b/2,u=W):M==="bottom"?(o=b/2,u=0):M==="center"?(o=b/2,u=W/2):M==="right"?(o=0,u=W/2):M==="left"?(o=b,u=W/2):x.x<y.x?(M="right",o=0,u=W/2):(M="left",o=b+(Q.x+ce.x)*2,u=W/2),t=t.subtract(F(o,u,!0)).add(Q).add(ce),Ue(g,"leaflet-tooltip-right"),Ue(g,"leaflet-tooltip-left"),Ue(g,"leaflet-tooltip-top"),Ue(g,"leaflet-tooltip-bottom"),me(g,"leaflet-tooltip-"+M),nt(g,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Rt(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),jr=function(t,o){return new Xi(t,o)};Te.include({openTooltip:function(t,o,u){return this._initOverlay(Xi,t,o,u).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),hn.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xi,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof An||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(pe(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),pe(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,u,d;this._tooltip.options.sticky&&t.originalEvent&&(u=this._map.mouseEventToContainerPoint(t.originalEvent),d=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(o)}});var Us=_i.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Cs(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var d=F(u.bgPos);o.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Nl(t){return new Us(t)}_i.Default=Ki;var Qn=hn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){q(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ge(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Wi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Rn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=S(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof A?t:new A(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,u=-t(-1/0,1/0),d=0,g=o.length,y;d<g;d++)y=o[d].style.zIndex,o[d]!==this._container&&y&&(u=t(u,+y));isFinite(u)&&(this.options.zIndex=u+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Rt(this._container,this.options.opacity);var t=+new Date,o=!1,u=!1;for(var d in this._tiles){var g=this._tiles[d];if(!(!g.current||!g.loaded)){var y=Math.min(1,(t-g.loaded)/200);Rt(g.el,y),y<1?o=!0:(g.active?u=!0:this._onOpaqueTile(g),g.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&($e(this._fadeFrame),this._fadeFrame=qe(this._updateOpacity,this))}},_onOpaqueTile:k,_initContainer:function(){this._container||(this._container=ge("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===t?(this._levels[u].el.style.zIndex=o-Math.abs(t-u),this._onUpdateLevel(u)):(Ge(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var d=this._levels[t],g=this._map;return d||(d=this._levels[t]={},d.el=ge("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=o,d.origin=g.project(g.unproject(g.getPixelOrigin()),t).round(),d.zoom=t,this._setZoomTransform(d,g.getCenter(),g.getZoom()),k(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:k,_onRemoveLevel:k,_onCreateLevel:k,_pruneTiles:function(){if(this._map){var t,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var d=o.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ge(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,u,d){var g=Math.floor(t/2),y=Math.floor(o/2),x=u-1,M=new A(+g,+y);M.z=+x;var b=this._tileCoordsToKey(M),W=this._tiles[b];return W&&W.active?(W.retain=!0,!0):(W&&W.loaded&&(W.retain=!0),x>d?this._retainParent(g,y,x,d):!1)},_retainChildren:function(t,o,u,d){for(var g=2*t;g<2*t+2;g++)for(var y=2*o;y<2*o+2;y++){var x=new A(g,y);x.z=u+1;var M=this._tileCoordsToKey(x),b=this._tiles[M];if(b&&b.active){b.retain=!0;continue}else b&&b.loaded&&(b.retain=!0);u+1<d&&this._retainChildren(g,y,u+1,d)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,u,d){var g=Math.round(o);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var y=this.options.updateWhenZooming&&g!==this._tileZoom;(!d||y)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(t),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],t,o)},_setZoomTransform:function(t,o,u){var d=this._map.getZoomScale(u,t.zoom),g=t.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(o,u)).round();se.any3d?an(t.el,g,d):nt(t.el,g)},_resetGrid:function(){var t=this._map,o=t.options.crs,u=this._tileSize=this.getTileSize(),d=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],d).x/u.x),Math.ceil(t.project([0,o.wrapLng[1]],d).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],d).y/u.x),Math.ceil(t.project([o.wrapLat[1],0],d).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),d=o.getZoomScale(u,this._tileZoom),g=o.project(t,this._tileZoom).floor(),y=o.getSize().divideBy(d*2);return new T(g.subtract(y),g.add(y))},_update:function(t){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(t),g=this._pxBoundsToTileRange(d),y=g.getCenter(),x=[],M=this.options.keepBuffer,b=new T(g.getBottomLeft().subtract([M,-M]),g.getTopRight().add([M,-M]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var W in this._tiles){var Q=this._tiles[W].coords;(Q.z!==this._tileZoom||!b.contains(new A(Q.x,Q.y)))&&(this._tiles[W].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(t,u);return}for(var ce=g.min.y;ce<=g.max.y;ce++)for(var ve=g.min.x;ve<=g.max.x;ve++){var ft=new A(ve,ce);if(ft.z=this._tileZoom,!!this._isValidTile(ft)){var ut=this._tiles[this._tileCoordsToKey(ft)];ut?ut.current=!0:x.push(ft)}}if(x.sort(function(Ot,ir){return Ot.distanceTo(y)-ir.distanceTo(y)}),x.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var jt=document.createDocumentFragment();for(ve=0;ve<x.length;ve++)this._addTile(x[ve],jt);this._level.el.appendChild(jt)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(t.x<u.min.x||t.x>u.max.x)||!o.wrapLat&&(t.y<u.min.y||t.y>u.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(t);return ne(this.options.bounds).overlaps(d)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,u=this.getTileSize(),d=t.scaleBy(u),g=d.add(u),y=o.unproject(d,t.z),x=o.unproject(g,t.z);return[y,x]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),u=new oe(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),u=new A(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(t){var o=this._tiles[t];o&&(Ge(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){me(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=k,t.onmousemove=k,se.ielt9&&this.options.opacity<1&&Rt(t,this.options.opacity)},_addTile:function(t,o){var u=this._getTilePos(t),d=this._tileCoordsToKey(t),g=this.createTile(this._wrapCoords(t),m(this._tileReady,this,t));this._initTile(g),this.createTile.length<2&&qe(m(this._tileReady,this,t,null,g)),nt(g,u),this._tiles[d]={el:g,coords:t,current:!0},o.appendChild(g),this.fire("tileloadstart",{tile:g,coords:t})},_tileReady:function(t,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:t});var d=this._tileCoordsToKey(t);u=this._tiles[d],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Rt(u.el,0),$e(this._fadeFrame),this._fadeFrame=qe(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(me(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?qe(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new A(this._wrapX?N(t.x,this._wrapX):t.x,this._wrapY?N(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new T(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Ji(t){return new Qn(t)}var Xn=Qn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=q(this,o),o.detectRetina&&se.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var u=document.createElement("img");return pe(u,"load",m(this._tileOnLoad,this,o,u)),pe(u,"error",m(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(t),u},getTileUrl:function(t){var o={r:se.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=u),o["-y"]=u}return De(this._url,c(o,this.options))},_tileOnLoad:function(t,o){se.ielt9?setTimeout(m(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,u){var d=this.options.errorTileUrl;d&&o.getAttribute("src")!==d&&(o.src=d),t(u,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,d=this.options.zoomOffset;return u&&(t=o-t),t+d},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=k,o.onerror=k,!o.complete)){o.src=lt;var u=this._tiles[t].coords;Ge(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",lt),Qn.prototype._removeTile.call(this,t)},_tileReady:function(t,o,u){if(!(!this._map||u&&u.getAttribute("src")===lt))return Qn.prototype._tileReady.call(this,t,o,u)}});function Jo(t,o){return new Xn(t,o)}var Zr=Xn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var u=c({},this.defaultWmsParams);for(var d in o)d in this.options||(u[d]=o[d]);o=q(this,o);var g=o.detectRetina&&se.retina?2:1,y=this.getTileSize();u.width=y.x*g,u.height=y.y*g,this.wmsParams=u},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Xn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),u=this._crs,d=B(u.project(o[0]),u.project(o[1])),g=d.min,y=d.max,x=(this._wmsVersion>=1.3&&this._crs===El?[g.y,g.x,y.y,y.x]:[g.x,g.y,y.x,y.y]).join(","),M=Xn.prototype.getTileUrl.call(this,t);return M+le(this.wmsParams,M,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+x},setParams:function(t,o){return c(this.wmsParams,t),o||this.redraw(),this}});function Rl(t,o){return new Zr(t,o)}Xn.WMS=Zr,Jo.wms=Rl;var Cn=hn.extend({options:{padding:.1},initialize:function(t){q(this,t),C(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var u=this._map.getZoomScale(o,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,o),y=d.multiplyBy(-u).add(g).subtract(this._map._getNewPixelOrigin(t,o));se.any3d?an(this._container,y,u):nt(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new T(u,u.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ea=Cn.extend({options:{tolerance:0},getEvents:function(){var t=Cn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Cn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");pe(t,"mousemove",this._onMouseMove,this),pe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),pe(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){$e(this._redrawRequest),delete this._ctx,Ge(this._container),ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Cn.prototype._update.call(this);var t=this._bounds,o=this._container,u=t.getSize(),d=se.retina?2:1;nt(o,t.min),o.width=d*u.x,o.height=d*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Cn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[C(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,u=o.next,d=o.prev;u?u.prev=d:this._drawLast=d,d?d.next=u:this._drawFirst=u,delete t._order,delete this._layers[C(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),u=[],d,g;for(g=0;g<o.length;g++){if(d=Number(o[g]),isNaN(d))return;u.push(d)}t.options._dashArray=u}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||qe(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new T,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)t=d.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var u,d,g,y,x=t._parts,M=x.length,b=this._ctx;if(M){for(b.beginPath(),u=0;u<M;u++){for(d=0,g=x[u].length;d<g;d++)y=x[u][d],b[d?"lineTo":"moveTo"](y.x,y.y);o&&b.closePath()}this._fillStroke(b,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,u=this._ctx,d=Math.max(Math.round(t._radius),1),g=(Math.max(Math.round(t._radiusY),1)||d)/d;g!==1&&(u.save(),u.scale(1,g)),u.beginPath(),u.arc(o.x,o.y/g,d,0,Math.PI*2,!1),g!==1&&u.restore(),this._fillStroke(u,t)}},_fillStroke:function(t,o){var u=o.options;u.fill&&(t.globalAlpha=u.fillOpacity,t.fillStyle=u.fillColor||u.color,t.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=u.opacity,t.lineWidth=u.weight,t.strokeStyle=u.color,t.lineCap=u.lineCap,t.lineJoin=u.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),u,d,g=this._drawFirst;g;g=g.next)u=g.layer,u.options.interactive&&u._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(u))&&(d=u);this._fireEvent(d?[d]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(Ue(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var u,d,g=this._drawFirst;g;g=g.next)u=g.layer,u.options.interactive&&u._containsPoint(o)&&(d=u);d!==this._hoveredLayer&&(this._handleMouseOut(t),d&&(me(this._container,"leaflet-interactive"),this._fireEvent([d],t,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,u){this._map._fireDOMEvent(o,u||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var u=o.next,d=o.prev;if(u)u.prev=d;else return;d?d.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var u=o.next,d=o.prev;if(d)d.next=u;else return;u?u.prev=d:d&&(this._drawLast=d),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function ta(t){return se.canvas?new ea(t):null}var er=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ml={_initContainer:function(){this._container=ge("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Cn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=er("shape");me(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=er("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[C(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;Ge(o),t.removeInteractiveTarget(o),delete this._layers[C(t)]},_updateStyle:function(t){var o=t._stroke,u=t._fill,d=t.options,g=t._container;g.stroked=!!d.stroke,g.filled=!!d.fill,d.stroke?(o||(o=t._stroke=er("stroke")),g.appendChild(o),o.weight=d.weight+"px",o.color=d.color,o.opacity=d.opacity,d.dashArray?o.dashStyle=Me(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=d.lineCap.replace("butt","flat"),o.joinstyle=d.lineJoin):o&&(g.removeChild(o),t._stroke=null),d.fill?(u||(u=t._fill=er("fill")),g.appendChild(u),u.color=d.fillColor||d.color,u.opacity=d.fillOpacity):u&&(g.removeChild(u),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),u=Math.round(t._radius),d=Math.round(t._radiusY||u);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+d+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){Wi(t._container)},_bringToBack:function(t){Rn(t._container)}},fn=se.vml?er:Co,mi=Cn.extend({_initContainer:function(){this._container=fn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ge(this._container),ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Cn.prototype._update.call(this);var t=this._bounds,o=t.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),nt(u,t.min),u.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=fn("path");t.options.className&&me(o,t.options.className),t.options.interactive&&me(o,"leaflet-interactive"),this._updateStyle(t),this._layers[C(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ge(t._path),t.removeInteractiveTarget(t._path),delete this._layers[C(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,u=t.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,So(t._parts,o))},_updateCircle:function(t){var o=t._point,u=Math.max(Math.round(t._radius),1),d=Math.max(Math.round(t._radiusY),1)||u,g="a"+u+","+d+" 0 1,0 ",y=t._empty()?"M0 0":"M"+(o.x-u)+","+o.y+g+u*2+",0 "+g+-u*2+",0 ";this._setPath(t,y)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){Wi(t._path)},_bringToBack:function(t){Rn(t._path)}});se.vml&&mi.include(Ml);function Hs(t){return se.svg||se.vml?new mi(t):null}Te.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&ta(t)||Hs(t)}});var Ol=bn.extend({initialize:function(t,o){bn.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ne(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function wc(t,o){return new Ol(t,o)}mi.create=fn,mi.pointsToPath=So,yn.geometryToLayer=qi,yn.coordsToLatLng=bs,yn.coordsToLatLngs=Hr,yn.latLngToCoords=zs,yn.latLngsToCoords=Fs,yn.getFeature=Yi,yn.asFeature=Bs,Te.mergeOptions({boxZoom:!0});var tr=qt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ge(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ke(),xs(),this._startPoint=this._map.mouseEventToContainerPoint(t),pe(document,{contextmenu:un,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ge("div","leaflet-zoom-box",this._container),me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new T(this._point,this._startPoint),u=o.getSize();nt(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Ge(this._box),Ue(this._container,"leaflet-crosshair")),ji(),Ts(),ze(document,{contextmenu:un,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var o=new oe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Te.addInitHook("addHandler","boxZoom",tr),Te.mergeOptions({doubleClickZoom:!0});var Al=qt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,u=o.getZoom(),d=o.options.zoomDelta,g=t.originalEvent.shiftKey?u-d:u+d;o.options.doubleClickZoom==="center"?o.setZoom(g):o.setZoomAround(t.containerPoint,g)}});Te.addInitHook("addHandler","doubleClickZoom",Al),Te.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var na=qt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new cn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ue(this._map._container,"leaflet-grab"),Ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ne(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),u=this._initialWorldOffset,d=this._draggable._newPos.x,g=(d-o+u)%t+o-u,y=(d+o+u)%t-o-u,x=Math.abs(g+u)<Math.abs(y+u)?g:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=x},_onDragEnd:function(t){var o=this._map,u=o.options,d=!u.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),d)o.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,x=u.easeLinearity,M=g.multiplyBy(x/y),b=M.distanceTo([0,0]),W=Math.min(u.inertiaMaxSpeed,b),Q=M.multiplyBy(W/b),ce=W/(u.inertiaDeceleration*x),ve=Q.multiplyBy(-ce/2).round();!ve.x&&!ve.y?o.fire("moveend"):(ve=o._limitOffset(ve,o.options.maxBounds),qe(function(){o.panBy(ve,{duration:ce,easeLinearity:x,noMoveStart:!0,animate:!0})}))}}});Te.addInitHook("addHandler","dragging",na),Te.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ia=qt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),pe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,u=t.scrollTop||o.scrollTop,d=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(d,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},u=this.keyCodes,d,g;for(d=0,g=u.left.length;d<g;d++)o[u.left[d]]=[-1*t,0];for(d=0,g=u.right.length;d<g;d++)o[u.right[d]]=[t,0];for(d=0,g=u.down.length;d<g;d++)o[u.down[d]]=[0,t];for(d=0,g=u.up.length;d<g;d++)o[u.up[d]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},u=this.keyCodes,d,g;for(d=0,g=u.zoomIn.length;d<g;d++)o[u.zoomIn[d]]=t;for(d=0,g=u.zoomOut.length;d<g;d++)o[u.zoomOut[d]]=-t},_addHooks:function(){pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,u=this._map,d;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(d=this._panKeys[o],t.shiftKey&&(d=F(d).multiplyBy(3)),u.options.maxBounds&&(d=u._limitOffset(F(d),u.options.maxBounds)),u.options.worldCopyJump){var g=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(d)));u.panTo(g)}else u.panBy(d)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;un(t)}}});Te.addInitHook("addHandler","keyboard",ia),Te.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Fe=qt.extend({addHooks:function(){pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=_l(t),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var d=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),d),un(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),u=this._map.options.zoomSnap||0;t._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,y=u?Math.ceil(g/u)*u:g,x=t._limitZoom(o+(this._delta>0?y:-y))-o;this._delta=0,this._startTime=null,x&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+x):t.setZoomAround(this._lastMousePos,o+x))}});Te.addInitHook("addHandler","scrollWheelZoom",Fe);var ra=600;Te.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var Vr=qt.extend({addHooks:function(){pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new A(o.clientX,o.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(pe(document,"touchend",Je),pe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),ra),pe(document,"touchend touchcancel contextmenu",this._cancel,this),pe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){ze(document,"touchend",Je),ze(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new A(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var u=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});Te.addInitHook("addHandler","tapHold",Vr),Te.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var nr=qt.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom"),pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ue(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(t.touches[0]),d=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(d)._divideBy(2))),this._startDist=u.distanceTo(d),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),pe(document,"touchmove",this._onTouchMove,this),pe(document,"touchend touchcancel",this._onTouchEnd,this),Je(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(t.touches[0]),d=o.mouseEventToContainerPoint(t.touches[1]),g=u.distanceTo(d)/this._startDist;if(this._zoom=o.getScaleZoom(g,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&g<1||this._zoom>o.getMaxZoom()&&g>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var y=u._add(d)._divideBy(2)._subtract(this._centerPoint);if(g===1&&y.x===0&&y.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),$e(this._animRequest);var x=m(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=qe(x,this,!0),Je(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$e(this._animRequest),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Te.addInitHook("addHandler","touchZoom",nr),Te.BoxZoom=tr,Te.DoubleClickZoom=Al,Te.Drag=na,Te.Keyboard=ia,Te.ScrollWheelZoom=Fe,Te.TapHold=Vr,Te.TouchZoom=nr,r.Bounds=T,r.Browser=se,r.CRS=we,r.Canvas=ea,r.Circle=As,r.CircleMarker=Os,r.Class=Qe,r.Control=Ut,r.DivIcon=Us,r.DivOverlay=wn,r.DomEvent=Ls,r.DomUtil=br,r.Draggable=cn,r.Evented=V,r.FeatureGroup=An,r.GeoJSON=yn,r.GridLayer=Qn,r.Handler=qt,r.Icon=_i,r.ImageOverlay=Yn,r.LatLng=ie,r.LatLngBounds=oe,r.Layer=hn,r.LayerGroup=Kn,r.LineUtil=Sl,r.Map=Te,r.Marker=Dn,r.Mixin=Uo,r.Path=qn,r.Point=A,r.PolyUtil=uc,r.Polygon=bn,r.Polyline=Ht,r.Popup=Ws,r.PosAnimation=Is,r.Projection=pc,r.Rectangle=Ol,r.Renderer=Cn,r.SVG=mi,r.SVGOverlay=Qo,r.TileLayer=Xn,r.Tooltip=Xi,r.Transformation=Oi,r.Util=xt,r.VideoOverlay=Yo,r.bind=m,r.bounds=B,r.canvas=ta,r.circle=Ur,r.circleMarker=Pl,r.control=Gn,r.divIcon=Nl,r.extend=c,r.featureGroup=xl,r.geoJSON=kl,r.geoJson=dn,r.gridLayer=Ji,r.icon=Tl,r.imageOverlay=Ll,r.latLng=X,r.latLngBounds=ne,r.layerGroup=Wr,r.map=$n,r.marker=gc,r.point=F,r.polygon=yc,r.polyline=vc,r.popup=Qi,r.rectangle=wc,r.setOptions=q,r.stamp=C,r.svg=Hs,r.svgOverlay=Xo,r.tileLayer=Jo,r.tooltip=jr,r.transformation=Ai,r.version=l,r.videoOverlay=Il;var Dl=window.L;r.noConflict=function(){return window.L=Dl,this},window.L=r})}(ka,ka.exports)),ka.exports}var $d=cS();const hS=L_($d);function dS(s,n,r){return Object.freeze({instance:s,context:n,container:r})}function fS(s,n){return n==null?function(l,c){const p=ye.useRef();return p.current||(p.current=s(l,c)),p}:function(l,c){const p=ye.useRef();p.current||(p.current=s(l,c));const m=ye.useRef(l),{instance:w}=p.current;return ye.useEffect(function(){m.current!==l&&(n(w,l,m.current),m.current=l)},[w,l,c]),p}}function pS(s,n){ye.useEffect(function(){return(n.layerContainer??n.map).addLayer(s.instance),function(){var p;(p=n.layerContainer)==null||p.removeLayer(s.instance),n.map.removeLayer(s.instance)}},[n,s])}function _S(s){return function(r){const l=og(),c=s(ag(r,l),l);return iS(l.map,r.attribution),lS(c.current,r.eventHandlers),pS(c.current,l),c}}function mS(s,n){const r=fS(s,n),l=_S(r);return aS(l)}function gS(s,n,r){const{opacity:l,zIndex:c}=n;l!=null&&l!==r.opacity&&s.setOpacity(l),c!=null&&c!==r.zIndex&&s.setZIndex(c)}function vS(){return og().map}function ud(){return ud=Object.assign||function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=r[l])}return s},ud.apply(this,arguments)}function yS({bounds:s,boundsOptions:n,center:r,children:l,className:c,id:p,placeholder:m,style:w,whenReady:C,zoom:S,...N},k){const[R]=ye.useState({className:c,id:p,style:w}),[j,Y]=ye.useState(null);ye.useImperativeHandle(k,()=>(j==null?void 0:j.map)??null,[j]);const q=ye.useCallback(Le=>{if(Le!==null&&j===null){const De=new $d.Map(Le,N);r!=null&&S!=null?De.setView(r,S):s!=null&&De.fitBounds(s,n),C!=null&&De.whenReady(C),Y(sS(De))}},[]);ye.useEffect(()=>()=>{j==null||j.map.remove()},[j]);const le=j?Hh.createElement(oS,{value:j},l):m??null;return Hh.createElement("div",ud({},R,{ref:q}),le)}const wS=ye.forwardRef(yS),CS=mS(function({url:n,...r},l){const c=new $d.TileLayer(n,ag(r,l));return dS(c,l)},function(n,r,l){gS(n,r,l);const{url:c}=r;c!=null&&c!==l.url&&n.setUrl(c)});(function(){function s(n){return this instanceof s?(this._canvas=n=typeof n=="string"?document.getElementById(n):n,this._ctx=n.getContext("2d"),this._width=n.width,this._height=n.height,this._max=1,void this.clear()):new s(n)}s.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(n,r){return this._data=n,this},max:function(n){return this._max=n,this},add:function(n){return this._data.push(n),this},clear:function(){return this._data=[],this},radius:function(n,r){r=r||15;var l=this._circle=document.createElement("canvas"),c=l.getContext("2d"),p=this._r=n+r;return l.width=l.height=2*p,c.shadowOffsetX=c.shadowOffsetY=200,c.shadowBlur=r,c.shadowColor="black",c.beginPath(),c.arc(p-200,p-200,n,0,2*Math.PI,!0),c.closePath(),c.fill(),this},gradient:function(n){var r=document.createElement("canvas"),l=r.getContext("2d"),c=l.createLinearGradient(0,0,0,256);r.width=1,r.height=256;for(var p in n)c.addColorStop(p,n[p]);return l.fillStyle=c,l.fillRect(0,0,1,256),this._grad=l.getImageData(0,0,1,256).data,this},draw:function(n){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var r=this._ctx;r.clearRect(0,0,this._width,this._height);for(var l,c=0,p=this._data.length;p>c;c++)l=this._data[c],r.globalAlpha=Math.max(l[2]/this._max,n||.05),r.drawImage(this._circle,l[0]-this._r,l[1]-this._r);var m=r.getImageData(0,0,this._width,this._height);return this._colorize(m.data,this._grad),r.putImageData(m,0,0),this},_colorize:function(n,r){for(var l,c=3,p=n.length;p>c;c+=4)l=4*n[c],l&&(n[c-3]=r[l],n[c-2]=r[l+1],n[c-1]=r[l+2])}},window.simpleheat=s})(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(s,n){this._latlngs=s,L.setOptions(this,n)},setLatLngs:function(s){return this._latlngs=s,this.redraw()},addLatLng:function(s){return this._latlngs.push(s),this.redraw()},setOptions:function(s){return L.setOptions(this,s),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(s){this._map=s,this._canvas||this._initCanvas(),s._panes.overlayPane.appendChild(this._canvas),s.on("moveend",this._reset,this),s.options.zoomAnimation&&L.Browser.any3d&&s.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(s){s.getPanes().overlayPane.removeChild(this._canvas),s.off("moveend",this._reset,this),s.options.zoomAnimation&&s.off("zoomanim",this._animateZoom,this)},addTo:function(s){return s.addLayer(this),this},_initCanvas:function(){var s=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),n=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);s.style[n]="50% 50%";var r=this._map.getSize();s.width=r.x,s.height=r.y;var l=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(s,"leaflet-zoom-"+(l?"animated":"hide")),this._heat=simpleheat(s),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var s=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,s);var n=this._map.getSize();this._heat._width!==n.x&&(this._canvas.width=this._heat._width=n.x),this._heat._height!==n.y&&(this._canvas.height=this._heat._height=n.y),this._redraw()},_redraw:function(){var s,n,r,l,c,p,m,w,C,S=[],N=this._heat._r,k=this._map.getSize(),R=new L.Bounds(L.point([-N,-N]),k.add([N,N])),j=this.options.max===void 0?1:this.options.max,Y=this.options.maxZoom===void 0?this._map.getMaxZoom():this.options.maxZoom,q=1/Math.pow(2,Math.max(0,Math.min(Y-this._map.getZoom(),12))),le=N/2,Le=[],De=this._map._getMapPanePos(),Me=De.x%le,be=De.y%le;for(s=0,n=this._latlngs.length;n>s;s++)if(r=this._map.latLngToContainerPoint(this._latlngs[s]),R.contains(r)){c=Math.floor((r.x-Me)/le)+2,p=Math.floor((r.y-be)/le)+2;var lt=this._latlngs[s].alt!==void 0?this._latlngs[s].alt:this._latlngs[s][2]!==void 0?+this._latlngs[s][2]:1;C=lt*q,Le[p]=Le[p]||[],l=Le[p][c],l?(l[0]=(l[0]*l[2]+r.x*C)/(l[2]+C),l[1]=(l[1]*l[2]+r.y*C)/(l[2]+C),l[2]+=C):Le[p][c]=[r.x,r.y,C]}for(s=0,n=Le.length;n>s;s++)if(Le[s])for(m=0,w=Le[s].length;w>m;m++)l=Le[s][m],l&&S.push([Math.round(l[0]),Math.round(l[1]),Math.min(l[2],j)]);this._heat.data(S).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(s){var n=this._map.getZoomScale(s.zoom),r=this._map._getCenterOffset(s.center)._multiplyBy(-n).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,r,n):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(r)+" scale("+n+")"}}),L.heatLayer=function(s,n){return new L.HeatLayer(s,n)};function SS({userLocations:s}){const n=vS();return Hh.useEffect(()=>{n.eachLayer(l=>{l.options&&l.options.pane==="overlayPane"&&n.removeLayer(l)});const r=s.map(l=>[l.lat,l.lng]);r.length>0&&hS.heatLayer(r,{radius:25,blur:1,maxZoom:17}).addTo(n)},[s,n]),null}function ES({userLocations:s}){const n=[32.75491,-117.205];return ue.jsxs("div",{className:"mb-2 mt-4 p-4 bg-gray-900 rounded-lg shadow-lg text-center w-full max-w-2xl",children:[ue.jsx("h2",{className:"text-md font-bold text-neon-purple mb-2 text-center",children:"See Where Other Users are Checked In!"}),ue.jsx("div",{className:"w-full h-96",children:ue.jsxs(wS,{center:n,zoom:12,className:"w-full h-full rounded-lg z-0",children:[ue.jsx(CS,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'}),ue.jsx(SS,{userLocations:s})]})})]})}const k_=["The Owl San Diego","Mavericks Beach Club","Nova SD","PB Shore Club","Parq","The Duck Dive","Side Bar","Phantom Lounge and Nightclub","The Casbah","The Rail","Oxford Social Club","The Tipsy Crow","Onyx","F6ix","Bloom","Omert","Sevilla","Mr Tempo","TORO","FLUXX","Prohibition Lounge","Spin","Moonshine Flats","710 Beach Club","Lahaina Beach House","PB Avenue","Moonshine Beach","Thrusters Lounge","The Local","Open Bar","Tavern at the Beach","The Silver Fox Lounge","The Collective","Firehouse","Hideaway"],xS=["Nova SD: DJ Snake performing this Friday!","Mavericks Beach Club: Voted #1 for daytime vibes!","Most Underrated: The Duck Dive (check it out!)","Newest Venue Added: The Collective","Longest Top Rated Streak: Firehouse","New Happy Hour Deal @ Hideaway"],TS=s=>s>=7?"text-green-500":s<5?"text-red-500":"text-gray-200",PS=s=>s?Math.min(1,s/10):0,kS=()=>{const[s,n]=ye.useState({}),[r,l]=ye.useState(new Set),[c,p]=ye.useState(null),[m,w]=ye.useState(k_.reduce((V,A)=>(V[A]=[],V),{})),[C,S]=ye.useState(""),[N,k]=ye.useState(!1),[R,j]=ye.useState(""),[Y,q]=ye.useState(""),[le,Le]=ye.useState(null),[De,Me]=ye.useState(""),[be,lt]=ye.useState({}),[ot,ht]=ye.useState(new Set),[Et,Wt]=ye.useState([]);ye.useEffect(()=>{const V=Ft(Bt,"ratings");Pa(V,A=>{const $=A.val();$&&n($)})},[]),ye.useEffect(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(V=>{const{latitude:A,longitude:$}=V.coords,F=RC(Ft(Bt,"userLocations"));ro(F,{lat:A,lng:$,timestamp:Date.now()})},V=>{console.error("Error getting geolocation:",V)})},[]),ye.useEffect(()=>{const V=Ft(Bt,"userLocations"),A=Pa(V,$=>{if($.exists()){const F=$.val(),T=Object.values(F);Wt(T)}else Wt([])});return()=>A()},[]),ye.useEffect(()=>{const V=Ft(Bt,"checkIns");Pa(V,A=>{const $=A.val()||{};lt($)})},[]),ye.useEffect(()=>{const V=new Date;let A=new Date;A.setHours(6,0,0,0),A.getTime()<=V.getTime()&&A.setDate(A.getDate()+1);const $=setTimeout(async()=>{const T=(await MC(Ft(Bt,"ratings"))).val();if(T){let B=null,oe=-1/0;if(Object.keys(T).forEach(ne=>{const{total:ie,count:X}=T[ne];if(X>0){const we=ie/X;we>oe&&(oe=we,B=ne)}}),B){const ne=Ft(Bt,"topRating");ro(ne,{club:B,average:oe,timestamp:Date.now()})}}ro(Ft(Bt,"comments"),null),ro(Ft(Bt,"ratings"),null),ro(Ft(Bt,"checkIns"),null),ro(Ft(Bt,"userLocations"),null)},A.getTime()-V.getTime());return()=>clearTimeout($)},[]),ye.useEffect(()=>{const V=Ft(Bt,"topRating");Pa(V,A=>{const $=A.val();Le($||null)})},[]),ye.useEffect(()=>{if(!c)return;const V=Ft(Bt,`comments/${c}`),A=Pa(V,$=>{const F=$.val();if(F){const T=Object.values(F).sort((B,oe)=>oe.timestamp-B.timestamp);w(B=>({...B,[c]:T}))}else w(T=>({...T,[c]:[]}))});return()=>A()},[c]);const Kt=V=>{const A=s[V];if(!A||A.count===0)return ue.jsx("span",{className:"text-gray-400",children:"No ratings yet"});const $=A.total/A.count,F=TS($);return ue.jsx("span",{className:F,children:$.toFixed(1)})},qe=()=>{if(!C.trim()||!c)return;const V=Date.now(),A=Ft(Bt,`comments/${c}/${V}`);xu(A,{text:C,timestamp:V}),S("")},$e=(V,A)=>{if(r.has(V)){alert("You have already rated this location.");return}const $=Ft(Bt,`ratings/${V}`),F=s[V]||{total:0,count:0};xu($,{total:F.total+A,count:F.count+1}),l(T=>new Set(T).add(V))},xt=()=>{if(!R.trim()||!Y.trim())return;const V=Date.now(),A=Ft(Bt,`clubSubmissions/${V}`);xu(A,{email:R,message:Y,timestamp:V}),j(""),q(""),k(!1)},Qe=V=>{var $;if(ot.has(V)){alert("You have already checked in at this location.");return}const A=(($=be[V])==null?void 0:$.count)||0;xu(Ft(Bt,`checkIns/${V}`),{count:A+1}).then(()=>{console.log(`Check-in successful for ${V}`),ht(F=>new Set(F).add(V))}).catch(F=>console.error("Check-in failed:",F))},Oe=[...k_].sort((V,A)=>{const $=s[V],F=s[A],T=$&&$.count>0?$.total/$.count:0;return(F&&F.count>0?F.total/F.count:0)-T}).filter(V=>V.toLowerCase().includes(De.toLowerCase()));return ue.jsxs("div",{className:"min-h-screen w-screen flex flex-col items-center bg-black pt-0 p-4",children:[ue.jsx(nS,{items:xS}),ue.jsx("h1",{className:"text-5xl font-bold text-neon-purple mb-6 text-center",children:"CLUB HOPPR"}),ue.jsx("h2",{className:"text-1xl font-bold text-neon-purple mb-6 text-center",children:"Give YOUR Rating of the Hottest Spots in Downtown SD & PB!"}),le&&ue.jsxs("div",{className:"mb-6 p-4 bg-gray-900 rounded-lg shadow-lg text-center",children:[ue.jsx("h2",{className:"text-md font-bold text-neon-purple mb-2 text-center",children:" Top Rated from the Previous Night "}),ue.jsx("h3",{className:"text-white font-bold text-3xl mt-2 mb-1 text-center",children:le.club}),ue.jsxs("p",{className:"text-yellow-400",children:["Average Rating: ",le.average.toFixed(1)]})]}),ue.jsx("div",{className:"w-full max-w-md mb-6",children:ue.jsx("input",{type:"text",className:"w-full p-2 rounded bg-gray-800 text-white",placeholder:"Search for a club...",value:De,onChange:V=>Me(V.target.value)})}),ue.jsx("div",{className:"w-screen max-w-2xl bg-gray-900 shadow-lg rounded-lg p-4 sm:p-6 md:p-8",children:Oe.map(V=>{var T;const A=s[V];let $=null;A&&A.count>0&&($=A.total/A.count);const F=$?PS($):0;return be[V],ue.jsxs("div",{className:"border-b border-neon-purple py-4",children:[ue.jsx("button",{className:"float-right px-4 py-2 text-sm sm:text-base sm:px-6 sm:py-3 bg-neon-purple text-black rounded hover:bg-purple-800 disabled:opacity-50",onClick:()=>p(V),children:"View Comments"}),ue.jsxs("h2",{className:"text-2xl font-semibold text-white mb-2",children:[V,$&&ue.jsx("span",{style:{marginLeft:"0.5rem",opacity:F},"aria-label":"Fire Emoji",children:""})]}),ue.jsxs("p",{className:"text-gray-400 mb-2",children:["Average Rating: ",Kt(V)]}),ue.jsx("div",{className:"flex flex-wrap space-x-1 mb-2",children:[1,2,3,4,5,6,7,8,9,10].map(B=>ue.jsx("button",{onClick:()=>$e(V,B),className:"px-2 py-0.5 bg-neon-purple text-black rounded hover:bg-purple-800 disabled:opacity-50",disabled:r.has(V),children:B},B))}),ue.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[ue.jsx("button",{onClick:()=>Qe(V),className:"bg-blue-600 px-3 py-1 rounded hover:bg-blue-700 text-white",children:"Check In"}),ue.jsxs("p",{className:"text-white",children:["Crowd Meter: ",ue.jsx("span",{className:"text-yellow-400 font-bold",children:((T=be[V])==null?void 0:T.count)||0})," people"]})]})]},V)})}),ue.jsx(ES,{userLocations:Et}),ue.jsx("footer",{className:"mt-6 text-gray-400 text-sm text-center",children:"Ratings, Comments, & Check-Ins reset daily at 6:00 AM PST"}),ue.jsx("button",{className:"mt-4 bg-neon-purple px-4 py-2 rounded hover:bg-purple-800 text-black",onClick:()=>k(!0),children:"Request a Bar/Club to be Added"}),c&&ue.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-end z-50",children:ue.jsxs("div",{className:"bg-gray-900 text-white w-80 h-full shadow-lg overflow-y-auto p-4 relative",children:[ue.jsx("button",{className:"float-right top-4 right-4 text-gray-400 hover:text-gray-200",onClick:()=>p(null),children:"Close"}),ue.jsx("h2",{className:"text-2xl font-bold mb-4",children:c}),ue.jsxs("div",{className:"mt-4",children:[ue.jsx("textarea",{className:"w-full bg-gray-800 text-white rounded p-2",rows:"3",value:C,onChange:V=>S(V.target.value),placeholder:"Add a comment..."}),ue.jsx("button",{className:"mt-2 bg-neon-purple px-4 py-2 rounded hover:bg-purple-800",onClick:qe,children:"Submit"})]}),ue.jsx("div",{className:"flex flex-col space-y-4 mt-4",children:m[c].map((V,A)=>ue.jsxs("div",{className:"border-b border-gray-700 pb-2",children:[ue.jsx("p",{children:V.text}),ue.jsx("p",{className:"text-sm text-gray-500",children:new Date(V.timestamp).toLocaleString()})]},A))})]})}),N&&ue.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:ue.jsxs("div",{className:"bg-gray-900 text-white w-80 rounded-lg shadow-lg p-4 relative",children:[ue.jsx("button",{className:"float-right top-2 right-2 text-gray-400 hover:text-gray-200",onClick:()=>k(!1),children:"Close"}),ue.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Request a New Club/Bar"}),ue.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Your Email:"}),ue.jsx("input",{type:"email",value:R,onChange:V=>j(V.target.value),className:"w-full mb-4 p-2 rounded bg-gray-800 text-white",placeholder:"email@example.com"}),ue.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Club/Bar Name & Message:"}),ue.jsx("textarea",{value:Y,onChange:V=>q(V.target.value),rows:3,className:"w-full mb-4 p-2 rounded bg-gray-800 text-white",placeholder:"Tell us which club/bar you want added..."}),ue.jsx("button",{onClick:xt,className:"bg-neon-purple px-4 py-2 rounded hover:bg-purple-800 text-black",children:"Submit"})]})})]})};qg.createRoot(document.getElementById("root")).render(ue.jsx(ye.StrictMode,{children:ue.jsx(kS,{})}));
