(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const p of h)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function r(h){const p={};return h.integrity&&(p.integrity=h.integrity),h.referrerPolicy&&(p.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?p.credentials="include":h.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(h){if(h.ep)return;h.ep=!0;const p=r(h);fetch(h.href,p)}})();function k_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ch={exports:{}},ya={},Sh={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp;function zg(){if(xp)return Ce;xp=1;var s=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),k=Symbol.iterator;function N(P){return P===null||typeof P!="object"?null:(P=k&&P[k]||P["@@iterator"],typeof P=="function"?P:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,K={};function oe(P,B,ue){this.props=P,this.context=B,this.refs=K,this.updater=ue||Z}oe.prototype.isReactComponent={},oe.prototype.setState=function(P,B){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,B,"setState")},oe.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Le(){}Le.prototype=oe.prototype;function De(P,B,ue){this.props=P,this.context=B,this.refs=K,this.updater=ue||Z}var Re=De.prototype=new Le;Re.constructor=De,Y(Re,oe.prototype),Re.isPureReactComponent=!0;var be=Array.isArray,lt=Object.prototype.hasOwnProperty,ot={current:null},ht={key:!0,ref:!0,__self:!0,__source:!0};function Et(P,B,ue){var ae,ie={},J=null,Pe=null;if(B!=null)for(ae in B.ref!==void 0&&(Pe=B.ref),B.key!==void 0&&(J=""+B.key),B)lt.call(B,ae)&&!ht.hasOwnProperty(ae)&&(ie[ae]=B[ae]);var we=arguments.length-2;if(we===1)ie.children=ue;else if(1<we){for(var We=Array(we),Tt=0;Tt<we;Tt++)We[Tt]=arguments[Tt+2];ie.children=We}if(P&&P.defaultProps)for(ae in we=P.defaultProps,we)ie[ae]===void 0&&(ie[ae]=we[ae]);return{$$typeof:s,type:P,key:J,ref:Pe,props:ie,_owner:ot.current}}function Ft(P,B){return{$$typeof:s,type:P.type,key:B,ref:P.ref,props:P.props,_owner:P._owner}}function Vt(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function Ke(P){var B={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ue){return B[ue]})}var $e=/\/+/g;function xt(P,B){return typeof P=="object"&&P!==null&&P.key!=null?Ke(""+P.key):B.toString(36)}function Qe(P,B,ue,ae,ie){var J=typeof P;(J==="undefined"||J==="boolean")&&(P=null);var Pe=!1;if(P===null)Pe=!0;else switch(J){case"string":case"number":Pe=!0;break;case"object":switch(P.$$typeof){case s:case n:Pe=!0}}if(Pe)return Pe=P,ie=ie(Pe),P=ae===""?"."+xt(Pe,0):ae,be(ie)?(ue="",P!=null&&(ue=P.replace($e,"$&/")+"/"),Qe(ie,B,ue,"",function(Tt){return Tt})):ie!=null&&(Vt(ie)&&(ie=Ft(ie,ue+(!ie.key||Pe&&Pe.key===ie.key?"":(""+ie.key).replace($e,"$&/")+"/")+P)),B.push(ie)),1;if(Pe=0,ae=ae===""?".":ae+":",be(P))for(var we=0;we<P.length;we++){J=P[we];var We=ae+xt(J,we);Pe+=Qe(J,B,ue,We,ie)}else if(We=N(P),typeof We=="function")for(P=We.call(P),we=0;!(J=P.next()).done;)J=J.value,We=ae+xt(J,we++),Pe+=Qe(J,B,ue,We,ie);else if(J==="object")throw B=String(P),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return Pe}function nn(P,B,ue){if(P==null)return P;var ae=[],ie=0;return Qe(P,ae,"","",function(J){return B.call(ue,J,ie++)}),ae}function Oe(P){if(P._status===-1){var B=P._result;B=B(),B.then(function(ue){(P._status===0||P._status===-1)&&(P._status=1,P._result=ue)},function(ue){(P._status===0||P._status===-1)&&(P._status=2,P._result=ue)}),P._status===-1&&(P._status=0,P._result=B)}if(P._status===1)return P._result.default;throw P._result}var V={current:null},D={transition:null},G={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:D,ReactCurrentOwner:ot};function F(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:nn,forEach:function(P,B,ue){nn(P,function(){B.apply(this,arguments)},ue)},count:function(P){var B=0;return nn(P,function(){B++}),B},toArray:function(P){return nn(P,function(B){return B})||[]},only:function(P){if(!Vt(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Ce.Component=oe,Ce.Fragment=r,Ce.Profiler=h,Ce.PureComponent=De,Ce.StrictMode=l,Ce.Suspense=C,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,Ce.act=F,Ce.cloneElement=function(P,B,ue){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var ae=Y({},P.props),ie=P.key,J=P.ref,Pe=P._owner;if(B!=null){if(B.ref!==void 0&&(J=B.ref,Pe=ot.current),B.key!==void 0&&(ie=""+B.key),P.type&&P.type.defaultProps)var we=P.type.defaultProps;for(We in B)lt.call(B,We)&&!ht.hasOwnProperty(We)&&(ae[We]=B[We]===void 0&&we!==void 0?we[We]:B[We])}var We=arguments.length-2;if(We===1)ae.children=ue;else if(1<We){we=Array(We);for(var Tt=0;Tt<We;Tt++)we[Tt]=arguments[Tt+2];ae.children=we}return{$$typeof:s,type:P.type,key:ie,ref:J,props:ae,_owner:Pe}},Ce.createContext=function(P){return P={$$typeof:m,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:p,_context:P},P.Consumer=P},Ce.createElement=Et,Ce.createFactory=function(P){var B=Et.bind(null,P);return B.type=P,B},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(P){return{$$typeof:w,render:P}},Ce.isValidElement=Vt,Ce.lazy=function(P){return{$$typeof:R,_payload:{_status:-1,_result:P},_init:Oe}},Ce.memo=function(P,B){return{$$typeof:S,type:P,compare:B===void 0?null:B}},Ce.startTransition=function(P){var B=D.transition;D.transition={};try{P()}finally{D.transition=B}},Ce.unstable_act=F,Ce.useCallback=function(P,B){return V.current.useCallback(P,B)},Ce.useContext=function(P){return V.current.useContext(P)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(P){return V.current.useDeferredValue(P)},Ce.useEffect=function(P,B){return V.current.useEffect(P,B)},Ce.useId=function(){return V.current.useId()},Ce.useImperativeHandle=function(P,B,ue){return V.current.useImperativeHandle(P,B,ue)},Ce.useInsertionEffect=function(P,B){return V.current.useInsertionEffect(P,B)},Ce.useLayoutEffect=function(P,B){return V.current.useLayoutEffect(P,B)},Ce.useMemo=function(P,B){return V.current.useMemo(P,B)},Ce.useReducer=function(P,B,ue){return V.current.useReducer(P,B,ue)},Ce.useRef=function(P){return V.current.useRef(P)},Ce.useState=function(P){return V.current.useState(P)},Ce.useSyncExternalStore=function(P,B,ue){return V.current.useSyncExternalStore(P,B,ue)},Ce.useTransition=function(){return V.current.useTransition()},Ce.version="18.3.1",Ce}var Tp;function od(){return Tp||(Tp=1,Sh.exports=zg()),Sh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function Fg(){if(Pp)return ya;Pp=1;var s=od(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,h=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function m(w,C,S){var R,k={},N=null,Z=null;S!==void 0&&(N=""+S),C.key!==void 0&&(N=""+C.key),C.ref!==void 0&&(Z=C.ref);for(R in C)l.call(C,R)&&!p.hasOwnProperty(R)&&(k[R]=C[R]);if(w&&w.defaultProps)for(R in C=w.defaultProps,C)k[R]===void 0&&(k[R]=C[R]);return{$$typeof:n,type:w,key:N,ref:Z,props:k,_owner:h.current}}return ya.Fragment=r,ya.jsx=m,ya.jsxs=m,ya}var kp;function Bg(){return kp||(kp=1,Ch.exports=Fg()),Ch.exports}var le=Bg(),ye=od();const zh=k_(ye);var mu={},Eh={exports:{}},Jt={},xh={exports:{}},Th={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp;function Wg(){return Lp||(Lp=1,function(s){function n(D,G){var F=D.length;D.push(G);e:for(;0<F;){var P=F-1>>>1,B=D[P];if(0<h(B,G))D[P]=G,D[F]=B,F=P;else break e}}function r(D){return D.length===0?null:D[0]}function l(D){if(D.length===0)return null;var G=D[0],F=D.pop();if(F!==G){D[0]=F;e:for(var P=0,B=D.length,ue=B>>>1;P<ue;){var ae=2*(P+1)-1,ie=D[ae],J=ae+1,Pe=D[J];if(0>h(ie,F))J<B&&0>h(Pe,ie)?(D[P]=Pe,D[J]=F,P=J):(D[P]=ie,D[ae]=F,P=ae);else if(J<B&&0>h(Pe,F))D[P]=Pe,D[J]=F,P=J;else break e}}return G}function h(D,G){var F=D.sortIndex-G.sortIndex;return F!==0?F:D.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;s.unstable_now=function(){return p.now()}}else{var m=Date,w=m.now();s.unstable_now=function(){return m.now()-w}}var C=[],S=[],R=1,k=null,N=3,Z=!1,Y=!1,K=!1,oe=typeof setTimeout=="function"?setTimeout:null,Le=typeof clearTimeout=="function"?clearTimeout:null,De=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Re(D){for(var G=r(S);G!==null;){if(G.callback===null)l(S);else if(G.startTime<=D)l(S),G.sortIndex=G.expirationTime,n(C,G);else break;G=r(S)}}function be(D){if(K=!1,Re(D),!Y)if(r(C)!==null)Y=!0,Oe(lt);else{var G=r(S);G!==null&&V(be,G.startTime-D)}}function lt(D,G){Y=!1,K&&(K=!1,Le(Et),Et=-1),Z=!0;var F=N;try{for(Re(G),k=r(C);k!==null&&(!(k.expirationTime>G)||D&&!Ke());){var P=k.callback;if(typeof P=="function"){k.callback=null,N=k.priorityLevel;var B=P(k.expirationTime<=G);G=s.unstable_now(),typeof B=="function"?k.callback=B:k===r(C)&&l(C),Re(G)}else l(C);k=r(C)}if(k!==null)var ue=!0;else{var ae=r(S);ae!==null&&V(be,ae.startTime-G),ue=!1}return ue}finally{k=null,N=F,Z=!1}}var ot=!1,ht=null,Et=-1,Ft=5,Vt=-1;function Ke(){return!(s.unstable_now()-Vt<Ft)}function $e(){if(ht!==null){var D=s.unstable_now();Vt=D;var G=!0;try{G=ht(!0,D)}finally{G?xt():(ot=!1,ht=null)}}else ot=!1}var xt;if(typeof De=="function")xt=function(){De($e)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,nn=Qe.port2;Qe.port1.onmessage=$e,xt=function(){nn.postMessage(null)}}else xt=function(){oe($e,0)};function Oe(D){ht=D,ot||(ot=!0,xt())}function V(D,G){Et=oe(function(){D(s.unstable_now())},G)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(D){D.callback=null},s.unstable_continueExecution=function(){Y||Z||(Y=!0,Oe(lt))},s.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ft=0<D?Math.floor(1e3/D):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_getFirstCallbackNode=function(){return r(C)},s.unstable_next=function(D){switch(N){case 1:case 2:case 3:var G=3;break;default:G=N}var F=N;N=G;try{return D()}finally{N=F}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=N;N=D;try{return G()}finally{N=F}},s.unstable_scheduleCallback=function(D,G,F){var P=s.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?P+F:P):F=P,D){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=F+B,D={id:R++,callback:G,priorityLevel:D,startTime:F,expirationTime:B,sortIndex:-1},F>P?(D.sortIndex=F,n(S,D),r(C)===null&&D===r(S)&&(K?(Le(Et),Et=-1):K=!0,V(be,F-P))):(D.sortIndex=B,n(C,D),Y||Z||(Y=!0,Oe(lt))),D},s.unstable_shouldYield=Ke,s.unstable_wrapCallback=function(D){var G=N;return function(){var F=N;N=G;try{return D.apply(this,arguments)}finally{N=F}}}}(Th)),Th}var Ip;function Ug(){return Ip||(Ip=1,xh.exports=Wg()),xh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function Hg(){if(Np)return Jt;Np=1;var s=od(),n=Ug();function r(e){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,h={};function p(e,i){m(e,i),m(e+"Capture",i)}function m(e,i){for(h[e]=i,e=0;e<i.length;e++)l.add(i[e])}var w=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R={},k={};function N(e){return C.call(k,e)?!0:C.call(R,e)?!1:S.test(e)?k[e]=!0:(R[e]=!0,!1)}function Z(e,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Y(e,i,a,c){if(i===null||typeof i>"u"||Z(e,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function K(e,i,a,c,f,_,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=e,this.type=i,this.sanitizeURL=_,this.removeEmptyString=v}var oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){oe[e]=new K(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0];oe[i]=new K(i,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){oe[e]=new K(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){oe[e]=new K(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){oe[e]=new K(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){oe[e]=new K(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){oe[e]=new K(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){oe[e]=new K(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){oe[e]=new K(e,5,!1,e.toLowerCase(),null,!1,!1)});var Le=/[\-:]([a-z])/g;function De(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var i=e.replace(Le,De);oe[i]=new K(i,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var i=e.replace(Le,De);oe[i]=new K(i,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(Le,De);oe[i]=new K(i,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){oe[e]=new K(e,1,!1,e.toLowerCase(),null,!1,!1)}),oe.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){oe[e]=new K(e,1,!1,e.toLowerCase(),null,!0,!0)});function Re(e,i,a,c){var f=oe.hasOwnProperty(i)?oe[i]:null;(f!==null?f.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(Y(i,a,f,c)&&(a=null),c||f===null?N(i)&&(a===null?e.removeAttribute(i):e.setAttribute(i,""+a)):f.mustUseProperty?e[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,c=f.attributeNamespace,a===null?e.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?e.setAttributeNS(c,i,a):e.setAttribute(i,a))))}var be=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lt=Symbol.for("react.element"),ot=Symbol.for("react.portal"),ht=Symbol.for("react.fragment"),Et=Symbol.for("react.strict_mode"),Ft=Symbol.for("react.profiler"),Vt=Symbol.for("react.provider"),Ke=Symbol.for("react.context"),$e=Symbol.for("react.forward_ref"),xt=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),nn=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),D=Symbol.iterator;function G(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var F=Object.assign,P;function B(e){if(P===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);P=i&&i[1]||""}return`
`+P+e}var ue=!1;function ae(e,i){if(!e||ue)return"";ue=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(z){var c=z}Reflect.construct(e,[],i)}else{try{i.call()}catch(z){c=z}e.call(i.prototype)}else{try{throw Error()}catch(z){c=z}e()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var f=z.stack.split(`
`),_=c.stack.split(`
`),v=f.length-1,E=_.length-1;1<=v&&0<=E&&f[v]!==_[E];)E--;for(;1<=v&&0<=E;v--,E--)if(f[v]!==_[E]){if(v!==1||E!==1)do if(v--,E--,0>E||f[v]!==_[E]){var T=`
`+f[v].replace(" at new "," at ");return e.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",e.displayName)),T}while(1<=v&&0<=E);break}}}finally{ue=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?B(e):""}function ie(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=ae(e.type,!1),e;case 11:return e=ae(e.type.render,!1),e;case 1:return e=ae(e.type,!0),e;default:return""}}function J(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ht:return"Fragment";case ot:return"Portal";case Ft:return"Profiler";case Et:return"StrictMode";case xt:return"Suspense";case Qe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ke:return(e.displayName||"Context")+".Consumer";case Vt:return(e._context.displayName||"Context")+".Provider";case $e:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nn:return i=e.displayName||null,i!==null?i:J(e.type)||"Memo";case Oe:i=e._payload,e=e._init;try{return J(e(i))}catch{}}return null}function Pe(e){var i=e.type;switch(e.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=i.render,e=e.displayName||e.name||"",i.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(i);case 8:return i===Et?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function we(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function We(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Tt(e){var i=We(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),c=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,_=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){c=""+v,_.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Mi(e){e._valueTracker||(e._valueTracker=Tt(e))}function Oi(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return e&&(c=We(e)?e.checked?"true":"false":e.value),e=c,e!==a?(i.setValue(e),!0):!1}function Ai(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yo(e,i){var a=i.checked;return F({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function wo(e,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=we(i.value!=null?i.value:a),e._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Co(e,i){i=i.checked,i!=null&&Re(e,"checked",i,!1)}function xr(e,i){Co(e,i);var a=we(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}i.hasOwnProperty("value")?So(e,i.type,a):i.hasOwnProperty("defaultValue")&&So(e,i.type,we(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(e.defaultChecked=!!i.defaultChecked)}function Tr(e,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+e._wrapperState.initialValue,a||i===e.value||(e.value=i),e.defaultValue=i}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function So(e,i,a){(i!=="number"||Ai(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Di=Array.isArray;function Hn(e,i,a,c){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&c&&(e[a].defaultSelected=!0)}else{for(a=""+we(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,c&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function cs(e,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return F({},i,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Eo(e,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(r(92));if(Di(a)){if(1<a.length)throw Error(r(93));a=a[0]}i=a}i==null&&(i=""),a=i}e._wrapperState={initialValue:we(a)}}function qa(e,i){var a=we(i.value),c=we(i.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),i.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),c!=null&&(e.defaultValue=""+c)}function Ka(e){var i=e.textContent;i===e._wrapperState.initialValue&&i!==""&&i!==null&&(e.value=i)}function hs(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ds(e,i){return e==null||e==="http://www.w3.org/1999/xhtml"?hs(i):e==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pr,Ya=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,f){MSApp.execUnsafeLocalFunction(function(){return e(i,a,c,f)})}:e}(function(e,i){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=i;else{for(Pr=Pr||document.createElement("div"),Pr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Pr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;i.firstChild;)e.appendChild(i.firstChild)}});function bi(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qu=["Webkit","ms","Moz","O"];Object.keys(zi).forEach(function(e){Qu.forEach(function(i){i=i+e.charAt(0).toUpperCase()+e.substring(1),zi[i]=zi[e]})});function xo(e,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||zi.hasOwnProperty(e)&&zi[e]?(""+i).trim():i+"px"}function fs(e,i){e=e.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=xo(a,i[a],c);a==="float"&&(a="cssFloat"),c?e.setProperty(a,f):e[a]=f}}var Qa=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function To(e,i){if(i){if(Qa[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function si(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Po=null;function ko(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ps=null,oi=null,ai=null;function Xa(e){if(e=yi(e)){if(typeof ps!="function")throw Error(r(280));var i=e.stateNode;i&&(i=Us(i),ps(e.stateNode,e.type,i))}}function Ja(e){oi?ai?ai.push(e):ai=[e]:oi=e}function el(){if(oi){var e=oi,i=ai;if(ai=oi=null,Xa(e),i)for(e=0;e<i.length;e++)Xa(i[e])}}function tl(e,i){return e(i)}function nl(){}var Lo=!1;function _s(e,i,a){if(Lo)return e(i,a);Lo=!0;try{return tl(e,i,a)}finally{Lo=!1,(oi!==null||ai!==null)&&(nl(),el())}}function kr(e,i){var a=e.stateNode;if(a===null)return null;var c=Us(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Io=!1;if(w)try{var Lr={};Object.defineProperty(Lr,"passive",{get:function(){Io=!0}}),window.addEventListener("test",Lr,Lr),window.removeEventListener("test",Lr,Lr)}catch{Io=!1}function Xu(e,i,a,c,f,_,v,E,T){var z=Array.prototype.slice.call(arguments,3);try{i.apply(a,z)}catch(H){this.onError(H)}}var Nt=!1,re=null,Ir=!1,ms=null,il={onError:function(e){Nt=!0,re=e}};function rl(e,i,a,c,f,_,v,E,T){Nt=!1,re=null,Xu.apply(il,arguments)}function No(e,i,a,c,f,_,v,E,T){if(rl.apply(this,arguments),Nt){if(Nt){var z=re;Nt=!1,re=null}else throw Error(r(198));Ir||(Ir=!0,ms=z)}}function Zn(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function li(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function Ro(e){if(Zn(e)!==e)throw Error(r(188))}function Ju(e){var i=e.alternate;if(!i){if(i=Zn(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,c=i;;){var f=a.return;if(f===null)break;var _=f.alternate;if(_===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===_.child){for(_=f.child;_;){if(_===a)return Ro(f),e;if(_===c)return Ro(f),i;_=_.sibling}throw Error(r(188))}if(a.return!==c.return)a=f,c=_;else{for(var v=!1,E=f.child;E;){if(E===a){v=!0,a=f,c=_;break}if(E===c){v=!0,c=f,a=_;break}E=E.sibling}if(!v){for(E=_.child;E;){if(E===a){v=!0,a=_,c=f;break}if(E===c){v=!0,c=_,a=f;break}E=E.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==c)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function sl(e){return e=Ju(e),e!==null?ol(e):null}function ol(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var i=ol(e);if(i!==null)return i;e=e.sibling}return null}var al=n.unstable_scheduleCallback,Mo=n.unstable_cancelCallback,ec=n.unstable_shouldYield,gs=n.unstable_requestPaint,Xe=n.unstable_now,tc=n.unstable_getCurrentPriorityLevel,Oo=n.unstable_ImmediatePriority,ll=n.unstable_UserBlockingPriority,vs=n.unstable_NormalPriority,Ao=n.unstable_LowPriority,Fi=n.unstable_IdlePriority,Nr=null,rn=null;function Rr(e){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Nr,e,void 0,(e.current.flags&128)===128)}catch{}}var ge=Math.clz32?Math.clz32:Bi,Ge=Math.log,ys=Math.LN2;function Bi(e){return e>>>=0,e===0?32:31-(Ge(e)/ys|0)|0}var Ln=64,Wi=4194304;function me(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ue(e,i){var a=e.pendingLanes;if(a===0)return 0;var c=0,f=e.suspendedLanes,_=e.pingedLanes,v=a&268435455;if(v!==0){var E=v&~f;E!==0?c=me(E):(_&=v,_!==0&&(c=me(_)))}else v=a&~f,v!==0?c=me(v):_!==0&&(c=me(_));if(c===0)return 0;if(i!==0&&i!==c&&!(i&f)&&(f=c&-c,_=i&-i,f>=_||f===16&&(_&4194240)!==0))return i;if(c&4&&(c|=a&16),i=e.entangledLanes,i!==0)for(e=e.entanglements,i&=c;0<i;)a=31-ge(i),f=1<<a,c|=e[a],i&=~f;return c}function Do(e,i){switch(e){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ws(e,i){for(var a=e.suspendedLanes,c=e.pingedLanes,f=e.expirationTimes,_=e.pendingLanes;0<_;){var v=31-ge(_),E=1<<v,T=f[v];T===-1?(!(E&a)||E&c)&&(f[v]=Do(E,i)):T<=i&&(e.expiredLanes|=E),_&=~E}}function Rt(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ul(){var e=Ln;return Ln<<=1,!(Ln&4194240)&&(Ln=64),e}function Ui(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function sn(e,i,a){e.pendingLanes|=i,i!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,i=31-ge(i),e[i]=a}function nt(e,i){var a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;var c=e.eventTimes;for(e=e.expirationTimes;0<a;){var f=31-ge(a),_=1<<f;i[f]=0,c[f]=-1,e[f]=-1,a&=~_}}function In(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var c=31-ge(a),f=1<<c;f&i|e[c]&i&&(e[c]|=i),a&=~f}}var ke=0;function Hi(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Cs,ui,Ss,Es,Mr,Or=!1,Zi=[],on=null,Nn=null,_n=null,Ar=new Map,fe=new Map,dt=[],ze="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bo(e,i){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":Ar.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":fe.delete(i.pointerId)}}function ci(e,i,a,c,f,_){return e===null||e.nativeEvent!==_?(e={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[f]},i!==null&&(i=yi(i),i!==null&&ui(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function zo(e,i,a,c,f){switch(i){case"focusin":return on=ci(on,e,i,a,c,f),!0;case"dragenter":return Nn=ci(Nn,e,i,a,c,f),!0;case"mouseover":return _n=ci(_n,e,i,a,c,f),!0;case"pointerover":var _=f.pointerId;return Ar.set(_,ci(Ar.get(_)||null,e,i,a,c,f)),!0;case"gotpointercapture":return _=f.pointerId,fe.set(_,ci(fe.get(_)||null,e,i,a,c,f)),!0}return!1}function xs(e){var i=vi(e.target);if(i!==null){var a=Zn(i);if(a!==null){if(i=a.tag,i===13){if(i=li(a),i!==null){e.blockedOn=i,Mr(e.priority,function(){Ss(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mn(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=ks(e.domEventName,e.eventSystemFlags,i[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);Po=c,a.target.dispatchEvent(c),Po=null}else return i=yi(a),i!==null&&ui(i),e.blockedOn=a,!1;i.shift()}return!0}function Ts(e,i,a){mn(e)&&a.delete(i)}function Dr(){Or=!1,on!==null&&mn(on)&&(on=null),Nn!==null&&mn(Nn)&&(Nn=null),_n!==null&&mn(_n)&&(_n=null),Ar.forEach(Ts),fe.forEach(Ts)}function Je(e,i){e.blockedOn===i&&(e.blockedOn=null,Or||(Or=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Dr)))}function an(e){function i(f){return Je(f,e)}if(0<Zi.length){Je(Zi[0],e);for(var a=1;a<Zi.length;a++){var c=Zi[a];c.blockedOn===e&&(c.blockedOn=null)}}for(on!==null&&Je(on,e),Nn!==null&&Je(Nn,e),_n!==null&&Je(_n,e),Ar.forEach(i),fe.forEach(i),a=0;a<dt.length;a++)c=dt[a],c.blockedOn===e&&(c.blockedOn=null);for(;0<dt.length&&(a=dt[0],a.blockedOn===null);)xs(a),a.blockedOn===null&&dt.shift()}var hi=be.ReactCurrentBatchConfig,br=!0;function nc(e,i,a,c){var f=ke,_=hi.transition;hi.transition=null;try{ke=1,zr(e,i,a,c)}finally{ke=f,hi.transition=_}}function cl(e,i,a,c){var f=ke,_=hi.transition;hi.transition=null;try{ke=4,zr(e,i,a,c)}finally{ke=f,hi.transition=_}}function zr(e,i,a,c){if(br){var f=ks(e,i,a,c);if(f===null)t(e,i,c,Ps,a),bo(e,c);else if(zo(f,e,i,a,c))c.stopPropagation();else if(bo(e,c),i&4&&-1<ze.indexOf(e)){for(;f!==null;){var _=yi(f);if(_!==null&&Cs(_),_=ks(e,i,a,c),_===null&&t(e,i,c,Ps,a),_===f)break;f=_}f!==null&&c.stopPropagation()}else t(e,i,c,null,a)}}var Ps=null;function ks(e,i,a,c){if(Ps=null,e=ko(c),e=vi(e),e!==null)if(i=Zn(e),i===null)e=null;else if(a=i.tag,a===13){if(e=li(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null);return Ps=e,null}function xe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tc()){case Oo:return 1;case ll:return 4;case vs:case Ao:return 16;case Fi:return 536870912;default:return 16}default:return 16}}var jn=null,Bt=null,Vn=null;function Fo(){if(Vn)return Vn;var e,i=Bt,a=i.length,c,f="value"in jn?jn.value:jn.textContent,_=f.length;for(e=0;e<a&&i[e]===f[e];e++);var v=a-e;for(c=1;c<=v&&i[a-c]===f[_-c];c++);return Vn=f.slice(e,1<c?1-c:void 0)}function Ls(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ji(){return!0}function hl(){return!1}function Mt(e){function i(a,c,f,_,v){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=_,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(_):_[E]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ji:hl,this.isPropagationStopped=hl,this}return F(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),i}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bo=Mt(Vi),di=F({},Vi,{view:0,detail:0}),ic=Mt(di),$t,Wo,$i,ln=F({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$i&&($i&&e.type==="mousemove"?($t=e.screenX-$i.screenX,Wo=e.screenY-$i.screenY):Wo=$t=0,$i=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Wo}}),Uo=Mt(ln),dl=F({},ln,{dataTransfer:0}),Ho=Mt(dl),rc=F({},di,{relatedTarget:0}),Is=Mt(rc),fl=F({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),sc=Mt(fl),oc=F({},Vi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zo=Mt(oc),ac=F({},Vi,{data:0}),jo=Mt(ac),pl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ns={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=fi[e])?!!i[e]:!1}function pi(){return lc}var Gt=F({},di,{key:function(e){if(e.key){var i=pl[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Ls(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ns[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(e){return e.type==="keypress"?Ls(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ls(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_l=Mt(Gt),ml=F({},ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gl=Mt(ml),Vo=F({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),$o=Mt(Vo),uc=F({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),cc=Mt(uc),vl=F({},ln,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hc=Mt(vl),un=[9,13,27,32],$n=w&&"CompositionEvent"in window,Fr=null;w&&"documentMode"in document&&(Fr=document.documentMode);var Rn=w&&"TextEvent"in window&&!Fr,yl=w&&(!$n||Fr&&8<Fr&&11>=Fr),_i=" ",wl=!1;function Gi(e,i){switch(e){case"keyup":return un.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Go(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mn=!1;function dc(e,i){switch(e){case"compositionend":return Go(i);case"keypress":return i.which!==32?null:(wl=!0,_i);case"textInput":return e=i.data,e===_i&&wl?null:e;default:return null}}function Gn(e,i){if(Mn)return e==="compositionend"||!$n&&Gi(e,i)?(e=Fo(),Vn=Bt=jn=null,Mn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yl&&i.locale!=="ko"?null:i.data;default:return null}}var Rs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cl(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Rs[e.type]:i==="textarea"}function Ms(e,i,a,c){Ja(c),i=u(i,"onChange"),0<i.length&&(a=new Bo("onChange","change",null,a,c),e.push({event:a,listeners:i}))}var Br=null,Wt=null;function fc(e){na(e,0)}function On(e){var i=wi(e);if(Oi(i))return e}function pc(e,i){if(e==="change")return i}var gn=!1;if(w){var qi;if(w){var Os="oninput"in document;if(!Os){var As=document.createElement("div");As.setAttribute("oninput","return;"),Os=typeof As.oninput=="function"}qi=Os}else qi=!1;gn=qi&&(!document.documentMode||9<document.documentMode)}function Wr(){Br&&(Br.detachEvent("onpropertychange",Ds),Wt=Br=null)}function Ds(e){if(e.propertyName==="value"&&On(Wt)){var i=[];Ms(i,Wt,e,ko(e)),_s(fc,i)}}function bs(e,i,a){e==="focusin"?(Wr(),Br=i,Wt=a,Br.attachEvent("onpropertychange",Ds)):e==="focusout"&&Wr()}function Ki(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return On(Wt)}function zs(e,i){if(e==="click")return On(i)}function qo(e,i){if(e==="input"||e==="change")return On(i)}function Sl(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var cn=typeof Object.is=="function"?Object.is:Sl;function qn(e,i){if(cn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!C.call(i,f)||!cn(e[f],i[f]))return!1}return!0}function El(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ko(e,i){var a=El(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=i&&c>=i)return{node:a,offset:i-e};e=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=El(a)}}function xl(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?xl(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Yo(){for(var e=window,i=Ai();i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Ai(e.document)}return i}function Qo(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function vn(e){var i=Yo(),a=e.focusedElem,c=e.selectionRange;if(i!==a&&a&&a.ownerDocument&&xl(a.ownerDocument.documentElement,a)){if(c!==null&&Qo(a)){if(i=c.start,e=c.end,e===void 0&&(e=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(e,a.value.length);else if(e=(i=a.ownerDocument||document)&&i.defaultView||window,e.getSelection){e=e.getSelection();var f=a.textContent.length,_=Math.min(c.start,f);c=c.end===void 0?_:Math.min(c.end,f),!e.extend&&_>c&&(f=c,c=_,_=f),f=Ko(a,_);var v=Ko(a,c);f&&v&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),e.removeAllRanges(),_>c?(e.addRange(i),e.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),e.addRange(i)))}}for(i=[],e=a;e=e.parentNode;)e.nodeType===1&&i.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)e=i[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Fs=w&&"documentMode"in document&&11>=document.documentMode,Yi=null,Qi=null,Ur=null,Bs=!1;function Tl(e,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Bs||Yi==null||Yi!==Ai(c)||(c=Yi,"selectionStart"in c&&Qo(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ur&&qn(Ur,c)||(Ur=c,c=u(Qi,"onSelect"),0<c.length&&(i=new Bo("onSelect","select",null,i,a),e.push({event:i,listeners:c}),i.target=Yi)))}function Kn(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Xi={animationend:Kn("Animation","AnimationEnd"),animationiteration:Kn("Animation","AnimationIteration"),animationstart:Kn("Animation","AnimationStart"),transitionend:Kn("Transition","TransitionEnd")},Yn={},Xo={};w&&(Xo=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function Hr(e){if(Yn[e])return Yn[e];if(!Xi[e])return e;var i=Xi[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Xo)return Yn[e]=i[a];return e}var Pl=Hr("animationend"),yn=Hr("animationiteration"),Jo=Hr("animationstart"),ea=Hr("transitionend"),Ji=new Map,kl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hn(e,i){Ji.set(e,i),p(i,[e])}for(var mi=0;mi<kl.length;mi++){var Ws=kl[mi],Ll=Ws.toLowerCase(),_c=Ws[0].toUpperCase()+Ws.slice(1);hn(Ll,"on"+_c)}hn(Pl,"onAnimationEnd"),hn(yn,"onAnimationIteration"),hn(Jo,"onAnimationStart"),hn("dblclick","onDoubleClick"),hn("focusin","onFocus"),hn("focusout","onBlur"),hn(ea,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Il=new Set("cancel close invalid load scroll toggle".split(" ").concat(er));function ta(e,i,a){var c=e.type||"unknown-event";e.currentTarget=a,No(c,i,void 0,e),e.currentTarget=null}function na(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],f=c.event;c=c.listeners;e:{var _=void 0;if(i)for(var v=c.length-1;0<=v;v--){var E=c[v],T=E.instance,z=E.currentTarget;if(E=E.listener,T!==_&&f.isPropagationStopped())break e;ta(f,E,z),_=T}else for(v=0;v<c.length;v++){if(E=c[v],T=E.instance,z=E.currentTarget,E=E.listener,T!==_&&f.isPropagationStopped())break e;ta(f,E,z),_=T}}}if(Ir)throw e=ms,Ir=!1,ms=null,e}function Fe(e,i){var a=i[rr];a===void 0&&(a=i[rr]=new Set);var c=e+"__bubble";a.has(c)||(Nl(i,e,2,!1),a.add(c))}function ia(e,i,a){var c=0;i&&(c|=4),Nl(a,e,c,i)}var Zr="_reactListening"+Math.random().toString(36).slice(2);function tr(e){if(!e[Zr]){e[Zr]=!0,l.forEach(function(a){a!=="selectionchange"&&(Il.has(a)||ia(a,!1,e),ia(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Zr]||(i[Zr]=!0,ia("selectionchange",!1,i))}}function Nl(e,i,a,c){switch(xe(i)){case 1:var f=nc;break;case 4:f=cl;break;default:f=zr}a=f.bind(null,i,a,e),f=void 0,!Io||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function t(e,i,a,c,f){var _=c;if(!(i&1)&&!(i&2)&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var E=c.stateNode.containerInfo;if(E===f||E.nodeType===8&&E.parentNode===f)break;if(v===4)for(v=c.return;v!==null;){var T=v.tag;if((T===3||T===4)&&(T=v.stateNode.containerInfo,T===f||T.nodeType===8&&T.parentNode===f))return;v=v.return}for(;E!==null;){if(v=vi(E),v===null)return;if(T=v.tag,T===5||T===6){c=_=v;continue e}E=E.parentNode}}c=c.return}_s(function(){var z=_,H=ko(a),j=[];e:{var U=Ji.get(e);if(U!==void 0){var X=Bo,te=e;switch(e){case"keypress":if(Ls(a)===0)break e;case"keydown":case"keyup":X=_l;break;case"focusin":te="focus",X=Is;break;case"focusout":te="blur",X=Is;break;case"beforeblur":case"afterblur":X=Is;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Ho;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=$o;break;case Pl:case yn:case Jo:X=sc;break;case ea:X=cc;break;case"scroll":X=ic;break;case"wheel":X=hc;break;case"copy":case"cut":case"paste":X=Zo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=gl}var ne=(i&4)!==0,at=!ne&&e==="scroll",O=ne?U!==null?U+"Capture":null:U;ne=[];for(var I=z,A;I!==null;){A=I;var $=A.stateNode;if(A.tag===5&&$!==null&&(A=$,O!==null&&($=kr(I,O),$!=null&&ne.push(o(I,$,A)))),at)break;I=I.return}0<ne.length&&(U=new X(U,te,null,a,H),j.push({event:U,listeners:ne}))}}if(!(i&7)){e:{if(U=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",U&&a!==Po&&(te=a.relatedTarget||a.fromElement)&&(vi(te)||te[Ae]))break e;if((X||U)&&(U=H.window===H?H:(U=H.ownerDocument)?U.defaultView||U.parentWindow:window,X?(te=a.relatedTarget||a.toElement,X=z,te=te?vi(te):null,te!==null&&(at=Zn(te),te!==at||te.tag!==5&&te.tag!==6)&&(te=null)):(X=null,te=z),X!==te)){if(ne=Uo,$="onMouseLeave",O="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(ne=gl,$="onPointerLeave",O="onPointerEnter",I="pointer"),at=X==null?U:wi(X),A=te==null?U:wi(te),U=new ne($,I+"leave",X,a,H),U.target=at,U.relatedTarget=A,$=null,vi(H)===z&&(ne=new ne(O,I+"enter",te,a,H),ne.target=A,ne.relatedTarget=at,$=ne),at=$,X&&te)t:{for(ne=X,O=te,I=0,A=ne;A;A=d(A))I++;for(A=0,$=O;$;$=d($))A++;for(;0<I-A;)ne=d(ne),I--;for(;0<A-I;)O=d(O),A--;for(;I--;){if(ne===O||O!==null&&ne===O.alternate)break t;ne=d(ne),O=d(O)}ne=null}else ne=null;X!==null&&g(j,U,X,ne,!1),te!==null&&at!==null&&g(j,at,te,ne,!0)}}e:{if(U=z?wi(z):window,X=U.nodeName&&U.nodeName.toLowerCase(),X==="select"||X==="input"&&U.type==="file")var se=pc;else if(Cl(U))if(gn)se=qo;else{se=Ki;var he=bs}else(X=U.nodeName)&&X.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(se=zs);if(se&&(se=se(e,z))){Ms(j,se,a,H);break e}he&&he(e,U,z),e==="focusout"&&(he=U._wrapperState)&&he.controlled&&U.type==="number"&&So(U,"number",U.value)}switch(he=z?wi(z):window,e){case"focusin":(Cl(he)||he.contentEditable==="true")&&(Yi=he,Qi=z,Ur=null);break;case"focusout":Ur=Qi=Yi=null;break;case"mousedown":Bs=!0;break;case"contextmenu":case"mouseup":case"dragend":Bs=!1,Tl(j,a,H);break;case"selectionchange":if(Fs)break;case"keydown":case"keyup":Tl(j,a,H)}var de;if($n)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Mn?Gi(e,a)&&(_e="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(yl&&a.locale!=="ko"&&(Mn||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Mn&&(de=Fo()):(jn=H,Bt="value"in jn?jn.value:jn.textContent,Mn=!0)),he=u(z,_e),0<he.length&&(_e=new jo(_e,e,null,a,H),j.push({event:_e,listeners:he}),de?_e.data=de:(de=Go(a),de!==null&&(_e.data=de)))),(de=Rn?dc(e,a):Gn(e,a))&&(z=u(z,"onBeforeInput"),0<z.length&&(H=new jo("onBeforeInput","beforeinput",null,a,H),j.push({event:H,listeners:z}),H.data=de))}na(j,i)})}function o(e,i,a){return{instance:e,listener:i,currentTarget:a}}function u(e,i){for(var a=i+"Capture",c=[];e!==null;){var f=e,_=f.stateNode;f.tag===5&&_!==null&&(f=_,_=kr(e,a),_!=null&&c.unshift(o(e,_,f)),_=kr(e,i),_!=null&&c.push(o(e,_,f))),e=e.return}return c}function d(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function g(e,i,a,c,f){for(var _=i._reactName,v=[];a!==null&&a!==c;){var E=a,T=E.alternate,z=E.stateNode;if(T!==null&&T===c)break;E.tag===5&&z!==null&&(E=z,f?(T=kr(a,_),T!=null&&v.unshift(o(a,T,E))):f||(T=kr(a,_),T!=null&&v.push(o(a,T,E)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var y=/\r\n?/g,x=/\u0000|\uFFFD/g;function M(e){return(typeof e=="string"?e:""+e).replace(y,`
`).replace(x,"")}function b(e,i,a){if(i=M(i),M(e)!==i&&a)throw Error(r(425))}function W(){}var Q=null,ce=null;function ve(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ft=typeof setTimeout=="function"?setTimeout:void 0,ut=typeof clearTimeout=="function"?clearTimeout:void 0,Ut=typeof Promise=="function"?Promise:void 0,Ot=typeof queueMicrotask=="function"?queueMicrotask:typeof Ut<"u"?function(e){return Ut.resolve(null).then(e).catch(nr)}:ft;function nr(e){setTimeout(function(){throw e})}function ra(e,i){var a=i,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){e.removeChild(f),an(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);an(i)}function Qn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return e}function Rl(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}var gi=Math.random().toString(36).slice(2),wn="__reactFiber$"+gi,ir="__reactProps$"+gi,Ae="__reactContainer$"+gi,rr="__reactEvents$"+gi,mc="__reactListeners$"+gi,gc="__reactHandles$"+gi;function vi(e){var i=e[wn];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Ae]||a[wn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Rl(e);e!==null;){if(a=e[wn])return a;e=Rl(e)}return i}e=a,a=e.parentNode}return null}function yi(e){return e=e[wn]||e[Ae],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Us(e){return e[ir]||null}var vc=[],Hs=-1;function sr(e){return{current:e}}function qe(e){0>Hs||(e.current=vc[Hs],vc[Hs]=null,Hs--)}function He(e,i){Hs++,vc[Hs]=e.current,e.current=i}var or={},At=sr(or),qt=sr(!1),jr=or;function Zs(e,i){var a=e.type.contextTypes;if(!a)return or;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var f={},_;for(_ in a)f[_]=i[_];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=f),f}function Kt(e){return e=e.childContextTypes,e!=null}function Ml(){qe(qt),qe(At)}function Vd(e,i,a){if(At.current!==or)throw Error(r(168));He(At,i),He(qt,a)}function $d(e,i,a){var c=e.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in i))throw Error(r(108,Pe(e)||"Unknown",f));return F({},a,c)}function Ol(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||or,jr=At.current,He(At,e),He(qt,qt.current),!0}function Gd(e,i,a){var c=e.stateNode;if(!c)throw Error(r(169));a?(e=$d(e,i,jr),c.__reactInternalMemoizedMergedChildContext=e,qe(qt),qe(At),He(At,e)):qe(qt),He(qt,a)}var Ci=null,Al=!1,yc=!1;function qd(e){Ci===null?Ci=[e]:Ci.push(e)}function ig(e){Al=!0,qd(e)}function ar(){if(!yc&&Ci!==null){yc=!0;var e=0,i=ke;try{var a=Ci;for(ke=1;e<a.length;e++){var c=a[e];do c=c(!0);while(c!==null)}Ci=null,Al=!1}catch(f){throw Ci!==null&&(Ci=Ci.slice(e+1)),al(Oo,ar),f}finally{ke=i,yc=!1}}return null}var js=[],Vs=0,Dl=null,bl=0,Cn=[],Sn=0,Vr=null,Si=1,Ei="";function $r(e,i){js[Vs++]=bl,js[Vs++]=Dl,Dl=e,bl=i}function Kd(e,i,a){Cn[Sn++]=Si,Cn[Sn++]=Ei,Cn[Sn++]=Vr,Vr=e;var c=Si;e=Ei;var f=32-ge(c)-1;c&=~(1<<f),a+=1;var _=32-ge(i)+f;if(30<_){var v=f-f%5;_=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Si=1<<32-ge(i)+f|a<<f|c,Ei=_+e}else Si=1<<_|a<<f|c,Ei=e}function wc(e){e.return!==null&&($r(e,1),Kd(e,1,0))}function Cc(e){for(;e===Dl;)Dl=js[--Vs],js[Vs]=null,bl=js[--Vs],js[Vs]=null;for(;e===Vr;)Vr=Cn[--Sn],Cn[Sn]=null,Ei=Cn[--Sn],Cn[Sn]=null,Si=Cn[--Sn],Cn[Sn]=null}var dn=null,fn=null,Ye=!1,An=null;function Yd(e,i){var a=Pn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=e,i=e.deletions,i===null?(e.deletions=[a],e.flags|=16):i.push(a)}function Qd(e,i){switch(e.tag){case 5:var a=e.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(e.stateNode=i,dn=e,fn=Qn(i.firstChild),!0):!1;case 6:return i=e.pendingProps===""||i.nodeType!==3?null:i,i!==null?(e.stateNode=i,dn=e,fn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Vr!==null?{id:Si,overflow:Ei}:null,e.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Pn(18,null,null,0),a.stateNode=i,a.return=e,e.child=a,dn=e,fn=null,!0):!1;default:return!1}}function Sc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ec(e){if(Ye){var i=fn;if(i){var a=i;if(!Qd(e,i)){if(Sc(e))throw Error(r(418));i=Qn(a.nextSibling);var c=dn;i&&Qd(e,i)?Yd(c,a):(e.flags=e.flags&-4097|2,Ye=!1,dn=e)}}else{if(Sc(e))throw Error(r(418));e.flags=e.flags&-4097|2,Ye=!1,dn=e}}}function Xd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dn=e}function zl(e){if(e!==dn)return!1;if(!Ye)return Xd(e),Ye=!0,!1;var i;if((i=e.tag!==3)&&!(i=e.tag!==5)&&(i=e.type,i=i!=="head"&&i!=="body"&&!ve(e.type,e.memoizedProps)),i&&(i=fn)){if(Sc(e))throw Jd(),Error(r(418));for(;i;)Yd(e,i),i=Qn(i.nextSibling)}if(Xd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(i===0){fn=Qn(e.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}e=e.nextSibling}fn=null}}else fn=dn?Qn(e.stateNode.nextSibling):null;return!0}function Jd(){for(var e=fn;e;)e=Qn(e.nextSibling)}function $s(){fn=dn=null,Ye=!1}function xc(e){An===null?An=[e]:An.push(e)}var rg=be.ReactCurrentBatchConfig;function sa(e,i,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var c=a.stateNode}if(!c)throw Error(r(147,e));var f=c,_=""+e;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===_?i.ref:(i=function(v){var E=f.refs;v===null?delete E[_]:E[_]=v},i._stringRef=_,i)}if(typeof e!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,e))}return e}function Fl(e,i){throw e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e))}function ef(e){var i=e._init;return i(e._payload)}function tf(e){function i(O,I){if(e){var A=O.deletions;A===null?(O.deletions=[I],O.flags|=16):A.push(I)}}function a(O,I){if(!e)return null;for(;I!==null;)i(O,I),I=I.sibling;return null}function c(O,I){for(O=new Map;I!==null;)I.key!==null?O.set(I.key,I):O.set(I.index,I),I=I.sibling;return O}function f(O,I){return O=_r(O,I),O.index=0,O.sibling=null,O}function _(O,I,A){return O.index=A,e?(A=O.alternate,A!==null?(A=A.index,A<I?(O.flags|=2,I):A):(O.flags|=2,I)):(O.flags|=1048576,I)}function v(O){return e&&O.alternate===null&&(O.flags|=2),O}function E(O,I,A,$){return I===null||I.tag!==6?(I=_h(A,O.mode,$),I.return=O,I):(I=f(I,A),I.return=O,I)}function T(O,I,A,$){var se=A.type;return se===ht?H(O,I,A.props.children,$,A.key):I!==null&&(I.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Oe&&ef(se)===I.type)?($=f(I,A.props),$.ref=sa(O,I,A),$.return=O,$):($=lu(A.type,A.key,A.props,null,O.mode,$),$.ref=sa(O,I,A),$.return=O,$)}function z(O,I,A,$){return I===null||I.tag!==4||I.stateNode.containerInfo!==A.containerInfo||I.stateNode.implementation!==A.implementation?(I=mh(A,O.mode,$),I.return=O,I):(I=f(I,A.children||[]),I.return=O,I)}function H(O,I,A,$,se){return I===null||I.tag!==7?(I=es(A,O.mode,$,se),I.return=O,I):(I=f(I,A),I.return=O,I)}function j(O,I,A){if(typeof I=="string"&&I!==""||typeof I=="number")return I=_h(""+I,O.mode,A),I.return=O,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case lt:return A=lu(I.type,I.key,I.props,null,O.mode,A),A.ref=sa(O,null,I),A.return=O,A;case ot:return I=mh(I,O.mode,A),I.return=O,I;case Oe:var $=I._init;return j(O,$(I._payload),A)}if(Di(I)||G(I))return I=es(I,O.mode,A,null),I.return=O,I;Fl(O,I)}return null}function U(O,I,A,$){var se=I!==null?I.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return se!==null?null:E(O,I,""+A,$);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case lt:return A.key===se?T(O,I,A,$):null;case ot:return A.key===se?z(O,I,A,$):null;case Oe:return se=A._init,U(O,I,se(A._payload),$)}if(Di(A)||G(A))return se!==null?null:H(O,I,A,$,null);Fl(O,A)}return null}function X(O,I,A,$,se){if(typeof $=="string"&&$!==""||typeof $=="number")return O=O.get(A)||null,E(I,O,""+$,se);if(typeof $=="object"&&$!==null){switch($.$$typeof){case lt:return O=O.get($.key===null?A:$.key)||null,T(I,O,$,se);case ot:return O=O.get($.key===null?A:$.key)||null,z(I,O,$,se);case Oe:var he=$._init;return X(O,I,A,he($._payload),se)}if(Di($)||G($))return O=O.get(A)||null,H(I,O,$,se,null);Fl(I,$)}return null}function te(O,I,A,$){for(var se=null,he=null,de=I,_e=I=0,vt=null;de!==null&&_e<A.length;_e++){de.index>_e?(vt=de,de=null):vt=de.sibling;var Ne=U(O,de,A[_e],$);if(Ne===null){de===null&&(de=vt);break}e&&de&&Ne.alternate===null&&i(O,de),I=_(Ne,I,_e),he===null?se=Ne:he.sibling=Ne,he=Ne,de=vt}if(_e===A.length)return a(O,de),Ye&&$r(O,_e),se;if(de===null){for(;_e<A.length;_e++)de=j(O,A[_e],$),de!==null&&(I=_(de,I,_e),he===null?se=de:he.sibling=de,he=de);return Ye&&$r(O,_e),se}for(de=c(O,de);_e<A.length;_e++)vt=X(de,O,_e,A[_e],$),vt!==null&&(e&&vt.alternate!==null&&de.delete(vt.key===null?_e:vt.key),I=_(vt,I,_e),he===null?se=vt:he.sibling=vt,he=vt);return e&&de.forEach(function(mr){return i(O,mr)}),Ye&&$r(O,_e),se}function ne(O,I,A,$){var se=G(A);if(typeof se!="function")throw Error(r(150));if(A=se.call(A),A==null)throw Error(r(151));for(var he=se=null,de=I,_e=I=0,vt=null,Ne=A.next();de!==null&&!Ne.done;_e++,Ne=A.next()){de.index>_e?(vt=de,de=null):vt=de.sibling;var mr=U(O,de,Ne.value,$);if(mr===null){de===null&&(de=vt);break}e&&de&&mr.alternate===null&&i(O,de),I=_(mr,I,_e),he===null?se=mr:he.sibling=mr,he=mr,de=vt}if(Ne.done)return a(O,de),Ye&&$r(O,_e),se;if(de===null){for(;!Ne.done;_e++,Ne=A.next())Ne=j(O,Ne.value,$),Ne!==null&&(I=_(Ne,I,_e),he===null?se=Ne:he.sibling=Ne,he=Ne);return Ye&&$r(O,_e),se}for(de=c(O,de);!Ne.done;_e++,Ne=A.next())Ne=X(de,O,_e,Ne.value,$),Ne!==null&&(e&&Ne.alternate!==null&&de.delete(Ne.key===null?_e:Ne.key),I=_(Ne,I,_e),he===null?se=Ne:he.sibling=Ne,he=Ne);return e&&de.forEach(function(bg){return i(O,bg)}),Ye&&$r(O,_e),se}function at(O,I,A,$){if(typeof A=="object"&&A!==null&&A.type===ht&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case lt:e:{for(var se=A.key,he=I;he!==null;){if(he.key===se){if(se=A.type,se===ht){if(he.tag===7){a(O,he.sibling),I=f(he,A.props.children),I.return=O,O=I;break e}}else if(he.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Oe&&ef(se)===he.type){a(O,he.sibling),I=f(he,A.props),I.ref=sa(O,he,A),I.return=O,O=I;break e}a(O,he);break}else i(O,he);he=he.sibling}A.type===ht?(I=es(A.props.children,O.mode,$,A.key),I.return=O,O=I):($=lu(A.type,A.key,A.props,null,O.mode,$),$.ref=sa(O,I,A),$.return=O,O=$)}return v(O);case ot:e:{for(he=A.key;I!==null;){if(I.key===he)if(I.tag===4&&I.stateNode.containerInfo===A.containerInfo&&I.stateNode.implementation===A.implementation){a(O,I.sibling),I=f(I,A.children||[]),I.return=O,O=I;break e}else{a(O,I);break}else i(O,I);I=I.sibling}I=mh(A,O.mode,$),I.return=O,O=I}return v(O);case Oe:return he=A._init,at(O,I,he(A._payload),$)}if(Di(A))return te(O,I,A,$);if(G(A))return ne(O,I,A,$);Fl(O,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,I!==null&&I.tag===6?(a(O,I.sibling),I=f(I,A),I.return=O,O=I):(a(O,I),I=_h(A,O.mode,$),I.return=O,O=I),v(O)):a(O,I)}return at}var Gs=tf(!0),nf=tf(!1),Bl=sr(null),Wl=null,qs=null,Tc=null;function Pc(){Tc=qs=Wl=null}function kc(e){var i=Bl.current;qe(Bl),e._currentValue=i}function Lc(e,i,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===a)break;e=e.return}}function Ks(e,i){Wl=e,Tc=qs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&i&&(Yt=!0),e.firstContext=null)}function En(e){var i=e._currentValue;if(Tc!==e)if(e={context:e,memoizedValue:i,next:null},qs===null){if(Wl===null)throw Error(r(308));qs=e,Wl.dependencies={lanes:0,firstContext:e}}else qs=qs.next=e;return i}var Gr=null;function Ic(e){Gr===null?Gr=[e]:Gr.push(e)}function rf(e,i,a,c){var f=i.interleaved;return f===null?(a.next=a,Ic(i)):(a.next=f.next,f.next=a),i.interleaved=a,xi(e,c)}function xi(e,i){e.lanes|=i;var a=e.alternate;for(a!==null&&(a.lanes|=i),a=e,e=e.return;e!==null;)e.childLanes|=i,a=e.alternate,a!==null&&(a.childLanes|=i),a=e,e=e.return;return a.tag===3?a.stateNode:null}var lr=!1;function Nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ti(e,i){return{eventTime:e,lane:i,tag:0,payload:null,callback:null,next:null}}function ur(e,i,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,Ie&2){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,xi(e,a)}return f=c.interleaved,f===null?(i.next=i,Ic(c)):(i.next=f.next,f.next=i),c.interleaved=i,xi(e,a)}function Ul(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,In(e,a)}}function of(e,i){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};_===null?f=_=v:_=_.next=v,a=a.next}while(a!==null);_===null?f=_=i:_=_.next=i}else f=_=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:_,shared:c.shared,effects:c.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}function Hl(e,i,a,c){var f=e.updateQueue;lr=!1;var _=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var T=E,z=T.next;T.next=null,v===null?_=z:v.next=z,v=T;var H=e.alternate;H!==null&&(H=H.updateQueue,E=H.lastBaseUpdate,E!==v&&(E===null?H.firstBaseUpdate=z:E.next=z,H.lastBaseUpdate=T))}if(_!==null){var j=f.baseState;v=0,H=z=T=null,E=_;do{var U=E.lane,X=E.eventTime;if((c&U)===U){H!==null&&(H=H.next={eventTime:X,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var te=e,ne=E;switch(U=i,X=a,ne.tag){case 1:if(te=ne.payload,typeof te=="function"){j=te.call(X,j,U);break e}j=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=ne.payload,U=typeof te=="function"?te.call(X,j,U):te,U==null)break e;j=F({},j,U);break e;case 2:lr=!0}}E.callback!==null&&E.lane!==0&&(e.flags|=64,U=f.effects,U===null?f.effects=[E]:U.push(E))}else X={eventTime:X,lane:U,tag:E.tag,payload:E.payload,callback:E.callback,next:null},H===null?(z=H=X,T=j):H=H.next=X,v|=U;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;U=E,E=U.next,U.next=null,f.lastBaseUpdate=U,f.shared.pending=null}}while(!0);if(H===null&&(T=j),f.baseState=T,f.firstBaseUpdate=z,f.lastBaseUpdate=H,i=f.shared.interleaved,i!==null){f=i;do v|=f.lane,f=f.next;while(f!==i)}else _===null&&(f.shared.lanes=0);Yr|=v,e.lanes=v,e.memoizedState=j}}function af(e,i,a){if(e=i.effects,i.effects=null,e!==null)for(i=0;i<e.length;i++){var c=e[i],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(r(191,f));f.call(c)}}}var oa={},Xn=sr(oa),aa=sr(oa),la=sr(oa);function qr(e){if(e===oa)throw Error(r(174));return e}function Rc(e,i){switch(He(la,i),He(aa,e),He(Xn,oa),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ds(null,"");break;default:e=e===8?i.parentNode:i,i=e.namespaceURI||null,e=e.tagName,i=ds(i,e)}qe(Xn),He(Xn,i)}function Ys(){qe(Xn),qe(aa),qe(la)}function lf(e){qr(la.current);var i=qr(Xn.current),a=ds(i,e.type);i!==a&&(He(aa,e),He(Xn,a))}function Mc(e){aa.current===e&&(qe(Xn),qe(aa))}var et=sr(0);function Zl(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Oc=[];function Ac(){for(var e=0;e<Oc.length;e++)Oc[e]._workInProgressVersionPrimary=null;Oc.length=0}var jl=be.ReactCurrentDispatcher,Dc=be.ReactCurrentBatchConfig,Kr=0,tt=null,pt=null,mt=null,Vl=!1,ua=!1,ca=0,sg=0;function Dt(){throw Error(r(321))}function bc(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!cn(e[a],i[a]))return!1;return!0}function zc(e,i,a,c,f,_){if(Kr=_,tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,jl.current=e===null||e.memoizedState===null?ug:cg,e=a(c,f),ua){_=0;do{if(ua=!1,ca=0,25<=_)throw Error(r(301));_+=1,mt=pt=null,i.updateQueue=null,jl.current=hg,e=a(c,f)}while(ua)}if(jl.current=ql,i=pt!==null&&pt.next!==null,Kr=0,mt=pt=tt=null,Vl=!1,i)throw Error(r(300));return e}function Fc(){var e=ca!==0;return ca=0,e}function Jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?tt.memoizedState=mt=e:mt=mt.next=e,mt}function xn(){if(pt===null){var e=tt.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var i=mt===null?tt.memoizedState:mt.next;if(i!==null)mt=i,pt=e;else{if(e===null)throw Error(r(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},mt===null?tt.memoizedState=mt=e:mt=mt.next=e}return mt}function ha(e,i){return typeof i=="function"?i(e):i}function Bc(e){var i=xn(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var c=pt,f=c.baseQueue,_=a.pending;if(_!==null){if(f!==null){var v=f.next;f.next=_.next,_.next=v}c.baseQueue=f=_,a.pending=null}if(f!==null){_=f.next,c=c.baseState;var E=v=null,T=null,z=_;do{var H=z.lane;if((Kr&H)===H)T!==null&&(T=T.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:e(c,z.action);else{var j={lane:H,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};T===null?(E=T=j,v=c):T=T.next=j,tt.lanes|=H,Yr|=H}z=z.next}while(z!==null&&z!==_);T===null?v=c:T.next=E,cn(c,i.memoizedState)||(Yt=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=T,a.lastRenderedState=c}if(e=a.interleaved,e!==null){f=e;do _=f.lane,tt.lanes|=_,Yr|=_,f=f.next;while(f!==e)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Wc(e){var i=xn(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var c=a.dispatch,f=a.pending,_=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do _=e(_,v.action),v=v.next;while(v!==f);cn(_,i.memoizedState)||(Yt=!0),i.memoizedState=_,i.baseQueue===null&&(i.baseState=_),a.lastRenderedState=_}return[_,c]}function uf(){}function cf(e,i){var a=tt,c=xn(),f=i(),_=!cn(c.memoizedState,f);if(_&&(c.memoizedState=f,Yt=!0),c=c.queue,Uc(ff.bind(null,a,c,e),[e]),c.getSnapshot!==i||_||mt!==null&&mt.memoizedState.tag&1){if(a.flags|=2048,da(9,df.bind(null,a,c,f,i),void 0,null),gt===null)throw Error(r(349));Kr&30||hf(a,i,f)}return f}function hf(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=tt.updateQueue,i===null?(i={lastEffect:null,stores:null},tt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function df(e,i,a,c){i.value=a,i.getSnapshot=c,pf(i)&&_f(e)}function ff(e,i,a){return a(function(){pf(i)&&_f(e)})}function pf(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!cn(e,a)}catch{return!0}}function _f(e){var i=xi(e,1);i!==null&&Fn(i,e,1,-1)}function mf(e){var i=Jn();return typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:e},i.queue=e,e=e.dispatch=lg.bind(null,tt,e),[i.memoizedState,e]}function da(e,i,a,c){return e={tag:e,create:i,destroy:a,deps:c,next:null},i=tt.updateQueue,i===null?(i={lastEffect:null,stores:null},tt.updateQueue=i,i.lastEffect=e.next=e):(a=i.lastEffect,a===null?i.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,i.lastEffect=e)),e}function gf(){return xn().memoizedState}function $l(e,i,a,c){var f=Jn();tt.flags|=e,f.memoizedState=da(1|i,a,void 0,c===void 0?null:c)}function Gl(e,i,a,c){var f=xn();c=c===void 0?null:c;var _=void 0;if(pt!==null){var v=pt.memoizedState;if(_=v.destroy,c!==null&&bc(c,v.deps)){f.memoizedState=da(i,a,_,c);return}}tt.flags|=e,f.memoizedState=da(1|i,a,_,c)}function vf(e,i){return $l(8390656,8,e,i)}function Uc(e,i){return Gl(2048,8,e,i)}function yf(e,i){return Gl(4,2,e,i)}function wf(e,i){return Gl(4,4,e,i)}function Cf(e,i){if(typeof i=="function")return e=e(),i(e),function(){i(null)};if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Sf(e,i,a){return a=a!=null?a.concat([e]):null,Gl(4,4,Cf.bind(null,i,e),a)}function Hc(){}function Ef(e,i){var a=xn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&bc(i,c[1])?c[0]:(a.memoizedState=[e,i],e)}function xf(e,i){var a=xn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&bc(i,c[1])?c[0]:(e=e(),a.memoizedState=[e,i],e)}function Tf(e,i,a){return Kr&21?(cn(a,i)||(a=ul(),tt.lanes|=a,Yr|=a,e.baseState=!0),i):(e.baseState&&(e.baseState=!1,Yt=!0),e.memoizedState=a)}function og(e,i){var a=ke;ke=a!==0&&4>a?a:4,e(!0);var c=Dc.transition;Dc.transition={};try{e(!1),i()}finally{ke=a,Dc.transition=c}}function Pf(){return xn().memoizedState}function ag(e,i,a){var c=fr(e);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},kf(e))Lf(i,a);else if(a=rf(e,i,a,c),a!==null){var f=Zt();Fn(a,e,c,f),If(a,i,c)}}function lg(e,i,a){var c=fr(e),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(kf(e))Lf(i,f);else{var _=e.alternate;if(e.lanes===0&&(_===null||_.lanes===0)&&(_=i.lastRenderedReducer,_!==null))try{var v=i.lastRenderedState,E=_(v,a);if(f.hasEagerState=!0,f.eagerState=E,cn(E,v)){var T=i.interleaved;T===null?(f.next=f,Ic(i)):(f.next=T.next,T.next=f),i.interleaved=f;return}}catch{}finally{}a=rf(e,i,f,c),a!==null&&(f=Zt(),Fn(a,e,c,f),If(a,i,c))}}function kf(e){var i=e.alternate;return e===tt||i!==null&&i===tt}function Lf(e,i){ua=Vl=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function If(e,i,a){if(a&4194240){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,In(e,a)}}var ql={readContext:En,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},ug={readContext:En,useCallback:function(e,i){return Jn().memoizedState=[e,i===void 0?null:i],e},useContext:En,useEffect:vf,useImperativeHandle:function(e,i,a){return a=a!=null?a.concat([e]):null,$l(4194308,4,Cf.bind(null,i,e),a)},useLayoutEffect:function(e,i){return $l(4194308,4,e,i)},useInsertionEffect:function(e,i){return $l(4,2,e,i)},useMemo:function(e,i){var a=Jn();return i=i===void 0?null:i,e=e(),a.memoizedState=[e,i],e},useReducer:function(e,i,a){var c=Jn();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},c.queue=e,e=e.dispatch=ag.bind(null,tt,e),[c.memoizedState,e]},useRef:function(e){var i=Jn();return e={current:e},i.memoizedState=e},useState:mf,useDebugValue:Hc,useDeferredValue:function(e){return Jn().memoizedState=e},useTransition:function(){var e=mf(!1),i=e[0];return e=og.bind(null,e[1]),Jn().memoizedState=e,[i,e]},useMutableSource:function(){},useSyncExternalStore:function(e,i,a){var c=tt,f=Jn();if(Ye){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),gt===null)throw Error(r(349));Kr&30||hf(c,i,a)}f.memoizedState=a;var _={value:a,getSnapshot:i};return f.queue=_,vf(ff.bind(null,c,_,e),[e]),c.flags|=2048,da(9,df.bind(null,c,_,a,i),void 0,null),a},useId:function(){var e=Jn(),i=gt.identifierPrefix;if(Ye){var a=Ei,c=Si;a=(c&~(1<<32-ge(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=ca++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=sg++,i=":"+i+"r"+a.toString(32)+":";return e.memoizedState=i},unstable_isNewReconciler:!1},cg={readContext:En,useCallback:Ef,useContext:En,useEffect:Uc,useImperativeHandle:Sf,useInsertionEffect:yf,useLayoutEffect:wf,useMemo:xf,useReducer:Bc,useRef:gf,useState:function(){return Bc(ha)},useDebugValue:Hc,useDeferredValue:function(e){var i=xn();return Tf(i,pt.memoizedState,e)},useTransition:function(){var e=Bc(ha)[0],i=xn().memoizedState;return[e,i]},useMutableSource:uf,useSyncExternalStore:cf,useId:Pf,unstable_isNewReconciler:!1},hg={readContext:En,useCallback:Ef,useContext:En,useEffect:Uc,useImperativeHandle:Sf,useInsertionEffect:yf,useLayoutEffect:wf,useMemo:xf,useReducer:Wc,useRef:gf,useState:function(){return Wc(ha)},useDebugValue:Hc,useDeferredValue:function(e){var i=xn();return pt===null?i.memoizedState=e:Tf(i,pt.memoizedState,e)},useTransition:function(){var e=Wc(ha)[0],i=xn().memoizedState;return[e,i]},useMutableSource:uf,useSyncExternalStore:cf,useId:Pf,unstable_isNewReconciler:!1};function Dn(e,i){if(e&&e.defaultProps){i=F({},i),e=e.defaultProps;for(var a in e)i[a]===void 0&&(i[a]=e[a]);return i}return i}function Zc(e,i,a,c){i=e.memoizedState,a=a(c,i),a=a==null?i:F({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Kl={isMounted:function(e){return(e=e._reactInternals)?Zn(e)===e:!1},enqueueSetState:function(e,i,a){e=e._reactInternals;var c=Zt(),f=fr(e),_=Ti(c,f);_.payload=i,a!=null&&(_.callback=a),i=ur(e,_,f),i!==null&&(Fn(i,e,f,c),Ul(i,e,f))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var c=Zt(),f=fr(e),_=Ti(c,f);_.tag=1,_.payload=i,a!=null&&(_.callback=a),i=ur(e,_,f),i!==null&&(Fn(i,e,f,c),Ul(i,e,f))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=Zt(),c=fr(e),f=Ti(a,c);f.tag=2,i!=null&&(f.callback=i),i=ur(e,f,c),i!==null&&(Fn(i,e,c,a),Ul(i,e,c))}};function Nf(e,i,a,c,f,_,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,_,v):i.prototype&&i.prototype.isPureReactComponent?!qn(a,c)||!qn(f,_):!0}function Rf(e,i,a){var c=!1,f=or,_=i.contextType;return typeof _=="object"&&_!==null?_=En(_):(f=Kt(i)?jr:At.current,c=i.contextTypes,_=(c=c!=null)?Zs(e,f):or),i=new i(a,_),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Kl,e.stateNode=i,i._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=_),i}function Mf(e,i,a,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==e&&Kl.enqueueReplaceState(i,i.state,null)}function jc(e,i,a,c){var f=e.stateNode;f.props=a,f.state=e.memoizedState,f.refs={},Nc(e);var _=i.contextType;typeof _=="object"&&_!==null?f.context=En(_):(_=Kt(i)?jr:At.current,f.context=Zs(e,_)),f.state=e.memoizedState,_=i.getDerivedStateFromProps,typeof _=="function"&&(Zc(e,i,_,a),f.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&Kl.enqueueReplaceState(f,f.state,null),Hl(e,a,f,c),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function Qs(e,i){try{var a="",c=i;do a+=ie(c),c=c.return;while(c);var f=a}catch(_){f=`
Error generating stack: `+_.message+`
`+_.stack}return{value:e,source:i,stack:f,digest:null}}function Vc(e,i,a){return{value:e,source:null,stack:a??null,digest:i??null}}function $c(e,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var dg=typeof WeakMap=="function"?WeakMap:Map;function Of(e,i,a){a=Ti(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){nu||(nu=!0,ah=c),$c(e,i)},a}function Af(e,i,a){a=Ti(-1,a),a.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var f=i.value;a.payload=function(){return c(f)},a.callback=function(){$c(e,i)}}var _=e.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(a.callback=function(){$c(e,i),typeof c!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function Df(e,i,a){var c=e.pingCache;if(c===null){c=e.pingCache=new dg;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(f.add(a),e=Pg.bind(null,e,i,a),i.then(e,e))}function bf(e){do{var i;if((i=e.tag===13)&&(i=e.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return e;e=e.return}while(e!==null);return null}function zf(e,i,a,c,f){return e.mode&1?(e.flags|=65536,e.lanes=f,e):(e===i?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Ti(-1,1),i.tag=2,ur(a,i,1))),a.lanes|=1),e)}var fg=be.ReactCurrentOwner,Yt=!1;function Ht(e,i,a,c){i.child=e===null?nf(i,null,a,c):Gs(i,e.child,a,c)}function Ff(e,i,a,c,f){a=a.render;var _=i.ref;return Ks(i,f),c=zc(e,i,a,c,_,f),a=Fc(),e!==null&&!Yt?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~f,Pi(e,i,f)):(Ye&&a&&wc(i),i.flags|=1,Ht(e,i,c,f),i.child)}function Bf(e,i,a,c,f){if(e===null){var _=a.type;return typeof _=="function"&&!ph(_)&&_.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=_,Wf(e,i,_,c,f)):(e=lu(a.type,null,c,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(_=e.child,!(e.lanes&f)){var v=_.memoizedProps;if(a=a.compare,a=a!==null?a:qn,a(v,c)&&e.ref===i.ref)return Pi(e,i,f)}return i.flags|=1,e=_r(_,c),e.ref=i.ref,e.return=i,i.child=e}function Wf(e,i,a,c,f){if(e!==null){var _=e.memoizedProps;if(qn(_,c)&&e.ref===i.ref)if(Yt=!1,i.pendingProps=c=_,(e.lanes&f)!==0)e.flags&131072&&(Yt=!0);else return i.lanes=e.lanes,Pi(e,i,f)}return Gc(e,i,a,c,f)}function Uf(e,i,a){var c=i.pendingProps,f=c.children,_=e!==null?e.memoizedState:null;if(c.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Js,pn),pn|=a;else{if(!(a&1073741824))return e=_!==null?_.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:e,cachePool:null,transitions:null},i.updateQueue=null,He(Js,pn),pn|=e,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=_!==null?_.baseLanes:a,He(Js,pn),pn|=c}else _!==null?(c=_.baseLanes|a,i.memoizedState=null):c=a,He(Js,pn),pn|=c;return Ht(e,i,f,a),i.child}function Hf(e,i){var a=i.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Gc(e,i,a,c,f){var _=Kt(a)?jr:At.current;return _=Zs(i,_),Ks(i,f),a=zc(e,i,a,c,_,f),c=Fc(),e!==null&&!Yt?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~f,Pi(e,i,f)):(Ye&&c&&wc(i),i.flags|=1,Ht(e,i,a,f),i.child)}function Zf(e,i,a,c,f){if(Kt(a)){var _=!0;Ol(i)}else _=!1;if(Ks(i,f),i.stateNode===null)Ql(e,i),Rf(i,a,c),jc(i,a,c,f),c=!0;else if(e===null){var v=i.stateNode,E=i.memoizedProps;v.props=E;var T=v.context,z=a.contextType;typeof z=="object"&&z!==null?z=En(z):(z=Kt(a)?jr:At.current,z=Zs(i,z));var H=a.getDerivedStateFromProps,j=typeof H=="function"||typeof v.getSnapshotBeforeUpdate=="function";j||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==c||T!==z)&&Mf(i,v,c,z),lr=!1;var U=i.memoizedState;v.state=U,Hl(i,c,v,f),T=i.memoizedState,E!==c||U!==T||qt.current||lr?(typeof H=="function"&&(Zc(i,a,H,c),T=i.memoizedState),(E=lr||Nf(i,a,E,c,U,T,z))?(j||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=T),v.props=c,v.state=T,v.context=z,c=E):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,sf(e,i),E=i.memoizedProps,z=i.type===i.elementType?E:Dn(i.type,E),v.props=z,j=i.pendingProps,U=v.context,T=a.contextType,typeof T=="object"&&T!==null?T=En(T):(T=Kt(a)?jr:At.current,T=Zs(i,T));var X=a.getDerivedStateFromProps;(H=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==j||U!==T)&&Mf(i,v,c,T),lr=!1,U=i.memoizedState,v.state=U,Hl(i,c,v,f);var te=i.memoizedState;E!==j||U!==te||qt.current||lr?(typeof X=="function"&&(Zc(i,a,X,c),te=i.memoizedState),(z=lr||Nf(i,a,z,c,U,te,T)||!1)?(H||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,te,T),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,te,T)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||E===e.memoizedProps&&U===e.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&U===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=te),v.props=c,v.state=te,v.context=T,c=z):(typeof v.componentDidUpdate!="function"||E===e.memoizedProps&&U===e.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&U===e.memoizedState||(i.flags|=1024),c=!1)}return qc(e,i,a,c,_,f)}function qc(e,i,a,c,f,_){Hf(e,i);var v=(i.flags&128)!==0;if(!c&&!v)return f&&Gd(i,a,!1),Pi(e,i,_);c=i.stateNode,fg.current=i;var E=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,e!==null&&v?(i.child=Gs(i,e.child,null,_),i.child=Gs(i,null,E,_)):Ht(e,i,E,_),i.memoizedState=c.state,f&&Gd(i,a,!0),i.child}function jf(e){var i=e.stateNode;i.pendingContext?Vd(e,i.pendingContext,i.pendingContext!==i.context):i.context&&Vd(e,i.context,!1),Rc(e,i.containerInfo)}function Vf(e,i,a,c,f){return $s(),xc(f),i.flags|=256,Ht(e,i,a,c),i.child}var Kc={dehydrated:null,treeContext:null,retryLane:0};function Yc(e){return{baseLanes:e,cachePool:null,transitions:null}}function $f(e,i,a){var c=i.pendingProps,f=et.current,_=!1,v=(i.flags&128)!==0,E;if((E=v)||(E=e!==null&&e.memoizedState===null?!1:(f&2)!==0),E?(_=!0,i.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),He(et,f&1),e===null)return Ec(i),e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(i.mode&1?e.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(v=c.children,e=c.fallback,_?(c=i.mode,_=i.child,v={mode:"hidden",children:v},!(c&1)&&_!==null?(_.childLanes=0,_.pendingProps=v):_=uu(v,c,0,null),e=es(e,c,a,null),_.return=i,e.return=i,_.sibling=e,i.child=_,i.child.memoizedState=Yc(a),i.memoizedState=Kc,e):Qc(i,v));if(f=e.memoizedState,f!==null&&(E=f.dehydrated,E!==null))return pg(e,i,v,c,E,f,a);if(_){_=c.fallback,v=i.mode,f=e.child,E=f.sibling;var T={mode:"hidden",children:c.children};return!(v&1)&&i.child!==f?(c=i.child,c.childLanes=0,c.pendingProps=T,i.deletions=null):(c=_r(f,T),c.subtreeFlags=f.subtreeFlags&14680064),E!==null?_=_r(E,_):(_=es(_,v,a,null),_.flags|=2),_.return=i,c.return=i,c.sibling=_,i.child=c,c=_,_=i.child,v=e.child.memoizedState,v=v===null?Yc(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},_.memoizedState=v,_.childLanes=e.childLanes&~a,i.memoizedState=Kc,c}return _=e.child,e=_.sibling,c=_r(_,{mode:"visible",children:c.children}),!(i.mode&1)&&(c.lanes=a),c.return=i,c.sibling=null,e!==null&&(a=i.deletions,a===null?(i.deletions=[e],i.flags|=16):a.push(e)),i.child=c,i.memoizedState=null,c}function Qc(e,i){return i=uu({mode:"visible",children:i},e.mode,0,null),i.return=e,e.child=i}function Yl(e,i,a,c){return c!==null&&xc(c),Gs(i,e.child,null,a),e=Qc(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function pg(e,i,a,c,f,_,v){if(a)return i.flags&256?(i.flags&=-257,c=Vc(Error(r(422))),Yl(e,i,v,c)):i.memoizedState!==null?(i.child=e.child,i.flags|=128,null):(_=c.fallback,f=i.mode,c=uu({mode:"visible",children:c.children},f,0,null),_=es(_,f,v,null),_.flags|=2,c.return=i,_.return=i,c.sibling=_,i.child=c,i.mode&1&&Gs(i,e.child,null,v),i.child.memoizedState=Yc(v),i.memoizedState=Kc,_);if(!(i.mode&1))return Yl(e,i,v,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var E=c.dgst;return c=E,_=Error(r(419)),c=Vc(_,c,void 0),Yl(e,i,v,c)}if(E=(v&e.childLanes)!==0,Yt||E){if(c=gt,c!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(c.suspendedLanes|v)?0:f,f!==0&&f!==_.retryLane&&(_.retryLane=f,xi(e,f),Fn(c,e,f,-1))}return fh(),c=Vc(Error(r(421))),Yl(e,i,v,c)}return f.data==="$?"?(i.flags|=128,i.child=e.child,i=kg.bind(null,e),f._reactRetry=i,null):(e=_.treeContext,fn=Qn(f.nextSibling),dn=i,Ye=!0,An=null,e!==null&&(Cn[Sn++]=Si,Cn[Sn++]=Ei,Cn[Sn++]=Vr,Si=e.id,Ei=e.overflow,Vr=i),i=Qc(i,c.children),i.flags|=4096,i)}function Gf(e,i,a){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),Lc(e.return,i,a)}function Xc(e,i,a,c,f){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=a,_.tailMode=f)}function qf(e,i,a){var c=i.pendingProps,f=c.revealOrder,_=c.tail;if(Ht(e,i,c.children,a),c=et.current,c&2)c=c&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gf(e,a,i);else if(e.tag===19)Gf(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(He(et,c),!(i.mode&1))i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&Zl(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Xc(i,!1,f,a,_);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&Zl(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}Xc(i,!0,a,null,_);break;case"together":Xc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ql(e,i){!(i.mode&1)&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=2)}function Pi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Yr|=i.lanes,!(a&i.childLanes))return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=_r(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=_r(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function _g(e,i,a){switch(i.tag){case 3:jf(i),$s();break;case 5:lf(i);break;case 1:Kt(i.type)&&Ol(i);break;case 4:Rc(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,f=i.memoizedProps.value;He(Bl,c._currentValue),c._currentValue=f;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(He(et,et.current&1),i.flags|=128,null):a&i.child.childLanes?$f(e,i,a):(He(et,et.current&1),e=Pi(e,i,a),e!==null?e.sibling:null);He(et,et.current&1);break;case 19:if(c=(a&i.childLanes)!==0,e.flags&128){if(c)return qf(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),He(et,et.current),c)break;return null;case 22:case 23:return i.lanes=0,Uf(e,i,a)}return Pi(e,i,a)}var Kf,Jc,Yf,Qf;Kf=function(e,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Jc=function(){},Yf=function(e,i,a,c){var f=e.memoizedProps;if(f!==c){e=i.stateNode,qr(Xn.current);var _=null;switch(a){case"input":f=yo(e,f),c=yo(e,c),_=[];break;case"select":f=F({},f,{value:void 0}),c=F({},c,{value:void 0}),_=[];break;case"textarea":f=cs(e,f),c=cs(e,c),_=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=W)}To(a,c);var v;a=null;for(z in f)if(!c.hasOwnProperty(z)&&f.hasOwnProperty(z)&&f[z]!=null)if(z==="style"){var E=f[z];for(v in E)E.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(h.hasOwnProperty(z)?_||(_=[]):(_=_||[]).push(z,null));for(z in c){var T=c[z];if(E=f!=null?f[z]:void 0,c.hasOwnProperty(z)&&T!==E&&(T!=null||E!=null))if(z==="style")if(E){for(v in E)!E.hasOwnProperty(v)||T&&T.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in T)T.hasOwnProperty(v)&&E[v]!==T[v]&&(a||(a={}),a[v]=T[v])}else a||(_||(_=[]),_.push(z,a)),a=T;else z==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,E=E?E.__html:void 0,T!=null&&E!==T&&(_=_||[]).push(z,T)):z==="children"?typeof T!="string"&&typeof T!="number"||(_=_||[]).push(z,""+T):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(h.hasOwnProperty(z)?(T!=null&&z==="onScroll"&&Fe("scroll",e),_||E===T||(_=[])):(_=_||[]).push(z,T))}a&&(_=_||[]).push("style",a);var z=_;(i.updateQueue=z)&&(i.flags|=4)}},Qf=function(e,i,a,c){a!==c&&(i.flags|=4)};function fa(e,i){if(!Ye)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function bt(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=c,e.childLanes=a,i}function mg(e,i,a){var c=i.pendingProps;switch(Cc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(i),null;case 1:return Kt(i.type)&&Ml(),bt(i),null;case 3:return c=i.stateNode,Ys(),qe(qt),qe(At),Ac(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(zl(i)?i.flags|=4:e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,An!==null&&(ch(An),An=null))),Jc(e,i),bt(i),null;case 5:Mc(i);var f=qr(la.current);if(a=i.type,e!==null&&i.stateNode!=null)Yf(e,i,a,c,f),e.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(r(166));return bt(i),null}if(e=qr(Xn.current),zl(i)){c=i.stateNode,a=i.type;var _=i.memoizedProps;switch(c[wn]=i,c[ir]=_,e=(i.mode&1)!==0,a){case"dialog":Fe("cancel",c),Fe("close",c);break;case"iframe":case"object":case"embed":Fe("load",c);break;case"video":case"audio":for(f=0;f<er.length;f++)Fe(er[f],c);break;case"source":Fe("error",c);break;case"img":case"image":case"link":Fe("error",c),Fe("load",c);break;case"details":Fe("toggle",c);break;case"input":wo(c,_),Fe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!_.multiple},Fe("invalid",c);break;case"textarea":Eo(c,_),Fe("invalid",c)}To(a,_),f=null;for(var v in _)if(_.hasOwnProperty(v)){var E=_[v];v==="children"?typeof E=="string"?c.textContent!==E&&(_.suppressHydrationWarning!==!0&&b(c.textContent,E,e),f=["children",E]):typeof E=="number"&&c.textContent!==""+E&&(_.suppressHydrationWarning!==!0&&b(c.textContent,E,e),f=["children",""+E]):h.hasOwnProperty(v)&&E!=null&&v==="onScroll"&&Fe("scroll",c)}switch(a){case"input":Mi(c),Tr(c,_,!0);break;case"textarea":Mi(c),Ka(c);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(c.onclick=W)}c=f,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hs(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=v.createElement(a,{is:c.is}):(e=v.createElement(a),a==="select"&&(v=e,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):e=v.createElementNS(e,a),e[wn]=i,e[ir]=c,Kf(e,i,!1,!1),i.stateNode=e;e:{switch(v=si(a,c),a){case"dialog":Fe("cancel",e),Fe("close",e),f=c;break;case"iframe":case"object":case"embed":Fe("load",e),f=c;break;case"video":case"audio":for(f=0;f<er.length;f++)Fe(er[f],e);f=c;break;case"source":Fe("error",e),f=c;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),f=c;break;case"details":Fe("toggle",e),f=c;break;case"input":wo(e,c),f=yo(e,c),Fe("invalid",e);break;case"option":f=c;break;case"select":e._wrapperState={wasMultiple:!!c.multiple},f=F({},c,{value:void 0}),Fe("invalid",e);break;case"textarea":Eo(e,c),f=cs(e,c),Fe("invalid",e);break;default:f=c}To(a,f),E=f;for(_ in E)if(E.hasOwnProperty(_)){var T=E[_];_==="style"?fs(e,T):_==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&Ya(e,T)):_==="children"?typeof T=="string"?(a!=="textarea"||T!=="")&&bi(e,T):typeof T=="number"&&bi(e,""+T):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(h.hasOwnProperty(_)?T!=null&&_==="onScroll"&&Fe("scroll",e):T!=null&&Re(e,_,T,v))}switch(a){case"input":Mi(e),Tr(e,c,!1);break;case"textarea":Mi(e),Ka(e);break;case"option":c.value!=null&&e.setAttribute("value",""+we(c.value));break;case"select":e.multiple=!!c.multiple,_=c.value,_!=null?Hn(e,!!c.multiple,_,!1):c.defaultValue!=null&&Hn(e,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=W)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return bt(i),null;case 6:if(e&&i.stateNode!=null)Qf(e,i,e.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(a=qr(la.current),qr(Xn.current),zl(i)){if(c=i.stateNode,a=i.memoizedProps,c[wn]=i,(_=c.nodeValue!==a)&&(e=dn,e!==null))switch(e.tag){case 3:b(c.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&b(c.nodeValue,a,(e.mode&1)!==0)}_&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[wn]=i,i.stateNode=c}return bt(i),null;case 13:if(qe(et),c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ye&&fn!==null&&i.mode&1&&!(i.flags&128))Jd(),$s(),i.flags|=98560,_=!1;else if(_=zl(i),c!==null&&c.dehydrated!==null){if(e===null){if(!_)throw Error(r(318));if(_=i.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[wn]=i}else $s(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;bt(i),_=!1}else An!==null&&(ch(An),An=null),_=!0;if(!_)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(c=c!==null,c!==(e!==null&&e.memoizedState!==null)&&c&&(i.child.flags|=8192,i.mode&1&&(e===null||et.current&1?_t===0&&(_t=3):fh())),i.updateQueue!==null&&(i.flags|=4),bt(i),null);case 4:return Ys(),Jc(e,i),e===null&&tr(i.stateNode.containerInfo),bt(i),null;case 10:return kc(i.type._context),bt(i),null;case 17:return Kt(i.type)&&Ml(),bt(i),null;case 19:if(qe(et),_=i.memoizedState,_===null)return bt(i),null;if(c=(i.flags&128)!==0,v=_.rendering,v===null)if(c)fa(_,!1);else{if(_t!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(v=Zl(e),v!==null){for(i.flags|=128,fa(_,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)_=a,e=c,_.flags&=14680066,v=_.alternate,v===null?(_.childLanes=0,_.lanes=e,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=v.childLanes,_.lanes=v.lanes,_.child=v.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=v.memoizedProps,_.memoizedState=v.memoizedState,_.updateQueue=v.updateQueue,_.type=v.type,e=v.dependencies,_.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return He(et,et.current&1|2),i.child}e=e.sibling}_.tail!==null&&Xe()>eo&&(i.flags|=128,c=!0,fa(_,!1),i.lanes=4194304)}else{if(!c)if(e=Zl(v),e!==null){if(i.flags|=128,c=!0,a=e.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),fa(_,!0),_.tail===null&&_.tailMode==="hidden"&&!v.alternate&&!Ye)return bt(i),null}else 2*Xe()-_.renderingStartTime>eo&&a!==1073741824&&(i.flags|=128,c=!0,fa(_,!1),i.lanes=4194304);_.isBackwards?(v.sibling=i.child,i.child=v):(a=_.last,a!==null?a.sibling=v:i.child=v,_.last=v)}return _.tail!==null?(i=_.tail,_.rendering=i,_.tail=i.sibling,_.renderingStartTime=Xe(),i.sibling=null,a=et.current,He(et,c?a&1|2:a&1),i):(bt(i),null);case 22:case 23:return dh(),c=i.memoizedState!==null,e!==null&&e.memoizedState!==null!==c&&(i.flags|=8192),c&&i.mode&1?pn&1073741824&&(bt(i),i.subtreeFlags&6&&(i.flags|=8192)):bt(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function gg(e,i){switch(Cc(i),i.tag){case 1:return Kt(i.type)&&Ml(),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Ys(),qe(qt),qe(At),Ac(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 5:return Mc(i),null;case 13:if(qe(et),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));$s()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return qe(et),null;case 4:return Ys(),null;case 10:return kc(i.type._context),null;case 22:case 23:return dh(),null;case 24:return null;default:return null}}var Xl=!1,zt=!1,vg=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Xs(e,i){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){it(e,i,c)}else a.current=null}function eh(e,i,a){try{a()}catch(c){it(e,i,c)}}var Xf=!1;function yg(e,i){if(Q=br,e=Yo(),Qo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var v=0,E=-1,T=-1,z=0,H=0,j=e,U=null;t:for(;;){for(var X;j!==a||f!==0&&j.nodeType!==3||(E=v+f),j!==_||c!==0&&j.nodeType!==3||(T=v+c),j.nodeType===3&&(v+=j.nodeValue.length),(X=j.firstChild)!==null;)U=j,j=X;for(;;){if(j===e)break t;if(U===a&&++z===f&&(E=v),U===_&&++H===c&&(T=v),(X=j.nextSibling)!==null)break;j=U,U=j.parentNode}j=X}a=E===-1||T===-1?null:{start:E,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(ce={focusedElem:e,selectionRange:a},br=!1,ee=i;ee!==null;)if(i=ee,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,ee=e;else for(;ee!==null;){i=ee;try{var te=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var ne=te.memoizedProps,at=te.memoizedState,O=i.stateNode,I=O.getSnapshotBeforeUpdate(i.elementType===i.type?ne:Dn(i.type,ne),at);O.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var A=i.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch($){it(i,i.return,$)}if(e=i.sibling,e!==null){e.return=i.return,ee=e;break}ee=i.return}return te=Xf,Xf=!1,te}function pa(e,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&e)===e){var _=f.destroy;f.destroy=void 0,_!==void 0&&eh(i,a,_)}f=f.next}while(f!==c)}}function Jl(e,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function th(e){var i=e.ref;if(i!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof i=="function"?i(e):i.current=e}}function Jf(e){var i=e.alternate;i!==null&&(e.alternate=null,Jf(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&(delete i[wn],delete i[ir],delete i[rr],delete i[mc],delete i[gc])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ep(e){return e.tag===5||e.tag===3||e.tag===4}function tp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ep(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nh(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(e,i):a.insertBefore(e,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(e,a)):(i=a,i.appendChild(e)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=W));else if(c!==4&&(e=e.child,e!==null))for(nh(e,i,a),e=e.sibling;e!==null;)nh(e,i,a),e=e.sibling}function ih(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(ih(e,i,a),e=e.sibling;e!==null;)ih(e,i,a),e=e.sibling}var Pt=null,bn=!1;function cr(e,i,a){for(a=a.child;a!==null;)np(e,i,a),a=a.sibling}function np(e,i,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Nr,a)}catch{}switch(a.tag){case 5:zt||Xs(a,i);case 6:var c=Pt,f=bn;Pt=null,cr(e,i,a),Pt=c,bn=f,Pt!==null&&(bn?(e=Pt,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Pt.removeChild(a.stateNode));break;case 18:Pt!==null&&(bn?(e=Pt,a=a.stateNode,e.nodeType===8?ra(e.parentNode,a):e.nodeType===1&&ra(e,a),an(e)):ra(Pt,a.stateNode));break;case 4:c=Pt,f=bn,Pt=a.stateNode.containerInfo,bn=!0,cr(e,i,a),Pt=c,bn=f;break;case 0:case 11:case 14:case 15:if(!zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var _=f,v=_.destroy;_=_.tag,v!==void 0&&(_&2||_&4)&&eh(a,i,v),f=f.next}while(f!==c)}cr(e,i,a);break;case 1:if(!zt&&(Xs(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(E){it(a,i,E)}cr(e,i,a);break;case 21:cr(e,i,a);break;case 22:a.mode&1?(zt=(c=zt)||a.memoizedState!==null,cr(e,i,a),zt=c):cr(e,i,a);break;default:cr(e,i,a)}}function ip(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new vg),i.forEach(function(c){var f=Lg.bind(null,e,c);a.has(c)||(a.add(c),c.then(f,f))})}}function zn(e,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var _=e,v=i,E=v;e:for(;E!==null;){switch(E.tag){case 5:Pt=E.stateNode,bn=!1;break e;case 3:Pt=E.stateNode.containerInfo,bn=!0;break e;case 4:Pt=E.stateNode.containerInfo,bn=!0;break e}E=E.return}if(Pt===null)throw Error(r(160));np(_,v,f),Pt=null,bn=!1;var T=f.alternate;T!==null&&(T.return=null),f.return=null}catch(z){it(f,i,z)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)rp(i,e),i=i.sibling}function rp(e,i){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zn(i,e),ei(e),c&4){try{pa(3,e,e.return),Jl(3,e)}catch(ne){it(e,e.return,ne)}try{pa(5,e,e.return)}catch(ne){it(e,e.return,ne)}}break;case 1:zn(i,e),ei(e),c&512&&a!==null&&Xs(a,a.return);break;case 5:if(zn(i,e),ei(e),c&512&&a!==null&&Xs(a,a.return),e.flags&32){var f=e.stateNode;try{bi(f,"")}catch(ne){it(e,e.return,ne)}}if(c&4&&(f=e.stateNode,f!=null)){var _=e.memoizedProps,v=a!==null?a.memoizedProps:_,E=e.type,T=e.updateQueue;if(e.updateQueue=null,T!==null)try{E==="input"&&_.type==="radio"&&_.name!=null&&Co(f,_),si(E,v);var z=si(E,_);for(v=0;v<T.length;v+=2){var H=T[v],j=T[v+1];H==="style"?fs(f,j):H==="dangerouslySetInnerHTML"?Ya(f,j):H==="children"?bi(f,j):Re(f,H,j,z)}switch(E){case"input":xr(f,_);break;case"textarea":qa(f,_);break;case"select":var U=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!_.multiple;var X=_.value;X!=null?Hn(f,!!_.multiple,X,!1):U!==!!_.multiple&&(_.defaultValue!=null?Hn(f,!!_.multiple,_.defaultValue,!0):Hn(f,!!_.multiple,_.multiple?[]:"",!1))}f[ir]=_}catch(ne){it(e,e.return,ne)}}break;case 6:if(zn(i,e),ei(e),c&4){if(e.stateNode===null)throw Error(r(162));f=e.stateNode,_=e.memoizedProps;try{f.nodeValue=_}catch(ne){it(e,e.return,ne)}}break;case 3:if(zn(i,e),ei(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{an(i.containerInfo)}catch(ne){it(e,e.return,ne)}break;case 4:zn(i,e),ei(e);break;case 13:zn(i,e),ei(e),f=e.child,f.flags&8192&&(_=f.memoizedState!==null,f.stateNode.isHidden=_,!_||f.alternate!==null&&f.alternate.memoizedState!==null||(oh=Xe())),c&4&&ip(e);break;case 22:if(H=a!==null&&a.memoizedState!==null,e.mode&1?(zt=(z=zt)||H,zn(i,e),zt=z):zn(i,e),ei(e),c&8192){if(z=e.memoizedState!==null,(e.stateNode.isHidden=z)&&!H&&e.mode&1)for(ee=e,H=e.child;H!==null;){for(j=ee=H;ee!==null;){switch(U=ee,X=U.child,U.tag){case 0:case 11:case 14:case 15:pa(4,U,U.return);break;case 1:Xs(U,U.return);var te=U.stateNode;if(typeof te.componentWillUnmount=="function"){c=U,a=U.return;try{i=c,te.props=i.memoizedProps,te.state=i.memoizedState,te.componentWillUnmount()}catch(ne){it(c,a,ne)}}break;case 5:Xs(U,U.return);break;case 22:if(U.memoizedState!==null){ap(j);continue}}X!==null?(X.return=U,ee=X):ap(j)}H=H.sibling}e:for(H=null,j=e;;){if(j.tag===5){if(H===null){H=j;try{f=j.stateNode,z?(_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(E=j.stateNode,T=j.memoizedProps.style,v=T!=null&&T.hasOwnProperty("display")?T.display:null,E.style.display=xo("display",v))}catch(ne){it(e,e.return,ne)}}}else if(j.tag===6){if(H===null)try{j.stateNode.nodeValue=z?"":j.memoizedProps}catch(ne){it(e,e.return,ne)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===e)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===e)break e;for(;j.sibling===null;){if(j.return===null||j.return===e)break e;H===j&&(H=null),j=j.return}H===j&&(H=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:zn(i,e),ei(e),c&4&&ip(e);break;case 21:break;default:zn(i,e),ei(e)}}function ei(e){var i=e.flags;if(i&2){try{e:{for(var a=e.return;a!==null;){if(ep(a)){var c=a;break e}a=a.return}throw Error(r(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(bi(f,""),c.flags&=-33);var _=tp(e);ih(e,_,f);break;case 3:case 4:var v=c.stateNode.containerInfo,E=tp(e);nh(e,E,v);break;default:throw Error(r(161))}}catch(T){it(e,e.return,T)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function wg(e,i,a){ee=e,sp(e)}function sp(e,i,a){for(var c=(e.mode&1)!==0;ee!==null;){var f=ee,_=f.child;if(f.tag===22&&c){var v=f.memoizedState!==null||Xl;if(!v){var E=f.alternate,T=E!==null&&E.memoizedState!==null||zt;E=Xl;var z=zt;if(Xl=v,(zt=T)&&!z)for(ee=f;ee!==null;)v=ee,T=v.child,v.tag===22&&v.memoizedState!==null?lp(f):T!==null?(T.return=v,ee=T):lp(f);for(;_!==null;)ee=_,sp(_),_=_.sibling;ee=f,Xl=E,zt=z}op(e)}else f.subtreeFlags&8772&&_!==null?(_.return=f,ee=_):op(e)}}function op(e){for(;ee!==null;){var i=ee;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:zt||Jl(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!zt)if(a===null)c.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:Dn(i.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var _=i.updateQueue;_!==null&&af(i,_,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}af(i,v,a)}break;case 5:var E=i.stateNode;if(a===null&&i.flags&4){a=E;var T=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&a.focus();break;case"img":T.src&&(a.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var z=i.alternate;if(z!==null){var H=z.memoizedState;if(H!==null){var j=H.dehydrated;j!==null&&an(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}zt||i.flags&512&&th(i)}catch(U){it(i,i.return,U)}}if(i===e){ee=null;break}if(a=i.sibling,a!==null){a.return=i.return,ee=a;break}ee=i.return}}function ap(e){for(;ee!==null;){var i=ee;if(i===e){ee=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ee=a;break}ee=i.return}}function lp(e){for(;ee!==null;){var i=ee;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Jl(4,i)}catch(T){it(i,a,T)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var f=i.return;try{c.componentDidMount()}catch(T){it(i,f,T)}}var _=i.return;try{th(i)}catch(T){it(i,_,T)}break;case 5:var v=i.return;try{th(i)}catch(T){it(i,v,T)}}}catch(T){it(i,i.return,T)}if(i===e){ee=null;break}var E=i.sibling;if(E!==null){E.return=i.return,ee=E;break}ee=i.return}}var Cg=Math.ceil,eu=be.ReactCurrentDispatcher,rh=be.ReactCurrentOwner,Tn=be.ReactCurrentBatchConfig,Ie=0,gt=null,ct=null,kt=0,pn=0,Js=sr(0),_t=0,_a=null,Yr=0,tu=0,sh=0,ma=null,Qt=null,oh=0,eo=1/0,ki=null,nu=!1,ah=null,hr=null,iu=!1,dr=null,ru=0,ga=0,lh=null,su=-1,ou=0;function Zt(){return Ie&6?Xe():su!==-1?su:su=Xe()}function fr(e){return e.mode&1?Ie&2&&kt!==0?kt&-kt:rg.transition!==null?(ou===0&&(ou=ul()),ou):(e=ke,e!==0||(e=window.event,e=e===void 0?16:xe(e.type)),e):1}function Fn(e,i,a,c){if(50<ga)throw ga=0,lh=null,Error(r(185));sn(e,a,c),(!(Ie&2)||e!==gt)&&(e===gt&&(!(Ie&2)&&(tu|=a),_t===4&&pr(e,kt)),Xt(e,c),a===1&&Ie===0&&!(i.mode&1)&&(eo=Xe()+500,Al&&ar()))}function Xt(e,i){var a=e.callbackNode;ws(e,i);var c=Ue(e,e===gt?kt:0);if(c===0)a!==null&&Mo(a),e.callbackNode=null,e.callbackPriority=0;else if(i=c&-c,e.callbackPriority!==i){if(a!=null&&Mo(a),i===1)e.tag===0?ig(cp.bind(null,e)):qd(cp.bind(null,e)),Ot(function(){!(Ie&6)&&ar()}),a=null;else{switch(Hi(c)){case 1:a=Oo;break;case 4:a=ll;break;case 16:a=vs;break;case 536870912:a=Fi;break;default:a=vs}a=vp(a,up.bind(null,e))}e.callbackPriority=i,e.callbackNode=a}}function up(e,i){if(su=-1,ou=0,Ie&6)throw Error(r(327));var a=e.callbackNode;if(to()&&e.callbackNode!==a)return null;var c=Ue(e,e===gt?kt:0);if(c===0)return null;if(c&30||c&e.expiredLanes||i)i=au(e,c);else{i=c;var f=Ie;Ie|=2;var _=dp();(gt!==e||kt!==i)&&(ki=null,eo=Xe()+500,Xr(e,i));do try{xg();break}catch(E){hp(e,E)}while(!0);Pc(),eu.current=_,Ie=f,ct!==null?i=0:(gt=null,kt=0,i=_t)}if(i!==0){if(i===2&&(f=Rt(e),f!==0&&(c=f,i=uh(e,f))),i===1)throw a=_a,Xr(e,0),pr(e,c),Xt(e,Xe()),a;if(i===6)pr(e,c);else{if(f=e.current.alternate,!(c&30)&&!Sg(f)&&(i=au(e,c),i===2&&(_=Rt(e),_!==0&&(c=_,i=uh(e,_))),i===1))throw a=_a,Xr(e,0),pr(e,c),Xt(e,Xe()),a;switch(e.finishedWork=f,e.finishedLanes=c,i){case 0:case 1:throw Error(r(345));case 2:Jr(e,Qt,ki);break;case 3:if(pr(e,c),(c&130023424)===c&&(i=oh+500-Xe(),10<i)){if(Ue(e,0)!==0)break;if(f=e.suspendedLanes,(f&c)!==c){Zt(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=ft(Jr.bind(null,e,Qt,ki),i);break}Jr(e,Qt,ki);break;case 4:if(pr(e,c),(c&4194240)===c)break;for(i=e.eventTimes,f=-1;0<c;){var v=31-ge(c);_=1<<v,v=i[v],v>f&&(f=v),c&=~_}if(c=f,c=Xe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Cg(c/1960))-c,10<c){e.timeoutHandle=ft(Jr.bind(null,e,Qt,ki),c);break}Jr(e,Qt,ki);break;case 5:Jr(e,Qt,ki);break;default:throw Error(r(329))}}}return Xt(e,Xe()),e.callbackNode===a?up.bind(null,e):null}function uh(e,i){var a=ma;return e.current.memoizedState.isDehydrated&&(Xr(e,i).flags|=256),e=au(e,i),e!==2&&(i=Qt,Qt=a,i!==null&&ch(i)),e}function ch(e){Qt===null?Qt=e:Qt.push.apply(Qt,e)}function Sg(e){for(var i=e;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],_=f.getSnapshot;f=f.value;try{if(!cn(_(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function pr(e,i){for(i&=~sh,i&=~tu,e.suspendedLanes|=i,e.pingedLanes&=~i,e=e.expirationTimes;0<i;){var a=31-ge(i),c=1<<a;e[a]=-1,i&=~c}}function cp(e){if(Ie&6)throw Error(r(327));to();var i=Ue(e,0);if(!(i&1))return Xt(e,Xe()),null;var a=au(e,i);if(e.tag!==0&&a===2){var c=Rt(e);c!==0&&(i=c,a=uh(e,c))}if(a===1)throw a=_a,Xr(e,0),pr(e,i),Xt(e,Xe()),a;if(a===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=i,Jr(e,Qt,ki),Xt(e,Xe()),null}function hh(e,i){var a=Ie;Ie|=1;try{return e(i)}finally{Ie=a,Ie===0&&(eo=Xe()+500,Al&&ar())}}function Qr(e){dr!==null&&dr.tag===0&&!(Ie&6)&&to();var i=Ie;Ie|=1;var a=Tn.transition,c=ke;try{if(Tn.transition=null,ke=1,e)return e()}finally{ke=c,Tn.transition=a,Ie=i,!(Ie&6)&&ar()}}function dh(){pn=Js.current,qe(Js)}function Xr(e,i){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,ut(a)),ct!==null)for(a=ct.return;a!==null;){var c=a;switch(Cc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ml();break;case 3:Ys(),qe(qt),qe(At),Ac();break;case 5:Mc(c);break;case 4:Ys();break;case 13:qe(et);break;case 19:qe(et);break;case 10:kc(c.type._context);break;case 22:case 23:dh()}a=a.return}if(gt=e,ct=e=_r(e.current,null),kt=pn=i,_t=0,_a=null,sh=tu=Yr=0,Qt=ma=null,Gr!==null){for(i=0;i<Gr.length;i++)if(a=Gr[i],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,_=a.pending;if(_!==null){var v=_.next;_.next=f,c.next=v}a.pending=c}Gr=null}return e}function hp(e,i){do{var a=ct;try{if(Pc(),jl.current=ql,Vl){for(var c=tt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Vl=!1}if(Kr=0,mt=pt=tt=null,ua=!1,ca=0,rh.current=null,a===null||a.return===null){_t=1,_a=i,ct=null;break}e:{var _=e,v=a.return,E=a,T=i;if(i=kt,E.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var z=T,H=E,j=H.tag;if(!(H.mode&1)&&(j===0||j===11||j===15)){var U=H.alternate;U?(H.updateQueue=U.updateQueue,H.memoizedState=U.memoizedState,H.lanes=U.lanes):(H.updateQueue=null,H.memoizedState=null)}var X=bf(v);if(X!==null){X.flags&=-257,zf(X,v,E,_,i),X.mode&1&&Df(_,z,i),i=X,T=z;var te=i.updateQueue;if(te===null){var ne=new Set;ne.add(T),i.updateQueue=ne}else te.add(T);break e}else{if(!(i&1)){Df(_,z,i),fh();break e}T=Error(r(426))}}else if(Ye&&E.mode&1){var at=bf(v);if(at!==null){!(at.flags&65536)&&(at.flags|=256),zf(at,v,E,_,i),xc(Qs(T,E));break e}}_=T=Qs(T,E),_t!==4&&(_t=2),ma===null?ma=[_]:ma.push(_),_=v;do{switch(_.tag){case 3:_.flags|=65536,i&=-i,_.lanes|=i;var O=Of(_,T,i);of(_,O);break e;case 1:E=T;var I=_.type,A=_.stateNode;if(!(_.flags&128)&&(typeof I.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(hr===null||!hr.has(A)))){_.flags|=65536,i&=-i,_.lanes|=i;var $=Af(_,E,i);of(_,$);break e}}_=_.return}while(_!==null)}pp(a)}catch(se){i=se,ct===a&&a!==null&&(ct=a=a.return);continue}break}while(!0)}function dp(){var e=eu.current;return eu.current=ql,e===null?ql:e}function fh(){(_t===0||_t===3||_t===2)&&(_t=4),gt===null||!(Yr&268435455)&&!(tu&268435455)||pr(gt,kt)}function au(e,i){var a=Ie;Ie|=2;var c=dp();(gt!==e||kt!==i)&&(ki=null,Xr(e,i));do try{Eg();break}catch(f){hp(e,f)}while(!0);if(Pc(),Ie=a,eu.current=c,ct!==null)throw Error(r(261));return gt=null,kt=0,_t}function Eg(){for(;ct!==null;)fp(ct)}function xg(){for(;ct!==null&&!ec();)fp(ct)}function fp(e){var i=gp(e.alternate,e,pn);e.memoizedProps=e.pendingProps,i===null?pp(e):ct=i,rh.current=null}function pp(e){var i=e;do{var a=i.alternate;if(e=i.return,i.flags&32768){if(a=gg(a,i),a!==null){a.flags&=32767,ct=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_t=6,ct=null;return}}else if(a=mg(a,i,pn),a!==null){ct=a;return}if(i=i.sibling,i!==null){ct=i;return}ct=i=e}while(i!==null);_t===0&&(_t=5)}function Jr(e,i,a){var c=ke,f=Tn.transition;try{Tn.transition=null,ke=1,Tg(e,i,a,c)}finally{Tn.transition=f,ke=c}return null}function Tg(e,i,a,c){do to();while(dr!==null);if(Ie&6)throw Error(r(327));a=e.finishedWork;var f=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var _=a.lanes|a.childLanes;if(nt(e,_),e===gt&&(ct=gt=null,kt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||iu||(iu=!0,vp(vs,function(){return to(),null})),_=(a.flags&15990)!==0,a.subtreeFlags&15990||_){_=Tn.transition,Tn.transition=null;var v=ke;ke=1;var E=Ie;Ie|=4,rh.current=null,yg(e,a),rp(a,e),vn(ce),br=!!Q,ce=Q=null,e.current=a,wg(a),gs(),Ie=E,ke=v,Tn.transition=_}else e.current=a;if(iu&&(iu=!1,dr=e,ru=f),_=e.pendingLanes,_===0&&(hr=null),Rr(a.stateNode),Xt(e,Xe()),i!==null)for(c=e.onRecoverableError,a=0;a<i.length;a++)f=i[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(nu)throw nu=!1,e=ah,ah=null,e;return ru&1&&e.tag!==0&&to(),_=e.pendingLanes,_&1?e===lh?ga++:(ga=0,lh=e):ga=0,ar(),null}function to(){if(dr!==null){var e=Hi(ru),i=Tn.transition,a=ke;try{if(Tn.transition=null,ke=16>e?16:e,dr===null)var c=!1;else{if(e=dr,dr=null,ru=0,Ie&6)throw Error(r(331));var f=Ie;for(Ie|=4,ee=e.current;ee!==null;){var _=ee,v=_.child;if(ee.flags&16){var E=_.deletions;if(E!==null){for(var T=0;T<E.length;T++){var z=E[T];for(ee=z;ee!==null;){var H=ee;switch(H.tag){case 0:case 11:case 15:pa(8,H,_)}var j=H.child;if(j!==null)j.return=H,ee=j;else for(;ee!==null;){H=ee;var U=H.sibling,X=H.return;if(Jf(H),H===z){ee=null;break}if(U!==null){U.return=X,ee=U;break}ee=X}}}var te=_.alternate;if(te!==null){var ne=te.child;if(ne!==null){te.child=null;do{var at=ne.sibling;ne.sibling=null,ne=at}while(ne!==null)}}ee=_}}if(_.subtreeFlags&2064&&v!==null)v.return=_,ee=v;else e:for(;ee!==null;){if(_=ee,_.flags&2048)switch(_.tag){case 0:case 11:case 15:pa(9,_,_.return)}var O=_.sibling;if(O!==null){O.return=_.return,ee=O;break e}ee=_.return}}var I=e.current;for(ee=I;ee!==null;){v=ee;var A=v.child;if(v.subtreeFlags&2064&&A!==null)A.return=v,ee=A;else e:for(v=I;ee!==null;){if(E=ee,E.flags&2048)try{switch(E.tag){case 0:case 11:case 15:Jl(9,E)}}catch(se){it(E,E.return,se)}if(E===v){ee=null;break e}var $=E.sibling;if($!==null){$.return=E.return,ee=$;break e}ee=E.return}}if(Ie=f,ar(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Nr,e)}catch{}c=!0}return c}finally{ke=a,Tn.transition=i}}return!1}function _p(e,i,a){i=Qs(a,i),i=Of(e,i,1),e=ur(e,i,1),i=Zt(),e!==null&&(sn(e,1,i),Xt(e,i))}function it(e,i,a){if(e.tag===3)_p(e,e,a);else for(;i!==null;){if(i.tag===3){_p(i,e,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(hr===null||!hr.has(c))){e=Qs(a,e),e=Af(i,e,1),i=ur(i,e,1),e=Zt(),i!==null&&(sn(i,1,e),Xt(i,e));break}}i=i.return}}function Pg(e,i,a){var c=e.pingCache;c!==null&&c.delete(i),i=Zt(),e.pingedLanes|=e.suspendedLanes&a,gt===e&&(kt&a)===a&&(_t===4||_t===3&&(kt&130023424)===kt&&500>Xe()-oh?Xr(e,0):sh|=a),Xt(e,i)}function mp(e,i){i===0&&(e.mode&1?(i=Wi,Wi<<=1,!(Wi&130023424)&&(Wi=4194304)):i=1);var a=Zt();e=xi(e,i),e!==null&&(sn(e,i,a),Xt(e,a))}function kg(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),mp(e,a)}function Lg(e,i){var a=0;switch(e.tag){case 13:var c=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=e.stateNode;break;default:throw Error(r(314))}c!==null&&c.delete(i),mp(e,a)}var gp;gp=function(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps||qt.current)Yt=!0;else{if(!(e.lanes&a)&&!(i.flags&128))return Yt=!1,_g(e,i,a);Yt=!!(e.flags&131072)}else Yt=!1,Ye&&i.flags&1048576&&Kd(i,bl,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Ql(e,i),e=i.pendingProps;var f=Zs(i,At.current);Ks(i,a),f=zc(null,i,c,e,f,a);var _=Fc();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Kt(c)?(_=!0,Ol(i)):_=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Nc(i),f.updater=Kl,i.stateNode=f,f._reactInternals=i,jc(i,c,e,a),i=qc(null,i,c,!0,_,a)):(i.tag=0,Ye&&_&&wc(i),Ht(null,i,f,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Ql(e,i),e=i.pendingProps,f=c._init,c=f(c._payload),i.type=c,f=i.tag=Ng(c),e=Dn(c,e),f){case 0:i=Gc(null,i,c,e,a);break e;case 1:i=Zf(null,i,c,e,a);break e;case 11:i=Ff(null,i,c,e,a);break e;case 14:i=Bf(null,i,c,Dn(c.type,e),a);break e}throw Error(r(306,c,""))}return i;case 0:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Dn(c,f),Gc(e,i,c,f,a);case 1:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Dn(c,f),Zf(e,i,c,f,a);case 3:e:{if(jf(i),e===null)throw Error(r(387));c=i.pendingProps,_=i.memoizedState,f=_.element,sf(e,i),Hl(i,c,null,a);var v=i.memoizedState;if(c=v.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=_,i.memoizedState=_,i.flags&256){f=Qs(Error(r(423)),i),i=Vf(e,i,c,a,f);break e}else if(c!==f){f=Qs(Error(r(424)),i),i=Vf(e,i,c,a,f);break e}else for(fn=Qn(i.stateNode.containerInfo.firstChild),dn=i,Ye=!0,An=null,a=nf(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if($s(),c===f){i=Pi(e,i,a);break e}Ht(e,i,c,a)}i=i.child}return i;case 5:return lf(i),e===null&&Ec(i),c=i.type,f=i.pendingProps,_=e!==null?e.memoizedProps:null,v=f.children,ve(c,f)?v=null:_!==null&&ve(c,_)&&(i.flags|=32),Hf(e,i),Ht(e,i,v,a),i.child;case 6:return e===null&&Ec(i),null;case 13:return $f(e,i,a);case 4:return Rc(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=Gs(i,null,c,a):Ht(e,i,c,a),i.child;case 11:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Dn(c,f),Ff(e,i,c,f,a);case 7:return Ht(e,i,i.pendingProps,a),i.child;case 8:return Ht(e,i,i.pendingProps.children,a),i.child;case 12:return Ht(e,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,f=i.pendingProps,_=i.memoizedProps,v=f.value,He(Bl,c._currentValue),c._currentValue=v,_!==null)if(cn(_.value,v)){if(_.children===f.children&&!qt.current){i=Pi(e,i,a);break e}}else for(_=i.child,_!==null&&(_.return=i);_!==null;){var E=_.dependencies;if(E!==null){v=_.child;for(var T=E.firstContext;T!==null;){if(T.context===c){if(_.tag===1){T=Ti(-1,a&-a),T.tag=2;var z=_.updateQueue;if(z!==null){z=z.shared;var H=z.pending;H===null?T.next=T:(T.next=H.next,H.next=T),z.pending=T}}_.lanes|=a,T=_.alternate,T!==null&&(T.lanes|=a),Lc(_.return,a,i),E.lanes|=a;break}T=T.next}}else if(_.tag===10)v=_.type===i.type?null:_.child;else if(_.tag===18){if(v=_.return,v===null)throw Error(r(341));v.lanes|=a,E=v.alternate,E!==null&&(E.lanes|=a),Lc(v,a,i),v=_.sibling}else v=_.child;if(v!==null)v.return=_;else for(v=_;v!==null;){if(v===i){v=null;break}if(_=v.sibling,_!==null){_.return=v.return,v=_;break}v=v.return}_=v}Ht(e,i,f.children,a),i=i.child}return i;case 9:return f=i.type,c=i.pendingProps.children,Ks(i,a),f=En(f),c=c(f),i.flags|=1,Ht(e,i,c,a),i.child;case 14:return c=i.type,f=Dn(c,i.pendingProps),f=Dn(c.type,f),Bf(e,i,c,f,a);case 15:return Wf(e,i,i.type,i.pendingProps,a);case 17:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Dn(c,f),Ql(e,i),i.tag=1,Kt(c)?(e=!0,Ol(i)):e=!1,Ks(i,a),Rf(i,c,f),jc(i,c,f,a),qc(null,i,c,!0,e,a);case 19:return qf(e,i,a);case 22:return Uf(e,i,a)}throw Error(r(156,i.tag))};function vp(e,i){return al(e,i)}function Ig(e,i,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(e,i,a,c){return new Ig(e,i,a,c)}function ph(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ng(e){if(typeof e=="function")return ph(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$e)return 11;if(e===nn)return 14}return 2}function _r(e,i){var a=e.alternate;return a===null?(a=Pn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function lu(e,i,a,c,f,_){var v=2;if(c=e,typeof e=="function")ph(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case ht:return es(a.children,f,_,i);case Et:v=8,f|=8;break;case Ft:return e=Pn(12,a,i,f|2),e.elementType=Ft,e.lanes=_,e;case xt:return e=Pn(13,a,i,f),e.elementType=xt,e.lanes=_,e;case Qe:return e=Pn(19,a,i,f),e.elementType=Qe,e.lanes=_,e;case V:return uu(a,f,_,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vt:v=10;break e;case Ke:v=9;break e;case $e:v=11;break e;case nn:v=14;break e;case Oe:v=16,c=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return i=Pn(v,a,i,f),i.elementType=e,i.type=c,i.lanes=_,i}function es(e,i,a,c){return e=Pn(7,e,c,i),e.lanes=a,e}function uu(e,i,a,c){return e=Pn(22,e,c,i),e.elementType=V,e.lanes=a,e.stateNode={isHidden:!1},e}function _h(e,i,a){return e=Pn(6,e,null,i),e.lanes=a,e}function mh(e,i,a){return i=Pn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function Rg(e,i,a,c,f){this.tag=i,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ui(0),this.expirationTimes=Ui(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function gh(e,i,a,c,f,_,v,E,T){return e=new Rg(e,i,a,E,T),i===1?(i=1,_===!0&&(i|=8)):i=0,_=Pn(3,null,null,i),e.current=_,_.stateNode=e,_.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nc(_),e}function Mg(e,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ot,key:c==null?null:""+c,children:e,containerInfo:i,implementation:a}}function yp(e){if(!e)return or;e=e._reactInternals;e:{if(Zn(e)!==e||e.tag!==1)throw Error(r(170));var i=e;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Kt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(e.tag===1){var a=e.type;if(Kt(a))return $d(e,a,i)}return i}function wp(e,i,a,c,f,_,v,E,T){return e=gh(a,c,!0,e,f,_,v,E,T),e.context=yp(null),a=e.current,c=Zt(),f=fr(a),_=Ti(c,f),_.callback=i??null,ur(a,_,f),e.current.lanes=f,sn(e,f,c),Xt(e,c),e}function cu(e,i,a,c){var f=i.current,_=Zt(),v=fr(f);return a=yp(a),i.context===null?i.context=a:i.pendingContext=a,i=Ti(_,v),i.payload={element:e},c=c===void 0?null:c,c!==null&&(i.callback=c),e=ur(f,i,v),e!==null&&(Fn(e,f,v,_),Ul(e,f,v)),v}function hu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cp(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function vh(e,i){Cp(e,i),(e=e.alternate)&&Cp(e,i)}var Sp=typeof reportError=="function"?reportError:function(e){console.error(e)};function yh(e){this._internalRoot=e}du.prototype.render=yh.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));cu(e,i,null,null)},du.prototype.unmount=yh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Qr(function(){cu(null,e,null,null)}),i[Ae]=null}};function du(e){this._internalRoot=e}du.prototype.unstable_scheduleHydration=function(e){if(e){var i=Es();e={blockedOn:null,target:e,priority:i};for(var a=0;a<dt.length&&i!==0&&i<dt[a].priority;a++);dt.splice(a,0,e),a===0&&xs(e)}};function wh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ep(){}function Og(e,i,a,c,f){if(f){if(typeof c=="function"){var _=c;c=function(){var z=hu(v);_.call(z)}}var v=wp(i,c,e,0,null,!1,!1,"",Ep);return e._reactRootContainer=v,e[Ae]=v.current,tr(e.nodeType===8?e.parentNode:e),Qr(),v}for(;f=e.lastChild;)e.removeChild(f);if(typeof c=="function"){var E=c;c=function(){var z=hu(T);E.call(z)}}var T=gh(e,0,!1,null,null,!1,!1,"",Ep);return e._reactRootContainer=T,e[Ae]=T.current,tr(e.nodeType===8?e.parentNode:e),Qr(function(){cu(i,T,a,c)}),T}function pu(e,i,a,c,f){var _=a._reactRootContainer;if(_){var v=_;if(typeof f=="function"){var E=f;f=function(){var T=hu(v);E.call(T)}}cu(i,v,e,f)}else v=Og(a,i,e,f,c);return hu(v)}Cs=function(e){switch(e.tag){case 3:var i=e.stateNode;if(i.current.memoizedState.isDehydrated){var a=me(i.pendingLanes);a!==0&&(In(i,a|1),Xt(i,Xe()),!(Ie&6)&&(eo=Xe()+500,ar()))}break;case 13:Qr(function(){var c=xi(e,1);if(c!==null){var f=Zt();Fn(c,e,1,f)}}),vh(e,1)}},ui=function(e){if(e.tag===13){var i=xi(e,134217728);if(i!==null){var a=Zt();Fn(i,e,134217728,a)}vh(e,134217728)}},Ss=function(e){if(e.tag===13){var i=fr(e),a=xi(e,i);if(a!==null){var c=Zt();Fn(a,e,i,c)}vh(e,i)}},Es=function(){return ke},Mr=function(e,i){var a=ke;try{return ke=e,i()}finally{ke=a}},ps=function(e,i,a){switch(i){case"input":if(xr(e,a),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==e&&c.form===e.form){var f=Us(c);if(!f)throw Error(r(90));Oi(c),xr(c,f)}}}break;case"textarea":qa(e,a);break;case"select":i=a.value,i!=null&&Hn(e,!!a.multiple,i,!1)}},tl=hh,nl=Qr;var Ag={usingClientEntryPoint:!1,Events:[yi,wi,Us,Ja,el,hh]},va={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dg={bundleType:va.bundleType,version:va.version,rendererPackageName:va.rendererPackageName,rendererConfig:va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:be.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sl(e),e===null?null:e.stateNode},findFiberByHostInstance:va.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_u.isDisabled&&_u.supportsFiber)try{Nr=_u.inject(Dg),rn=_u}catch{}}return Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ag,Jt.createPortal=function(e,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wh(i))throw Error(r(200));return Mg(e,i,null,a)},Jt.createRoot=function(e,i){if(!wh(e))throw Error(r(299));var a=!1,c="",f=Sp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=gh(e,1,!1,null,null,a,!1,c,f),e[Ae]=i.current,tr(e.nodeType===8?e.parentNode:e),new yh(i)},Jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=sl(i),e=e===null?null:e.stateNode,e},Jt.flushSync=function(e){return Qr(e)},Jt.hydrate=function(e,i,a){if(!fu(i))throw Error(r(200));return pu(null,e,i,!0,a)},Jt.hydrateRoot=function(e,i,a){if(!wh(e))throw Error(r(405));var c=a!=null&&a.hydratedSources||null,f=!1,_="",v=Sp;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(_=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=wp(i,null,e,1,a??null,f,!1,_,v),e[Ae]=i.current,tr(e),c)for(e=0;e<c.length;e++)a=c[e],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new du(i)},Jt.render=function(e,i,a){if(!fu(i))throw Error(r(200));return pu(null,e,i,!1,a)},Jt.unmountComponentAtNode=function(e){if(!fu(e))throw Error(r(40));return e._reactRootContainer?(Qr(function(){pu(null,null,e,!1,function(){e._reactRootContainer=null,e[Ae]=null})}),!0):!1},Jt.unstable_batchedUpdates=hh,Jt.unstable_renderSubtreeIntoContainer=function(e,i,a,c){if(!fu(a))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return pu(e,i,a,!1,c)},Jt.version="18.3.1-next-f1338f8080-20240426",Jt}var Rp;function L_(){if(Rp)return Eh.exports;Rp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Eh.exports=Hg(),Eh.exports}var Mp;function Zg(){if(Mp)return mu;Mp=1;var s=L_();return mu.createRoot=s.createRoot,mu.hydrateRoot=s.hydrateRoot,mu}var jg=Zg(),Op={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q=function(s,n){if(!s)throw po(n)},po=function(s){return new Error("Firebase Database ("+I_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=function(s){const n=[];let r=0;for(let l=0;l<s.length;l++){let h=s.charCodeAt(l);h<128?n[r++]=h:h<2048?(n[r++]=h>>6|192,n[r++]=h&63|128):(h&64512)===55296&&l+1<s.length&&(s.charCodeAt(l+1)&64512)===56320?(h=65536+((h&1023)<<10)+(s.charCodeAt(++l)&1023),n[r++]=h>>18|240,n[r++]=h>>12&63|128,n[r++]=h>>6&63|128,n[r++]=h&63|128):(n[r++]=h>>12|224,n[r++]=h>>6&63|128,n[r++]=h&63|128)}return n},Vg=function(s){const n=[];let r=0,l=0;for(;r<s.length;){const h=s[r++];if(h<128)n[l++]=String.fromCharCode(h);else if(h>191&&h<224){const p=s[r++];n[l++]=String.fromCharCode((h&31)<<6|p&63)}else if(h>239&&h<365){const p=s[r++],m=s[r++],w=s[r++],C=((h&7)<<18|(p&63)<<12|(m&63)<<6|w&63)-65536;n[l++]=String.fromCharCode(55296+(C>>10)),n[l++]=String.fromCharCode(56320+(C&1023))}else{const p=s[r++],m=s[r++];n[l++]=String.fromCharCode((h&15)<<12|(p&63)<<6|m&63)}}return n.join("")},ad={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,n){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,l=[];for(let h=0;h<s.length;h+=3){const p=s[h],m=h+1<s.length,w=m?s[h+1]:0,C=h+2<s.length,S=C?s[h+2]:0,R=p>>2,k=(p&3)<<4|w>>4;let N=(w&15)<<2|S>>6,Z=S&63;C||(Z=64,m||(N=64)),l.push(r[R],r[k],r[N],r[Z])}return l.join("")},encodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(s):this.encodeByteArray(N_(s),n)},decodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(s):Vg(this.decodeStringToByteArray(s,n))},decodeStringToByteArray(s,n){this.init_();const r=n?this.charToByteMapWebSafe_:this.charToByteMap_,l=[];for(let h=0;h<s.length;){const p=r[s.charAt(h++)],w=h<s.length?r[s.charAt(h)]:0;++h;const S=h<s.length?r[s.charAt(h)]:64;++h;const k=h<s.length?r[s.charAt(h)]:64;if(++h,p==null||w==null||S==null||k==null)throw new $g;const N=p<<2|w>>4;if(l.push(N),S!==64){const Z=w<<4&240|S>>2;if(l.push(Z),k!==64){const Y=S<<6&192|k;l.push(Y)}}}return l},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class $g extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R_=function(s){const n=N_(s);return ad.encodeByteArray(n,!0)},Cu=function(s){return R_(s).replace(/\./g,"")},Fh=function(s){try{return ad.decodeString(s,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(s){return M_(void 0,s)}function M_(s,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:const r=n;return new Date(r.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return n}for(const r in n)!n.hasOwnProperty(r)||!qg(r)||(s[r]=M_(s[r],n[r]));return s}function qg(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=()=>Kg().__FIREBASE_DEFAULTS__,Qg=()=>{if(typeof process>"u"||typeof Op>"u")return;const s=Op.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Xg=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=s&&Fh(s[1]);return n&&JSON.parse(n)},O_=()=>{try{return Yg()||Qg()||Xg()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Jg=s=>{var n,r;return(r=(n=O_())===null||n===void 0?void 0:n.emulatorHosts)===null||r===void 0?void 0:r[s]},ev=s=>{const n=Jg(s);if(!n)return;const r=n.lastIndexOf(":");if(r<=0||r+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const l=parseInt(n.substring(r+1),10);return n[0]==="["?[n.substring(1,r-1),l]:[n.substring(0,r),l]},A_=()=>{var s;return(s=O_())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}wrapCallback(n){return(r,l)=>{r?this.reject(r):this.resolve(l),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(r):n(r,l))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(s,n){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},l=n||"demo-project",h=s.iat||0,p=s.sub||s.user_id;if(!p)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m=Object.assign({iss:`https://securetoken.google.com/${l}`,aud:l,iat:h,exp:h+3600,auth_time:h,sub:p,user_id:p,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Cu(JSON.stringify(r)),Cu(JSON.stringify(m)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nv())}function iv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rv(){return I_.NODE_ADMIN===!0}function sv(){try{return typeof indexedDB=="object"}catch{return!1}}function ov(){return new Promise((s,n)=>{try{let r=!0;const l="validate-browser-context-for-indexeddb-analytics-module",h=self.indexedDB.open(l);h.onsuccess=()=>{h.result.close(),r||self.indexedDB.deleteDatabase(l),s(!0)},h.onupgradeneeded=()=>{r=!1},h.onerror=()=>{var p;n(((p=h.error)===null||p===void 0?void 0:p.message)||"")}}catch(r){n(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="FirebaseError";class Za extends Error{constructor(n,r,l){super(r),this.code=n,this.customData=l,this.name=av,Object.setPrototypeOf(this,Za.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,b_.prototype.create)}}class b_{constructor(n,r,l){this.service=n,this.serviceName=r,this.errors=l}create(n,...r){const l=r[0]||{},h=`${this.service}/${n}`,p=this.errors[n],m=p?lv(p,l):"Error",w=`${this.serviceName}: ${m} (${h}).`;return new Za(h,w,l)}}function lv(s,n){return s.replace(uv,(r,l)=>{const h=n[l];return h!=null?String(h):`<${l}?>`})}const uv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(s){return JSON.parse(s)}function St(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=function(s){let n={},r={},l={},h="";try{const p=s.split(".");n=Ma(Fh(p[0])||""),r=Ma(Fh(p[1])||""),h=p[2],l=r.d||{},delete r.d}catch{}return{header:n,claims:r,data:l,signature:h}},cv=function(s){const n=z_(s),r=n.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},hv=function(s){const n=z_(s).claims;return typeof n=="object"&&n.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(s,n){return Object.prototype.hasOwnProperty.call(s,n)}function ao(s,n){if(Object.prototype.hasOwnProperty.call(s,n))return s[n]}function Ap(s){for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n))return!1;return!0}function Su(s,n,r){const l={};for(const h in s)Object.prototype.hasOwnProperty.call(s,h)&&(l[h]=n.call(r,s[h],h,s));return l}function Bh(s,n){if(s===n)return!0;const r=Object.keys(s),l=Object.keys(n);for(const h of r){if(!l.includes(h))return!1;const p=s[h],m=n[h];if(Dp(p)&&Dp(m)){if(!Bh(p,m))return!1}else if(p!==m)return!1}for(const h of l)if(!r.includes(h))return!1;return!0}function Dp(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(s){const n=[];for(const[r,l]of Object.entries(s))Array.isArray(l)?l.forEach(h=>{n.push(encodeURIComponent(r)+"="+encodeURIComponent(h))}):n.push(encodeURIComponent(r)+"="+encodeURIComponent(l));return n.length?"&"+n.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,r){r||(r=0);const l=this.W_;if(typeof n=="string")for(let k=0;k<16;k++)l[k]=n.charCodeAt(r)<<24|n.charCodeAt(r+1)<<16|n.charCodeAt(r+2)<<8|n.charCodeAt(r+3),r+=4;else for(let k=0;k<16;k++)l[k]=n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3],r+=4;for(let k=16;k<80;k++){const N=l[k-3]^l[k-8]^l[k-14]^l[k-16];l[k]=(N<<1|N>>>31)&4294967295}let h=this.chain_[0],p=this.chain_[1],m=this.chain_[2],w=this.chain_[3],C=this.chain_[4],S,R;for(let k=0;k<80;k++){k<40?k<20?(S=w^p&(m^w),R=1518500249):(S=p^m^w,R=1859775393):k<60?(S=p&m|w&(p|m),R=2400959708):(S=p^m^w,R=3395469782);const N=(h<<5|h>>>27)+S+C+R+l[k]&4294967295;C=w,w=m,m=(p<<30|p>>>2)&4294967295,p=h,h=N}this.chain_[0]=this.chain_[0]+h&4294967295,this.chain_[1]=this.chain_[1]+p&4294967295,this.chain_[2]=this.chain_[2]+m&4294967295,this.chain_[3]=this.chain_[3]+w&4294967295,this.chain_[4]=this.chain_[4]+C&4294967295}update(n,r){if(n==null)return;r===void 0&&(r=n.length);const l=r-this.blockSize;let h=0;const p=this.buf_;let m=this.inbuf_;for(;h<r;){if(m===0)for(;h<=l;)this.compress_(n,h),h+=this.blockSize;if(typeof n=="string"){for(;h<r;)if(p[m]=n.charCodeAt(h),++m,++h,m===this.blockSize){this.compress_(p),m=0;break}}else for(;h<r;)if(p[m]=n[h],++m,++h,m===this.blockSize){this.compress_(p),m=0;break}}this.inbuf_=m,this.total_+=r}digest(){const n=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let h=this.blockSize-1;h>=56;h--)this.buf_[h]=r&255,r/=256;this.compress_(this.buf_);let l=0;for(let h=0;h<5;h++)for(let p=24;p>=0;p-=8)n[l]=this.chain_[h]>>p&255,++l;return n}}function Fu(s,n){return`${s} failed: ${n} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=function(s){const n=[];let r=0;for(let l=0;l<s.length;l++){let h=s.charCodeAt(l);if(h>=55296&&h<=56319){const p=h-55296;l++,q(l<s.length,"Surrogate pair missing trail surrogate.");const m=s.charCodeAt(l)-56320;h=65536+(p<<10)+m}h<128?n[r++]=h:h<2048?(n[r++]=h>>6|192,n[r++]=h&63|128):h<65536?(n[r++]=h>>12|224,n[r++]=h>>6&63|128,n[r++]=h&63|128):(n[r++]=h>>18|240,n[r++]=h>>12&63|128,n[r++]=h>>6&63|128,n[r++]=h&63|128)}return n},Bu=function(s){let n=0;for(let r=0;r<s.length;r++){const l=s.charCodeAt(r);l<128?n++:l<2048?n+=2:l>=55296&&l<=56319?(n+=4,r++):n+=3}return n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(s){return s&&s._delegate?s._delegate:s}class Oa{constructor(n,r,l){this.name=n,this.instanceFactory=r,this.type=l,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(n,r){this.name=n,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const r=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(r)){const l=new Ha;if(this.instancesDeferred.set(r,l),this.isInitialized(r)||this.shouldAutoInitialize())try{const h=this.getOrInitializeService({instanceIdentifier:r});h&&l.resolve(h)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(n){var r;const l=this.normalizeInstanceIdentifier(n==null?void 0:n.identifier),h=(r=n==null?void 0:n.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(l)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:l})}catch(p){if(h)return null;throw p}else{if(h)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(gv(n))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[r,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(r);try{const p=this.getOrInitializeService({instanceIdentifier:h});l.resolve(p)}catch{}}}}clearInstance(n=ts){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=ts){return this.instances.has(n)}getOptions(n=ts){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:r={}}=n,l=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(l))throw Error(`${this.name}(${l}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const h=this.getOrInitializeService({instanceIdentifier:l,options:r});for(const[p,m]of this.instancesDeferred.entries()){const w=this.normalizeInstanceIdentifier(p);l===w&&m.resolve(h)}return h}onInit(n,r){var l;const h=this.normalizeInstanceIdentifier(r),p=(l=this.onInitCallbacks.get(h))!==null&&l!==void 0?l:new Set;p.add(n),this.onInitCallbacks.set(h,p);const m=this.instances.get(h);return m&&n(m,h),()=>{p.delete(n)}}invokeOnInitCallbacks(n,r){const l=this.onInitCallbacks.get(r);if(l)for(const h of l)try{h(n,r)}catch{}}getOrInitializeService({instanceIdentifier:n,options:r={}}){let l=this.instances.get(n);if(!l&&this.component&&(l=this.component.instanceFactory(this.container,{instanceIdentifier:mv(n),options:r}),this.instances.set(n,l),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(l,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,l)}catch{}return l||null}normalizeInstanceIdentifier(n=ts){return this.component?this.component.multipleInstances?n:ts:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mv(s){return s===ts?void 0:s}function gv(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const r=this.getProvider(n.name);if(r.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);r.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const r=new _v(n,this);return this.providers.set(n,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(je||(je={}));const yv={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},wv=je.INFO,Cv={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},Sv=(s,n,...r)=>{if(n<s.logLevel)return;const l=new Date().toISOString(),h=Cv[n];if(h)console[h](`[${l}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class F_{constructor(n){this.name=n,this._logLevel=wv,this._logHandler=Sv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in je))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?yv[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...n),this._logHandler(this,je.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...n),this._logHandler(this,je.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,je.INFO,...n),this._logHandler(this,je.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,je.WARN,...n),this._logHandler(this,je.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...n),this._logHandler(this,je.ERROR,...n)}}const Ev=(s,n)=>n.some(r=>s instanceof r);let bp,zp;function xv(){return bp||(bp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tv(){return zp||(zp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B_=new WeakMap,Wh=new WeakMap,W_=new WeakMap,Ph=new WeakMap,ld=new WeakMap;function Pv(s){const n=new Promise((r,l)=>{const h=()=>{s.removeEventListener("success",p),s.removeEventListener("error",m)},p=()=>{r(vr(s.result)),h()},m=()=>{l(s.error),h()};s.addEventListener("success",p),s.addEventListener("error",m)});return n.then(r=>{r instanceof IDBCursor&&B_.set(r,s)}).catch(()=>{}),ld.set(n,s),n}function kv(s){if(Wh.has(s))return;const n=new Promise((r,l)=>{const h=()=>{s.removeEventListener("complete",p),s.removeEventListener("error",m),s.removeEventListener("abort",m)},p=()=>{r(),h()},m=()=>{l(s.error||new DOMException("AbortError","AbortError")),h()};s.addEventListener("complete",p),s.addEventListener("error",m),s.addEventListener("abort",m)});Wh.set(s,n)}let Uh={get(s,n,r){if(s instanceof IDBTransaction){if(n==="done")return Wh.get(s);if(n==="objectStoreNames")return s.objectStoreNames||W_.get(s);if(n==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return vr(s[n])},set(s,n,r){return s[n]=r,!0},has(s,n){return s instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in s}};function Lv(s){Uh=s(Uh)}function Iv(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...r){const l=s.call(kh(this),n,...r);return W_.set(l,n.sort?n.sort():[n]),vr(l)}:Tv().includes(s)?function(...n){return s.apply(kh(this),n),vr(B_.get(this))}:function(...n){return vr(s.apply(kh(this),n))}}function Nv(s){return typeof s=="function"?Iv(s):(s instanceof IDBTransaction&&kv(s),Ev(s,xv())?new Proxy(s,Uh):s)}function vr(s){if(s instanceof IDBRequest)return Pv(s);if(Ph.has(s))return Ph.get(s);const n=Nv(s);return n!==s&&(Ph.set(s,n),ld.set(n,s)),n}const kh=s=>ld.get(s);function Rv(s,n,{blocked:r,upgrade:l,blocking:h,terminated:p}={}){const m=indexedDB.open(s,n),w=vr(m);return l&&m.addEventListener("upgradeneeded",C=>{l(vr(m.result),C.oldVersion,C.newVersion,vr(m.transaction),C)}),r&&m.addEventListener("blocked",C=>r(C.oldVersion,C.newVersion,C)),w.then(C=>{p&&C.addEventListener("close",()=>p()),h&&C.addEventListener("versionchange",S=>h(S.oldVersion,S.newVersion,S))}).catch(()=>{}),w}const Mv=["get","getKey","getAll","getAllKeys","count"],Ov=["put","add","delete","clear"],Lh=new Map;function Fp(s,n){if(!(s instanceof IDBDatabase&&!(n in s)&&typeof n=="string"))return;if(Lh.get(n))return Lh.get(n);const r=n.replace(/FromIndex$/,""),l=n!==r,h=Ov.includes(r);if(!(r in(l?IDBIndex:IDBObjectStore).prototype)||!(h||Mv.includes(r)))return;const p=async function(m,...w){const C=this.transaction(m,h?"readwrite":"readonly");let S=C.store;return l&&(S=S.index(w.shift())),(await Promise.all([S[r](...w),h&&C.done]))[0]};return Lh.set(n,p),p}Lv(s=>({...s,get:(n,r,l)=>Fp(n,r)||s.get(n,r,l),has:(n,r)=>!!Fp(n,r)||s.has(n,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Dv(r)){const l=r.getImmediate();return`${l.library}/${l.version}`}else return null}).filter(r=>r).join(" ")}}function Dv(s){const n=s.getComponent();return(n==null?void 0:n.type)==="VERSION"}const Hh="@firebase/app",Bp="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new F_("@firebase/app"),bv="@firebase/app-compat",zv="@firebase/analytics-compat",Fv="@firebase/analytics",Bv="@firebase/app-check-compat",Wv="@firebase/app-check",Uv="@firebase/auth",Hv="@firebase/auth-compat",Zv="@firebase/database",jv="@firebase/data-connect",Vv="@firebase/database-compat",$v="@firebase/functions",Gv="@firebase/functions-compat",qv="@firebase/installations",Kv="@firebase/installations-compat",Yv="@firebase/messaging",Qv="@firebase/messaging-compat",Xv="@firebase/performance",Jv="@firebase/performance-compat",ey="@firebase/remote-config",ty="@firebase/remote-config-compat",ny="@firebase/storage",iy="@firebase/storage-compat",ry="@firebase/firestore",sy="@firebase/vertexai",oy="@firebase/firestore-compat",ay="firebase",ly="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="[DEFAULT]",uy={[Hh]:"fire-core",[bv]:"fire-core-compat",[Fv]:"fire-analytics",[zv]:"fire-analytics-compat",[Wv]:"fire-app-check",[Bv]:"fire-app-check-compat",[Uv]:"fire-auth",[Hv]:"fire-auth-compat",[Zv]:"fire-rtdb",[jv]:"fire-data-connect",[Vv]:"fire-rtdb-compat",[$v]:"fire-fn",[Gv]:"fire-fn-compat",[qv]:"fire-iid",[Kv]:"fire-iid-compat",[Yv]:"fire-fcm",[Qv]:"fire-fcm-compat",[Xv]:"fire-perf",[Jv]:"fire-perf-compat",[ey]:"fire-rc",[ty]:"fire-rc-compat",[ny]:"fire-gcs",[iy]:"fire-gcs-compat",[ry]:"fire-fst",[oy]:"fire-fst-compat",[sy]:"fire-vertex","fire-js":"fire-js",[ay]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=new Map,cy=new Map,jh=new Map;function Wp(s,n){try{s.container.addComponent(n)}catch(r){Ni.debug(`Component ${n.name} failed to register with FirebaseApp ${s.name}`,r)}}function xu(s){const n=s.name;if(jh.has(n))return Ni.debug(`There were multiple attempts to register component ${n}.`),!1;jh.set(n,s);for(const r of Eu.values())Wp(r,s);for(const r of cy.values())Wp(r,s);return!0}function hy(s,n){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new b_("app","Firebase",dy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(n,r,l){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=l,this.container.addComponent(new Oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=ly;function U_(s,n={}){let r=s;typeof n!="object"&&(n={name:n});const l=Object.assign({name:Zh,automaticDataCollectionEnabled:!1},n),h=l.name;if(typeof h!="string"||!h)throw yr.create("bad-app-name",{appName:String(h)});if(r||(r=A_()),!r)throw yr.create("no-options");const p=Eu.get(h);if(p){if(Bh(r,p.options)&&Bh(l,p.config))return p;throw yr.create("duplicate-app",{appName:h})}const m=new vv(h);for(const C of jh.values())m.addComponent(C);const w=new fy(r,l,m);return Eu.set(h,w),w}function _y(s=Zh){const n=Eu.get(s);if(!n&&s===Zh&&A_())return U_();if(!n)throw yr.create("no-app",{appName:s});return n}function io(s,n,r){var l;let h=(l=uy[s])!==null&&l!==void 0?l:s;r&&(h+=`-${r}`);const p=h.match(/\s|\//),m=n.match(/\s|\//);if(p||m){const w=[`Unable to register library "${h}" with version "${n}":`];p&&w.push(`library name "${h}" contains illegal characters (whitespace or "/")`),p&&m&&w.push("and"),m&&w.push(`version name "${n}" contains illegal characters (whitespace or "/")`),Ni.warn(w.join(" "));return}xu(new Oa(`${h}-version`,()=>({library:h,version:n}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="firebase-heartbeat-database",gy=1,Aa="firebase-heartbeat-store";let Ih=null;function H_(){return Ih||(Ih=Rv(my,gy,{upgrade:(s,n)=>{switch(n){case 0:try{s.createObjectStore(Aa)}catch(r){console.warn(r)}}}}).catch(s=>{throw yr.create("idb-open",{originalErrorMessage:s.message})})),Ih}async function vy(s){try{const r=(await H_()).transaction(Aa),l=await r.objectStore(Aa).get(Z_(s));return await r.done,l}catch(n){if(n instanceof Za)Ni.warn(n.message);else{const r=yr.create("idb-get",{originalErrorMessage:n==null?void 0:n.message});Ni.warn(r.message)}}}async function Up(s,n){try{const l=(await H_()).transaction(Aa,"readwrite");await l.objectStore(Aa).put(n,Z_(s)),await l.done}catch(r){if(r instanceof Za)Ni.warn(r.message);else{const l=yr.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ni.warn(l.message)}}}function Z_(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=1024,wy=30*24*60*60*1e3;class Cy{constructor(n){this.container=n,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Ey(r),this._heartbeatsCachePromise=this._storage.read().then(l=>(this._heartbeatsCache=l,l))}async triggerHeartbeat(){var n,r;try{const h=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),p=Hp();return((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===p||this._heartbeatsCache.heartbeats.some(m=>m.date===p)?void 0:(this._heartbeatsCache.heartbeats.push({date:p,agent:h}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(m=>{const w=new Date(m.date).valueOf();return Date.now()-w<=wy}),this._storage.overwrite(this._heartbeatsCache))}catch(l){Ni.warn(l)}}async getHeartbeatsHeader(){var n;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Hp(),{heartbeatsToSend:l,unsentEntries:h}=Sy(this._heartbeatsCache.heartbeats),p=Cu(JSON.stringify({version:2,heartbeats:l}));return this._heartbeatsCache.lastSentHeartbeatDate=r,h.length>0?(this._heartbeatsCache.heartbeats=h,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),p}catch(r){return Ni.warn(r),""}}}function Hp(){return new Date().toISOString().substring(0,10)}function Sy(s,n=yy){const r=[];let l=s.slice();for(const h of s){const p=r.find(m=>m.agent===h.agent);if(p){if(p.dates.push(h.date),Zp(r)>n){p.dates.pop();break}}else if(r.push({agent:h.agent,dates:[h.date]}),Zp(r)>n){r.pop();break}l=l.slice(1)}return{heartbeatsToSend:r,unsentEntries:l}}class Ey{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sv()?ov().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await vy(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(n){var r;if(await this._canUseIndexedDBPromise){const h=await this.read();return Up(this.app,{lastSentHeartbeatDate:(r=n.lastSentHeartbeatDate)!==null&&r!==void 0?r:h.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){var r;if(await this._canUseIndexedDBPromise){const h=await this.read();return Up(this.app,{lastSentHeartbeatDate:(r=n.lastSentHeartbeatDate)!==null&&r!==void 0?r:h.lastSentHeartbeatDate,heartbeats:[...h.heartbeats,...n.heartbeats]})}else return}}function Zp(s){return Cu(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(s){xu(new Oa("platform-logger",n=>new Av(n),"PRIVATE")),xu(new Oa("heartbeat",n=>new Cy(n),"PRIVATE")),io(Hh,Bp,s),io(Hh,Bp,"esm2017"),io("fire-js","")}xy("");var jp={};const Vp="@firebase/database",$p="1.0.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j_="";function Ty(s){j_=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,r){r==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),St(r))}get(n){const r=this.domStorage_.getItem(this.prefixedName_(n));return r==null?null:Ma(r)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,r){r==null?delete this.cache_[n]:this.cache_[n]=r}get(n){return ri(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const n=window[s];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new Py(n)}}catch{}return new ky},is=V_("localStorage"),Ly=V_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new F_("@firebase/database"),Iy=function(){let s=1;return function(){return s++}}(),$_=function(s){const n=pv(s),r=new fv;r.update(n);const l=r.digest();return ad.encodeByteArray(l)},ja=function(...s){let n="";for(let r=0;r<s.length;r++){const l=s[r];Array.isArray(l)||l&&typeof l=="object"&&typeof l.length=="number"?n+=ja.apply(null,l):typeof l=="object"?n+=St(l):n+=l,n+=" "}return n};let ka=null,Gp=!0;const Ny=function(s,n){q(!0,"Can't turn on custom loggers persistently."),ro.logLevel=je.VERBOSE,ka=ro.log.bind(ro)},Lt=function(...s){if(Gp===!0&&(Gp=!1,ka===null&&Ly.get("logging_enabled")===!0&&Ny()),ka){const n=ja.apply(null,s);ka(n)}},Va=function(s){return function(...n){Lt(s,...n)}},Vh=function(...s){const n="FIREBASE INTERNAL ERROR: "+ja(...s);ro.error(n)},Ri=function(...s){const n=`FIREBASE FATAL ERROR: ${ja(...s)}`;throw ro.error(n),new Error(n)},jt=function(...s){const n="FIREBASE WARNING: "+ja(...s);ro.warn(n)},Ry=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&jt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ud=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},My=function(s){if(document.readyState==="complete")s();else{let n=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}n||(n=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},lo="[MIN_NAME]",rs="[MAX_NAME]",ls=function(s,n){if(s===n)return 0;if(s===lo||n===rs)return-1;if(n===lo||s===rs)return 1;{const r=qp(s),l=qp(n);return r!==null?l!==null?r-l===0?s.length-n.length:r-l:-1:l!==null?1:s<n?-1:1}},Oy=function(s,n){return s===n?0:s<n?-1:1},wa=function(s,n){if(n&&s in n)return n[s];throw new Error("Missing required key ("+s+") in object: "+St(n))},cd=function(s){if(typeof s!="object"||s===null)return St(s);const n=[];for(const l in s)n.push(l);n.sort();let r="{";for(let l=0;l<n.length;l++)l!==0&&(r+=","),r+=St(n[l]),r+=":",r+=cd(s[n[l]]);return r+="}",r},G_=function(s,n){const r=s.length;if(r<=n)return[s];const l=[];for(let h=0;h<r;h+=n)h+n>r?l.push(s.substring(h,r)):l.push(s.substring(h,h+n));return l};function It(s,n){for(const r in s)s.hasOwnProperty(r)&&n(r,s[r])}const q_=function(s){q(!ud(s),"Invalid JSON number");const n=11,r=52,l=(1<<n-1)-1;let h,p,m,w,C;s===0?(p=0,m=0,h=1/s===-1/0?1:0):(h=s<0,s=Math.abs(s),s>=Math.pow(2,1-l)?(w=Math.min(Math.floor(Math.log(s)/Math.LN2),l),p=w+l,m=Math.round(s*Math.pow(2,r-w)-Math.pow(2,r))):(p=0,m=Math.round(s/Math.pow(2,1-l-r))));const S=[];for(C=r;C;C-=1)S.push(m%2?1:0),m=Math.floor(m/2);for(C=n;C;C-=1)S.push(p%2?1:0),p=Math.floor(p/2);S.push(h?1:0),S.reverse();const R=S.join("");let k="";for(C=0;C<64;C+=8){let N=parseInt(R.substr(C,8),2).toString(16);N.length===1&&(N="0"+N),k=k+N}return k.toLowerCase()},Ay=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Dy=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function by(s,n){let r="Unknown Error";s==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?r="Client doesn't have permission to access the desired data.":s==="unavailable"&&(r="The service is unavailable");const l=new Error(s+" at "+n._path.toString()+": "+r);return l.code=s.toUpperCase(),l}const zy=new RegExp("^-?(0*)\\d{1,10}$"),Fy=-2147483648,By=2147483647,qp=function(s){if(zy.test(s)){const n=Number(s);if(n>=Fy&&n<=By)return n}return null},mo=function(s){try{s()}catch(n){setTimeout(()=>{const r=n.stack||"";throw jt("Exception was thrown by user callback.",r),n},Math.floor(0))}},Wy=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},La=function(s,n){const r=setTimeout(s,n);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(n,r){this.appName_=n,this.appCheckProvider=r,this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(l=>this.appCheck=l)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((r,l)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(r,l):r(null)},0)})}addTokenChangeListener(n){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(l=>l.addTokenListener(n))}notifyForInvalidToken(){jt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(n,r,l){this.appName_=n,this.firebaseOptions_=r,this.authProvider_=l,this.auth_=null,this.auth_=l.getImmediate({optional:!0}),this.auth_||l.onInit(h=>this.auth_=h)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(r=>r&&r.code==="auth/token-not-initialized"?(Lt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,l)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(r,l):r(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(r=>r.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(r=>r.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',jt(n)}}class wu{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}wu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="5",K_="v",Y_="s",Q_="r",X_="f",J_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,em="ls",tm="p",$h="ac",nm="websocket",im="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(n,r,l,h,p=!1,m="",w=!1,C=!1){this.secure=r,this.namespace=l,this.webSocketOnly=h,this.nodeAdmin=p,this.persistenceKey=m,this.includeNamespaceInQueryParams=w,this.isUsingEmulator=C,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=is.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&is.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){const n=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${r}`}}function Zy(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function sm(s,n,r){q(typeof n=="string","typeof type must == string"),q(typeof r=="object","typeof params must == object");let l;if(n===nm)l=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(n===im)l=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);Zy(s)&&(r.ns=s.namespace);const h=[];return It(r,(p,m)=>{h.push(p+"="+m)}),l+h.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.counters_={}}incrementCounter(n,r=1){ri(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=r}get(){return Gg(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh={},Rh={};function dd(s){const n=s.toString();return Nh[n]||(Nh[n]=new jy),Nh[n]}function Vy(s,n){const r=s.toString();return Rh[r]||(Rh[r]=n()),Rh[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,r){this.closeAfterResponse=n,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,r){for(this.pendingResponses[n]=r;this.pendingResponses[this.currentResponseNum];){const l=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let h=0;h<l.length;++h)l[h]&&mo(()=>{this.onMessage_(l[h])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="start",Gy="close",qy="pLPCommand",Ky="pRTLPCB",om="id",am="pw",lm="ser",Yy="cb",Qy="seg",Xy="ts",Jy="d",ew="dframe",um=1870,cm=30,tw=um-cm,nw=25e3,iw=3e4;class no{constructor(n,r,l,h,p,m,w){this.connId=n,this.repoInfo=r,this.applicationId=l,this.appCheckToken=h,this.authToken=p,this.transportSessionId=m,this.lastSessionId=w,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Va(n),this.stats_=dd(r),this.urlFn=C=>(this.appCheckToken&&(C[$h]=this.appCheckToken),sm(r,im,C))}open(n,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new $y(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(iw)),My(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fd((...p)=>{const[m,w,C,S,R]=p;if(this.incrementIncomingBytes_(p),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,m===Kp)this.id=w,this.password=C;else if(m===Gy)w?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(w,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+m)},(...p)=>{const[m,w]=p;this.incrementIncomingBytes_(p),this.myPacketOrderer.handleResponse(m,w)},()=>{this.onClosed_()},this.urlFn);const l={};l[Kp]="t",l[lm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(l[Yy]=this.scriptTagHolder.uniqueCallbackIdentifier),l[K_]=hd,this.transportSessionId&&(l[Y_]=this.transportSessionId),this.lastSessionId&&(l[em]=this.lastSessionId),this.applicationId&&(l[tm]=this.applicationId),this.appCheckToken&&(l[$h]=this.appCheckToken),typeof location<"u"&&location.hostname&&J_.test(location.hostname)&&(l[Q_]=X_);const h=this.urlFn(l);this.log_("Connecting via long-poll to "+h),this.scriptTagHolder.addTag(h,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){no.forceAllow_=!0}static forceDisallow(){no.forceDisallow_=!0}static isAvailable(){return no.forceAllow_?!0:!no.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ay()&&!Dy()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const r=St(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const l=R_(r),h=G_(l,tw);for(let p=0;p<h.length;p++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,h.length,h[p]),this.curSegmentNum++}addDisconnectPingFrame(n,r){this.myDisconnFrame=document.createElement("iframe");const l={};l[ew]="t",l[om]=n,l[am]=r,this.myDisconnFrame.src=this.urlFn(l),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const r=St(n).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class fd{constructor(n,r,l,h){this.onDisconnect=l,this.urlFn=h,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Iy(),window[qy+this.uniqueCallbackIdentifier]=n,window[Ky+this.uniqueCallbackIdentifier]=r,this.myIFrame=fd.createIFrame_();let p="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(p='<script>document.domain="'+document.domain+'";<\/script>');const m="<html><body>"+p+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(m),this.myIFrame.doc.close()}catch(w){Lt("frame writing exception"),w.stack&&Lt(w.stack),Lt(w)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||Lt("No IE domain setting required")}catch{const l=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+l+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,r){for(this.myID=n,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n[om]=this.myID,n[am]=this.myPW,n[lm]=this.currentSerial;let r=this.urlFn(n),l="",h=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+cm+l.length<=um;){const m=this.pendingSegs.shift();l=l+"&"+Qy+h+"="+m.seg+"&"+Xy+h+"="+m.ts+"&"+Jy+h+"="+m.d,h++}return r=r+l,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(n,r,l){this.pendingSegs.push({seg:n,ts:r,d:l}),this.alive&&this.newRequest_()}addLongPollTag_(n,r){this.outstandingRequests.add(r);const l=()=>{this.outstandingRequests.delete(r),this.newRequest_()},h=setTimeout(l,Math.floor(nw)),p=()=>{clearTimeout(h),l()};this.addTag(n,p)}addTag(n,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const l=this.myIFrame.doc.createElement("script");l.type="text/javascript",l.async=!0,l.src=n,l.onload=l.onreadystatechange=function(){const h=l.readyState;(!h||h==="loaded"||h==="complete")&&(l.onload=l.onreadystatechange=null,l.parentNode&&l.parentNode.removeChild(l),r())},l.onerror=()=>{Lt("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(l)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=16384,sw=45e3;let Tu=null;typeof MozWebSocket<"u"?Tu=MozWebSocket:typeof WebSocket<"u"&&(Tu=WebSocket);class ii{constructor(n,r,l,h,p,m,w){this.connId=n,this.applicationId=l,this.appCheckToken=h,this.authToken=p,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Va(this.connId),this.stats_=dd(r),this.connURL=ii.connectionURL_(r,m,w,h,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,l,h,p){const m={};return m[K_]=hd,typeof location<"u"&&location.hostname&&J_.test(location.hostname)&&(m[Q_]=X_),r&&(m[Y_]=r),l&&(m[em]=l),h&&(m[$h]=h),p&&(m[tm]=p),sm(n,nm,m)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,is.set("previous_websocket_failure",!0);try{let l;rv(),this.mySock=new Tu(this.connURL,[],l)}catch(l){this.log_("Error instantiating WebSocket.");const h=l.message||l.data;h&&this.log_(h),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=l=>{this.handleIncomingFrame(l)},this.mySock.onerror=l=>{this.log_("WebSocket error.  Closing connection.");const h=l.message||l.data;h&&this.log_(h),this.onClosed_()}}start(){}static forceDisallow(){ii.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,l=navigator.userAgent.match(r);l&&l.length>1&&parseFloat(l[1])<4.4&&(n=!0)}return!n&&Tu!==null&&!ii.forceDisallow_}static previouslyFailed(){return is.isInMemoryStorage||is.get("previous_websocket_failure")===!0}markConnectionHealthy(){is.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const l=Ma(r);this.onMessage(l)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(q(this.frames===null,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const l=this.extractFrameCount_(r);l!==null&&this.appendFrame_(l)}}send(n){this.resetKeepAlive();const r=St(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const l=G_(r,rw);l.length>1&&this.sendString_(String(l.length));for(let h=0;h<l.length;h++)this.sendString_(l[h])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(sw))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ii.responsesRequiredToBeHealthy=2;ii.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static get ALL_TRANSPORTS(){return[no,ii]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){const r=ii.isAvailable();let l=r&&!ii.previouslyFailed();if(n.webSocketOnly&&(r||jt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),l=!0),l)this.transports_=[ii];else{const h=this.transports_=[];for(const p of Da.ALL_TRANSPORTS)p&&p.isAvailable()&&h.push(p);Da.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Da.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=6e4,aw=5e3,lw=10*1024,uw=100*1024,Mh="t",Yp="d",cw="s",Qp="r",hw="e",Xp="o",Jp="a",e_="n",t_="p",dw="h";class fw{constructor(n,r,l,h,p,m,w,C,S,R){this.id=n,this.repoInfo_=r,this.applicationId_=l,this.appCheckToken_=h,this.authToken_=p,this.onMessage_=m,this.onReady_=w,this.onDisconnect_=C,this.onKill_=S,this.lastSessionId=R,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Va("c:"+this.id+":"),this.transportManager_=new Da(r),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),l=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,l)},Math.floor(0));const h=n.healthyTimeout||0;h>0&&(this.healthyTimeout_=La(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>uw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>lw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(h)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return r=>{n===this.conn_?this.onConnectionLost_(r):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return r=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(r):n===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(n){const r={t:"d",d:n};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(Mh in n){const r=n[Mh];r===Jp?this.upgradeIfSecondaryHealthy_():r===Qp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===Xp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const r=wa("t",n),l=wa("d",n);if(r==="c")this.onSecondaryControl_(l);else if(r==="d")this.pendingDataMessages.push(l);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:t_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:e_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const r=wa("t",n),l=wa("d",n);r==="c"?this.onControl_(l):r==="d"&&this.onDataMessage_(l)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const r=wa(Mh,n);if(Yp in n){const l=n[Yp];if(r===dw){const h=Object.assign({},l);this.repoInfo_.isUsingEmulator&&(h.h=this.repoInfo_.host),this.onHandshake_(h)}else if(r===e_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let h=0;h<this.pendingDataMessages.length;++h)this.onDataMessage_(this.pendingDataMessages[h]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===cw?this.onConnectionShutdown_(l):r===Qp?this.onReset_(l):r===hw?Vh("Server Error: "+l):r===Xp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vh("Unknown control packet command: "+r)}}onHandshake_(n){const r=n.ts,l=n.v,h=n.h;this.sessionId=n.s,this.repoInfo_.host=h,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),hd!==l&&jt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),l=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,l),La(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ow))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,r){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):La(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(aw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:t_,d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(is.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{put(n,r,l,h){}merge(n,r,l,h){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,r,l){}onDisconnectMerge(n,r,l){}onDisconnectCancel(n,r){}reportStats(n){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(n){this.allowedEvents_=n,this.listeners_={},q(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...r){if(Array.isArray(this.listeners_[n])){const l=[...this.listeners_[n]];for(let h=0;h<l.length;h++)l[h].callback.apply(l[h].context,r)}}on(n,r,l){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:r,context:l});const h=this.getInitialEvent(n);h&&r.apply(l,h)}off(n,r,l){this.validateEventType_(n);const h=this.listeners_[n]||[];for(let p=0;p<h.length;p++)if(h[p].callback===r&&(!l||l===h[p].context)){h.splice(p,1);return}}validateEventType_(n){q(this.allowedEvents_.find(r=>r===n),"Unknown event: "+n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends dm{static getInstance(){return new Pu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!D_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(n){return q(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=32,i_=768;class Be{constructor(n,r){if(r===void 0){this.pieces_=n.split("/");let l=0;for(let h=0;h<this.pieces_.length;h++)this.pieces_[h].length>0&&(this.pieces_[l]=this.pieces_[h],l++);this.pieces_.length=l,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=r}toString(){let n="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(n+="/"+this.pieces_[r]);return n||"/"}}function Me(){return new Be("")}function Se(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function Cr(s){return s.pieces_.length-s.pieceNum_}function Ve(s){let n=s.pieceNum_;return n<s.pieces_.length&&n++,new Be(s.pieces_,n)}function pd(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function pw(s){let n="";for(let r=s.pieceNum_;r<s.pieces_.length;r++)s.pieces_[r]!==""&&(n+="/"+encodeURIComponent(String(s.pieces_[r])));return n||"/"}function ba(s,n=0){return s.pieces_.slice(s.pieceNum_+n)}function fm(s){if(s.pieceNum_>=s.pieces_.length)return null;const n=[];for(let r=s.pieceNum_;r<s.pieces_.length-1;r++)n.push(s.pieces_[r]);return new Be(n,0)}function rt(s,n){const r=[];for(let l=s.pieceNum_;l<s.pieces_.length;l++)r.push(s.pieces_[l]);if(n instanceof Be)for(let l=n.pieceNum_;l<n.pieces_.length;l++)r.push(n.pieces_[l]);else{const l=n.split("/");for(let h=0;h<l.length;h++)l[h].length>0&&r.push(l[h])}return new Be(r,0)}function Te(s){return s.pieceNum_>=s.pieces_.length}function en(s,n){const r=Se(s),l=Se(n);if(r===null)return n;if(r===l)return en(Ve(s),Ve(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+s+")")}function _w(s,n){const r=ba(s,0),l=ba(n,0);for(let h=0;h<r.length&&h<l.length;h++){const p=ls(r[h],l[h]);if(p!==0)return p}return r.length===l.length?0:r.length<l.length?-1:1}function _d(s,n){if(Cr(s)!==Cr(n))return!1;for(let r=s.pieceNum_,l=n.pieceNum_;r<=s.pieces_.length;r++,l++)if(s.pieces_[r]!==n.pieces_[l])return!1;return!0}function kn(s,n){let r=s.pieceNum_,l=n.pieceNum_;if(Cr(s)>Cr(n))return!1;for(;r<s.pieces_.length;){if(s.pieces_[r]!==n.pieces_[l])return!1;++r,++l}return!0}class mw{constructor(n,r){this.errorPrefix_=r,this.parts_=ba(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let l=0;l<this.parts_.length;l++)this.byteLength_+=Bu(this.parts_[l]);pm(this)}}function gw(s,n){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(n),s.byteLength_+=Bu(n),pm(s)}function vw(s){const n=s.parts_.pop();s.byteLength_-=Bu(n),s.parts_.length>0&&(s.byteLength_-=1)}function pm(s){if(s.byteLength_>i_)throw new Error(s.errorPrefix_+"has a key path longer than "+i_+" bytes ("+s.byteLength_+").");if(s.parts_.length>n_)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+n_+") or object contains a cycle "+ns(s))}function ns(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends dm{static getInstance(){return new md}constructor(){super(["visible"]);let n,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const l=!document[n];l!==this.visible_&&(this.visible_=l,this.trigger("visible",l))},!1)}getInitialEvent(n){return q(n==="visible","Unknown event type: "+n),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=1e3,yw=60*5*1e3,r_=30*1e3,ww=1.3,Cw=3e4,Sw="server_kill",s_=3;class Ii extends hm{constructor(n,r,l,h,p,m,w,C){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=l,this.onConnectStatus_=h,this.onServerInfoUpdate_=p,this.authTokenProvider_=m,this.appCheckTokenProvider_=w,this.authOverride_=C,this.id=Ii.nextPersistentConnectionId_++,this.log_=Va("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ca,this.maxReconnectDelay_=yw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");md.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Pu.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,l){const h=++this.requestNumber_,p={r:h,a:n,b:r};this.log_(St(p)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(p),l&&(this.requestCBHash_[h]=l)}get(n){this.initConnection_();const r=new Ha,h={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:m=>{const w=m.d;m.s==="ok"?r.resolve(w):r.reject(w)}};this.outstandingGets_.push(h),this.outstandingGetCount_++;const p=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(p),r.promise}listen(n,r,l,h){this.initConnection_();const p=n._queryIdentifier,m=n._path.toString();this.log_("Listen called for "+m+" "+p),this.listens.has(m)||this.listens.set(m,new Map),q(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(m).has(p),"listen() called twice for same path/queryId.");const w={onComplete:h,hashFn:r,query:n,tag:l};this.listens.get(m).set(p,w),this.connected_&&this.sendListen_(w)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,l=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(l)})}sendListen_(n){const r=n.query,l=r._path.toString(),h=r._queryIdentifier;this.log_("Listen on "+l+" for "+h);const p={p:l},m="q";n.tag&&(p.q=r._queryObject,p.t=n.tag),p.h=n.hashFn(),this.sendRequest(m,p,w=>{const C=w.d,S=w.s;Ii.warnOnListenWarnings_(C,r),(this.listens.get(l)&&this.listens.get(l).get(h))===n&&(this.log_("listen response",w),S!=="ok"&&this.removeListen_(l,h),n.onComplete&&n.onComplete(S,C))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&ri(n,"w")){const l=ao(n,"w");if(Array.isArray(l)&&~l.indexOf("no_index")){const h='".indexOn": "'+r._queryParams.getIndex().toString()+'"',p=r._path.toString();jt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${h} at ${p} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||hv(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=r_)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=cv(n)?"auth":"gauth",l={cred:n};this.authOverride_===null?l.noauth=!0:typeof this.authOverride_=="object"&&(l.authvar=this.authOverride_),this.sendRequest(r,l,h=>{const p=h.s,m=h.d||"error";this.authToken_===n&&(p==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(p,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,l=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,l)})}unlisten(n,r){const l=n._path.toString(),h=n._queryIdentifier;this.log_("Unlisten called for "+l+" "+h),q(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(l,h)&&this.connected_&&this.sendUnlisten_(l,h,n._queryObject,r)}sendUnlisten_(n,r,l,h){this.log_("Unlisten on "+n+" for "+r);const p={p:n},m="n";h&&(p.q=l,p.t=h),this.sendRequest(m,p)}onDisconnectPut(n,r,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,l):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:l})}onDisconnectMerge(n,r,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,l):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:l})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,l,h){const p={p:r,d:l};this.log_("onDisconnect "+n,p),this.sendRequest(n,p,m=>{h&&setTimeout(()=>{h(m.s,m.d)},Math.floor(0))})}put(n,r,l,h){this.putInternal("p",n,r,l,h)}merge(n,r,l,h){this.putInternal("m",n,r,l,h)}putInternal(n,r,l,h,p){this.initConnection_();const m={p:r,d:l};p!==void 0&&(m.h=p),this.outstandingPuts_.push({action:n,request:m,onComplete:h}),this.outstandingPutCount_++;const w=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(w):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,l=this.outstandingPuts_[n].request,h=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,l,p=>{this.log_(r+" response",p),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),h&&h(p.s,p.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,l=>{if(l.s!=="ok"){const p=l.d;this.log_("reportStats","Error sending stats: "+p)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+St(n));const r=n.r,l=this.requestCBHash_[r];l&&(delete this.requestCBHash_[r],l(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Vh("Unrecognized action received from server: "+St(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ca,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ca,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Cw&&(this.reconnectDelay_=Ca),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const n=new Date().getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ww)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),l=this.onRealtimeDisconnect_.bind(this),h=this.id+":"+Ii.nextConnectionId_++,p=this.lastSessionId;let m=!1,w=null;const C=function(){w?w.close():(m=!0,l())},S=function(k){q(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(k)};this.realtime_={close:C,sendRequest:S};const R=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[k,N]=await Promise.all([this.authTokenProvider_.getToken(R),this.appCheckTokenProvider_.getToken(R)]);m?Lt("getToken() completed but was canceled"):(Lt("getToken() completed. Creating connection."),this.authToken_=k&&k.accessToken,this.appCheckToken_=N&&N.token,w=new fw(h,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,l,Z=>{jt(Z+" ("+this.repoInfo_.toString()+")"),this.interrupt(Sw)},p))}catch(k){this.log_("Failed to get token: "+k),m||(this.repoInfo_.nodeAdmin&&jt(k),C())}}}interrupt(n){Lt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Lt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ap(this.interruptReasons_)&&(this.reconnectDelay_=Ca,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let l;r?l=r.map(p=>cd(p)).join("$"):l="default";const h=this.removeListen_(n,l);h&&h.onComplete&&h.onComplete("permission_denied")}removeListen_(n,r){const l=new Be(n).toString();let h;if(this.listens.has(l)){const p=this.listens.get(l);h=p.get(r),p.delete(r),p.size===0&&this.listens.delete(l)}else h=void 0;return h}onAuthRevoked_(n,r){Lt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=s_&&(this.reconnectDelay_=r_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Lt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=s_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+j_.replace(/\./g,"-")]=1,D_()?n["framework.cordova"]=1:iv()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Pu.getInstance().currentlyOnline();return Ap(this.interruptReasons_)&&n}}Ii.nextPersistentConnectionId_=0;Ii.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(n,r){this.name=n,this.node=r}static Wrap(n,r){return new Ee(n,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,r){const l=new Ee(lo,n),h=new Ee(lo,r);return this.compare(l,h)!==0}minPost(){return Ee.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu;class _m extends Wu{static get __EMPTY_NODE(){return gu}static set __EMPTY_NODE(n){gu=n}compare(n,r){return ls(n.name,r.name)}isDefinedOn(n){throw po("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,r){return!1}minPost(){return Ee.MIN}maxPost(){return new Ee(rs,gu)}makePost(n,r){return q(typeof n=="string","KeyIndex indexValue must always be a string."),new Ee(n,gu)}toString(){return".key"}}const so=new _m;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(n,r,l,h,p=null){this.isReverse_=h,this.resultGenerator_=p,this.nodeStack_=[];let m=1;for(;!n.isEmpty();)if(n=n,m=r?l(n.key,r):1,h&&(m*=-1),m<0)this.isReverse_?n=n.left:n=n.right;else if(m===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(n.key,n.value):r={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}class wt{constructor(n,r,l,h,p){this.key=n,this.value=r,this.color=l??wt.RED,this.left=h??tn.EMPTY_NODE,this.right=p??tn.EMPTY_NODE}copy(n,r,l,h,p){return new wt(n??this.key,r??this.value,l??this.color,h??this.left,p??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,l){let h=this;const p=l(n,h.key);return p<0?h=h.copy(null,null,null,h.left.insert(n,r,l),null):p===0?h=h.copy(null,r,null,null,null):h=h.copy(null,null,null,null,h.right.insert(n,r,l)),h.fixUp_()}removeMin_(){if(this.left.isEmpty())return tn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let l,h;if(l=this,r(n,l.key)<0)!l.left.isEmpty()&&!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.remove(n,r),null);else{if(l.left.isRed_()&&(l=l.rotateRight_()),!l.right.isEmpty()&&!l.right.isRed_()&&!l.right.left.isRed_()&&(l=l.moveRedRight_()),r(n,l.key)===0){if(l.right.isEmpty())return tn.EMPTY_NODE;h=l.right.min_(),l=l.copy(h.key,h.value,null,null,l.right.removeMin_())}l=l.copy(null,null,null,null,l.right.remove(n,r))}return l.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}wt.RED=!0;wt.BLACK=!1;class Ew{copy(n,r,l,h,p){return this}insert(n,r,l){return new wt(n,r,null)}remove(n,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class tn{constructor(n,r=tn.EMPTY_NODE){this.comparator_=n,this.root_=r}insert(n,r){return new tn(this.comparator_,this.root_.insert(n,r,this.comparator_).copy(null,null,wt.BLACK,null,null))}remove(n){return new tn(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,wt.BLACK,null,null))}get(n){let r,l=this.root_;for(;!l.isEmpty();){if(r=this.comparator_(n,l.key),r===0)return l.value;r<0?l=l.left:r>0&&(l=l.right)}return null}getPredecessorKey(n){let r,l=this.root_,h=null;for(;!l.isEmpty();)if(r=this.comparator_(n,l.key),r===0){if(l.left.isEmpty())return h?h.key:null;for(l=l.left;!l.right.isEmpty();)l=l.right;return l.key}else r<0?l=l.left:r>0&&(h=l,l=l.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new vu(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,r){return new vu(this.root_,n,this.comparator_,!1,r)}getReverseIteratorFrom(n,r){return new vu(this.root_,n,this.comparator_,!0,r)}getReverseIterator(n){return new vu(this.root_,null,this.comparator_,!0,n)}}tn.EMPTY_NODE=new Ew;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(s,n){return ls(s.name,n.name)}function gd(s,n){return ls(s,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh;function Tw(s){Gh=s}const mm=function(s){return typeof s=="number"?"number:"+q_(s):"string:"+s},gm=function(s){if(s.isLeafNode()){const n=s.val();q(typeof n=="string"||typeof n=="number"||typeof n=="object"&&ri(n,".sv"),"Priority must be a string or number.")}else q(s===Gh||s.isEmpty(),"priority of unexpected type.");q(s===Gh||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o_;class yt{static set __childrenNodeConstructor(n){o_=n}static get __childrenNodeConstructor(){return o_}constructor(n,r=yt.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),gm(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new yt(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Te(n)?this:Se(n)===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:yt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const l=Se(n);return l===null?r:r.isEmpty()&&l!==".priority"?this:(q(l!==".priority"||Cr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(l,yt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ve(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+mm(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",r==="number"?n+=q_(this.value_):n+=this.value_,this.lazyHash_=$_(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===yt.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof yt.__childrenNodeConstructor?-1:(q(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,l=typeof this.value_,h=yt.VALUE_TYPE_ORDER.indexOf(r),p=yt.VALUE_TYPE_ORDER.indexOf(l);return q(h>=0,"Unknown leaf type: "+r),q(p>=0,"Unknown leaf type: "+l),h===p?l==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:p-h}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}yt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm,ym;function Pw(s){vm=s}function kw(s){ym=s}class Lw extends Wu{compare(n,r){const l=n.node.getPriority(),h=r.node.getPriority(),p=l.compareTo(h);return p===0?ls(n.name,r.name):p}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,r){return!n.getPriority().equals(r.getPriority())}minPost(){return Ee.MIN}maxPost(){return new Ee(rs,new yt("[PRIORITY-POST]",ym))}makePost(n,r){const l=vm(n);return new Ee(r,new yt("[PRIORITY-POST]",l))}toString(){return".priority"}}const st=new Lw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=Math.log(2);class Nw{constructor(n){const r=p=>parseInt(Math.log(p)/Iw,10),l=p=>parseInt(Array(p+1).join("1"),2);this.count=r(n+1),this.current_=this.count-1;const h=l(this.count);this.bits_=n+1&h}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const ku=function(s,n,r,l){s.sort(n);const h=function(C,S){const R=S-C;let k,N;if(R===0)return null;if(R===1)return k=s[C],N=r?r(k):k,new wt(N,k.node,wt.BLACK,null,null);{const Z=parseInt(R/2,10)+C,Y=h(C,Z),K=h(Z+1,S);return k=s[Z],N=r?r(k):k,new wt(N,k.node,wt.BLACK,Y,K)}},p=function(C){let S=null,R=null,k=s.length;const N=function(Y,K){const oe=k-Y,Le=k;k-=Y;const De=h(oe+1,Le),Re=s[oe],be=r?r(Re):Re;Z(new wt(be,Re.node,K,null,De))},Z=function(Y){S?(S.left=Y,S=Y):(R=Y,S=Y)};for(let Y=0;Y<C.count;++Y){const K=C.nextBitIsOne(),oe=Math.pow(2,C.count-(Y+1));K?N(oe,wt.BLACK):(N(oe,wt.BLACK),N(oe,wt.RED))}return R},m=new Nw(s.length),w=p(m);return new tn(l||n,w)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh;const Sa={};class Li{static get Default(){return q(st,"ChildrenNode.ts has not been loaded"),Oh=Oh||new Li({".priority":Sa},{".priority":st}),Oh}constructor(n,r){this.indexes_=n,this.indexSet_=r}get(n){const r=ao(this.indexes_,n);if(!r)throw new Error("No index defined for "+n);return r instanceof tn?r:null}hasIndex(n){return ri(this.indexSet_,n.toString())}addIndex(n,r){q(n!==so,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const l=[];let h=!1;const p=r.getIterator(Ee.Wrap);let m=p.getNext();for(;m;)h=h||n.isDefinedOn(m.node),l.push(m),m=p.getNext();let w;h?w=ku(l,n.getCompare()):w=Sa;const C=n.toString(),S=Object.assign({},this.indexSet_);S[C]=n;const R=Object.assign({},this.indexes_);return R[C]=w,new Li(R,S)}addToIndexes(n,r){const l=Su(this.indexes_,(h,p)=>{const m=ao(this.indexSet_,p);if(q(m,"Missing index implementation for "+p),h===Sa)if(m.isDefinedOn(n.node)){const w=[],C=r.getIterator(Ee.Wrap);let S=C.getNext();for(;S;)S.name!==n.name&&w.push(S),S=C.getNext();return w.push(n),ku(w,m.getCompare())}else return Sa;else{const w=r.get(n.name);let C=h;return w&&(C=C.remove(new Ee(n.name,w))),C.insert(n,n.node)}});return new Li(l,this.indexSet_)}removeFromIndexes(n,r){const l=Su(this.indexes_,h=>{if(h===Sa)return h;{const p=r.get(n.name);return p?h.remove(new Ee(n.name,p)):h}});return new Li(l,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea;class pe{static get EMPTY_NODE(){return Ea||(Ea=new pe(new tn(gd),null,Li.Default))}constructor(n,r,l){this.children_=n,this.priorityNode_=r,this.indexMap_=l,this.lazyHash_=null,this.priorityNode_&&gm(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ea}updatePriority(n){return this.children_.isEmpty()?this:new pe(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{const r=this.children_.get(n);return r===null?Ea:r}}getChild(n){const r=Se(n);return r===null?this:this.getImmediateChild(r).getChild(Ve(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(q(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{const l=new Ee(n,r);let h,p;r.isEmpty()?(h=this.children_.remove(n),p=this.indexMap_.removeFromIndexes(l,this.children_)):(h=this.children_.insert(n,r),p=this.indexMap_.addToIndexes(l,this.children_));const m=h.isEmpty()?Ea:this.priorityNode_;return new pe(h,m,p)}}updateChild(n,r){const l=Se(n);if(l===null)return r;{q(Se(n)!==".priority"||Cr(n)===1,".priority must be the last token in a path");const h=this.getImmediateChild(l).updateChild(Ve(n),r);return this.updateImmediateChild(l,h)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let l=0,h=0,p=!0;if(this.forEachChild(st,(m,w)=>{r[m]=w.val(n),l++,p&&pe.INTEGER_REGEXP_.test(m)?h=Math.max(h,Number(m)):p=!1}),!n&&p&&h<2*l){const m=[];for(const w in r)m[w]=r[w];return m}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+mm(this.getPriority().val())+":"),this.forEachChild(st,(r,l)=>{const h=l.hash();h!==""&&(n+=":"+r+":"+h)}),this.lazyHash_=n===""?"":$_(n)}return this.lazyHash_}getPredecessorChildName(n,r,l){const h=this.resolveIndex_(l);if(h){const p=h.getPredecessorKey(new Ee(n,r));return p?p.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const l=r.minKey();return l&&l.name}else return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new Ee(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const l=r.maxKey();return l&&l.name}else return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new Ee(r,this.children_.get(r)):null}forEachChild(n,r){const l=this.resolveIndex_(n);return l?l.inorderTraversal(h=>r(h.name,h.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const l=this.resolveIndex_(r);if(l)return l.getIteratorFrom(n,h=>h);{const h=this.children_.getIteratorFrom(n.name,Ee.Wrap);let p=h.peek();for(;p!=null&&r.compare(p,n)<0;)h.getNext(),p=h.peek();return h}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const l=this.resolveIndex_(r);if(l)return l.getReverseIteratorFrom(n,h=>h);{const h=this.children_.getReverseIteratorFrom(n.name,Ee.Wrap);let p=h.peek();for(;p!=null&&r.compare(p,n)>0;)h.getNext(),p=h.peek();return h}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===$a?-1:0}withIndex(n){if(n===so||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new pe(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===so||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const l=this.getIterator(st),h=r.getIterator(st);let p=l.getNext(),m=h.getNext();for(;p&&m;){if(p.name!==m.name||!p.node.equals(m.node))return!1;p=l.getNext(),m=h.getNext()}return p===null&&m===null}else return!1;else return!1}}resolveIndex_(n){return n===so?null:this.indexMap_.get(n.toString())}}pe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Rw extends pe{constructor(){super(new tn(gd),pe.EMPTY_NODE,Li.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return pe.EMPTY_NODE}isEmpty(){return!1}}const $a=new Rw;Object.defineProperties(Ee,{MIN:{value:new Ee(lo,pe.EMPTY_NODE)},MAX:{value:new Ee(rs,$a)}});_m.__EMPTY_NODE=pe.EMPTY_NODE;yt.__childrenNodeConstructor=pe;Tw($a);kw($a);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=!0;function Ct(s,n=null){if(s===null)return pe.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(n=s[".priority"]),q(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const r=s;return new yt(r,Ct(n))}if(!(s instanceof Array)&&Mw){const r=[];let l=!1;if(It(s,(m,w)=>{if(m.substring(0,1)!=="."){const C=Ct(w);C.isEmpty()||(l=l||!C.getPriority().isEmpty(),r.push(new Ee(m,C)))}}),r.length===0)return pe.EMPTY_NODE;const p=ku(r,xw,m=>m.name,gd);if(l){const m=ku(r,st.getCompare());return new pe(p,Ct(n),new Li({".priority":m},{".priority":st}))}else return new pe(p,Ct(n),Li.Default)}else{let r=pe.EMPTY_NODE;return It(s,(l,h)=>{if(ri(s,l)&&l.substring(0,1)!=="."){const p=Ct(h);(p.isLeafNode()||!p.isEmpty())&&(r=r.updateImmediateChild(l,p))}}),r.updatePriority(Ct(n))}}Pw(Ct);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow extends Wu{constructor(n){super(),this.indexPath_=n,q(!Te(n)&&Se(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,r){const l=this.extractChild(n.node),h=this.extractChild(r.node),p=l.compareTo(h);return p===0?ls(n.name,r.name):p}makePost(n,r){const l=Ct(n),h=pe.EMPTY_NODE.updateChild(this.indexPath_,l);return new Ee(r,h)}maxPost(){const n=pe.EMPTY_NODE.updateChild(this.indexPath_,$a);return new Ee(rs,n)}toString(){return ba(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw extends Wu{compare(n,r){const l=n.node.compareTo(r.node);return l===0?ls(n.name,r.name):l}isDefinedOn(n){return!0}indexedValueChanged(n,r){return!n.equals(r)}minPost(){return Ee.MIN}maxPost(){return Ee.MAX}makePost(n,r){const l=Ct(n);return new Ee(r,l)}toString(){return".value"}}const Dw=new Aw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(s){return{type:"value",snapshotNode:s}}function uo(s,n){return{type:"child_added",snapshotNode:n,childName:s}}function za(s,n){return{type:"child_removed",snapshotNode:n,childName:s}}function Fa(s,n,r){return{type:"child_changed",snapshotNode:n,childName:s,oldSnap:r}}function bw(s,n){return{type:"child_moved",snapshotNode:n,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(n){this.index_=n}updateChild(n,r,l,h,p,m){q(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const w=n.getImmediateChild(r);return w.getChild(h).equals(l.getChild(h))&&w.isEmpty()===l.isEmpty()||(m!=null&&(l.isEmpty()?n.hasChild(r)?m.trackChildChange(za(r,w)):q(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):w.isEmpty()?m.trackChildChange(uo(r,l)):m.trackChildChange(Fa(r,l,w))),n.isLeafNode()&&l.isEmpty())?n:n.updateImmediateChild(r,l).withIndex(this.index_)}updateFullNode(n,r,l){return l!=null&&(n.isLeafNode()||n.forEachChild(st,(h,p)=>{r.hasChild(h)||l.trackChildChange(za(h,p))}),r.isLeafNode()||r.forEachChild(st,(h,p)=>{if(n.hasChild(h)){const m=n.getImmediateChild(h);m.equals(p)||l.trackChildChange(Fa(h,p,m))}else l.trackChildChange(uo(h,p))})),r.withIndex(this.index_)}updatePriority(n,r){return n.isEmpty()?pe.EMPTY_NODE:n.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(n){this.indexedFilter_=new vd(n.getIndex()),this.index_=n.getIndex(),this.startPost_=Ba.getStartPost_(n),this.endPost_=Ba.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,l=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return r&&l}updateChild(n,r,l,h,p,m){return this.matches(new Ee(r,l))||(l=pe.EMPTY_NODE),this.indexedFilter_.updateChild(n,r,l,h,p,m)}updateFullNode(n,r,l){r.isLeafNode()&&(r=pe.EMPTY_NODE);let h=r.withIndex(this.index_);h=h.updatePriority(pe.EMPTY_NODE);const p=this;return r.forEachChild(st,(m,w)=>{p.matches(new Ee(m,w))||(h=h.updateImmediateChild(m,pe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,h,l)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const r=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),r)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const r=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),r)}else return n.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(n){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const l=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?l<=0:l<0},this.withinEndPost=r=>{const l=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?l<=0:l<0},this.rangedFilter_=new Ba(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,r,l,h,p,m){return this.rangedFilter_.matches(new Ee(r,l))||(l=pe.EMPTY_NODE),n.getImmediateChild(r).equals(l)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,r,l,h,p,m):this.fullLimitUpdateChild_(n,r,l,p,m)}updateFullNode(n,r,l){let h;if(r.isLeafNode()||r.isEmpty())h=pe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){h=pe.EMPTY_NODE.withIndex(this.index_);let p;this.reverse_?p=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):p=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let m=0;for(;p.hasNext()&&m<this.limit_;){const w=p.getNext();if(this.withinDirectionalStart(w))if(this.withinDirectionalEnd(w))h=h.updateImmediateChild(w.name,w.node),m++;else break;else continue}}else{h=r.withIndex(this.index_),h=h.updatePriority(pe.EMPTY_NODE);let p;this.reverse_?p=h.getReverseIterator(this.index_):p=h.getIterator(this.index_);let m=0;for(;p.hasNext();){const w=p.getNext();m<this.limit_&&this.withinDirectionalStart(w)&&this.withinDirectionalEnd(w)?m++:h=h.updateImmediateChild(w.name,pe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,h,l)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,r,l,h,p){let m;if(this.reverse_){const k=this.index_.getCompare();m=(N,Z)=>k(Z,N)}else m=this.index_.getCompare();const w=n;q(w.numChildren()===this.limit_,"");const C=new Ee(r,l),S=this.reverse_?w.getFirstChild(this.index_):w.getLastChild(this.index_),R=this.rangedFilter_.matches(C);if(w.hasChild(r)){const k=w.getImmediateChild(r);let N=h.getChildAfterChild(this.index_,S,this.reverse_);for(;N!=null&&(N.name===r||w.hasChild(N.name));)N=h.getChildAfterChild(this.index_,N,this.reverse_);const Z=N==null?1:m(N,C);if(R&&!l.isEmpty()&&Z>=0)return p!=null&&p.trackChildChange(Fa(r,l,k)),w.updateImmediateChild(r,l);{p!=null&&p.trackChildChange(za(r,k));const K=w.updateImmediateChild(r,pe.EMPTY_NODE);return N!=null&&this.rangedFilter_.matches(N)?(p!=null&&p.trackChildChange(uo(N.name,N.node)),K.updateImmediateChild(N.name,N.node)):K}}else return l.isEmpty()?n:R&&m(S,C)>=0?(p!=null&&(p.trackChildChange(za(S.name,S.node)),p.trackChildChange(uo(r,l))),w.updateImmediateChild(r,l).updateImmediateChild(S.name,pe.EMPTY_NODE)):n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=st}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:lo}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===st}copy(){const n=new yd;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function Fw(s){return s.loadsAllData()?new vd(s.getIndex()):s.hasLimit()?new zw(s):new Ba(s)}function a_(s){const n={};if(s.isDefault())return n;let r;if(s.index_===st?r="$priority":s.index_===Dw?r="$value":s.index_===so?r="$key":(q(s.index_ instanceof Ow,"Unrecognized index type!"),r=s.index_.toString()),n.orderBy=St(r),s.startSet_){const l=s.startAfterSet_?"startAfter":"startAt";n[l]=St(s.indexStartValue_),s.startNameSet_&&(n[l]+=","+St(s.indexStartName_))}if(s.endSet_){const l=s.endBeforeSet_?"endBefore":"endAt";n[l]=St(s.indexEndValue_),s.endNameSet_&&(n[l]+=","+St(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?n.limitToFirst=s.limit_:n.limitToLast=s.limit_),n}function l_(s){const n={};if(s.startSet_&&(n.sp=s.indexStartValue_,s.startNameSet_&&(n.sn=s.indexStartName_),n.sin=!s.startAfterSet_),s.endSet_&&(n.ep=s.indexEndValue_,s.endNameSet_&&(n.en=s.indexEndName_),n.ein=!s.endBeforeSet_),s.limitSet_){n.l=s.limit_;let r=s.viewFrom_;r===""&&(s.isViewFromLeft()?r="l":r="r"),n.vf=r}return s.index_!==st&&(n.i=s.index_.toString()),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends hm{reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,r){return r!==void 0?"tag$"+r:(q(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}constructor(n,r,l,h){super(),this.repoInfo_=n,this.onDataUpdate_=r,this.authTokenProvider_=l,this.appCheckTokenProvider_=h,this.log_=Va("p:rest:"),this.listens_={}}listen(n,r,l,h){const p=n._path.toString();this.log_("Listen called for "+p+" "+n._queryIdentifier);const m=Lu.getListenId_(n,l),w={};this.listens_[m]=w;const C=a_(n._queryParams);this.restRequest_(p+".json",C,(S,R)=>{let k=R;if(S===404&&(k=null,S=null),S===null&&this.onDataUpdate_(p,k,!1,l),ao(this.listens_,m)===w){let N;S?S===401?N="permission_denied":N="rest_error:"+S:N="ok",h(N,null)}})}unlisten(n,r){const l=Lu.getListenId_(n,r);delete this.listens_[l]}get(n){const r=a_(n._queryParams),l=n._path.toString(),h=new Ha;return this.restRequest_(l+".json",r,(p,m)=>{let w=m;p===404&&(w=null,p=null),p===null?(this.onDataUpdate_(l,w,!1,null),h.resolve(w)):h.reject(new Error(w))}),h.promise}refreshAuthToken(n){}restRequest_(n,r={},l){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([h,p])=>{h&&h.accessToken&&(r.auth=h.accessToken),p&&p.token&&(r.ac=p.token);const m=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+dv(r);this.log_("Sending REST request for "+m);const w=new XMLHttpRequest;w.onreadystatechange=()=>{if(l&&w.readyState===4){this.log_("REST Response for "+m+" received. status:",w.status,"response:",w.responseText);let C=null;if(w.status>=200&&w.status<300){try{C=Ma(w.responseText)}catch{jt("Failed to parse JSON response for "+m+": "+w.responseText)}l(null,C)}else w.status!==401&&w.status!==404&&jt("Got unsuccessful REST response for "+m+" Status: "+w.status),l(w.status);l=null}},w.open("GET",m,!0),w.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.rootNode_=pe.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,r){this.rootNode_=this.rootNode_.updateChild(n,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(){return{value:null,children:new Map}}function Cm(s,n,r){if(Te(n))s.value=r,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(n,r);else{const l=Se(n);s.children.has(l)||s.children.set(l,Iu());const h=s.children.get(l);n=Ve(n),Cm(h,n,r)}}function qh(s,n,r){s.value!==null?r(n,s.value):Ww(s,(l,h)=>{const p=new Be(n.toString()+"/"+l);qh(h,p,r)})}function Ww(s,n){s.children.forEach((r,l)=>{n(l,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),r=Object.assign({},n);return this.last_&&It(this.last_,(l,h)=>{r[l]=r[l]-h}),this.last_=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=10*1e3,Hw=30*1e3,Zw=5*60*1e3;class jw{constructor(n,r){this.server_=r,this.statsToReport_={},this.statsListener_=new Uw(n);const l=u_+(Hw-u_)*Math.random();La(this.reportStats_.bind(this),Math.floor(l))}reportStats_(){const n=this.statsListener_.get(),r={};let l=!1;It(n,(h,p)=>{p>0&&ri(this.statsToReport_,h)&&(r[h]=p,l=!0)}),l&&this.server_.reportStats(r),La(this.reportStats_.bind(this),Math.floor(Math.random()*2*Zw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Bn||(Bn={}));function wd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Cd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Sd(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(n,r,l){this.path=n,this.affectedTree=r,this.revert=l,this.type=Bn.ACK_USER_WRITE,this.source=wd()}operationForChild(n){if(Te(this.path)){if(this.affectedTree.value!=null)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new Be(n));return new Nu(Me(),r,this.revert)}}else return q(Se(this.path)===n,"operationForChild called for unrelated child."),new Nu(Ve(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(n,r){this.source=n,this.path=r,this.type=Bn.LISTEN_COMPLETE}operationForChild(n){return Te(this.path)?new Wa(this.source,Me()):new Wa(this.source,Ve(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(n,r,l){this.source=n,this.path=r,this.snap=l,this.type=Bn.OVERWRITE}operationForChild(n){return Te(this.path)?new ss(this.source,Me(),this.snap.getImmediateChild(n)):new ss(this.source,Ve(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(n,r,l){this.source=n,this.path=r,this.children=l,this.type=Bn.MERGE}operationForChild(n){if(Te(this.path)){const r=this.children.subtree(new Be(n));return r.isEmpty()?null:r.value?new ss(this.source,Me(),r.value):new co(this.source,Me(),r)}else return q(Se(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new co(this.source,Ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(n,r,l){this.node_=n,this.fullyInitialized_=r,this.filtered_=l}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(Te(n))return this.isFullyInitialized()&&!this.filtered_;const r=Se(n);return this.isCompleteForChild(r)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function $w(s,n,r,l){const h=[],p=[];return n.forEach(m=>{m.type==="child_changed"&&s.index_.indexedValueChanged(m.oldSnap,m.snapshotNode)&&p.push(bw(m.childName,m.snapshotNode))}),xa(s,h,"child_removed",n,l,r),xa(s,h,"child_added",n,l,r),xa(s,h,"child_moved",p,l,r),xa(s,h,"child_changed",n,l,r),xa(s,h,"value",n,l,r),h}function xa(s,n,r,l,h,p){const m=l.filter(w=>w.type===r);m.sort((w,C)=>qw(s,w,C)),m.forEach(w=>{const C=Gw(s,w,p);h.forEach(S=>{S.respondsTo(w.type)&&n.push(S.createEvent(C,s.query_))})})}function Gw(s,n,r){return n.type==="value"||n.type==="child_removed"||(n.prevName=r.getPredecessorChildName(n.childName,n.snapshotNode,s.index_)),n}function qw(s,n,r){if(n.childName==null||r.childName==null)throw po("Should only compare child_ events.");const l=new Ee(n.childName,n.snapshotNode),h=new Ee(r.childName,r.snapshotNode);return s.index_.compare(l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(s,n){return{eventCache:s,serverCache:n}}function Ia(s,n,r,l){return Uu(new os(n,r,l),s.serverCache)}function Sm(s,n,r,l){return Uu(s.eventCache,new os(n,r,l))}function Kh(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function as(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah;const Kw=()=>(Ah||(Ah=new tn(Oy)),Ah);class Ze{static fromObject(n){let r=new Ze(null);return It(n,(l,h)=>{r=r.set(new Be(l),h)}),r}constructor(n,r=Kw()){this.value=n,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,r){if(this.value!=null&&r(this.value))return{path:Me(),value:this.value};if(Te(n))return null;{const l=Se(n),h=this.children.get(l);if(h!==null){const p=h.findRootMostMatchingPathAndValue(Ve(n),r);return p!=null?{path:rt(new Be(l),p.path),value:p.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(Te(n))return this;{const r=Se(n),l=this.children.get(r);return l!==null?l.subtree(Ve(n)):new Ze(null)}}set(n,r){if(Te(n))return new Ze(r,this.children);{const l=Se(n),p=(this.children.get(l)||new Ze(null)).set(Ve(n),r),m=this.children.insert(l,p);return new Ze(this.value,m)}}remove(n){if(Te(n))return this.children.isEmpty()?new Ze(null):new Ze(null,this.children);{const r=Se(n),l=this.children.get(r);if(l){const h=l.remove(Ve(n));let p;return h.isEmpty()?p=this.children.remove(r):p=this.children.insert(r,h),this.value===null&&p.isEmpty()?new Ze(null):new Ze(this.value,p)}else return this}}get(n){if(Te(n))return this.value;{const r=Se(n),l=this.children.get(r);return l?l.get(Ve(n)):null}}setTree(n,r){if(Te(n))return r;{const l=Se(n),p=(this.children.get(l)||new Ze(null)).setTree(Ve(n),r);let m;return p.isEmpty()?m=this.children.remove(l):m=this.children.insert(l,p),new Ze(this.value,m)}}fold(n){return this.fold_(Me(),n)}fold_(n,r){const l={};return this.children.inorderTraversal((h,p)=>{l[h]=p.fold_(rt(n,h),r)}),r(n,this.value,l)}findOnPath(n,r){return this.findOnPath_(n,Me(),r)}findOnPath_(n,r,l){const h=this.value?l(r,this.value):!1;if(h)return h;if(Te(n))return null;{const p=Se(n),m=this.children.get(p);return m?m.findOnPath_(Ve(n),rt(r,p),l):null}}foreachOnPath(n,r){return this.foreachOnPath_(n,Me(),r)}foreachOnPath_(n,r,l){if(Te(n))return this;{this.value&&l(r,this.value);const h=Se(n),p=this.children.get(h);return p?p.foreachOnPath_(Ve(n),rt(r,h),l):new Ze(null)}}foreach(n){this.foreach_(Me(),n)}foreach_(n,r){this.children.inorderTraversal((l,h)=>{h.foreach_(rt(n,l),r)}),this.value&&r(n,this.value)}foreachChild(n){this.children.inorderTraversal((r,l)=>{l.value&&n(r,l.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(n){this.writeTree_=n}static empty(){return new Wn(new Ze(null))}}function Na(s,n,r){if(Te(n))return new Wn(new Ze(r));{const l=s.writeTree_.findRootMostValueAndPath(n);if(l!=null){const h=l.path;let p=l.value;const m=en(h,n);return p=p.updateChild(m,r),new Wn(s.writeTree_.set(h,p))}else{const h=new Ze(r),p=s.writeTree_.setTree(n,h);return new Wn(p)}}}function Yh(s,n,r){let l=s;return It(r,(h,p)=>{l=Na(l,rt(n,h),p)}),l}function c_(s,n){if(Te(n))return Wn.empty();{const r=s.writeTree_.setTree(n,new Ze(null));return new Wn(r)}}function Qh(s,n){return us(s,n)!=null}function us(s,n){const r=s.writeTree_.findRootMostValueAndPath(n);return r!=null?s.writeTree_.get(r.path).getChild(en(r.path,n)):null}function h_(s){const n=[],r=s.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(st,(l,h)=>{n.push(new Ee(l,h))}):s.writeTree_.children.inorderTraversal((l,h)=>{h.value!=null&&n.push(new Ee(l,h.value))}),n}function wr(s,n){if(Te(n))return s;{const r=us(s,n);return r!=null?new Wn(new Ze(r)):new Wn(s.writeTree_.subtree(n))}}function Xh(s){return s.writeTree_.isEmpty()}function ho(s,n){return Em(Me(),s.writeTree_,n)}function Em(s,n,r){if(n.value!=null)return r.updateChild(s,n.value);{let l=null;return n.children.inorderTraversal((h,p)=>{h===".priority"?(q(p.value!==null,"Priority writes must always be leaf nodes"),l=p.value):r=Em(rt(s,h),p,r)}),!r.getChild(s).isEmpty()&&l!==null&&(r=r.updateChild(rt(s,".priority"),l)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(s,n){return km(n,s)}function Yw(s,n,r,l,h){q(l>s.lastWriteId,"Stacking an older write on top of newer ones"),h===void 0&&(h=!0),s.allWrites.push({path:n,snap:r,writeId:l,visible:h}),h&&(s.visibleWrites=Na(s.visibleWrites,n,r)),s.lastWriteId=l}function Qw(s,n,r,l){q(l>s.lastWriteId,"Stacking an older merge on top of newer ones"),s.allWrites.push({path:n,children:r,writeId:l,visible:!0}),s.visibleWrites=Yh(s.visibleWrites,n,r),s.lastWriteId=l}function Xw(s,n){for(let r=0;r<s.allWrites.length;r++){const l=s.allWrites[r];if(l.writeId===n)return l}return null}function Jw(s,n){const r=s.allWrites.findIndex(w=>w.writeId===n);q(r>=0,"removeWrite called with nonexistent writeId.");const l=s.allWrites[r];s.allWrites.splice(r,1);let h=l.visible,p=!1,m=s.allWrites.length-1;for(;h&&m>=0;){const w=s.allWrites[m];w.visible&&(m>=r&&e0(w,l.path)?h=!1:kn(l.path,w.path)&&(p=!0)),m--}if(h){if(p)return t0(s),!0;if(l.snap)s.visibleWrites=c_(s.visibleWrites,l.path);else{const w=l.children;It(w,C=>{s.visibleWrites=c_(s.visibleWrites,rt(l.path,C))})}return!0}else return!1}function e0(s,n){if(s.snap)return kn(s.path,n);for(const r in s.children)if(s.children.hasOwnProperty(r)&&kn(rt(s.path,r),n))return!0;return!1}function t0(s){s.visibleWrites=xm(s.allWrites,n0,Me()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function n0(s){return s.visible}function xm(s,n,r){let l=Wn.empty();for(let h=0;h<s.length;++h){const p=s[h];if(n(p)){const m=p.path;let w;if(p.snap)kn(r,m)?(w=en(r,m),l=Na(l,w,p.snap)):kn(m,r)&&(w=en(m,r),l=Na(l,Me(),p.snap.getChild(w)));else if(p.children){if(kn(r,m))w=en(r,m),l=Yh(l,w,p.children);else if(kn(m,r))if(w=en(m,r),Te(w))l=Yh(l,Me(),p.children);else{const C=ao(p.children,Se(w));if(C){const S=C.getChild(Ve(w));l=Na(l,Me(),S)}}}else throw po("WriteRecord should have .snap or .children")}}return l}function Tm(s,n,r,l,h){if(!l&&!h){const p=us(s.visibleWrites,n);if(p!=null)return p;{const m=wr(s.visibleWrites,n);if(Xh(m))return r;if(r==null&&!Qh(m,Me()))return null;{const w=r||pe.EMPTY_NODE;return ho(m,w)}}}else{const p=wr(s.visibleWrites,n);if(!h&&Xh(p))return r;if(!h&&r==null&&!Qh(p,Me()))return null;{const m=function(S){return(S.visible||h)&&(!l||!~l.indexOf(S.writeId))&&(kn(S.path,n)||kn(n,S.path))},w=xm(s.allWrites,m,n),C=r||pe.EMPTY_NODE;return ho(w,C)}}}function i0(s,n,r){let l=pe.EMPTY_NODE;const h=us(s.visibleWrites,n);if(h)return h.isLeafNode()||h.forEachChild(st,(p,m)=>{l=l.updateImmediateChild(p,m)}),l;if(r){const p=wr(s.visibleWrites,n);return r.forEachChild(st,(m,w)=>{const C=ho(wr(p,new Be(m)),w);l=l.updateImmediateChild(m,C)}),h_(p).forEach(m=>{l=l.updateImmediateChild(m.name,m.node)}),l}else{const p=wr(s.visibleWrites,n);return h_(p).forEach(m=>{l=l.updateImmediateChild(m.name,m.node)}),l}}function r0(s,n,r,l,h){q(l||h,"Either existingEventSnap or existingServerSnap must exist");const p=rt(n,r);if(Qh(s.visibleWrites,p))return null;{const m=wr(s.visibleWrites,p);return Xh(m)?h.getChild(r):ho(m,h.getChild(r))}}function s0(s,n,r,l){const h=rt(n,r),p=us(s.visibleWrites,h);if(p!=null)return p;if(l.isCompleteForChild(r)){const m=wr(s.visibleWrites,h);return ho(m,l.getNode().getImmediateChild(r))}else return null}function o0(s,n){return us(s.visibleWrites,n)}function a0(s,n,r,l,h,p,m){let w;const C=wr(s.visibleWrites,n),S=us(C,Me());if(S!=null)w=S;else if(r!=null)w=ho(C,r);else return[];if(w=w.withIndex(m),!w.isEmpty()&&!w.isLeafNode()){const R=[],k=m.getCompare(),N=p?w.getReverseIteratorFrom(l,m):w.getIteratorFrom(l,m);let Z=N.getNext();for(;Z&&R.length<h;)k(Z,l)!==0&&R.push(Z),Z=N.getNext();return R}else return[]}function l0(){return{visibleWrites:Wn.empty(),allWrites:[],lastWriteId:-1}}function Ru(s,n,r,l){return Tm(s.writeTree,s.treePath,n,r,l)}function xd(s,n){return i0(s.writeTree,s.treePath,n)}function d_(s,n,r,l){return r0(s.writeTree,s.treePath,n,r,l)}function Mu(s,n){return o0(s.writeTree,rt(s.treePath,n))}function u0(s,n,r,l,h,p){return a0(s.writeTree,s.treePath,n,r,l,h,p)}function Td(s,n,r){return s0(s.writeTree,s.treePath,n,r)}function Pm(s,n){return km(rt(s.treePath,n),s.writeTree)}function km(s,n){return{treePath:s,writeTree:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.changeMap=new Map}trackChildChange(n){const r=n.type,l=n.childName;q(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),q(l!==".priority","Only non-priority child changes can be tracked.");const h=this.changeMap.get(l);if(h){const p=h.type;if(r==="child_added"&&p==="child_removed")this.changeMap.set(l,Fa(l,n.snapshotNode,h.snapshotNode));else if(r==="child_removed"&&p==="child_added")this.changeMap.delete(l);else if(r==="child_removed"&&p==="child_changed")this.changeMap.set(l,za(l,h.oldSnap));else if(r==="child_changed"&&p==="child_added")this.changeMap.set(l,uo(l,n.snapshotNode));else if(r==="child_changed"&&p==="child_changed")this.changeMap.set(l,Fa(l,n.snapshotNode,h.oldSnap));else throw po("Illegal combination of changes: "+n+" occurred after "+h)}else this.changeMap.set(l,n)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{getCompleteChild(n){return null}getChildAfterChild(n,r,l){return null}}const Lm=new h0;class Pd{constructor(n,r,l=null){this.writes_=n,this.viewCache_=r,this.optCompleteServerCache_=l}getCompleteChild(n){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(n))return r.getNode().getImmediateChild(n);{const l=this.optCompleteServerCache_!=null?new os(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Td(this.writes_,n,l)}}getChildAfterChild(n,r,l){const h=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:as(this.viewCache_),p=u0(this.writes_,h,r,1,l,n);return p.length===0?null:p[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(s){return{filter:s}}function f0(s,n){q(n.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),q(n.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function p0(s,n,r,l,h){const p=new c0;let m,w;if(r.type===Bn.OVERWRITE){const S=r;S.source.fromUser?m=Jh(s,n,S.path,S.snap,l,h,p):(q(S.source.fromServer,"Unknown source."),w=S.source.tagged||n.serverCache.isFiltered()&&!Te(S.path),m=Ou(s,n,S.path,S.snap,l,h,w,p))}else if(r.type===Bn.MERGE){const S=r;S.source.fromUser?m=m0(s,n,S.path,S.children,l,h,p):(q(S.source.fromServer,"Unknown source."),w=S.source.tagged||n.serverCache.isFiltered(),m=ed(s,n,S.path,S.children,l,h,w,p))}else if(r.type===Bn.ACK_USER_WRITE){const S=r;S.revert?m=y0(s,n,S.path,l,h,p):m=g0(s,n,S.path,S.affectedTree,l,h,p)}else if(r.type===Bn.LISTEN_COMPLETE)m=v0(s,n,r.path,l,p);else throw po("Unknown operation type: "+r.type);const C=p.getChanges();return _0(n,m,C),{viewCache:m,changes:C}}function _0(s,n,r){const l=n.eventCache;if(l.isFullyInitialized()){const h=l.getNode().isLeafNode()||l.getNode().isEmpty(),p=Kh(s);(r.length>0||!s.eventCache.isFullyInitialized()||h&&!l.getNode().equals(p)||!l.getNode().getPriority().equals(p.getPriority()))&&r.push(wm(Kh(n)))}}function Im(s,n,r,l,h,p){const m=n.eventCache;if(Mu(l,r)!=null)return n;{let w,C;if(Te(r))if(q(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const S=as(n),R=S instanceof pe?S:pe.EMPTY_NODE,k=xd(l,R);w=s.filter.updateFullNode(n.eventCache.getNode(),k,p)}else{const S=Ru(l,as(n));w=s.filter.updateFullNode(n.eventCache.getNode(),S,p)}else{const S=Se(r);if(S===".priority"){q(Cr(r)===1,"Can't have a priority with additional path components");const R=m.getNode();C=n.serverCache.getNode();const k=d_(l,r,R,C);k!=null?w=s.filter.updatePriority(R,k):w=m.getNode()}else{const R=Ve(r);let k;if(m.isCompleteForChild(S)){C=n.serverCache.getNode();const N=d_(l,r,m.getNode(),C);N!=null?k=m.getNode().getImmediateChild(S).updateChild(R,N):k=m.getNode().getImmediateChild(S)}else k=Td(l,S,n.serverCache);k!=null?w=s.filter.updateChild(m.getNode(),S,k,R,h,p):w=m.getNode()}}return Ia(n,w,m.isFullyInitialized()||Te(r),s.filter.filtersNodes())}}function Ou(s,n,r,l,h,p,m,w){const C=n.serverCache;let S;const R=m?s.filter:s.filter.getIndexedFilter();if(Te(r))S=R.updateFullNode(C.getNode(),l,null);else if(R.filtersNodes()&&!C.isFiltered()){const Z=C.getNode().updateChild(r,l);S=R.updateFullNode(C.getNode(),Z,null)}else{const Z=Se(r);if(!C.isCompleteForPath(r)&&Cr(r)>1)return n;const Y=Ve(r),oe=C.getNode().getImmediateChild(Z).updateChild(Y,l);Z===".priority"?S=R.updatePriority(C.getNode(),oe):S=R.updateChild(C.getNode(),Z,oe,Y,Lm,null)}const k=Sm(n,S,C.isFullyInitialized()||Te(r),R.filtersNodes()),N=new Pd(h,k,p);return Im(s,k,r,h,N,w)}function Jh(s,n,r,l,h,p,m){const w=n.eventCache;let C,S;const R=new Pd(h,n,p);if(Te(r))S=s.filter.updateFullNode(n.eventCache.getNode(),l,m),C=Ia(n,S,!0,s.filter.filtersNodes());else{const k=Se(r);if(k===".priority")S=s.filter.updatePriority(n.eventCache.getNode(),l),C=Ia(n,S,w.isFullyInitialized(),w.isFiltered());else{const N=Ve(r),Z=w.getNode().getImmediateChild(k);let Y;if(Te(N))Y=l;else{const K=R.getCompleteChild(k);K!=null?pd(N)===".priority"&&K.getChild(fm(N)).isEmpty()?Y=K:Y=K.updateChild(N,l):Y=pe.EMPTY_NODE}if(Z.equals(Y))C=n;else{const K=s.filter.updateChild(w.getNode(),k,Y,N,R,m);C=Ia(n,K,w.isFullyInitialized(),s.filter.filtersNodes())}}}return C}function f_(s,n){return s.eventCache.isCompleteForChild(n)}function m0(s,n,r,l,h,p,m){let w=n;return l.foreach((C,S)=>{const R=rt(r,C);f_(n,Se(R))&&(w=Jh(s,w,R,S,h,p,m))}),l.foreach((C,S)=>{const R=rt(r,C);f_(n,Se(R))||(w=Jh(s,w,R,S,h,p,m))}),w}function p_(s,n,r){return r.foreach((l,h)=>{n=n.updateChild(l,h)}),n}function ed(s,n,r,l,h,p,m,w){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let C=n,S;Te(r)?S=l:S=new Ze(null).setTree(r,l);const R=n.serverCache.getNode();return S.children.inorderTraversal((k,N)=>{if(R.hasChild(k)){const Z=n.serverCache.getNode().getImmediateChild(k),Y=p_(s,Z,N);C=Ou(s,C,new Be(k),Y,h,p,m,w)}}),S.children.inorderTraversal((k,N)=>{const Z=!n.serverCache.isCompleteForChild(k)&&N.value===null;if(!R.hasChild(k)&&!Z){const Y=n.serverCache.getNode().getImmediateChild(k),K=p_(s,Y,N);C=Ou(s,C,new Be(k),K,h,p,m,w)}}),C}function g0(s,n,r,l,h,p,m){if(Mu(h,r)!=null)return n;const w=n.serverCache.isFiltered(),C=n.serverCache;if(l.value!=null){if(Te(r)&&C.isFullyInitialized()||C.isCompleteForPath(r))return Ou(s,n,r,C.getNode().getChild(r),h,p,w,m);if(Te(r)){let S=new Ze(null);return C.getNode().forEachChild(so,(R,k)=>{S=S.set(new Be(R),k)}),ed(s,n,r,S,h,p,w,m)}else return n}else{let S=new Ze(null);return l.foreach((R,k)=>{const N=rt(r,R);C.isCompleteForPath(N)&&(S=S.set(R,C.getNode().getChild(N)))}),ed(s,n,r,S,h,p,w,m)}}function v0(s,n,r,l,h){const p=n.serverCache,m=Sm(n,p.getNode(),p.isFullyInitialized()||Te(r),p.isFiltered());return Im(s,m,r,l,Lm,h)}function y0(s,n,r,l,h,p){let m;if(Mu(l,r)!=null)return n;{const w=new Pd(l,n,h),C=n.eventCache.getNode();let S;if(Te(r)||Se(r)===".priority"){let R;if(n.serverCache.isFullyInitialized())R=Ru(l,as(n));else{const k=n.serverCache.getNode();q(k instanceof pe,"serverChildren would be complete if leaf node"),R=xd(l,k)}R=R,S=s.filter.updateFullNode(C,R,p)}else{const R=Se(r);let k=Td(l,R,n.serverCache);k==null&&n.serverCache.isCompleteForChild(R)&&(k=C.getImmediateChild(R)),k!=null?S=s.filter.updateChild(C,R,k,Ve(r),w,p):n.eventCache.getNode().hasChild(R)?S=s.filter.updateChild(C,R,pe.EMPTY_NODE,Ve(r),w,p):S=C,S.isEmpty()&&n.serverCache.isFullyInitialized()&&(m=Ru(l,as(n)),m.isLeafNode()&&(S=s.filter.updateFullNode(S,m,p)))}return m=n.serverCache.isFullyInitialized()||Mu(l,Me())!=null,Ia(n,S,m,s.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(n,r){this.query_=n,this.eventRegistrations_=[];const l=this.query_._queryParams,h=new vd(l.getIndex()),p=Fw(l);this.processor_=d0(p);const m=r.serverCache,w=r.eventCache,C=h.updateFullNode(pe.EMPTY_NODE,m.getNode(),null),S=p.updateFullNode(pe.EMPTY_NODE,w.getNode(),null),R=new os(C,m.isFullyInitialized(),h.filtersNodes()),k=new os(S,w.isFullyInitialized(),p.filtersNodes());this.viewCache_=Uu(k,R),this.eventGenerator_=new Vw(this.query_)}get query(){return this.query_}}function C0(s){return s.viewCache_.serverCache.getNode()}function S0(s,n){const r=as(s.viewCache_);return r&&(s.query._queryParams.loadsAllData()||!Te(n)&&!r.getImmediateChild(Se(n)).isEmpty())?r.getChild(n):null}function __(s){return s.eventRegistrations_.length===0}function E0(s,n){s.eventRegistrations_.push(n)}function m_(s,n,r){const l=[];if(r){q(n==null,"A cancel should cancel all event registrations.");const h=s.query._path;s.eventRegistrations_.forEach(p=>{const m=p.createCancelEvent(r,h);m&&l.push(m)})}if(n){let h=[];for(let p=0;p<s.eventRegistrations_.length;++p){const m=s.eventRegistrations_[p];if(!m.matches(n))h.push(m);else if(n.hasAnyCallback()){h=h.concat(s.eventRegistrations_.slice(p+1));break}}s.eventRegistrations_=h}else s.eventRegistrations_=[];return l}function g_(s,n,r,l){n.type===Bn.MERGE&&n.source.queryId!==null&&(q(as(s.viewCache_),"We should always have a full cache before handling merges"),q(Kh(s.viewCache_),"Missing event cache, even though we have a server cache"));const h=s.viewCache_,p=p0(s.processor_,h,n,r,l);return f0(s.processor_,p.viewCache),q(p.viewCache.serverCache.isFullyInitialized()||!h.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=p.viewCache,Nm(s,p.changes,p.viewCache.eventCache.getNode(),null)}function x0(s,n){const r=s.viewCache_.eventCache,l=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(st,(p,m)=>{l.push(uo(p,m))}),r.isFullyInitialized()&&l.push(wm(r.getNode())),Nm(s,l,r.getNode(),n)}function Nm(s,n,r,l){const h=l?[l]:s.eventRegistrations_;return $w(s.eventGenerator_,n,r,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au;class T0{constructor(){this.views=new Map}}function P0(s){q(!Au,"__referenceConstructor has already been defined"),Au=s}function k0(){return q(Au,"Reference.ts has not been loaded"),Au}function L0(s){return s.views.size===0}function kd(s,n,r,l){const h=n.source.queryId;if(h!==null){const p=s.views.get(h);return q(p!=null,"SyncTree gave us an op for an invalid query."),g_(p,n,r,l)}else{let p=[];for(const m of s.views.values())p=p.concat(g_(m,n,r,l));return p}}function I0(s,n,r,l,h){const p=n._queryIdentifier,m=s.views.get(p);if(!m){let w=Ru(r,h?l:null),C=!1;w?C=!0:l instanceof pe?(w=xd(r,l),C=!1):(w=pe.EMPTY_NODE,C=!1);const S=Uu(new os(w,C,!1),new os(l,h,!1));return new w0(n,S)}return m}function N0(s,n,r,l,h,p){const m=I0(s,n,l,h,p);return s.views.has(n._queryIdentifier)||s.views.set(n._queryIdentifier,m),E0(m,r),x0(m,r)}function R0(s,n,r,l){const h=n._queryIdentifier,p=[];let m=[];const w=Sr(s);if(h==="default")for(const[C,S]of s.views.entries())m=m.concat(m_(S,r,l)),__(S)&&(s.views.delete(C),S.query._queryParams.loadsAllData()||p.push(S.query));else{const C=s.views.get(h);C&&(m=m.concat(m_(C,r,l)),__(C)&&(s.views.delete(h),C.query._queryParams.loadsAllData()||p.push(C.query)))}return w&&!Sr(s)&&p.push(new(k0())(n._repo,n._path)),{removed:p,events:m}}function Rm(s){const n=[];for(const r of s.views.values())r.query._queryParams.loadsAllData()||n.push(r);return n}function oo(s,n){let r=null;for(const l of s.views.values())r=r||S0(l,n);return r}function Mm(s,n){if(n._queryParams.loadsAllData())return Hu(s);{const l=n._queryIdentifier;return s.views.get(l)}}function Om(s,n){return Mm(s,n)!=null}function Sr(s){return Hu(s)!=null}function Hu(s){for(const n of s.views.values())if(n.query._queryParams.loadsAllData())return n;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du;function M0(s){q(!Du,"__referenceConstructor has already been defined"),Du=s}function O0(){return q(Du,"Reference.ts has not been loaded"),Du}let A0=1;class v_{constructor(n){this.listenProvider_=n,this.syncPointTree_=new Ze(null),this.pendingWriteTree_=l0(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Am(s,n,r,l,h){return Yw(s.pendingWriteTree_,n,r,l,h),h?go(s,new ss(wd(),n,r)):[]}function D0(s,n,r,l){Qw(s.pendingWriteTree_,n,r,l);const h=Ze.fromObject(r);return go(s,new co(wd(),n,h))}function gr(s,n,r=!1){const l=Xw(s.pendingWriteTree_,n);if(Jw(s.pendingWriteTree_,n)){let p=new Ze(null);return l.snap!=null?p=p.set(Me(),!0):It(l.children,m=>{p=p.set(new Be(m),!0)}),go(s,new Nu(l.path,p,r))}else return[]}function Zu(s,n,r){return go(s,new ss(Cd(),n,r))}function b0(s,n,r){const l=Ze.fromObject(r);return go(s,new co(Cd(),n,l))}function z0(s,n){return go(s,new Wa(Cd(),n))}function F0(s,n,r){const l=Id(s,r);if(l){const h=Nd(l),p=h.path,m=h.queryId,w=en(p,n),C=new Wa(Sd(m),w);return Rd(s,p,C)}else return[]}function td(s,n,r,l,h=!1){const p=n._path,m=s.syncPointTree_.get(p);let w=[];if(m&&(n._queryIdentifier==="default"||Om(m,n))){const C=R0(m,n,r,l);L0(m)&&(s.syncPointTree_=s.syncPointTree_.remove(p));const S=C.removed;if(w=C.events,!h){const R=S.findIndex(N=>N._queryParams.loadsAllData())!==-1,k=s.syncPointTree_.findOnPath(p,(N,Z)=>Sr(Z));if(R&&!k){const N=s.syncPointTree_.subtree(p);if(!N.isEmpty()){const Z=U0(N);for(let Y=0;Y<Z.length;++Y){const K=Z[Y],oe=K.query,Le=zm(s,K);s.listenProvider_.startListening(Ra(oe),bu(s,oe),Le.hashFn,Le.onComplete)}}}!k&&S.length>0&&!l&&(R?s.listenProvider_.stopListening(Ra(n),null):S.forEach(N=>{const Z=s.queryToTagMap.get(ju(N));s.listenProvider_.stopListening(Ra(N),Z)}))}H0(s,S)}return w}function B0(s,n,r,l){const h=Id(s,l);if(h!=null){const p=Nd(h),m=p.path,w=p.queryId,C=en(m,n),S=new ss(Sd(w),C,r);return Rd(s,m,S)}else return[]}function W0(s,n,r,l){const h=Id(s,l);if(h){const p=Nd(h),m=p.path,w=p.queryId,C=en(m,n),S=Ze.fromObject(r),R=new co(Sd(w),C,S);return Rd(s,m,R)}else return[]}function y_(s,n,r,l=!1){const h=n._path;let p=null,m=!1;s.syncPointTree_.foreachOnPath(h,(N,Z)=>{const Y=en(N,h);p=p||oo(Z,Y),m=m||Sr(Z)});let w=s.syncPointTree_.get(h);w?(m=m||Sr(w),p=p||oo(w,Me())):(w=new T0,s.syncPointTree_=s.syncPointTree_.set(h,w));let C;p!=null?C=!0:(C=!1,p=pe.EMPTY_NODE,s.syncPointTree_.subtree(h).foreachChild((Z,Y)=>{const K=oo(Y,Me());K&&(p=p.updateImmediateChild(Z,K))}));const S=Om(w,n);if(!S&&!n._queryParams.loadsAllData()){const N=ju(n);q(!s.queryToTagMap.has(N),"View does not exist, but we have a tag");const Z=Z0();s.queryToTagMap.set(N,Z),s.tagToQueryMap.set(Z,N)}const R=Ed(s.pendingWriteTree_,h);let k=N0(w,n,r,R,p,C);if(!S&&!m&&!l){const N=Mm(w,n);k=k.concat(j0(s,n,N))}return k}function Ld(s,n,r){const h=s.pendingWriteTree_,p=s.syncPointTree_.findOnPath(n,(m,w)=>{const C=en(m,n),S=oo(w,C);if(S)return S});return Tm(h,n,p,r,!0)}function go(s,n){return Dm(n,s.syncPointTree_,null,Ed(s.pendingWriteTree_,Me()))}function Dm(s,n,r,l){if(Te(s.path))return bm(s,n,r,l);{const h=n.get(Me());r==null&&h!=null&&(r=oo(h,Me()));let p=[];const m=Se(s.path),w=s.operationForChild(m),C=n.children.get(m);if(C&&w){const S=r?r.getImmediateChild(m):null,R=Pm(l,m);p=p.concat(Dm(w,C,S,R))}return h&&(p=p.concat(kd(h,s,l,r))),p}}function bm(s,n,r,l){const h=n.get(Me());r==null&&h!=null&&(r=oo(h,Me()));let p=[];return n.children.inorderTraversal((m,w)=>{const C=r?r.getImmediateChild(m):null,S=Pm(l,m),R=s.operationForChild(m);R&&(p=p.concat(bm(R,w,C,S)))}),h&&(p=p.concat(kd(h,s,l,r))),p}function zm(s,n){const r=n.query,l=bu(s,r);return{hashFn:()=>(C0(n)||pe.EMPTY_NODE).hash(),onComplete:h=>{if(h==="ok")return l?F0(s,r._path,l):z0(s,r._path);{const p=by(h,r);return td(s,r,null,p)}}}}function bu(s,n){const r=ju(n);return s.queryToTagMap.get(r)}function ju(s){return s._path.toString()+"$"+s._queryIdentifier}function Id(s,n){return s.tagToQueryMap.get(n)}function Nd(s){const n=s.indexOf("$");return q(n!==-1&&n<s.length-1,"Bad queryKey."),{queryId:s.substr(n+1),path:new Be(s.substr(0,n))}}function Rd(s,n,r){const l=s.syncPointTree_.get(n);q(l,"Missing sync point for query tag that we're tracking");const h=Ed(s.pendingWriteTree_,n);return kd(l,r,h,null)}function U0(s){return s.fold((n,r,l)=>{if(r&&Sr(r))return[Hu(r)];{let h=[];return r&&(h=Rm(r)),It(l,(p,m)=>{h=h.concat(m)}),h}})}function Ra(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(O0())(s._repo,s._path):s}function H0(s,n){for(let r=0;r<n.length;++r){const l=n[r];if(!l._queryParams.loadsAllData()){const h=ju(l),p=s.queryToTagMap.get(h);s.queryToTagMap.delete(h),s.tagToQueryMap.delete(p)}}}function Z0(){return A0++}function j0(s,n,r){const l=n._path,h=bu(s,n),p=zm(s,r),m=s.listenProvider_.startListening(Ra(n),h,p.hashFn,p.onComplete),w=s.syncPointTree_.subtree(l);if(h)q(!Sr(w.value),"If we're adding a query, it shouldn't be shadowed");else{const C=w.fold((S,R,k)=>{if(!Te(S)&&R&&Sr(R))return[Hu(R).query];{let N=[];return R&&(N=N.concat(Rm(R).map(Z=>Z.query))),It(k,(Z,Y)=>{N=N.concat(Y)}),N}});for(let S=0;S<C.length;++S){const R=C[S];s.listenProvider_.stopListening(Ra(R),bu(s,R))}}return m}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(n){this.node_=n}getImmediateChild(n){const r=this.node_.getImmediateChild(n);return new Md(r)}node(){return this.node_}}class Od{constructor(n,r){this.syncTree_=n,this.path_=r}getImmediateChild(n){const r=rt(this.path_,n);return new Od(this.syncTree_,r)}node(){return Ld(this.syncTree_,this.path_)}}const V0=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},w_=function(s,n,r){if(!s||typeof s!="object")return s;if(q(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return $0(s[".sv"],n,r);if(typeof s[".sv"]=="object")return G0(s[".sv"],n);q(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},$0=function(s,n,r){switch(s){case"timestamp":return r.timestamp;default:q(!1,"Unexpected server value: "+s)}},G0=function(s,n,r){s.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const l=s.increment;typeof l!="number"&&q(!1,"Unexpected increment value: "+l);const h=n.node();if(q(h!==null&&typeof h<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!h.isLeafNode())return l;const m=h.getValue();return typeof m!="number"?l:m+l},Fm=function(s,n,r,l){return Ad(n,new Od(r,s),l)},Bm=function(s,n,r){return Ad(s,new Md(n),r)};function Ad(s,n,r){const l=s.getPriority().val(),h=w_(l,n.getImmediateChild(".priority"),r);let p;if(s.isLeafNode()){const m=s,w=w_(m.getValue(),n,r);return w!==m.getValue()||h!==m.getPriority().val()?new yt(w,Ct(h)):s}else{const m=s;return p=m,h!==m.getPriority().val()&&(p=p.updatePriority(new yt(h))),m.forEachChild(st,(w,C)=>{const S=Ad(C,n.getImmediateChild(w),r);S!==C&&(p=p.updateImmediateChild(w,S))}),p}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(n="",r=null,l={children:{},childCount:0}){this.name=n,this.parent=r,this.node=l}}function bd(s,n){let r=n instanceof Be?n:new Be(n),l=s,h=Se(r);for(;h!==null;){const p=ao(l.node.children,h)||{children:{},childCount:0};l=new Dd(h,l,p),r=Ve(r),h=Se(r)}return l}function vo(s){return s.node.value}function Wm(s,n){s.node.value=n,nd(s)}function Um(s){return s.node.childCount>0}function q0(s){return vo(s)===void 0&&!Um(s)}function Vu(s,n){It(s.node.children,(r,l)=>{n(new Dd(r,s,l))})}function Hm(s,n,r,l){r&&n(s),Vu(s,h=>{Hm(h,n,!0)})}function K0(s,n,r){let l=s.parent;for(;l!==null;){if(n(l))return!0;l=l.parent}return!1}function Ga(s){return new Be(s.parent===null?s.name:Ga(s.parent)+"/"+s.name)}function nd(s){s.parent!==null&&Y0(s.parent,s.name,s)}function Y0(s,n,r){const l=q0(r),h=ri(s.node.children,n);l&&h?(delete s.node.children[n],s.node.childCount--,nd(s)):!l&&!h&&(s.node.children[n]=r.node,s.node.childCount++,nd(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=/[\[\].#$\/\u0000-\u001F\u007F]/,X0=/[\[\].#$\u0000-\u001F\u007F]/,Dh=10*1024*1024,zd=function(s){return typeof s=="string"&&s.length!==0&&!Q0.test(s)},Zm=function(s){return typeof s=="string"&&s.length!==0&&!X0.test(s)},J0=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Zm(s)},eC=function(s){return s===null||typeof s=="string"||typeof s=="number"&&!ud(s)||s&&typeof s=="object"&&ri(s,".sv")},jm=function(s,n,r,l){l&&n===void 0||$u(Fu(s,"value"),n,r)},$u=function(s,n,r){const l=r instanceof Be?new mw(r,s):r;if(n===void 0)throw new Error(s+"contains undefined "+ns(l));if(typeof n=="function")throw new Error(s+"contains a function "+ns(l)+" with contents = "+n.toString());if(ud(n))throw new Error(s+"contains "+n.toString()+" "+ns(l));if(typeof n=="string"&&n.length>Dh/3&&Bu(n)>Dh)throw new Error(s+"contains a string greater than "+Dh+" utf8 bytes "+ns(l)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let h=!1,p=!1;if(It(n,(m,w)=>{if(m===".value")h=!0;else if(m!==".priority"&&m!==".sv"&&(p=!0,!zd(m)))throw new Error(s+" contains an invalid key ("+m+") "+ns(l)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);gw(l,m),$u(s,w,l),vw(l)}),h&&p)throw new Error(s+' contains ".value" child '+ns(l)+" in addition to actual children.")}},tC=function(s,n){let r,l;for(r=0;r<n.length;r++){l=n[r];const p=ba(l);for(let m=0;m<p.length;m++)if(!(p[m]===".priority"&&m===p.length-1)){if(!zd(p[m]))throw new Error(s+"contains an invalid key ("+p[m]+") in path "+l.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}n.sort(_w);let h=null;for(r=0;r<n.length;r++){if(l=n[r],h!==null&&kn(h,l))throw new Error(s+"contains a path "+h.toString()+" that is ancestor of another path "+l.toString());h=l}},nC=function(s,n,r,l){const h=Fu(s,"values");if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(h+" must be an object containing the children to replace.");const p=[];It(n,(m,w)=>{const C=new Be(m);if($u(h,w,rt(r,C)),pd(C)===".priority"&&!eC(w))throw new Error(h+"contains an invalid value for '"+C.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");p.push(C)}),tC(h,p)},Vm=function(s,n,r,l){if(!Zm(r))throw new Error(Fu(s,n)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},iC=function(s,n,r,l){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Vm(s,n,r)},$m=function(s,n){if(Se(n)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},rC=function(s,n){const r=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!zd(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!J0(r))throw new Error(Fu(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Gu(s,n){let r=null;for(let l=0;l<n.length;l++){const h=n[l],p=h.getPath();r!==null&&!_d(p,r.path)&&(s.eventLists_.push(r),r=null),r===null&&(r={events:[],path:p}),r.events.push(h)}r&&s.eventLists_.push(r)}function Gm(s,n,r){Gu(s,r),qm(s,l=>_d(l,n))}function Un(s,n,r){Gu(s,r),qm(s,l=>kn(l,n)||kn(n,l))}function qm(s,n){s.recursionDepth_++;let r=!0;for(let l=0;l<s.eventLists_.length;l++){const h=s.eventLists_[l];if(h){const p=h.path;n(p)?(oC(s.eventLists_[l]),s.eventLists_[l]=null):r=!1}}r&&(s.eventLists_=[]),s.recursionDepth_--}function oC(s){for(let n=0;n<s.events.length;n++){const r=s.events[n];if(r!==null){s.events[n]=null;const l=r.getEventRunner();ka&&Lt("event: "+r.toString()),mo(l)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="repo_interrupt",lC=25;class uC{constructor(n,r,l,h){this.repoInfo_=n,this.forceRestClient_=r,this.authTokenProvider_=l,this.appCheckProvider_=h,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Iu(),this.transactionQueueTree_=new Dd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cC(s,n,r){if(s.stats_=dd(s.repoInfo_),s.forceRestClient_||Wy())s.server_=new Lu(s.repoInfo_,(l,h,p,m)=>{C_(s,l,h,p,m)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>S_(s,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{St(r)}catch(l){throw new Error("Invalid authOverride provided: "+l)}}s.persistentConnection_=new Ii(s.repoInfo_,n,(l,h,p,m)=>{C_(s,l,h,p,m)},l=>{S_(s,l)},l=>{hC(s,l)},s.authTokenProvider_,s.appCheckProvider_,r),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(l=>{s.server_.refreshAuthToken(l)}),s.appCheckProvider_.addTokenChangeListener(l=>{s.server_.refreshAppCheckToken(l.token)}),s.statsReporter_=Vy(s.repoInfo_,()=>new jw(s.stats_,s.server_)),s.infoData_=new Bw,s.infoSyncTree_=new v_({startListening:(l,h,p,m)=>{let w=[];const C=s.infoData_.getNode(l._path);return C.isEmpty()||(w=Zu(s.infoSyncTree_,l._path,C),setTimeout(()=>{m("ok")},0)),w},stopListening:()=>{}}),Fd(s,"connected",!1),s.serverSyncTree_=new v_({startListening:(l,h,p,m)=>(s.server_.listen(l,p,h,(w,C)=>{const S=m(w,C);Un(s.eventQueue_,l._path,S)}),[]),stopListening:(l,h)=>{s.server_.unlisten(l,h)}})}function Km(s){const r=s.infoData_.getNode(new Be(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function qu(s){return V0({timestamp:Km(s)})}function C_(s,n,r,l,h){s.dataUpdateCount++;const p=new Be(n);r=s.interceptServerDataCallback_?s.interceptServerDataCallback_(n,r):r;let m=[];if(h)if(l){const C=Su(r,S=>Ct(S));m=W0(s.serverSyncTree_,p,C,h)}else{const C=Ct(r);m=B0(s.serverSyncTree_,p,C,h)}else if(l){const C=Su(r,S=>Ct(S));m=b0(s.serverSyncTree_,p,C)}else{const C=Ct(r);m=Zu(s.serverSyncTree_,p,C)}let w=p;m.length>0&&(w=fo(s,p)),Un(s.eventQueue_,w,m)}function S_(s,n){Fd(s,"connected",n),n===!1&&pC(s)}function hC(s,n){It(n,(r,l)=>{Fd(s,r,l)})}function Fd(s,n,r){const l=new Be("/.info/"+n),h=Ct(r);s.infoData_.updateSnapshot(l,h);const p=Zu(s.infoSyncTree_,l,h);Un(s.eventQueue_,l,p)}function Bd(s){return s.nextWriteId_++}function dC(s,n,r,l,h){Ku(s,"set",{path:n.toString(),value:r,priority:l});const p=qu(s),m=Ct(r,l),w=Ld(s.serverSyncTree_,n),C=Bm(m,w,p),S=Bd(s),R=Am(s.serverSyncTree_,n,C,S,!0);Gu(s.eventQueue_,R),s.server_.put(n.toString(),m.val(!0),(N,Z)=>{const Y=N==="ok";Y||jt("set at "+n+" failed: "+N);const K=gr(s.serverSyncTree_,S,!Y);Un(s.eventQueue_,n,K),id(s,h,N,Z)});const k=Ud(s,n);fo(s,k),Un(s.eventQueue_,k,[])}function fC(s,n,r,l){Ku(s,"update",{path:n.toString(),value:r});let h=!0;const p=qu(s),m={};if(It(r,(w,C)=>{h=!1,m[w]=Fm(rt(n,w),Ct(C),s.serverSyncTree_,p)}),h)Lt("update() called with empty data.  Don't do anything."),id(s,l,"ok",void 0);else{const w=Bd(s),C=D0(s.serverSyncTree_,n,m,w);Gu(s.eventQueue_,C),s.server_.merge(n.toString(),r,(S,R)=>{const k=S==="ok";k||jt("update at "+n+" failed: "+S);const N=gr(s.serverSyncTree_,w,!k),Z=N.length>0?fo(s,n):n;Un(s.eventQueue_,Z,N),id(s,l,S,R)}),It(r,S=>{const R=Ud(s,rt(n,S));fo(s,R)}),Un(s.eventQueue_,n,[])}}function pC(s){Ku(s,"onDisconnectEvents");const n=qu(s),r=Iu();qh(s.onDisconnect_,Me(),(h,p)=>{const m=Fm(h,p,s.serverSyncTree_,n);Cm(r,h,m)});let l=[];qh(r,Me(),(h,p)=>{l=l.concat(Zu(s.serverSyncTree_,h,p));const m=Ud(s,h);fo(s,m)}),s.onDisconnect_=Iu(),Un(s.eventQueue_,Me(),l)}function _C(s,n,r){let l;Se(n._path)===".info"?l=y_(s.infoSyncTree_,n,r):l=y_(s.serverSyncTree_,n,r),Gm(s.eventQueue_,n._path,l)}function mC(s,n,r){let l;Se(n._path)===".info"?l=td(s.infoSyncTree_,n,r):l=td(s.serverSyncTree_,n,r),Gm(s.eventQueue_,n._path,l)}function gC(s){s.persistentConnection_&&s.persistentConnection_.interrupt(aC)}function Ku(s,...n){let r="";s.persistentConnection_&&(r=s.persistentConnection_.id+":"),Lt(r,...n)}function id(s,n,r,l){n&&mo(()=>{if(r==="ok")n(null);else{const h=(r||"error").toUpperCase();let p=h;l&&(p+=": "+l);const m=new Error(p);m.code=h,n(m)}})}function Ym(s,n,r){return Ld(s.serverSyncTree_,n,r)||pe.EMPTY_NODE}function Wd(s,n=s.transactionQueueTree_){if(n||Yu(s,n),vo(n)){const r=Xm(s,n);q(r.length>0,"Sending zero length transaction queue"),r.every(h=>h.status===0)&&vC(s,Ga(n),r)}else Um(n)&&Vu(n,r=>{Wd(s,r)})}function vC(s,n,r){const l=r.map(S=>S.currentWriteId),h=Ym(s,n,l);let p=h;const m=h.hash();for(let S=0;S<r.length;S++){const R=r[S];q(R.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),R.status=1,R.retryCount++;const k=en(n,R.path);p=p.updateChild(k,R.currentOutputSnapshotRaw)}const w=p.val(!0),C=n;s.server_.put(C.toString(),w,S=>{Ku(s,"transaction put response",{path:C.toString(),status:S});let R=[];if(S==="ok"){const k=[];for(let N=0;N<r.length;N++)r[N].status=2,R=R.concat(gr(s.serverSyncTree_,r[N].currentWriteId)),r[N].onComplete&&k.push(()=>r[N].onComplete(null,!0,r[N].currentOutputSnapshotResolved)),r[N].unwatcher();Yu(s,bd(s.transactionQueueTree_,n)),Wd(s,s.transactionQueueTree_),Un(s.eventQueue_,n,R);for(let N=0;N<k.length;N++)mo(k[N])}else{if(S==="datastale")for(let k=0;k<r.length;k++)r[k].status===3?r[k].status=4:r[k].status=0;else{jt("transaction at "+C.toString()+" failed: "+S);for(let k=0;k<r.length;k++)r[k].status=4,r[k].abortReason=S}fo(s,n)}},m)}function fo(s,n){const r=Qm(s,n),l=Ga(r),h=Xm(s,r);return yC(s,h,l),l}function yC(s,n,r){if(n.length===0)return;const l=[];let h=[];const m=n.filter(w=>w.status===0).map(w=>w.currentWriteId);for(let w=0;w<n.length;w++){const C=n[w],S=en(r,C.path);let R=!1,k;if(q(S!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),C.status===4)R=!0,k=C.abortReason,h=h.concat(gr(s.serverSyncTree_,C.currentWriteId,!0));else if(C.status===0)if(C.retryCount>=lC)R=!0,k="maxretry",h=h.concat(gr(s.serverSyncTree_,C.currentWriteId,!0));else{const N=Ym(s,C.path,m);C.currentInputSnapshot=N;const Z=n[w].update(N.val());if(Z!==void 0){$u("transaction failed: Data returned ",Z,C.path);let Y=Ct(Z);typeof Z=="object"&&Z!=null&&ri(Z,".priority")||(Y=Y.updatePriority(N.getPriority()));const oe=C.currentWriteId,Le=qu(s),De=Bm(Y,N,Le);C.currentOutputSnapshotRaw=Y,C.currentOutputSnapshotResolved=De,C.currentWriteId=Bd(s),m.splice(m.indexOf(oe),1),h=h.concat(Am(s.serverSyncTree_,C.path,De,C.currentWriteId,C.applyLocally)),h=h.concat(gr(s.serverSyncTree_,oe,!0))}else R=!0,k="nodata",h=h.concat(gr(s.serverSyncTree_,C.currentWriteId,!0))}Un(s.eventQueue_,r,h),h=[],R&&(n[w].status=2,function(N){setTimeout(N,Math.floor(0))}(n[w].unwatcher),n[w].onComplete&&(k==="nodata"?l.push(()=>n[w].onComplete(null,!1,n[w].currentInputSnapshot)):l.push(()=>n[w].onComplete(new Error(k),!1,null))))}Yu(s,s.transactionQueueTree_);for(let w=0;w<l.length;w++)mo(l[w]);Wd(s,s.transactionQueueTree_)}function Qm(s,n){let r,l=s.transactionQueueTree_;for(r=Se(n);r!==null&&vo(l)===void 0;)l=bd(l,r),n=Ve(n),r=Se(n);return l}function Xm(s,n){const r=[];return Jm(s,n,r),r.sort((l,h)=>l.order-h.order),r}function Jm(s,n,r){const l=vo(n);if(l)for(let h=0;h<l.length;h++)r.push(l[h]);Vu(n,h=>{Jm(s,h,r)})}function Yu(s,n){const r=vo(n);if(r){let l=0;for(let h=0;h<r.length;h++)r[h].status!==2&&(r[l]=r[h],l++);r.length=l,Wm(n,r.length>0?r:void 0)}Vu(n,l=>{Yu(s,l)})}function Ud(s,n){const r=Ga(Qm(s,n)),l=bd(s.transactionQueueTree_,n);return K0(l,h=>{bh(s,h)}),bh(s,l),Hm(l,h=>{bh(s,h)}),r}function bh(s,n){const r=vo(n);if(r){const l=[];let h=[],p=-1;for(let m=0;m<r.length;m++)r[m].status===3||(r[m].status===1?(q(p===m-1,"All SENT items should be at beginning of queue."),p=m,r[m].status=3,r[m].abortReason="set"):(q(r[m].status===0,"Unexpected transaction status in abort"),r[m].unwatcher(),h=h.concat(gr(s.serverSyncTree_,r[m].currentWriteId,!0)),r[m].onComplete&&l.push(r[m].onComplete.bind(null,new Error("set"),!1,null))));p===-1?Wm(n,void 0):r.length=p+1,Un(s.eventQueue_,Ga(n),h);for(let m=0;m<l.length;m++)mo(l[m])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(s){let n="";const r=s.split("/");for(let l=0;l<r.length;l++)if(r[l].length>0){let h=r[l];try{h=decodeURIComponent(h.replace(/\+/g," "))}catch{}n+="/"+h}return n}function CC(s){const n={};s.charAt(0)==="?"&&(s=s.substring(1));for(const r of s.split("&")){if(r.length===0)continue;const l=r.split("=");l.length===2?n[decodeURIComponent(l[0])]=decodeURIComponent(l[1]):jt(`Invalid query segment '${r}' in query '${s}'`)}return n}const E_=function(s,n){const r=SC(s),l=r.namespace;r.domain==="firebase.com"&&Ri(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!l||l==="undefined")&&r.domain!=="localhost"&&Ri("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||Ry();const h=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new rm(r.host,r.secure,l,h,n,"",l!==r.subdomain),path:new Be(r.pathString)}},SC=function(s){let n="",r="",l="",h="",p="",m=!0,w="https",C=443;if(typeof s=="string"){let S=s.indexOf("//");S>=0&&(w=s.substring(0,S-1),s=s.substring(S+2));let R=s.indexOf("/");R===-1&&(R=s.length);let k=s.indexOf("?");k===-1&&(k=s.length),n=s.substring(0,Math.min(R,k)),R<k&&(h=wC(s.substring(R,k)));const N=CC(s.substring(Math.min(s.length,k)));S=n.indexOf(":"),S>=0?(m=w==="https"||w==="wss",C=parseInt(n.substring(S+1),10)):S=n.length;const Z=n.slice(0,S);if(Z.toLowerCase()==="localhost")r="localhost";else if(Z.split(".").length<=2)r=Z;else{const Y=n.indexOf(".");l=n.substring(0,Y).toLowerCase(),r=n.substring(Y+1),p=l}"ns"in N&&(p=N.ns)}return{host:n,port:C,domain:r,subdomain:l,secure:m,scheme:w,pathString:h,namespace:p}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",EC=function(){let s=0;const n=[];return function(r){const l=r===s;s=r;let h;const p=new Array(8);for(h=7;h>=0;h--)p[h]=x_.charAt(r%64),r=Math.floor(r/64);q(r===0,"Cannot push at time == 0");let m=p.join("");if(l){for(h=11;h>=0&&n[h]===63;h--)n[h]=0;n[h]++}else for(h=0;h<12;h++)n[h]=Math.floor(Math.random()*64);for(h=0;h<12;h++)m+=x_.charAt(n[h]);return q(m.length===20,"nextPushId: Length should be 20."),m}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(n,r,l,h){this.eventType=n,this.eventRegistration=r,this.snapshot=l,this.prevName=h}getPath(){const n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+St(this.snapshot.exportVal())}}class TC{constructor(n,r,l){this.eventRegistration=n,this.error=r,this.path=l}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(n,r){this.snapshotCallback=n,this.cancelCallback=r}onValue(n,r){this.snapshotCallback.call(null,n,r)}onCancel(n){return q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(n,r,l,h){this._repo=n,this._path=r,this._queryParams=l,this._orderByCalled=h}get key(){return Te(this._path)?null:pd(this._path)}get ref(){return new Er(this._repo,this._path)}get _queryIdentifier(){const n=l_(this._queryParams),r=cd(n);return r==="{}"?"default":r}get _queryObject(){return l_(this._queryParams)}isEqual(n){if(n=_o(n),!(n instanceof Hd))return!1;const r=this._repo===n._repo,l=_d(this._path,n._path),h=this._queryIdentifier===n._queryIdentifier;return r&&l&&h}toJSON(){return this.toString()}toString(){return this._repo.toString()+pw(this._path)}}class Er extends Hd{constructor(n,r){super(n,r,new yd,!1)}get parent(){const n=fm(this._path);return n===null?null:new Er(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}}class zu{constructor(n,r,l){this._node=n,this.ref=r,this._index=l}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const r=new Be(n),l=Ua(this.ref,n);return new zu(this._node.getChild(r),l,st)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(l,h)=>n(new zu(h,Ua(this.ref,l),st)))}hasChild(n){const r=new Be(n);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ti(s,n){return s=_o(s),s._checkNotDeleted("ref"),n!==void 0?Ua(s._root,n):s._root}function Ua(s,n){return s=_o(s),Se(s._path)===null?iC("child","path",n):Vm("child","path",n),new Er(s._repo,rt(s._path,n))}function kC(s,n){s=_o(s),$m("push",s._path),jm("push",n,s._path,!0);const r=Km(s._repo),l=EC(r),h=Ua(s,l),p=Ua(s,l);let m;return m=Promise.resolve(p),h.then=m.then.bind(m),h.catch=m.then.bind(m,void 0),h}function LC(s,n){s=_o(s),$m("set",s._path),jm("set",n,s._path,!1);const r=new Ha;return dC(s._repo,s._path,n,null,r.wrapCallback(()=>{})),r.promise}function yu(s,n){nC("update",n,s._path);const r=new Ha;return fC(s._repo,s._path,n,r.wrapCallback(()=>{})),r.promise}class Zd{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,r){const l=r._queryParams.getIndex();return new xC("value",this,new zu(n.snapshotNode,new Er(r._repo,r._path),l))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,r){return this.callbackContext.hasCancelCallback?new TC(this,n,r):null}matches(n){return n instanceof Zd?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function IC(s,n,r,l,h){const p=new PC(r,void 0),m=new Zd(p);return _C(s._repo,s,m),()=>mC(s._repo,s,m)}function Ta(s,n,r,l){return IC(s,"value",n)}P0(Er);M0(Er);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="FIREBASE_DATABASE_EMULATOR_HOST",rd={};let RC=!1;function MC(s,n,r,l){s.repoInfo_=new rm(`${n}:${r}`,!1,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0),l&&(s.authTokenProvider_=l)}function OC(s,n,r,l,h){let p=l||s.options.databaseURL;p===void 0&&(s.options.projectId||Ri("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Lt("Using default host for project ",s.options.projectId),p=`${s.options.projectId}-default-rtdb.firebaseio.com`);let m=E_(p,h),w=m.repoInfo,C;typeof process<"u"&&jp&&(C=jp[NC]),C?(p=`http://${C}?ns=${w.namespace}`,m=E_(p,h),w=m.repoInfo):m.repoInfo.secure;const S=new Hy(s.name,s.options,n);rC("Invalid Firebase Database URL",m),Te(m.path)||Ri("Database URL must point to the root of a Firebase Database (not including a child path).");const R=DC(w,s,S,new Uy(s.name,r));return new bC(R,s)}function AC(s,n){const r=rd[n];(!r||r[s.key]!==s)&&Ri(`Database ${n}(${s.repoInfo_}) has already been deleted.`),gC(s),delete r[s.key]}function DC(s,n,r,l){let h=rd[n.name];h||(h={},rd[n.name]=h);let p=h[s.toURLString()];return p&&Ri("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),p=new uC(s,RC,r,l),h[s.toURLString()]=p,p}class bC{constructor(n,r){this._repoInternal=n,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(cC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Er(this._repo,Me())),this._rootInternal}_delete(){return this._rootInternal!==null&&(AC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&Ri("Cannot call "+n+" on a deleted database.")}}function zC(s=_y(),n){const r=hy(s,"database").getImmediate({identifier:n});if(!r._instanceStarted){const l=ev("database");l&&FC(r,...l)}return r}function FC(s,n,r,l={}){s=_o(s),s._checkNotDeleted("useEmulator"),s._instanceStarted&&Ri("Cannot call useEmulator() after instance has already been initialized.");const h=s._repoInternal;let p;if(h.repoInfo_.nodeAdmin)l.mockUserToken&&Ri('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),p=new wu(wu.OWNER);else if(l.mockUserToken){const m=typeof l.mockUserToken=="string"?l.mockUserToken:tv(l.mockUserToken,s.app.options.projectId);p=new wu(m)}MC(h,n,r,p)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(s){Ty(py),xu(new Oa("database",(n,{instanceIdentifier:r})=>{const l=n.getProvider("app").getImmediate(),h=n.getProvider("auth-internal"),p=n.getProvider("app-check-internal");return OC(l,h,p,r)},"PUBLIC").setMultipleInstances(!0)),io(Vp,$p,s),io(Vp,$p,"esm2017")}Ii.prototype.simpleListen=function(s,n){this.sendRequest("q",{p:s},n)};Ii.prototype.echo=function(s,n){this.sendRequest("echo",{d:s},n)};BC();var WC="firebase",UC="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */io(WC,UC,"app");const HC="AIzaSyAeTblY8O6XxWYrRfRl0Ar1TE-uOzPbF0M",ZC="nightline-dce44.firebaseapp.com",jC=void 0,VC="nightline-dce44",$C="nightline-dce44.firebasestorage.app",GC="610185897381",qC="1:610185897381:web:753908ea29d825a6e9344c",KC="G-EFV275663B",YC={apiKey:HC,authDomain:ZC,databaseURL:jC,projectId:VC,storageBucket:$C,messagingSenderId:GC,appId:qC,measurementId:KC},QC=U_(YC),ni=zC(QC),XC=({items:s})=>le.jsx("div",{className:`
        w-screen
        bg-[#111]
        text-yellow-400
        whitespace-nowrap
        overflow-hidden
        box-border
        px-4
        py-2
        mb-2
      `,children:le.jsx("div",{className:`
          inline-block
          pl-[100%]
          animate-news-ticker
        `,children:s.map((n,r)=>le.jsx("span",{className:`
              inline-block
              mr-40
              font-bold
            `,children:n},r))})});function JC(s,n){const r=ye.useRef(n);ye.useEffect(function(){n!==r.current&&s.attributionControl!=null&&(r.current!=null&&s.attributionControl.removeAttribution(r.current),n!=null&&s.attributionControl.addAttribution(n)),r.current=n},[s,n])}L_();const eS=1;function tS(s){return Object.freeze({__version:eS,map:s})}const eg=ye.createContext(null),nS=eg.Provider;function tg(){const s=ye.useContext(eg);if(s==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return s}function iS(s){function n(r,l){const{instance:h}=s(r).current;return ye.useImperativeHandle(l,()=>h),null}return ye.forwardRef(n)}function rS(s,n){const r=ye.useRef();ye.useEffect(function(){return n!=null&&s.instance.on(n),r.current=n,function(){r.current!=null&&s.instance.off(r.current),r.current=null}},[s,n])}function ng(s,n){const r=s.pane??n.pane;return r?{...s,pane:r}:s}var Pa={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var sS=Pa.exports,T_;function oS(){return T_||(T_=1,function(s,n){(function(r,l){l(n)})(sS,function(r){var l="1.9.4";function h(t){var o,u,d,g;for(u=1,d=arguments.length;u<d;u++){g=arguments[u];for(o in g)t[o]=g[o]}return t}var p=Object.create||function(){function t(){}return function(o){return t.prototype=o,new t}}();function m(t,o){var u=Array.prototype.slice;if(t.bind)return t.bind.apply(t,u.call(arguments,1));var d=u.call(arguments,2);return function(){return t.apply(o,d.length?d.concat(u.call(arguments)):arguments)}}var w=0;function C(t){return"_leaflet_id"in t||(t._leaflet_id=++w),t._leaflet_id}function S(t,o,u){var d,g,y,x;return x=function(){d=!1,g&&(y.apply(u,g),g=!1)},y=function(){d?g=arguments:(t.apply(u,arguments),setTimeout(x,o),d=!0)},y}function R(t,o,u){var d=o[1],g=o[0],y=d-g;return t===d&&u?t:((t-g)%y+y)%y+g}function k(){return!1}function N(t,o){if(o===!1)return t;var u=Math.pow(10,o===void 0?6:o);return Math.round(t*u)/u}function Z(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return Z(t).split(/\s+/)}function K(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?p(t.options):{});for(var u in o)t.options[u]=o[u];return t.options}function oe(t,o,u){var d=[];for(var g in t)d.push(encodeURIComponent(u?g.toUpperCase():g)+"="+encodeURIComponent(t[g]));return(!o||o.indexOf("?")===-1?"?":"&")+d.join("&")}var Le=/\{ *([\w_ -]+) *\}/g;function De(t,o){return t.replace(Le,function(u,d){var g=o[d];if(g===void 0)throw new Error("No value provided for variable "+u);return typeof g=="function"&&(g=g(o)),g})}var Re=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function be(t,o){for(var u=0;u<t.length;u++)if(t[u]===o)return u;return-1}var lt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ot(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var ht=0;function Et(t){var o=+new Date,u=Math.max(0,16-(o-ht));return ht=o+u,window.setTimeout(t,u)}var Ft=window.requestAnimationFrame||ot("RequestAnimationFrame")||Et,Vt=window.cancelAnimationFrame||ot("CancelAnimationFrame")||ot("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Ke(t,o,u){if(u&&Ft===Et)t.call(o);else return Ft.call(window,m(t,o))}function $e(t){t&&Vt.call(window,t)}var xt={__proto__:null,extend:h,create:p,bind:m,get lastId(){return w},stamp:C,throttle:S,wrapNum:R,falseFn:k,formatNum:N,trim:Z,splitWords:Y,setOptions:K,getParamString:oe,template:De,isArray:Re,indexOf:be,emptyImageUrl:lt,requestFn:Ft,cancelFn:Vt,requestAnimFrame:Ke,cancelAnimFrame:$e};function Qe(){}Qe.extend=function(t){var o=function(){K(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,d=p(u);d.constructor=o,o.prototype=d;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(o[g]=this[g]);return t.statics&&h(o,t.statics),t.includes&&(nn(t.includes),h.apply(null,[d].concat(t.includes))),h(d,t),delete d.statics,delete d.includes,d.options&&(d.options=u.options?p(u.options):{},h(d.options,t.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,x=d._initHooks.length;y<x;y++)d._initHooks[y].call(this)}},o},Qe.include=function(t){var o=this.prototype.options;return h(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},Qe.mergeOptions=function(t){return h(this.prototype.options,t),this},Qe.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),u=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function nn(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=Re(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Oe={on:function(t,o,u){if(typeof t=="object")for(var d in t)this._on(d,t[d],o);else{t=Y(t);for(var g=0,y=t.length;g<y;g++)this._on(t[g],o,u)}return this},off:function(t,o,u){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var d in t)this._off(d,t[d],o);else{t=Y(t);for(var g=arguments.length===1,y=0,x=t.length;y<x;y++)g?this._off(t[y]):this._off(t[y],o,u)}return this},_on:function(t,o,u,d){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,u)===!1){u===this&&(u=void 0);var g={fn:o,ctx:u};d&&(g.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(g)}},_off:function(t,o,u){var d,g,y;if(this._events&&(d=this._events[t],!!d)){if(arguments.length===1){if(this._firingCount)for(g=0,y=d.length;g<y;g++)d[g].fn=k;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var x=this._listens(t,o,u);if(x!==!1){var M=d[x];this._firingCount&&(M.fn=k,this._events[t]=d=d.slice()),d.splice(x,1)}}},fire:function(t,o,u){if(!this.listens(t,u))return this;var d=h({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var g=this._events[t];if(g){this._firingCount=this._firingCount+1||1;for(var y=0,x=g.length;y<x;y++){var M=g[y],b=M.fn;M.once&&this.off(t,b,M.ctx),b.call(M.ctx||this,d)}this._firingCount--}}return u&&this._propagateEvent(d),this},listens:function(t,o,u,d){typeof t!="string"&&console.warn('"string" type argument expected');var g=o;typeof o!="function"&&(d=!!o,g=void 0,u=void 0);var y=this._events&&this._events[t];if(y&&y.length&&this._listens(t,g,u)!==!1)return!0;if(d){for(var x in this._eventParents)if(this._eventParents[x].listens(t,o,u,d))return!0}return!1},_listens:function(t,o,u){if(!this._events)return!1;var d=this._events[t]||[];if(!o)return!!d.length;u===this&&(u=void 0);for(var g=0,y=d.length;g<y;g++)if(d[g].fn===o&&d[g].ctx===u)return g;return!1},once:function(t,o,u){if(typeof t=="object")for(var d in t)this._on(d,t[d],o,!0);else{t=Y(t);for(var g=0,y=t.length;g<y;g++)this._on(t[g],o,u,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[C(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[C(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,h({layer:t.target,propagatedFrom:t.target},t),!0)}};Oe.addEventListener=Oe.on,Oe.removeEventListener=Oe.clearAllEventListeners=Oe.off,Oe.addOneTimeEventListener=Oe.once,Oe.fireEvent=Oe.fire,Oe.hasEventListeners=Oe.listens;var V=Qe.extend(Oe);function D(t,o,u){this.x=u?Math.round(t):t,this.y=u?Math.round(o):o}var G=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};D.prototype={clone:function(){return new D(this.x,this.y)},add:function(t){return this.clone()._add(F(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(F(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new D(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new D(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=G(this.x),this.y=G(this.y),this},distanceTo:function(t){t=F(t);var o=t.x-this.x,u=t.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(t){return t=F(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=F(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function F(t,o,u){return t instanceof D?t:Re(t)?new D(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new D(t.x,t.y):new D(t,o,u)}function P(t,o){if(t)for(var u=o?[t,o]:t,d=0,g=u.length;d<g;d++)this.extend(u[d])}P.prototype={extend:function(t){var o,u;if(!t)return this;if(t instanceof D||typeof t[0]=="number"||"x"in t)o=u=F(t);else if(t=B(t),o=t.min,u=t.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(t){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,u;return typeof t[0]=="number"||t instanceof D?t=F(t):t=B(t),t instanceof P?(o=t.min,u=t.max):o=u=t,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(t){t=B(t);var o=this.min,u=this.max,d=t.min,g=t.max,y=g.x>=o.x&&d.x<=u.x,x=g.y>=o.y&&d.y<=u.y;return y&&x},overlaps:function(t){t=B(t);var o=this.min,u=this.max,d=t.min,g=t.max,y=g.x>o.x&&d.x<u.x,x=g.y>o.y&&d.y<u.y;return y&&x},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,u=this.max,d=Math.abs(o.x-u.x)*t,g=Math.abs(o.y-u.y)*t;return B(F(o.x-d,o.y-g),F(u.x+d,u.y+g))},equals:function(t){return t?(t=B(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function B(t,o){return!t||t instanceof P?t:new P(t,o)}function ue(t,o){if(t)for(var u=o?[t,o]:t,d=0,g=u.length;d<g;d++)this.extend(u[d])}ue.prototype={extend:function(t){var o=this._southWest,u=this._northEast,d,g;if(t instanceof ie)d=t,g=t;else if(t instanceof ue){if(d=t._southWest,g=t._northEast,!d||!g)return this}else return t?this.extend(J(t)||ae(t)):this;return!o&&!u?(this._southWest=new ie(d.lat,d.lng),this._northEast=new ie(g.lat,g.lng)):(o.lat=Math.min(d.lat,o.lat),o.lng=Math.min(d.lng,o.lng),u.lat=Math.max(g.lat,u.lat),u.lng=Math.max(g.lng,u.lng)),this},pad:function(t){var o=this._southWest,u=this._northEast,d=Math.abs(o.lat-u.lat)*t,g=Math.abs(o.lng-u.lng)*t;return new ue(new ie(o.lat-d,o.lng-g),new ie(u.lat+d,u.lng+g))},getCenter:function(){return new ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ie||"lat"in t?t=J(t):t=ae(t);var o=this._southWest,u=this._northEast,d,g;return t instanceof ue?(d=t.getSouthWest(),g=t.getNorthEast()):d=g=t,d.lat>=o.lat&&g.lat<=u.lat&&d.lng>=o.lng&&g.lng<=u.lng},intersects:function(t){t=ae(t);var o=this._southWest,u=this._northEast,d=t.getSouthWest(),g=t.getNorthEast(),y=g.lat>=o.lat&&d.lat<=u.lat,x=g.lng>=o.lng&&d.lng<=u.lng;return y&&x},overlaps:function(t){t=ae(t);var o=this._southWest,u=this._northEast,d=t.getSouthWest(),g=t.getNorthEast(),y=g.lat>o.lat&&d.lat<u.lat,x=g.lng>o.lng&&d.lng<u.lng;return y&&x},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=ae(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ae(t,o){return t instanceof ue?t:new ue(t,o)}function ie(t,o,u){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,u!==void 0&&(this.alt=+u)}ie.prototype={equals:function(t,o){if(!t)return!1;t=J(t);var u=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return u<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+N(this.lat,t)+", "+N(this.lng,t)+")"},distanceTo:function(t){return we.distance(this,J(t))},wrap:function(){return we.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,u=o/Math.cos(Math.PI/180*this.lat);return ae([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new ie(this.lat,this.lng,this.alt)}};function J(t,o,u){return t instanceof ie?t:Re(t)&&typeof t[0]!="object"?t.length===3?new ie(t[0],t[1],t[2]):t.length===2?new ie(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ie(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new ie(t,o,u)}var Pe={latLngToPoint:function(t,o){var u=this.projection.project(t),d=this.scale(o);return this.transformation._transform(u,d)},pointToLatLng:function(t,o){var u=this.scale(o),d=this.transformation.untransform(t,u);return this.projection.unproject(d)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(t),d=this.transformation.transform(o.min,u),g=this.transformation.transform(o.max,u);return new P(d,g)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?R(t.lng,this.wrapLng,!0):t.lng,u=this.wrapLat?R(t.lat,this.wrapLat,!0):t.lat,d=t.alt;return new ie(u,o,d)},wrapLatLngBounds:function(t){var o=t.getCenter(),u=this.wrapLatLng(o),d=o.lat-u.lat,g=o.lng-u.lng;if(d===0&&g===0)return t;var y=t.getSouthWest(),x=t.getNorthEast(),M=new ie(y.lat-d,y.lng-g),b=new ie(x.lat-d,x.lng-g);return new ue(M,b)}},we=h({},Pe,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var u=Math.PI/180,d=t.lat*u,g=o.lat*u,y=Math.sin((o.lat-t.lat)*u/2),x=Math.sin((o.lng-t.lng)*u/2),M=y*y+Math.cos(d)*Math.cos(g)*x*x,b=2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M));return this.R*b}}),We=6378137,Tt={R:We,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,u=this.MAX_LATITUDE,d=Math.max(Math.min(u,t.lat),-u),g=Math.sin(d*o);return new D(this.R*t.lng*o,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(t){var o=180/Math.PI;return new ie((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:function(){var t=We*Math.PI;return new P([-t,-t],[t,t])}()};function Mi(t,o,u,d){if(Re(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=u,this._d=d}Mi.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new D((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function Oi(t,o,u,d){return new Mi(t,o,u,d)}var Ai=h({},we,{code:"EPSG:3857",projection:Tt,transformation:function(){var t=.5/(Math.PI*Tt.R);return Oi(t,.5,-t,.5)}()}),yo=h({},Ai,{code:"EPSG:900913"});function wo(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Co(t,o){var u="",d,g,y,x,M,b;for(d=0,y=t.length;d<y;d++){for(M=t[d],g=0,x=M.length;g<x;g++)b=M[g],u+=(g?"L":"M")+b.x+" "+b.y;u+=o?re.svg?"z":"x":""}return u||"M0 0"}var xr=document.documentElement.style,Tr="ActiveXObject"in window,So=Tr&&!document.addEventListener,Di="msLaunchUri"in navigator&&!("documentMode"in document),Hn=Nt("webkit"),cs=Nt("android"),Eo=Nt("android 2")||Nt("android 3"),qa=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ka=cs&&Nt("Google")&&qa<537&&!("AudioNode"in window),hs=!!window.opera,ds=!Di&&Nt("chrome"),Pr=Nt("gecko")&&!Hn&&!hs&&!Tr,Ya=!ds&&Nt("safari"),bi=Nt("phantom"),zi="OTransition"in xr,Qu=navigator.platform.indexOf("Win")===0,xo=Tr&&"transition"in xr,fs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Eo,Qa="MozPerspective"in xr,To=!window.L_DISABLE_3D&&(xo||fs||Qa)&&!zi&&!bi,si=typeof orientation<"u"||Nt("mobile"),Po=si&&Hn,ko=si&&fs,ps=!window.PointerEvent&&window.MSPointerEvent,oi=!!(window.PointerEvent||ps),ai="ontouchstart"in window||!!window.TouchEvent,Xa=!window.L_NO_TOUCH&&(ai||oi),Ja=si&&hs,el=si&&Pr,tl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,nl=function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",k,o),window.removeEventListener("testPassiveEventSupport",k,o)}catch{}return t}(),Lo=function(){return!!document.createElement("canvas").getContext}(),_s=!!(document.createElementNS&&wo("svg").createSVGRect),kr=!!_s&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Io=!_s&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Lr=navigator.platform.indexOf("Mac")===0,Xu=navigator.platform.indexOf("Linux")===0;function Nt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var re={ie:Tr,ielt9:So,edge:Di,webkit:Hn,android:cs,android23:Eo,androidStock:Ka,opera:hs,chrome:ds,gecko:Pr,safari:Ya,phantom:bi,opera12:zi,win:Qu,ie3d:xo,webkit3d:fs,gecko3d:Qa,any3d:To,mobile:si,mobileWebkit:Po,mobileWebkit3d:ko,msPointer:ps,pointer:oi,touch:Xa,touchNative:ai,mobileOpera:Ja,mobileGecko:el,retina:tl,passiveEvents:nl,canvas:Lo,svg:_s,vml:Io,inlineSvg:kr,mac:Lr,linux:Xu},Ir=re.msPointer?"MSPointerDown":"pointerdown",ms=re.msPointer?"MSPointerMove":"pointermove",il=re.msPointer?"MSPointerUp":"pointerup",rl=re.msPointer?"MSPointerCancel":"pointercancel",No={touchstart:Ir,touchmove:ms,touchend:il,touchcancel:rl},Zn={touchstart:Xe,touchmove:gs,touchend:gs,touchcancel:gs},li={},Ro=!1;function Ju(t,o,u){return o==="touchstart"&&ec(),Zn[o]?(u=Zn[o].bind(this,u),t.addEventListener(No[o],u,!1),u):(console.warn("wrong event specified:",o),k)}function sl(t,o,u){if(!No[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(No[o],u,!1)}function ol(t){li[t.pointerId]=t}function al(t){li[t.pointerId]&&(li[t.pointerId]=t)}function Mo(t){delete li[t.pointerId]}function ec(){Ro||(document.addEventListener(Ir,ol,!0),document.addEventListener(ms,al,!0),document.addEventListener(il,Mo,!0),document.addEventListener(rl,Mo,!0),Ro=!0)}function gs(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in li)o.touches.push(li[u]);o.changedTouches=[o],t(o)}}function Xe(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Je(o),gs(t,o)}function tc(t){var o={},u,d;for(d in t)u=t[d],o[d]=u&&u.bind?u.bind(t):u;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Oo=200;function ll(t,o){t.addEventListener("dblclick",o);var u=0,d;function g(y){if(y.detail!==1){d=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var x=hi(y);if(!(x.some(function(b){return b instanceof HTMLLabelElement&&b.attributes.for})&&!x.some(function(b){return b instanceof HTMLInputElement||b instanceof HTMLSelectElement}))){var M=Date.now();M-u<=Oo?(d++,d===2&&o(tc(y))):d=1,u=M}}}return t.addEventListener("click",g),{dblclick:o,simDblclick:g}}function vs(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var Ao=Ui(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Fi=Ui(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Nr=Fi==="webkitTransition"||Fi==="OTransition"?Fi+"End":"transitionend";function rn(t){return typeof t=="string"?document.getElementById(t):t}function Rr(t,o){var u=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(t,null);u=d?d[o]:null}return u==="auto"?null:u}function ge(t,o,u){var d=document.createElement(t);return d.className=o||"",u&&u.appendChild(d),d}function Ge(t){var o=t.parentNode;o&&o.removeChild(t)}function ys(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Bi(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function Ln(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function Wi(t,o){if(t.classList!==void 0)return t.classList.contains(o);var u=ws(t);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function me(t,o){if(t.classList!==void 0)for(var u=Y(o),d=0,g=u.length;d<g;d++)t.classList.add(u[d]);else if(!Wi(t,o)){var y=ws(t);Do(t,(y?y+" ":"")+o)}}function Ue(t,o){t.classList!==void 0?t.classList.remove(o):Do(t,Z((" "+ws(t)+" ").replace(" "+o+" "," ")))}function Do(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function ws(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Rt(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&ul(t,o)}function ul(t,o){var u=!1,d="DXImageTransform.Microsoft.Alpha";try{u=t.filters.item(d)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):t.style.filter+=" progid:"+d+"(opacity="+o+")"}function Ui(t){for(var o=document.documentElement.style,u=0;u<t.length;u++)if(t[u]in o)return t[u];return!1}function sn(t,o,u){var d=o||new D(0,0);t.style[Ao]=(re.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(u?" scale("+u+")":"")}function nt(t,o){t._leaflet_pos=o,re.any3d?sn(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function In(t){return t._leaflet_pos||new D(0,0)}var ke,Hi,Cs;if("onselectstart"in document)ke=function(){fe(window,"selectstart",Je)},Hi=function(){ze(window,"selectstart",Je)};else{var ui=Ui(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ke=function(){if(ui){var t=document.documentElement.style;Cs=t[ui],t[ui]="none"}},Hi=function(){ui&&(document.documentElement.style[ui]=Cs,Cs=void 0)}}function Ss(){fe(window,"dragstart",Je)}function Es(){ze(window,"dragstart",Je)}var Mr,Or;function Zi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(on(),Mr=t,Or=t.style.outlineStyle,t.style.outlineStyle="none",fe(window,"keydown",on))}function on(){Mr&&(Mr.style.outlineStyle=Or,Mr=void 0,Or=void 0,ze(window,"keydown",on))}function Nn(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function _n(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var Ar={__proto__:null,TRANSFORM:Ao,TRANSITION:Fi,TRANSITION_END:Nr,get:rn,getStyle:Rr,create:ge,remove:Ge,empty:ys,toFront:Bi,toBack:Ln,hasClass:Wi,addClass:me,removeClass:Ue,setClass:Do,getClass:ws,setOpacity:Rt,testProp:Ui,setTransform:sn,setPosition:nt,getPosition:In,get disableTextSelection(){return ke},get enableTextSelection(){return Hi},disableImageDrag:Ss,enableImageDrag:Es,preventOutline:Zi,restoreOutline:on,getSizedParentNode:Nn,getScale:_n};function fe(t,o,u,d){if(o&&typeof o=="object")for(var g in o)zo(t,g,o[g],u);else{o=Y(o);for(var y=0,x=o.length;y<x;y++)zo(t,o[y],u,d)}return this}var dt="_leaflet_events";function ze(t,o,u,d){if(arguments.length===1)bo(t),delete t[dt];else if(o&&typeof o=="object")for(var g in o)xs(t,g,o[g],u);else if(o=Y(o),arguments.length===2)bo(t,function(M){return be(o,M)!==-1});else for(var y=0,x=o.length;y<x;y++)xs(t,o[y],u,d);return this}function bo(t,o){for(var u in t[dt]){var d=u.split(/\d/)[0];(!o||o(d))&&xs(t,d,null,null,u)}}var ci={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function zo(t,o,u,d){var g=o+C(u)+(d?"_"+C(d):"");if(t[dt]&&t[dt][g])return this;var y=function(M){return u.call(d||t,M||window.event)},x=y;!re.touchNative&&re.pointer&&o.indexOf("touch")===0?y=Ju(t,o,y):re.touch&&o==="dblclick"?y=ll(t,y):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(ci[o]||o,y,re.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(y=function(M){M=M||window.event,zr(t,M)&&x(M)},t.addEventListener(ci[o],y,!1)):t.addEventListener(o,x,!1):t.attachEvent("on"+o,y),t[dt]=t[dt]||{},t[dt][g]=y}function xs(t,o,u,d,g){g=g||o+C(u)+(d?"_"+C(d):"");var y=t[dt]&&t[dt][g];if(!y)return this;!re.touchNative&&re.pointer&&o.indexOf("touch")===0?sl(t,o,y):re.touch&&o==="dblclick"?vs(t,y):"removeEventListener"in t?t.removeEventListener(ci[o]||o,y,!1):t.detachEvent("on"+o,y),t[dt][g]=null}function mn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Ts(t){return zo(t,"wheel",mn),this}function Dr(t){return fe(t,"mousedown touchstart dblclick contextmenu",mn),t._leaflet_disable_click=!0,this}function Je(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function an(t){return Je(t),mn(t),this}function hi(t){if(t.composedPath)return t.composedPath();for(var o=[],u=t.target;u;)o.push(u),u=u.parentNode;return o}function br(t,o){if(!o)return new D(t.clientX,t.clientY);var u=_n(o),d=u.boundingClientRect;return new D((t.clientX-d.left)/u.x-o.clientLeft,(t.clientY-d.top)/u.y-o.clientTop)}var nc=re.linux&&re.chrome?window.devicePixelRatio:re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function cl(t){return re.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/nc:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function zr(t,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==t;)u=u.parentNode}catch{return!1}return u!==t}var Ps={__proto__:null,on:fe,off:ze,stopPropagation:mn,disableScrollPropagation:Ts,disableClickPropagation:Dr,preventDefault:Je,stop:an,getPropagationPath:hi,getMousePosition:br,getWheelDelta:cl,isExternalTarget:zr,addListener:fe,removeListener:ze},ks=V.extend({run:function(t,o,u,d){this.stop(),this._el=t,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=In(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Ke(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var u=this._startPos.add(this._offset.multiplyBy(t));o&&u._round(),nt(this._el,u),this.fire("step")},_complete:function(){$e(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),xe=V.extend({options:{crs:Ai,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=K(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(J(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Fi&&re.any3d&&!re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),fe(this._proxy,Nr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(J(t),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=h({animate:u.animate},u.zoom),u.pan=h({animate:u.animate,duration:u.duration},u.pan));var d=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,u.zoom):this._tryAnimatedPan(t,u.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,u){var d=this.getZoomScale(o),g=this.getSize().divideBy(2),y=t instanceof D?t:this.latLngToContainerPoint(t),x=y.subtract(g).multiplyBy(1-1/d),M=this.containerPointToLatLng(g.add(x));return this.setView(M,o,{zoom:u})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():ae(t);var u=F(o.paddingTopLeft||o.padding||[0,0]),d=F(o.paddingBottomRight||o.padding||[0,0]),g=this.getBoundsZoom(t,!1,u.add(d));if(g=typeof o.maxZoom=="number"?Math.min(o.maxZoom,g):g,g===1/0)return{center:t.getCenter(),zoom:g};var y=d.subtract(u).divideBy(2),x=this.project(t.getSouthWest(),g),M=this.project(t.getNorthEast(),g),b=this.unproject(x.add(M).divideBy(2).add(y),g);return{center:b,zoom:g}},fitBounds:function(t,o){if(t=ae(t),!t.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(t,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=F(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ks,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){me(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,u){if(u=u||{},u.animate===!1||!re.any3d)return this.setView(t,o,u);this._stop();var d=this.project(this.getCenter()),g=this.project(t),y=this.getSize(),x=this._zoom;t=J(t),o=o===void 0?x:o;var M=Math.max(y.x,y.y),b=M*this.getZoomScale(x,o),W=g.distanceTo(d)||1,Q=1.42,ce=Q*Q;function ve(Ae){var rr=Ae?-1:1,mc=Ae?b:M,gc=b*b-M*M+rr*ce*ce*W*W,vi=2*mc*ce*W,yi=gc/vi,wi=Math.sqrt(yi*yi+1)-yi,Us=wi<1e-9?-18:Math.log(wi);return Us}function ft(Ae){return(Math.exp(Ae)-Math.exp(-Ae))/2}function ut(Ae){return(Math.exp(Ae)+Math.exp(-Ae))/2}function Ut(Ae){return ft(Ae)/ut(Ae)}var Ot=ve(0);function nr(Ae){return M*(ut(Ot)/ut(Ot+Q*Ae))}function ra(Ae){return M*(ut(Ot)*Ut(Ot+Q*Ae)-ft(Ot))/ce}function Qn(Ae){return 1-Math.pow(1-Ae,1.5)}var Rl=Date.now(),gi=(ve(1)-Ot)/Q,wn=u.duration?1e3*u.duration:1e3*gi*.8;function ir(){var Ae=(Date.now()-Rl)/wn,rr=Qn(Ae)*gi;Ae<=1?(this._flyToFrame=Ke(ir,this),this._move(this.unproject(d.add(g.subtract(d).multiplyBy(ra(rr)/W)),x),this.getScaleZoom(M/nr(rr),x),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),ir.call(this),this},flyToBounds:function(t,o){var u=this._getBoundsCenterZoom(t,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(t){return t=ae(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var u=this.getCenter(),d=this._limitCenter(u,this._zoom,ae(t));return u.equals(d)||this.panTo(d,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var u=F(o.paddingTopLeft||o.padding||[0,0]),d=F(o.paddingBottomRight||o.padding||[0,0]),g=this.project(this.getCenter()),y=this.project(t),x=this.getPixelBounds(),M=B([x.min.add(u),x.max.subtract(d)]),b=M.getSize();if(!M.contains(y)){this._enforcingBounds=!0;var W=y.subtract(M.getCenter()),Q=M.extend(y).getSize().subtract(b);g.x+=W.x<0?-Q.x:Q.x,g.y+=W.y<0?-Q.y:Q.y,this.panTo(this.unproject(g),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=h({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),d=o.divideBy(2).round(),g=u.divideBy(2).round(),y=d.subtract(g);return!y.x&&!y.y?this:(t.animate&&t.pan?this.panBy(y):(t.pan&&this._rawPanBy(y),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=h({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=m(this._handleGeolocationResponse,this),u=m(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,t):navigator.geolocation.getCurrentPosition(o,u,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,u=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,u=t.coords.longitude,d=new ie(o,u),g=d.toBounds(t.coords.accuracy*2),y=this._locateOptions;if(y.setView){var x=this.getBoundsZoom(g);this.setView(d,y.maxZoom?Math.min(x,y.maxZoom):x)}var M={latlng:d,bounds:g,timestamp:t.timestamp};for(var b in t.coords)typeof t.coords[b]=="number"&&(M[b]=t.coords[b]);this.fire("locationfound",M)}},addHandler:function(t,o){if(!o)return this;var u=this[t]=new o(this);return this._handlers.push(u),this.options[t]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ge(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($e(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Ge(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var u="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),d=ge("div",u,o||this._mapPane);return t&&(this._panes[t]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),u=this.unproject(t.getTopRight());return new ue(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,u){t=ae(t),u=F(u||[0,0]);var d=this.getZoom()||0,g=this.getMinZoom(),y=this.getMaxZoom(),x=t.getNorthWest(),M=t.getSouthEast(),b=this.getSize().subtract(u),W=B(this.project(M,d),this.project(x,d)).getSize(),Q=re.any3d?this.options.zoomSnap:1,ce=b.x/W.x,ve=b.y/W.y,ft=o?Math.max(ce,ve):Math.min(ce,ve);return d=this.getScaleZoom(ft,d),Q&&(d=Math.round(d/(Q/100))*(Q/100),d=o?Math.ceil(d/Q)*Q:Math.floor(d/Q)*Q),Math.max(g,Math.min(y,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var u=this._getTopLeftPoint(t,o);return new P(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(t)/u.scale(o)},getScaleZoom:function(t,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var d=u.zoom(t*u.scale(o));return isNaN(d)?1/0:d},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(J(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(F(t),o)},layerPointToLatLng:function(t){var o=F(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(J(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(J(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ae(t))},distance:function(t,o){return this.options.crs.distance(J(t),J(o))},containerPointToLayerPoint:function(t){return F(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return F(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(F(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(J(t)))},mouseEventToContainerPoint:function(t){return br(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=rn(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");fe(o,"scroll",this._onScroll,this),this._containerId=C(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&re.any3d,me(t,"leaflet-container"+(re.touch?" leaflet-touch":"")+(re.retina?" leaflet-retina":"")+(re.ielt9?" leaflet-oldie":"")+(re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Rr(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),nt(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(me(t.markerPane,"leaflet-zoom-hide"),me(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,u){nt(this._mapPane,new D(0,0));var d=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var g=this._zoom!==o;this._moveStart(g,u)._move(t,o)._moveEnd(g),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,u,d){o===void 0&&(o=this._zoom);var g=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),d?u&&u.pinch&&this.fire("zoom",u):((g||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $e(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){nt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[C(this._container)]=this;var o=t?ze:fe;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),re.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$e(this._resizeRequest),this._resizeRequest=Ke(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var u=[],d,g=o==="mouseout"||o==="mouseover",y=t.target||t.srcElement,x=!1;y;){if(d=this._targets[C(y)],d&&(o==="click"||o==="preclick")&&this._draggableMoved(d)){x=!0;break}if(d&&d.listens(o,!0)&&(g&&!zr(y,t)||(u.push(d),g))||y===this._container)break;y=y.parentNode}return!u.length&&!x&&!g&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var u=t.type;u==="mousedown"&&Zi(o),this._fireDOMEvent(t,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,u){if(t.type==="click"){var d=h({},t);d.type="preclick",this._fireDOMEvent(d,d.type,u)}var g=this._findEventTargets(t,o);if(u){for(var y=[],x=0;x<u.length;x++)u[x].listens(o,!0)&&y.push(u[x]);g=y.concat(g)}if(g.length){o==="contextmenu"&&Je(t);var M=g[0],b={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var W=M.getLatLng&&(!M._radius||M._radius<=10);b.containerPoint=W?this.latLngToContainerPoint(M.getLatLng()):this.mouseEventToContainerPoint(t),b.layerPoint=this.containerPointToLayerPoint(b.containerPoint),b.latlng=W?M.getLatLng():this.layerPointToLatLng(b.layerPoint)}for(x=0;x<g.length;x++)if(g[x].fire(o,b,!0),b.originalEvent._stopped||g[x].options.bubblingMouseEvents===!1&&be(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return In(this._mapPane)||new D(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var u=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var u=this.getSize()._divideBy(2);return this.project(t,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,u){var d=this._getNewPixelOrigin(u,o);return this.project(t,o)._subtract(d)},_latLngBoundsToNewLayerBounds:function(t,o,u){var d=this._getNewPixelOrigin(u,o);return B([this.project(t.getSouthWest(),o)._subtract(d),this.project(t.getNorthWest(),o)._subtract(d),this.project(t.getSouthEast(),o)._subtract(d),this.project(t.getNorthEast(),o)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,u){if(!u)return t;var d=this.project(t,o),g=this.getSize().divideBy(2),y=new P(d.subtract(g),d.add(g)),x=this._getBoundsOffset(y,u,o);return Math.abs(x.x)<=1&&Math.abs(x.y)<=1?t:this.unproject(d.add(x),o)},_limitOffset:function(t,o){if(!o)return t;var u=this.getPixelBounds(),d=new P(u.min.add(t),u.max.add(t));return t.add(this._getBoundsOffset(d,o))},_getBoundsOffset:function(t,o,u){var d=B(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),g=d.min.subtract(t.min),y=d.max.subtract(t.max),x=this._rebound(g.x,-y.x),M=this._rebound(g.y,-y.y);return new D(x,M)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),u=this.getMaxZoom(),d=re.any3d?this.options.zoomSnap:1;return d&&(t=Math.round(t/d)*d),Math.max(o,Math.min(u,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var u=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var t=this._proxy=ge("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var u=Ao,d=this._proxy.style[u];sn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),d===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ge(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();sn(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(o),g=this._getCenterOffset(t)._divideBy(1-1/d);return u.animate!==!0&&!this.getSize().contains(g)?!1:(Ke(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,u,d){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jn(t,o){return new xe(t,o)}var Bt=Qe.extend({options:{position:"topright"},initialize:function(t){K(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),u=this.getPosition(),d=t._controlCorners[u];return me(o,"leaflet-control"),u.indexOf("bottom")!==-1?d.insertBefore(o,d.firstChild):d.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ge(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Vn=function(t){return new Bt(t)};xe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",u=this._controlContainer=ge("div",o+"control-container",this._container);function d(g,y){var x=o+g+" "+o+y;t[g+y]=ge("div",x,u)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ge(this._controlCorners[t]);Ge(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Fo=Bt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,u,d){return u<d?-1:d<u?1:0}},initialize:function(t,o,u){K(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in t)this._addLayer(t[d],d);for(d in o)this._addLayer(o[d],d,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Bt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(C(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=ge("div",t),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Dr(o),Ts(o);var d=this._section=ge("section",t+"-list");u&&(this._map.on("click",this.collapse,this),fe(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=ge("a",t+"-toggle",o);g.href="#",g.title="Layers",g.setAttribute("role","button"),fe(g,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){Je(y),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=ge("div",t+"-base",d),this._separator=ge("div",t+"-separator",d),this._overlaysList=ge("div",t+"-overlays",d),o.appendChild(d)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&C(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,u){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(m(function(d,g){return this.options.sortFunction(d.layer,g.layer,d.name,g.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ys(this._baseLayersList),ys(this._overlaysList),this._layerControlInputs=[];var t,o,u,d,g=0;for(u=0;u<this._layers.length;u++)d=this._layers[u],this._addItem(d),o=o||d.overlay,t=t||!d.overlay,g+=d.overlay?0:1;return this.options.hideSingleBase&&(t=t&&g>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(C(t.target)),u=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(t,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=u,d.firstChild},_addItem:function(t){var o=document.createElement("label"),u=this._map.hasLayer(t.layer),d;t.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=u):d=this._createRadioElement("leaflet-base-layers_"+C(this),u),this._layerControlInputs.push(d),d.layerId=C(t.layer),fe(d,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+t.name;var y=document.createElement("span");o.appendChild(y),y.appendChild(d),y.appendChild(g);var x=t.overlay?this._overlaysList:this._baseLayersList;return x.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,u,d=[],g=[];this._handlingClick=!0;for(var y=t.length-1;y>=0;y--)o=t[y],u=this._getLayer(o.layerId).layer,o.checked?d.push(u):o.checked||g.push(u);for(y=0;y<g.length;y++)this._map.hasLayer(g[y])&&this._map.removeLayer(g[y]);for(y=0;y<d.length;y++)this._map.hasLayer(d[y])||this._map.addLayer(d[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,u,d=this._map.getZoom(),g=t.length-1;g>=0;g--)o=t[g],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&d<u.options.minZoom||u.options.maxZoom!==void 0&&d>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,fe(t,"click",Je),this.expand();var o=this;setTimeout(function(){ze(t,"click",Je),o._preventClick=!1})}}),Ls=function(t,o,u){return new Fo(t,o,u)},ji=Bt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",u=ge("div",o+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,u,d,g){var y=ge("a",u,d);return y.innerHTML=t,y.href="#",y.title=o,y.setAttribute("role","button"),y.setAttribute("aria-label",o),Dr(y),fe(y,"click",an),fe(y,"click",g,this),fe(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";Ue(this._zoomInButton,o),Ue(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(me(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(me(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});xe.mergeOptions({zoomControl:!0}),xe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ji,this.addControl(this.zoomControl))});var hl=function(t){return new ji(t)},Mt=Bt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",u=ge("div",o),d=this.options;return this._addScales(d,o+"-line",u),t.on(d.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),u},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,u){t.metric&&(this._mScale=ge("div",o,u)),t.imperial&&(this._iScale=ge("div",o,u))},_update:function(){var t=this._map,o=t.getSize().y/2,u=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/t)},_updateImperial:function(t){var o=t*3.2808399,u,d,g;o>5280?(u=o/5280,d=this._getRoundNum(u),this._updateScale(this._iScale,d+" mi",d/u)):(g=this._getRoundNum(o),this._updateScale(this._iScale,g+" ft",g/o))},_updateScale:function(t,o,u){t.style.width=Math.round(this.options.maxWidth*u)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),u=t/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),Vi=function(t){return new Mt(t)},Bo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',di=Bt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(re.inlineSvg?Bo+" ":"")+"Leaflet</a>"},initialize:function(t){K(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ge("div","leaflet-control-attribution"),Dr(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),t.length&&u.push(t.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});xe.mergeOptions({attributionControl:!0}),xe.addInitHook(function(){this.options.attributionControl&&new di().addTo(this)});var ic=function(t){return new di(t)};Bt.Layers=Fo,Bt.Zoom=ji,Bt.Scale=Mt,Bt.Attribution=di,Vn.layers=Ls,Vn.zoom=hl,Vn.scale=Vi,Vn.attribution=ic;var $t=Qe.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});$t.addTo=function(t,o){return t.addHandler(o,this),this};var Wo={Events:Oe},$i=re.touch?"touchstart mousedown":"mousedown",ln=V.extend({options:{clickTolerance:3},initialize:function(t,o,u,d){K(this,d),this._element=t,this._dragStartTarget=o||t,this._preventOutline=u},enable:function(){this._enabled||(fe(this._dragStartTarget,$i,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ln._dragging===this&&this.finishDrag(!0),ze(this._dragStartTarget,$i,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Wi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){ln._dragging===this&&this.finishDrag();return}if(!(ln._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ln._dragging=this,this._preventOutline&&Zi(this._element),Ss(),ke(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,u=Nn(this._element);this._startPoint=new D(o.clientX,o.clientY),this._startPos=In(this._element),this._parentScale=_n(u);var d=t.type==="mousedown";fe(document,d?"mousemove":"touchmove",this._onMove,this),fe(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,u=new D(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Je(t),this._moved||(this.fire("dragstart"),this._moved=!0,me(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),nt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Ue(document.body,"leaflet-dragging"),this._lastTarget&&(Ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ze(document,"mousemove touchmove",this._onMove,this),ze(document,"mouseup touchend touchcancel",this._onUp,this),Es(),Hi();var o=this._moved&&this._moving;this._moving=!1,ln._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Uo(t,o,u){var d,g=[1,4,2,8],y,x,M,b,W,Q,ce,ve;for(y=0,Q=t.length;y<Q;y++)t[y]._code=fi(t[y],o);for(M=0;M<4;M++){for(ce=g[M],d=[],y=0,Q=t.length,x=Q-1;y<Q;x=y++)b=t[y],W=t[x],b._code&ce?W._code&ce||(ve=Ns(W,b,ce,o,u),ve._code=fi(ve,o),d.push(ve)):(W._code&ce&&(ve=Ns(W,b,ce,o,u),ve._code=fi(ve,o),d.push(ve)),d.push(b));t=d}return t}function dl(t,o){var u,d,g,y,x,M,b,W,Q;if(!t||t.length===0)throw new Error("latlngs not passed");Gt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var ce=J([0,0]),ve=ae(t),ft=ve.getNorthWest().distanceTo(ve.getSouthWest())*ve.getNorthEast().distanceTo(ve.getNorthWest());ft<1700&&(ce=Ho(t));var ut=t.length,Ut=[];for(u=0;u<ut;u++){var Ot=J(t[u]);Ut.push(o.project(J([Ot.lat-ce.lat,Ot.lng-ce.lng])))}for(M=b=W=0,u=0,d=ut-1;u<ut;d=u++)g=Ut[u],y=Ut[d],x=g.y*y.x-y.y*g.x,b+=(g.x+y.x)*x,W+=(g.y+y.y)*x,M+=x*3;M===0?Q=Ut[0]:Q=[b/M,W/M];var nr=o.unproject(F(Q));return J([nr.lat+ce.lat,nr.lng+ce.lng])}function Ho(t){for(var o=0,u=0,d=0,g=0;g<t.length;g++){var y=J(t[g]);o+=y.lat,u+=y.lng,d++}return J([o/d,u/d])}var rc={__proto__:null,clipPolygon:Uo,polygonCenter:dl,centroid:Ho};function Is(t,o){if(!o||!t.length)return t.slice();var u=o*o;return t=ac(t,u),t=oc(t,u),t}function fl(t,o,u){return Math.sqrt(pi(t,o,u,!0))}function sc(t,o,u){return pi(t,o,u)}function oc(t,o){var u=t.length,d=typeof Uint8Array<"u"?Uint8Array:Array,g=new d(u);g[0]=g[u-1]=1,Zo(t,g,o,0,u-1);var y,x=[];for(y=0;y<u;y++)g[y]&&x.push(t[y]);return x}function Zo(t,o,u,d,g){var y=0,x,M,b;for(M=d+1;M<=g-1;M++)b=pi(t[M],t[d],t[g],!0),b>y&&(x=M,y=b);y>u&&(o[x]=1,Zo(t,o,u,d,x),Zo(t,o,u,x,g))}function ac(t,o){for(var u=[t[0]],d=1,g=0,y=t.length;d<y;d++)lc(t[d],t[g])>o&&(u.push(t[d]),g=d);return g<y-1&&u.push(t[y-1]),u}var jo;function pl(t,o,u,d,g){var y=d?jo:fi(t,u),x=fi(o,u),M,b,W;for(jo=x;;){if(!(y|x))return[t,o];if(y&x)return!1;M=y||x,b=Ns(t,o,M,u,g),W=fi(b,u),M===y?(t=b,y=W):(o=b,x=W)}}function Ns(t,o,u,d,g){var y=o.x-t.x,x=o.y-t.y,M=d.min,b=d.max,W,Q;return u&8?(W=t.x+y*(b.y-t.y)/x,Q=b.y):u&4?(W=t.x+y*(M.y-t.y)/x,Q=M.y):u&2?(W=b.x,Q=t.y+x*(b.x-t.x)/y):u&1&&(W=M.x,Q=t.y+x*(M.x-t.x)/y),new D(W,Q,g)}function fi(t,o){var u=0;return t.x<o.min.x?u|=1:t.x>o.max.x&&(u|=2),t.y<o.min.y?u|=4:t.y>o.max.y&&(u|=8),u}function lc(t,o){var u=o.x-t.x,d=o.y-t.y;return u*u+d*d}function pi(t,o,u,d){var g=o.x,y=o.y,x=u.x-g,M=u.y-y,b=x*x+M*M,W;return b>0&&(W=((t.x-g)*x+(t.y-y)*M)/b,W>1?(g=u.x,y=u.y):W>0&&(g+=x*W,y+=M*W)),x=t.x-g,M=t.y-y,d?x*x+M*M:new D(g,y)}function Gt(t){return!Re(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function _l(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Gt(t)}function ml(t,o){var u,d,g,y,x,M,b,W;if(!t||t.length===0)throw new Error("latlngs not passed");Gt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Q=J([0,0]),ce=ae(t),ve=ce.getNorthWest().distanceTo(ce.getSouthWest())*ce.getNorthEast().distanceTo(ce.getNorthWest());ve<1700&&(Q=Ho(t));var ft=t.length,ut=[];for(u=0;u<ft;u++){var Ut=J(t[u]);ut.push(o.project(J([Ut.lat-Q.lat,Ut.lng-Q.lng])))}for(u=0,d=0;u<ft-1;u++)d+=ut[u].distanceTo(ut[u+1])/2;if(d===0)W=ut[0];else for(u=0,y=0;u<ft-1;u++)if(x=ut[u],M=ut[u+1],g=x.distanceTo(M),y+=g,y>d){b=(y-d)/g,W=[M.x-b*(M.x-x.x),M.y-b*(M.y-x.y)];break}var Ot=o.unproject(F(W));return J([Ot.lat+Q.lat,Ot.lng+Q.lng])}var gl={__proto__:null,simplify:Is,pointToSegmentDistance:fl,closestPointOnSegment:sc,clipSegment:pl,_getEdgeIntersection:Ns,_getBitCode:fi,_sqClosestPointOnSegment:pi,isFlat:Gt,_flat:_l,polylineCenter:ml},Vo={project:function(t){return new D(t.lng,t.lat)},unproject:function(t){return new ie(t.y,t.x)},bounds:new P([-180,-90],[180,90])},$o={R:6378137,R_MINOR:6356752314245179e-9,bounds:new P([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,u=this.R,d=t.lat*o,g=this.R_MINOR/u,y=Math.sqrt(1-g*g),x=y*Math.sin(d),M=Math.tan(Math.PI/4-d/2)/Math.pow((1-x)/(1+x),y/2);return d=-u*Math.log(Math.max(M,1e-10)),new D(t.lng*o*u,d)},unproject:function(t){for(var o=180/Math.PI,u=this.R,d=this.R_MINOR/u,g=Math.sqrt(1-d*d),y=Math.exp(-t.y/u),x=Math.PI/2-2*Math.atan(y),M=0,b=.1,W;M<15&&Math.abs(b)>1e-7;M++)W=g*Math.sin(x),W=Math.pow((1-W)/(1+W),g/2),b=Math.PI/2-2*Math.atan(y*W)-x,x+=b;return new ie(x*o,t.x*o/u)}},uc={__proto__:null,LonLat:Vo,Mercator:$o,SphericalMercator:Tt},cc=h({},we,{code:"EPSG:3395",projection:$o,transformation:function(){var t=.5/(Math.PI*$o.R);return Oi(t,.5,-t,.5)}()}),vl=h({},we,{code:"EPSG:4326",projection:Vo,transformation:Oi(1/180,1,-1/180,.5)}),hc=h({},Pe,{projection:Vo,transformation:Oi(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var u=o.lng-t.lng,d=o.lat-t.lat;return Math.sqrt(u*u+d*d)},infinite:!0});Pe.Earth=we,Pe.EPSG3395=cc,Pe.EPSG3857=Ai,Pe.EPSG900913=yo,Pe.EPSG4326=vl,Pe.Simple=hc;var un=V.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[C(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[C(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});xe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=C(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=C(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return C(t)in this._layers},eachLayer:function(t,o){for(var u in this._layers)t.call(o,this._layers[u]);return this},_addLayers:function(t){t=t?Re(t)?t:[t]:[];for(var o=0,u=t.length;o<u;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[C(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=C(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,u=this._getZoomSpan();for(var d in this._zoomBoundLayers){var g=this._zoomBoundLayers[d].options;t=g.minZoom===void 0?t:Math.min(t,g.minZoom),o=g.maxZoom===void 0?o:Math.max(o,g.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $n=un.extend({initialize:function(t,o){K(this,o),this._layers={};var u,d;if(t)for(u=0,d=t.length;u<d;u++)this.addLayer(t[u])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),u,d;for(u in this._layers)d=this._layers[u],d[t]&&d[t].apply(d,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var u in this._layers)t.call(o,this._layers[u]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return C(t)}}),Fr=function(t,o){return new $n(t,o)},Rn=$n.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),$n.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),$n.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ue;for(var o in this._layers){var u=this._layers[o];t.extend(u.getBounds?u.getBounds():u.getLatLng())}return t}}),yl=function(t,o){return new Rn(t,o)},_i=Qe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){K(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var u=this._getIconUrl(t);if(!u){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(d,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(t,o){var u=this.options,d=u[o+"Size"];typeof d=="number"&&(d=[d,d]);var g=F(d),y=F(o==="shadow"&&u.shadowAnchor||u.iconAnchor||g&&g.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(u.className||""),y&&(t.style.marginLeft=-y.x+"px",t.style.marginTop=-y.y+"px"),g&&(t.style.width=g.x+"px",t.style.height=g.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return re.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function wl(t){return new _i(t)}var Gi=_i.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Gi.imagePath!="string"&&(Gi.imagePath=this._detectIconPath()),(this.options.imagePath||Gi.imagePath)+_i.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(u,d,g){var y=d.exec(u);return y&&y[g]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ge("div","leaflet-default-icon-path",document.body),o=Rr(t,"background-image")||Rr(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Go=$t.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ln(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),me(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,u=o._map,d=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,y=In(o._icon),x=u.getPixelBounds(),M=u.getPixelOrigin(),b=B(x.min._subtract(M).add(g),x.max._subtract(M).subtract(g));if(!b.contains(y)){var W=F((Math.max(b.max.x,y.x)-b.max.x)/(x.max.x-b.max.x)-(Math.min(b.min.x,y.x)-b.min.x)/(x.min.x-b.min.x),(Math.max(b.max.y,y.y)-b.max.y)/(x.max.y-b.max.y)-(Math.min(b.min.y,y.y)-b.min.y)/(x.min.y-b.min.y)).multiplyBy(d);u.panBy(W,{animate:!1}),this._draggable._newPos._add(W),this._draggable._startPos._add(W),nt(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Ke(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&($e(this._panRequest),this._panRequest=Ke(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,u=o._shadow,d=In(o._icon),g=o._map.layerPointToLatLng(d);u&&nt(u,d),o._latlng=g,t.latlng=g,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){$e(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Mn=un.extend({options:{icon:new Gi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){K(this,o),this._latlng=J(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=J(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=t.icon.createIcon(this._icon),d=!1;u!==this._icon&&(this._icon&&this._removeIcon(),d=!0,t.title&&(u.title=t.title),u.tagName==="IMG"&&(u.alt=t.alt||"")),me(u,o),t.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&fe(u,"focus",this._panOnFocus,this);var g=t.icon.createShadow(this._shadow),y=!1;g!==this._shadow&&(this._removeShadow(),y=!0),g&&(me(g,o),g.alt=""),this._shadow=g,t.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&y&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(this._icon,"focus",this._panOnFocus,this),Ge(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ge(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&nt(this._icon,t),this._shadow&&nt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Go)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Go(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Rt(this._icon,t),this._shadow&&Rt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,u=o.iconSize?F(o.iconSize):F(0,0),d=o.iconAnchor?F(o.iconAnchor):F(0,0);t.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:u.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function dc(t,o){return new Mn(t,o)}var Gn=un.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return K(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Rs=Gn.extend({options:{fill:!0,radius:10},initialize:function(t,o){K(this,o),this._latlng=J(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=J(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return Gn.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,u=this._clickTolerance(),d=[t+u,o+u];this._pxBounds=new P(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Cl(t,o){return new Rs(t,o)}var Ms=Rs.extend({initialize:function(t,o,u){if(typeof o=="number"&&(o=h({},u,{radius:o})),K(this,o),this._latlng=J(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ue(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Gn.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,u=this._map,d=u.options.crs;if(d.distance===we.distance){var g=Math.PI/180,y=this._mRadius/we.R/g,x=u.project([o+y,t]),M=u.project([o-y,t]),b=x.add(M).divideBy(2),W=u.unproject(b).lat,Q=Math.acos((Math.cos(y*g)-Math.sin(o*g)*Math.sin(W*g))/(Math.cos(o*g)*Math.cos(W*g)))/g;(isNaN(Q)||Q===0)&&(Q=y/Math.cos(Math.PI/180*o)),this._point=b.subtract(u.getPixelOrigin()),this._radius=isNaN(Q)?0:b.x-u.project([W,t-Q]).x,this._radiusY=b.y-x.y}else{var ce=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(ce).x}this._updateBounds()}});function Br(t,o,u){return new Ms(t,o,u)}var Wt=Gn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){K(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,u=null,d=pi,g,y,x=0,M=this._parts.length;x<M;x++)for(var b=this._parts[x],W=1,Q=b.length;W<Q;W++){g=b[W-1],y=b[W];var ce=d(t,g,y,!0);ce<o&&(o=ce,u=d(t,g,y))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ml(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=J(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ue,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Gt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],u=Gt(t),d=0,g=t.length;d<g;d++)u?(o[d]=J(t[d]),this._bounds.extend(o[d])):o[d]=this._convertLatLngs(t[d]);return o},_project:function(){var t=new P;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new D(t,t);this._rawPxBounds&&(this._pxBounds=new P([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,u){var d=t[0]instanceof ie,g=t.length,y,x;if(d){for(x=[],y=0;y<g;y++)x[y]=this._map.latLngToLayerPoint(t[y]),u.extend(x[y]);o.push(x)}else for(y=0;y<g;y++)this._projectLatlngs(t[y],o,u)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,d,g,y,x,M,b;for(u=0,g=0,y=this._rings.length;u<y;u++)for(b=this._rings[u],d=0,x=b.length;d<x-1;d++)M=pl(b[d],b[d+1],t,d,!0),M&&(o[g]=o[g]||[],o[g].push(M[0]),(M[1]!==b[d+1]||d===x-2)&&(o[g].push(M[1]),g++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,u=0,d=t.length;u<d;u++)t[u]=Is(t[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var u,d,g,y,x,M,b=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(u=0,y=this._parts.length;u<y;u++)for(M=this._parts[u],d=0,x=M.length,g=x-1;d<x;g=d++)if(!(!o&&d===0)&&fl(t,M[g],M[d])<=b)return!0;return!1}});function fc(t,o){return new Wt(t,o)}Wt._flat=_l;var On=Wt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return dl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=Wt.prototype._convertLatLngs.call(this,t),u=o.length;return u>=2&&o[0]instanceof ie&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(t){Wt.prototype._setLatLngs.call(this,t),Gt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Gt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,u=new D(o,o);if(t=new P(t.min.subtract(u),t.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,g=this._rings.length,y;d<g;d++)y=Uo(this._rings[d],t,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,u,d,g,y,x,M,b,W;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(y=0,b=this._parts.length;y<b;y++)for(u=this._parts[y],x=0,W=u.length,M=W-1;x<W;M=x++)d=u[x],g=u[M],d.y>t.y!=g.y>t.y&&t.x<(g.x-d.x)*(t.y-d.y)/(g.y-d.y)+d.x&&(o=!o);return o||Wt.prototype._containsPoint.call(this,t,!0)}});function pc(t,o){return new On(t,o)}var gn=Rn.extend({initialize:function(t,o){K(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=Re(t)?t:t.features,u,d,g;if(o){for(u=0,d=o.length;u<d;u++)g=o[u],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var y=this.options;if(y.filter&&!y.filter(t))return this;var x=qi(t,y);return x?(x.feature=zs(t),x.defaultOptions=x.options,this.resetStyle(x),y.onEachFeature&&y.onEachFeature(t,x),this.addLayer(x)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=h({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function qi(t,o){var u=t.type==="Feature"?t.geometry:t,d=u?u.coordinates:null,g=[],y=o&&o.pointToLayer,x=o&&o.coordsToLatLng||As,M,b,W,Q;if(!d&&!u)return null;switch(u.type){case"Point":return M=x(d),Os(y,t,M,o);case"MultiPoint":for(W=0,Q=d.length;W<Q;W++)M=x(d[W]),g.push(Os(y,t,M,o));return new Rn(g);case"LineString":case"MultiLineString":return b=Wr(d,u.type==="LineString"?0:1,x),new Wt(b,o);case"Polygon":case"MultiPolygon":return b=Wr(d,u.type==="Polygon"?1:2,x),new On(b,o);case"GeometryCollection":for(W=0,Q=u.geometries.length;W<Q;W++){var ce=qi({geometry:u.geometries[W],type:"Feature",properties:t.properties},o);ce&&g.push(ce)}return new Rn(g);case"FeatureCollection":for(W=0,Q=u.features.length;W<Q;W++){var ve=qi(u.features[W],o);ve&&g.push(ve)}return new Rn(g);default:throw new Error("Invalid GeoJSON object.")}}function Os(t,o,u,d){return t?t(o,u):new Mn(u,d&&d.markersInheritOptions&&d)}function As(t){return new ie(t[1],t[0],t[2])}function Wr(t,o,u){for(var d=[],g=0,y=t.length,x;g<y;g++)x=o?Wr(t[g],o-1,u):(u||As)(t[g]),d.push(x);return d}function Ds(t,o){return t=J(t),t.alt!==void 0?[N(t.lng,o),N(t.lat,o),N(t.alt,o)]:[N(t.lng,o),N(t.lat,o)]}function bs(t,o,u,d){for(var g=[],y=0,x=t.length;y<x;y++)g.push(o?bs(t[y],Gt(t[y])?0:o-1,u,d):Ds(t[y],d));return!o&&u&&g.length>0&&g.push(g[0].slice()),g}function Ki(t,o){return t.feature?h({},t.feature,{geometry:o}):zs(o)}function zs(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var qo={toGeoJSON:function(t){return Ki(this,{type:"Point",coordinates:Ds(this.getLatLng(),t)})}};Mn.include(qo),Ms.include(qo),Rs.include(qo),Wt.include({toGeoJSON:function(t){var o=!Gt(this._latlngs),u=bs(this._latlngs,o?1:0,!1,t);return Ki(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),On.include({toGeoJSON:function(t){var o=!Gt(this._latlngs),u=o&&!Gt(this._latlngs[0]),d=bs(this._latlngs,u?2:o?1:0,!0,t);return o||(d=[d]),Ki(this,{type:(u?"Multi":"")+"Polygon",coordinates:d})}}),$n.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(t).geometry.coordinates)}),Ki(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var u=o==="GeometryCollection",d=[];return this.eachLayer(function(g){if(g.toGeoJSON){var y=g.toGeoJSON(t);if(u)d.push(y.geometry);else{var x=zs(y);x.type==="FeatureCollection"?d.push.apply(d,x.features):d.push(x)}}}),u?Ki(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function Sl(t,o){return new gn(t,o)}var cn=Sl,qn=un.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,u){this._url=t,this._bounds=ae(o),K(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ge(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Bi(this._image),this},bringToBack:function(){return this._map&&Ln(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ae(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:ge("img");if(me(o,"leaflet-image-layer"),this._zoomAnimated&&me(o,"leaflet-zoom-animated"),this.options.className&&me(o,this.options.className),o.onselectstart=k,o.onmousemove=k,o.onload=m(this.fire,this,"load"),o.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;sn(this._image,u,o)},_reset:function(){var t=this._image,o=new P(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();nt(t,o.min),t.style.width=u.x+"px",t.style.height=u.y+"px"},_updateOpacity:function(){Rt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),El=function(t,o,u){return new qn(t,o,u)},Ko=qn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:ge("video");if(me(o,"leaflet-image-layer"),this._zoomAnimated&&me(o,"leaflet-zoom-animated"),this.options.className&&me(o,this.options.className),o.onselectstart=k,o.onmousemove=k,o.onloadeddata=m(this.fire,this,"load"),t){for(var u=o.getElementsByTagName("source"),d=[],g=0;g<u.length;g++)d.push(u[g].src);this._url=u.length>0?d:[o.src];return}Re(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var x=ge("source");x.src=this._url[y],o.appendChild(x)}}});function xl(t,o,u){return new Ko(t,o,u)}var Yo=qn.extend({_initImage:function(){var t=this._image=this._url;me(t,"leaflet-image-layer"),this._zoomAnimated&&me(t,"leaflet-zoom-animated"),this.options.className&&me(t,this.options.className),t.onselectstart=k,t.onmousemove=k}});function Qo(t,o,u){return new Yo(t,o,u)}var vn=un.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof ie||Re(t))?(this._latlng=J(t),K(this,o)):(K(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Rt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Rt(this._container,1),this.bringToFront(),this.options.interactive&&(me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Rt(this._container,0),this._removeTimeout=setTimeout(m(Ge,void 0,this._container),200)):Ge(this._container),this.options.interactive&&(Ue(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=J(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Bi(this._container),this},bringToBack:function(){return this._map&&Ln(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof Rn){o=null;var u=this._source._layers;for(var d in u)if(u[d]._map){o=u[d];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=F(this.options.offset),u=this._getAnchor();this._zoomAnimated?nt(this._container,t.add(u)):o=o.add(t).add(u);var d=this._containerBottom=-o.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=d+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});xe.include({_initOverlay:function(t,o,u,d){var g=o;return g instanceof t||(g=new t(d).setContent(o)),u&&g.setLatLng(u),g}}),un.include({_initOverlay:function(t,o,u,d){var g=u;return g instanceof t?(K(g,d),g._source=this):(g=o&&!d?o:new t(d,this),g.setContent(u)),g}});var Fs=vn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,vn.prototype.openOn.call(this,t)},onAdd:function(t){vn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gn||this._source.on("preclick",mn))},onRemove:function(t){vn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gn||this._source.off("preclick",mn))},getEvents:function(){var t=vn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=ge("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=ge("div",t+"-content-wrapper",o);if(this._contentNode=ge("div",t+"-content",u),Dr(o),Ts(this._contentNode),fe(o,"contextmenu",mn),this._tipContainer=ge("div",t+"-tip-container",o),this._tip=ge("div",t+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=ge("a",t+"-close-button",o);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',fe(d,"click",function(g){Je(g),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var u=t.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var d=t.offsetHeight,g=this.options.maxHeight,y="leaflet-popup-scrolled";g&&d>g?(o.height=g+"px",me(t,y)):Ue(t,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),u=this._getAnchor();nt(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(Rr(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,d=this._containerWidth,g=new D(this._containerLeft,-u-this._containerBottom);g._add(In(this._container));var y=t.layerPointToContainerPoint(g),x=F(this.options.autoPanPadding),M=F(this.options.autoPanPaddingTopLeft||x),b=F(this.options.autoPanPaddingBottomRight||x),W=t.getSize(),Q=0,ce=0;y.x+d+b.x>W.x&&(Q=y.x+d-W.x+b.x),y.x-Q-M.x<0&&(Q=y.x-M.x),y.y+u+b.y>W.y&&(ce=y.y+u-W.y+b.y),y.y-ce-M.y<0&&(ce=y.y-M.y),(Q||ce)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Q,ce]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Yi=function(t,o){return new Fs(t,o)};xe.mergeOptions({closePopupOnClick:!0}),xe.include({openPopup:function(t,o,u){return this._initOverlay(Fs,t,o,u).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),un.include({bindPopup:function(t,o){return this._popup=this._initOverlay(Fs,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Rn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){an(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof Gn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Qi=vn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){vn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){vn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=vn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ge("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+C(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,u,d=this._map,g=this._container,y=d.latLngToContainerPoint(d.getCenter()),x=d.layerPointToContainerPoint(t),M=this.options.direction,b=g.offsetWidth,W=g.offsetHeight,Q=F(this.options.offset),ce=this._getAnchor();M==="top"?(o=b/2,u=W):M==="bottom"?(o=b/2,u=0):M==="center"?(o=b/2,u=W/2):M==="right"?(o=0,u=W/2):M==="left"?(o=b,u=W/2):x.x<y.x?(M="right",o=0,u=W/2):(M="left",o=b+(Q.x+ce.x)*2,u=W/2),t=t.subtract(F(o,u,!0)).add(Q).add(ce),Ue(g,"leaflet-tooltip-right"),Ue(g,"leaflet-tooltip-left"),Ue(g,"leaflet-tooltip-top"),Ue(g,"leaflet-tooltip-bottom"),me(g,"leaflet-tooltip-"+M),nt(g,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Rt(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ur=function(t,o){return new Qi(t,o)};xe.include({openTooltip:function(t,o,u){return this._initOverlay(Qi,t,o,u).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),un.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qi,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Rn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(fe(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),fe(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,u,d;this._tooltip.options.sticky&&t.originalEvent&&(u=this._map.mouseEventToContainerPoint(t.originalEvent),d=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(o)}});var Bs=_i.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),u=this.options;if(u.html instanceof Element?(ys(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var d=F(u.bgPos);o.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Tl(t){return new Bs(t)}_i.Default=Gi;var Kn=un.extend({options:{tileSize:256,opacity:1,updateWhenIdle:re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){K(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ge(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Bi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=S(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof D?t:new D(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,u=-t(-1/0,1/0),d=0,g=o.length,y;d<g;d++)y=o[d].style.zIndex,o[d]!==this._container&&y&&(u=t(u,+y));isFinite(u)&&(this.options.zIndex=u+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!re.ielt9){Rt(this._container,this.options.opacity);var t=+new Date,o=!1,u=!1;for(var d in this._tiles){var g=this._tiles[d];if(!(!g.current||!g.loaded)){var y=Math.min(1,(t-g.loaded)/200);Rt(g.el,y),y<1?o=!0:(g.active?u=!0:this._onOpaqueTile(g),g.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&($e(this._fadeFrame),this._fadeFrame=Ke(this._updateOpacity,this))}},_onOpaqueTile:k,_initContainer:function(){this._container||(this._container=ge("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===t?(this._levels[u].el.style.zIndex=o-Math.abs(t-u),this._onUpdateLevel(u)):(Ge(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var d=this._levels[t],g=this._map;return d||(d=this._levels[t]={},d.el=ge("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=o,d.origin=g.project(g.unproject(g.getPixelOrigin()),t).round(),d.zoom=t,this._setZoomTransform(d,g.getCenter(),g.getZoom()),k(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:k,_onRemoveLevel:k,_onCreateLevel:k,_pruneTiles:function(){if(this._map){var t,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var d=o.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ge(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,u,d){var g=Math.floor(t/2),y=Math.floor(o/2),x=u-1,M=new D(+g,+y);M.z=+x;var b=this._tileCoordsToKey(M),W=this._tiles[b];return W&&W.active?(W.retain=!0,!0):(W&&W.loaded&&(W.retain=!0),x>d?this._retainParent(g,y,x,d):!1)},_retainChildren:function(t,o,u,d){for(var g=2*t;g<2*t+2;g++)for(var y=2*o;y<2*o+2;y++){var x=new D(g,y);x.z=u+1;var M=this._tileCoordsToKey(x),b=this._tiles[M];if(b&&b.active){b.retain=!0;continue}else b&&b.loaded&&(b.retain=!0);u+1<d&&this._retainChildren(g,y,u+1,d)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,u,d){var g=Math.round(o);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var y=this.options.updateWhenZooming&&g!==this._tileZoom;(!d||y)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(t),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],t,o)},_setZoomTransform:function(t,o,u){var d=this._map.getZoomScale(u,t.zoom),g=t.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(o,u)).round();re.any3d?sn(t.el,g,d):nt(t.el,g)},_resetGrid:function(){var t=this._map,o=t.options.crs,u=this._tileSize=this.getTileSize(),d=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],d).x/u.x),Math.ceil(t.project([0,o.wrapLng[1]],d).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],d).y/u.x),Math.ceil(t.project([o.wrapLat[1],0],d).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),d=o.getZoomScale(u,this._tileZoom),g=o.project(t,this._tileZoom).floor(),y=o.getSize().divideBy(d*2);return new P(g.subtract(y),g.add(y))},_update:function(t){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(t),g=this._pxBoundsToTileRange(d),y=g.getCenter(),x=[],M=this.options.keepBuffer,b=new P(g.getBottomLeft().subtract([M,-M]),g.getTopRight().add([M,-M]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var W in this._tiles){var Q=this._tiles[W].coords;(Q.z!==this._tileZoom||!b.contains(new D(Q.x,Q.y)))&&(this._tiles[W].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(t,u);return}for(var ce=g.min.y;ce<=g.max.y;ce++)for(var ve=g.min.x;ve<=g.max.x;ve++){var ft=new D(ve,ce);if(ft.z=this._tileZoom,!!this._isValidTile(ft)){var ut=this._tiles[this._tileCoordsToKey(ft)];ut?ut.current=!0:x.push(ft)}}if(x.sort(function(Ot,nr){return Ot.distanceTo(y)-nr.distanceTo(y)}),x.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ut=document.createDocumentFragment();for(ve=0;ve<x.length;ve++)this._addTile(x[ve],Ut);this._level.el.appendChild(Ut)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(t.x<u.min.x||t.x>u.max.x)||!o.wrapLat&&(t.y<u.min.y||t.y>u.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(t);return ae(this.options.bounds).overlaps(d)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,u=this.getTileSize(),d=t.scaleBy(u),g=d.add(u),y=o.unproject(d,t.z),x=o.unproject(g,t.z);return[y,x]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),u=new ue(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),u=new D(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(t){var o=this._tiles[t];o&&(Ge(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){me(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=k,t.onmousemove=k,re.ielt9&&this.options.opacity<1&&Rt(t,this.options.opacity)},_addTile:function(t,o){var u=this._getTilePos(t),d=this._tileCoordsToKey(t),g=this.createTile(this._wrapCoords(t),m(this._tileReady,this,t));this._initTile(g),this.createTile.length<2&&Ke(m(this._tileReady,this,t,null,g)),nt(g,u),this._tiles[d]={el:g,coords:t,current:!0},o.appendChild(g),this.fire("tileloadstart",{tile:g,coords:t})},_tileReady:function(t,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:t});var d=this._tileCoordsToKey(t);u=this._tiles[d],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Rt(u.el,0),$e(this._fadeFrame),this._fadeFrame=Ke(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(me(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),re.ielt9||!this._map._fadeAnimated?Ke(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new D(this._wrapX?R(t.x,this._wrapX):t.x,this._wrapY?R(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new P(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Xi(t){return new Kn(t)}var Yn=Kn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=K(this,o),o.detectRetina&&re.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var u=document.createElement("img");return fe(u,"load",m(this._tileOnLoad,this,o,u)),fe(u,"error",m(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(t),u},getTileUrl:function(t){var o={r:re.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=u),o["-y"]=u}return De(this._url,h(o,this.options))},_tileOnLoad:function(t,o){re.ielt9?setTimeout(m(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,u){var d=this.options.errorTileUrl;d&&o.getAttribute("src")!==d&&(o.src=d),t(u,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,d=this.options.zoomOffset;return u&&(t=o-t),t+d},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=k,o.onerror=k,!o.complete)){o.src=lt;var u=this._tiles[t].coords;Ge(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",lt),Kn.prototype._removeTile.call(this,t)},_tileReady:function(t,o,u){if(!(!this._map||u&&u.getAttribute("src")===lt))return Kn.prototype._tileReady.call(this,t,o,u)}});function Xo(t,o){return new Yn(t,o)}var Hr=Yn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var u=h({},this.defaultWmsParams);for(var d in o)d in this.options||(u[d]=o[d]);o=K(this,o);var g=o.detectRetina&&re.retina?2:1,y=this.getTileSize();u.width=y.x*g,u.height=y.y*g,this.wmsParams=u},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Yn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),u=this._crs,d=B(u.project(o[0]),u.project(o[1])),g=d.min,y=d.max,x=(this._wmsVersion>=1.3&&this._crs===vl?[g.y,g.x,y.y,y.x]:[g.x,g.y,y.x,y.y]).join(","),M=Yn.prototype.getTileUrl.call(this,t);return M+oe(this.wmsParams,M,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+x},setParams:function(t,o){return h(this.wmsParams,t),o||this.redraw(),this}});function Pl(t,o){return new Hr(t,o)}Yn.WMS=Hr,Xo.wms=Pl;var yn=un.extend({options:{padding:.1},initialize:function(t){K(this,t),C(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var u=this._map.getZoomScale(o,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,o),y=d.multiplyBy(-u).add(g).subtract(this._map._getNewPixelOrigin(t,o));re.any3d?sn(this._container,y,u):nt(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new P(u,u.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jo=yn.extend({options:{tolerance:0},getEvents:function(){var t=yn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){yn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");fe(t,"mousemove",this._onMouseMove,this),fe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),fe(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){$e(this._redrawRequest),delete this._ctx,Ge(this._container),ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yn.prototype._update.call(this);var t=this._bounds,o=this._container,u=t.getSize(),d=re.retina?2:1;nt(o,t.min),o.width=d*u.x,o.height=d*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",re.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){yn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[C(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,u=o.next,d=o.prev;u?u.prev=d:this._drawLast=d,d?d.next=u:this._drawFirst=u,delete t._order,delete this._layers[C(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),u=[],d,g;for(g=0;g<o.length;g++){if(d=Number(o[g]),isNaN(d))return;u.push(d)}t.options._dashArray=u}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Ke(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new P,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)t=d.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var u,d,g,y,x=t._parts,M=x.length,b=this._ctx;if(M){for(b.beginPath(),u=0;u<M;u++){for(d=0,g=x[u].length;d<g;d++)y=x[u][d],b[d?"lineTo":"moveTo"](y.x,y.y);o&&b.closePath()}this._fillStroke(b,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,u=this._ctx,d=Math.max(Math.round(t._radius),1),g=(Math.max(Math.round(t._radiusY),1)||d)/d;g!==1&&(u.save(),u.scale(1,g)),u.beginPath(),u.arc(o.x,o.y/g,d,0,Math.PI*2,!1),g!==1&&u.restore(),this._fillStroke(u,t)}},_fillStroke:function(t,o){var u=o.options;u.fill&&(t.globalAlpha=u.fillOpacity,t.fillStyle=u.fillColor||u.color,t.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=u.opacity,t.lineWidth=u.weight,t.strokeStyle=u.color,t.lineCap=u.lineCap,t.lineJoin=u.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),u,d,g=this._drawFirst;g;g=g.next)u=g.layer,u.options.interactive&&u._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(u))&&(d=u);this._fireEvent(d?[d]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(Ue(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var u,d,g=this._drawFirst;g;g=g.next)u=g.layer,u.options.interactive&&u._containsPoint(o)&&(d=u);d!==this._hoveredLayer&&(this._handleMouseOut(t),d&&(me(this._container,"leaflet-interactive"),this._fireEvent([d],t,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,u){this._map._fireDOMEvent(o,u||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var u=o.next,d=o.prev;if(u)u.prev=d;else return;d?d.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var u=o.next,d=o.prev;if(d)d.next=u;else return;u?u.prev=d:d&&(this._drawLast=d),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function ea(t){return re.canvas?new Jo(t):null}var Ji=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),kl={_initContainer:function(){this._container=ge("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(yn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=Ji("shape");me(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=Ji("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[C(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;Ge(o),t.removeInteractiveTarget(o),delete this._layers[C(t)]},_updateStyle:function(t){var o=t._stroke,u=t._fill,d=t.options,g=t._container;g.stroked=!!d.stroke,g.filled=!!d.fill,d.stroke?(o||(o=t._stroke=Ji("stroke")),g.appendChild(o),o.weight=d.weight+"px",o.color=d.color,o.opacity=d.opacity,d.dashArray?o.dashStyle=Re(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=d.lineCap.replace("butt","flat"),o.joinstyle=d.lineJoin):o&&(g.removeChild(o),t._stroke=null),d.fill?(u||(u=t._fill=Ji("fill")),g.appendChild(u),u.color=d.fillColor||d.color,u.opacity=d.fillOpacity):u&&(g.removeChild(u),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),u=Math.round(t._radius),d=Math.round(t._radiusY||u);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+d+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){Bi(t._container)},_bringToBack:function(t){Ln(t._container)}},hn=re.vml?Ji:wo,mi=yn.extend({_initContainer:function(){this._container=hn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=hn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ge(this._container),ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yn.prototype._update.call(this);var t=this._bounds,o=t.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),nt(u,t.min),u.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=hn("path");t.options.className&&me(o,t.options.className),t.options.interactive&&me(o,"leaflet-interactive"),this._updateStyle(t),this._layers[C(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ge(t._path),t.removeInteractiveTarget(t._path),delete this._layers[C(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,u=t.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,Co(t._parts,o))},_updateCircle:function(t){var o=t._point,u=Math.max(Math.round(t._radius),1),d=Math.max(Math.round(t._radiusY),1)||u,g="a"+u+","+d+" 0 1,0 ",y=t._empty()?"M0 0":"M"+(o.x-u)+","+o.y+g+u*2+",0 "+g+-u*2+",0 ";this._setPath(t,y)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){Bi(t._path)},_bringToBack:function(t){Ln(t._path)}});re.vml&&mi.include(kl);function Ws(t){return re.svg||re.vml?new mi(t):null}xe.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&ea(t)||Ws(t)}});var Ll=On.extend({initialize:function(t,o){On.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ae(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function _c(t,o){return new Ll(t,o)}mi.create=hn,mi.pointsToPath=Co,gn.geometryToLayer=qi,gn.coordsToLatLng=As,gn.coordsToLatLngs=Wr,gn.latLngToCoords=Ds,gn.latLngsToCoords=bs,gn.getFeature=Ki,gn.asFeature=zs,xe.mergeOptions({boxZoom:!0});var er=$t.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){fe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ge(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ke(),Ss(),this._startPoint=this._map.mouseEventToContainerPoint(t),fe(document,{contextmenu:an,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ge("div","leaflet-zoom-box",this._container),me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new P(this._point,this._startPoint),u=o.getSize();nt(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Ge(this._box),Ue(this._container,"leaflet-crosshair")),Hi(),Es(),ze(document,{contextmenu:an,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var o=new ue(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});xe.addInitHook("addHandler","boxZoom",er),xe.mergeOptions({doubleClickZoom:!0});var Il=$t.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,u=o.getZoom(),d=o.options.zoomDelta,g=t.originalEvent.shiftKey?u-d:u+d;o.options.doubleClickZoom==="center"?o.setZoom(g):o.setZoomAround(t.containerPoint,g)}});xe.addInitHook("addHandler","doubleClickZoom",Il),xe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ta=$t.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ln(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ue(this._map._container,"leaflet-grab"),Ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ae(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),u=this._initialWorldOffset,d=this._draggable._newPos.x,g=(d-o+u)%t+o-u,y=(d+o+u)%t-o-u,x=Math.abs(g+u)<Math.abs(y+u)?g:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=x},_onDragEnd:function(t){var o=this._map,u=o.options,d=!u.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),d)o.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,x=u.easeLinearity,M=g.multiplyBy(x/y),b=M.distanceTo([0,0]),W=Math.min(u.inertiaMaxSpeed,b),Q=M.multiplyBy(W/b),ce=W/(u.inertiaDeceleration*x),ve=Q.multiplyBy(-ce/2).round();!ve.x&&!ve.y?o.fire("moveend"):(ve=o._limitOffset(ve,o.options.maxBounds),Ke(function(){o.panBy(ve,{duration:ce,easeLinearity:x,noMoveStart:!0,animate:!0})}))}}});xe.addInitHook("addHandler","dragging",ta),xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var na=$t.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),fe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,u=t.scrollTop||o.scrollTop,d=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(d,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},u=this.keyCodes,d,g;for(d=0,g=u.left.length;d<g;d++)o[u.left[d]]=[-1*t,0];for(d=0,g=u.right.length;d<g;d++)o[u.right[d]]=[t,0];for(d=0,g=u.down.length;d<g;d++)o[u.down[d]]=[0,t];for(d=0,g=u.up.length;d<g;d++)o[u.up[d]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},u=this.keyCodes,d,g;for(d=0,g=u.zoomIn.length;d<g;d++)o[u.zoomIn[d]]=t;for(d=0,g=u.zoomOut.length;d<g;d++)o[u.zoomOut[d]]=-t},_addHooks:function(){fe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,u=this._map,d;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(d=this._panKeys[o],t.shiftKey&&(d=F(d).multiplyBy(3)),u.options.maxBounds&&(d=u._limitOffset(F(d),u.options.maxBounds)),u.options.worldCopyJump){var g=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(d)));u.panTo(g)}else u.panBy(d)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;an(t)}}});xe.addInitHook("addHandler","keyboard",na),xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Fe=$t.extend({addHooks:function(){fe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=cl(t),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var d=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),d),an(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),u=this._map.options.zoomSnap||0;t._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,y=u?Math.ceil(g/u)*u:g,x=t._limitZoom(o+(this._delta>0?y:-y))-o;this._delta=0,this._startTime=null,x&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+x):t.setZoomAround(this._lastMousePos,o+x))}});xe.addInitHook("addHandler","scrollWheelZoom",Fe);var ia=600;xe.mergeOptions({tapHold:re.touchNative&&re.safari&&re.mobile,tapTolerance:15});var Zr=$t.extend({addHooks:function(){fe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new D(o.clientX,o.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(fe(document,"touchend",Je),fe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),ia),fe(document,"touchend touchcancel contextmenu",this._cancel,this),fe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){ze(document,"touchend",Je),ze(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new D(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var u=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});xe.addInitHook("addHandler","tapHold",Zr),xe.mergeOptions({touchZoom:re.touch,bounceAtZoomLimits:!0});var tr=$t.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom"),fe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ue(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(t.touches[0]),d=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(d)._divideBy(2))),this._startDist=u.distanceTo(d),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),fe(document,"touchmove",this._onTouchMove,this),fe(document,"touchend touchcancel",this._onTouchEnd,this),Je(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(t.touches[0]),d=o.mouseEventToContainerPoint(t.touches[1]),g=u.distanceTo(d)/this._startDist;if(this._zoom=o.getScaleZoom(g,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&g<1||this._zoom>o.getMaxZoom()&&g>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var y=u._add(d)._divideBy(2)._subtract(this._centerPoint);if(g===1&&y.x===0&&y.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),$e(this._animRequest);var x=m(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ke(x,this,!0),Je(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$e(this._animRequest),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});xe.addInitHook("addHandler","touchZoom",tr),xe.BoxZoom=er,xe.DoubleClickZoom=Il,xe.Drag=ta,xe.Keyboard=na,xe.ScrollWheelZoom=Fe,xe.TapHold=Zr,xe.TouchZoom=tr,r.Bounds=P,r.Browser=re,r.CRS=Pe,r.Canvas=Jo,r.Circle=Ms,r.CircleMarker=Rs,r.Class=Qe,r.Control=Bt,r.DivIcon=Bs,r.DivOverlay=vn,r.DomEvent=Ps,r.DomUtil=Ar,r.Draggable=ln,r.Evented=V,r.FeatureGroup=Rn,r.GeoJSON=gn,r.GridLayer=Kn,r.Handler=$t,r.Icon=_i,r.ImageOverlay=qn,r.LatLng=ie,r.LatLngBounds=ue,r.Layer=un,r.LayerGroup=$n,r.LineUtil=gl,r.Map=xe,r.Marker=Mn,r.Mixin=Wo,r.Path=Gn,r.Point=D,r.PolyUtil=rc,r.Polygon=On,r.Polyline=Wt,r.Popup=Fs,r.PosAnimation=ks,r.Projection=uc,r.Rectangle=Ll,r.Renderer=yn,r.SVG=mi,r.SVGOverlay=Yo,r.TileLayer=Yn,r.Tooltip=Qi,r.Transformation=Mi,r.Util=xt,r.VideoOverlay=Ko,r.bind=m,r.bounds=B,r.canvas=ea,r.circle=Br,r.circleMarker=Cl,r.control=Vn,r.divIcon=Tl,r.extend=h,r.featureGroup=yl,r.geoJSON=Sl,r.geoJson=cn,r.gridLayer=Xi,r.icon=wl,r.imageOverlay=El,r.latLng=J,r.latLngBounds=ae,r.layerGroup=Fr,r.map=jn,r.marker=dc,r.point=F,r.polygon=pc,r.polyline=fc,r.popup=Yi,r.rectangle=_c,r.setOptions=K,r.stamp=C,r.svg=Ws,r.svgOverlay=Qo,r.tileLayer=Xo,r.tooltip=Ur,r.transformation=Oi,r.version=l,r.videoOverlay=xl;var Nl=window.L;r.noConflict=function(){return window.L=Nl,this},window.L=r})}(Pa,Pa.exports)),Pa.exports}var jd=oS();const aS=k_(jd);function lS(s,n,r){return Object.freeze({instance:s,context:n,container:r})}function uS(s,n){return n==null?function(l,h){const p=ye.useRef();return p.current||(p.current=s(l,h)),p}:function(l,h){const p=ye.useRef();p.current||(p.current=s(l,h));const m=ye.useRef(l),{instance:w}=p.current;return ye.useEffect(function(){m.current!==l&&(n(w,l,m.current),m.current=l)},[w,l,h]),p}}function cS(s,n){ye.useEffect(function(){return(n.layerContainer??n.map).addLayer(s.instance),function(){var p;(p=n.layerContainer)==null||p.removeLayer(s.instance),n.map.removeLayer(s.instance)}},[n,s])}function hS(s){return function(r){const l=tg(),h=s(ng(r,l),l);return JC(l.map,r.attribution),rS(h.current,r.eventHandlers),cS(h.current,l),h}}function dS(s,n){const r=uS(s,n),l=hS(r);return iS(l)}function fS(s,n,r){const{opacity:l,zIndex:h}=n;l!=null&&l!==r.opacity&&s.setOpacity(l),h!=null&&h!==r.zIndex&&s.setZIndex(h)}function pS(){return tg().map}function sd(){return sd=Object.assign||function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=r[l])}return s},sd.apply(this,arguments)}function _S({bounds:s,boundsOptions:n,center:r,children:l,className:h,id:p,placeholder:m,style:w,whenReady:C,zoom:S,...R},k){const[N]=ye.useState({className:h,id:p,style:w}),[Z,Y]=ye.useState(null);ye.useImperativeHandle(k,()=>(Z==null?void 0:Z.map)??null,[Z]);const K=ye.useCallback(Le=>{if(Le!==null&&Z===null){const De=new jd.Map(Le,R);r!=null&&S!=null?De.setView(r,S):s!=null&&De.fitBounds(s,n),C!=null&&De.whenReady(C),Y(tS(De))}},[]);ye.useEffect(()=>()=>{Z==null||Z.map.remove()},[Z]);const oe=Z?zh.createElement(nS,{value:Z},l):m??null;return zh.createElement("div",sd({},N,{ref:K}),oe)}const mS=ye.forwardRef(_S),gS=dS(function({url:n,...r},l){const h=new jd.TileLayer(n,ng(r,l));return lS(h,l)},function(n,r,l){fS(n,r,l);const{url:h}=r;h!=null&&h!==l.url&&n.setUrl(h)});(function(){function s(n){return this instanceof s?(this._canvas=n=typeof n=="string"?document.getElementById(n):n,this._ctx=n.getContext("2d"),this._width=n.width,this._height=n.height,this._max=1,void this.clear()):new s(n)}s.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(n,r){return this._data=n,this},max:function(n){return this._max=n,this},add:function(n){return this._data.push(n),this},clear:function(){return this._data=[],this},radius:function(n,r){r=r||15;var l=this._circle=document.createElement("canvas"),h=l.getContext("2d"),p=this._r=n+r;return l.width=l.height=2*p,h.shadowOffsetX=h.shadowOffsetY=200,h.shadowBlur=r,h.shadowColor="black",h.beginPath(),h.arc(p-200,p-200,n,0,2*Math.PI,!0),h.closePath(),h.fill(),this},gradient:function(n){var r=document.createElement("canvas"),l=r.getContext("2d"),h=l.createLinearGradient(0,0,0,256);r.width=1,r.height=256;for(var p in n)h.addColorStop(p,n[p]);return l.fillStyle=h,l.fillRect(0,0,1,256),this._grad=l.getImageData(0,0,1,256).data,this},draw:function(n){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var r=this._ctx;r.clearRect(0,0,this._width,this._height);for(var l,h=0,p=this._data.length;p>h;h++)l=this._data[h],r.globalAlpha=Math.max(l[2]/this._max,n||.05),r.drawImage(this._circle,l[0]-this._r,l[1]-this._r);var m=r.getImageData(0,0,this._width,this._height);return this._colorize(m.data,this._grad),r.putImageData(m,0,0),this},_colorize:function(n,r){for(var l,h=3,p=n.length;p>h;h+=4)l=4*n[h],l&&(n[h-3]=r[l],n[h-2]=r[l+1],n[h-1]=r[l+2])}},window.simpleheat=s})(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(s,n){this._latlngs=s,L.setOptions(this,n)},setLatLngs:function(s){return this._latlngs=s,this.redraw()},addLatLng:function(s){return this._latlngs.push(s),this.redraw()},setOptions:function(s){return L.setOptions(this,s),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(s){this._map=s,this._canvas||this._initCanvas(),s._panes.overlayPane.appendChild(this._canvas),s.on("moveend",this._reset,this),s.options.zoomAnimation&&L.Browser.any3d&&s.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(s){s.getPanes().overlayPane.removeChild(this._canvas),s.off("moveend",this._reset,this),s.options.zoomAnimation&&s.off("zoomanim",this._animateZoom,this)},addTo:function(s){return s.addLayer(this),this},_initCanvas:function(){var s=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),n=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);s.style[n]="50% 50%";var r=this._map.getSize();s.width=r.x,s.height=r.y;var l=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(s,"leaflet-zoom-"+(l?"animated":"hide")),this._heat=simpleheat(s),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var s=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,s);var n=this._map.getSize();this._heat._width!==n.x&&(this._canvas.width=this._heat._width=n.x),this._heat._height!==n.y&&(this._canvas.height=this._heat._height=n.y),this._redraw()},_redraw:function(){var s,n,r,l,h,p,m,w,C,S=[],R=this._heat._r,k=this._map.getSize(),N=new L.Bounds(L.point([-R,-R]),k.add([R,R])),Z=this.options.max===void 0?1:this.options.max,Y=this.options.maxZoom===void 0?this._map.getMaxZoom():this.options.maxZoom,K=1/Math.pow(2,Math.max(0,Math.min(Y-this._map.getZoom(),12))),oe=R/2,Le=[],De=this._map._getMapPanePos(),Re=De.x%oe,be=De.y%oe;for(s=0,n=this._latlngs.length;n>s;s++)if(r=this._map.latLngToContainerPoint(this._latlngs[s]),N.contains(r)){h=Math.floor((r.x-Re)/oe)+2,p=Math.floor((r.y-be)/oe)+2;var lt=this._latlngs[s].alt!==void 0?this._latlngs[s].alt:this._latlngs[s][2]!==void 0?+this._latlngs[s][2]:1;C=lt*K,Le[p]=Le[p]||[],l=Le[p][h],l?(l[0]=(l[0]*l[2]+r.x*C)/(l[2]+C),l[1]=(l[1]*l[2]+r.y*C)/(l[2]+C),l[2]+=C):Le[p][h]=[r.x,r.y,C]}for(s=0,n=Le.length;n>s;s++)if(Le[s])for(m=0,w=Le[s].length;w>m;m++)l=Le[s][m],l&&S.push([Math.round(l[0]),Math.round(l[1]),Math.min(l[2],Z)]);this._heat.data(S).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(s){var n=this._map.getZoomScale(s.zoom),r=this._map._getCenterOffset(s.center)._multiplyBy(-n).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,r,n):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(r)+" scale("+n+")"}}),L.heatLayer=function(s,n){return new L.HeatLayer(s,n)};function vS({userLocations:s}){const n=pS();return zh.useEffect(()=>{n.eachLayer(l=>{l.options&&l.options.pane==="overlayPane"&&n.removeLayer(l)});const r=s.map(l=>[l.lat,l.lng]);r.length>0&&aS.heatLayer(r,{radius:25,blur:1,maxZoom:17}).addTo(n)},[s,n]),null}function yS({userLocations:s}){const n=[32.75491,-117.205];return le.jsxs("div",{className:"mb-2 mt-4 p-4 bg-gray-900 rounded-lg shadow-lg text-center w-full max-w-2xl",children:[le.jsx("h2",{className:"text-md font-bold text-neon-purple mb-2 text-center",children:"See Where Other Users are Checked In!"}),le.jsx("div",{className:"w-full h-96",children:le.jsxs(mS,{center:n,zoom:12,className:"w-full h-full rounded-lg z-0",children:[le.jsx(gS,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'}),le.jsx(vS,{userLocations:s})]})})]})}const P_=["The Owl San Diego","Mavericks Beach Club","Nova SD","PB Shore Club","Parq","The Duck Dive","Side Bar","Phantom Lounge and Nightclub","The Casbah","The Rail","Oxford Social Club","The Tipsy Crow","Onyx","F6ix","Bloom","Omert","Sevilla","Mr Tempo","TORO","FLUXX","Prohibition Lounge","Spin","Moonshine Flats","710 Beach Club","Lahaina Beach House","PB Avenue","Moonshine Beach","Thrusters Lounge","The Local","Open Bar","Tavern at the Beach","The Silver Fox Lounge","The Collective","Firehouse","Hideaway"],wS=["Nova SD: DJ Snake performing this Friday!","Mavericks Beach Club: Voted #1 for daytime vibes!","Most Underrated: The Duck Dive (check it out!)","Newest Venue Added: The Collective","Longest Top Rated Streak: Firehouse","New Happy Hour Deal @ Hideaway"],CS=s=>s>=7?"text-green-500":s<5?"text-red-500":"text-gray-200",SS=s=>s?Math.min(1,s/10):0,ES=()=>{const[s,n]=ye.useState({}),[r,l]=ye.useState(new Set),[h,p]=ye.useState(null),[m,w]=ye.useState(P_.reduce((V,D)=>(V[D]=[],V),{})),[C,S]=ye.useState(""),[R,k]=ye.useState(!1),[N,Z]=ye.useState(""),[Y,K]=ye.useState(""),[oe,Le]=ye.useState(null),[De,Re]=ye.useState(""),[be,lt]=ye.useState({}),[ot,ht]=ye.useState(new Set),[Et,Ft]=ye.useState([]);ye.useEffect(()=>{const V=ti(ni,"ratings");Ta(V,D=>{const G=D.val();G&&n(G)})},[]),ye.useEffect(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(V=>{const{latitude:D,longitude:G}=V.coords,F=kC(ti(ni,"userLocations"));LC(F,{lat:D,lng:G,timestamp:Date.now()})},V=>{console.error("Error getting geolocation:",V)})},[]),ye.useEffect(()=>{const V=ti(ni,"userLocations"),D=Ta(V,G=>{if(G.exists()){const F=G.val(),P=Object.values(F);Ft(P)}else Ft([])});return()=>D()},[]),ye.useEffect(()=>{const V=ti(ni,"checkIns");Ta(V,D=>{const G=D.val()||{};lt(G)})},[]),ye.useEffect(()=>{const V=ti(ni,"topRating");Ta(V,D=>{const G=D.val();Le(G||null)})},[]),ye.useEffect(()=>{if(!h)return;const V=ti(ni,`comments/${h}`),D=Ta(V,G=>{const F=G.val();if(F){const P=Object.values(F).sort((B,ue)=>ue.timestamp-B.timestamp);w(B=>({...B,[h]:P}))}else w(P=>({...P,[h]:[]}))});return()=>D()},[h]);const Vt=V=>{const D=s[V];if(!D||D.count===0)return le.jsx("span",{className:"text-gray-400",children:"No ratings yet"});const G=D.total/D.count,F=CS(G);return le.jsx("span",{className:F,children:G.toFixed(1)})},Ke=()=>{if(!C.trim()||!h)return;const V=Date.now(),D=ti(ni,`comments/${h}/${V}`);yu(D,{text:C,timestamp:V}),S("")},$e=(V,D)=>{if(r.has(V)){alert("You have already rated this location.");return}const G=ti(ni,`ratings/${V}`),F=s[V]||{total:0,count:0};yu(G,{total:F.total+D,count:F.count+1}),l(P=>new Set(P).add(V))},xt=()=>{if(!N.trim()||!Y.trim())return;const V=Date.now(),D=ti(ni,`clubSubmissions/${V}`);yu(D,{email:N,message:Y,timestamp:V}),Z(""),K(""),k(!1)},Qe=V=>{var G;if(ot.has(V)){alert("You have already checked in at this location.");return}const D=((G=be[V])==null?void 0:G.count)||0;yu(ti(ni,`checkIns/${V}`),{count:D+1}).then(()=>{console.log(`Check-in successful for ${V}`),ht(F=>new Set(F).add(V))}).catch(F=>console.error("Check-in failed:",F))},Oe=[...P_].sort((V,D)=>{const G=s[V],F=s[D],P=G&&G.count>0?G.total/G.count:0;return(F&&F.count>0?F.total/F.count:0)-P}).filter(V=>V.toLowerCase().includes(De.toLowerCase()));return le.jsxs("div",{className:"min-h-screen w-screen flex flex-col items-center bg-black pt-0 p-4",children:[le.jsx(XC,{items:wS}),le.jsx("h1",{className:"text-5xl font-bold text-neon-purple mb-6 text-center",children:"CLUB HOPPR"}),le.jsx("h2",{className:"text-1xl font-bold text-neon-purple mb-6 text-center",children:"Give YOUR Rating of the Hottest Spots in Downtown SD & PB!"}),oe&&le.jsxs("div",{className:"mb-6 p-4 bg-gray-900 rounded-lg shadow-lg text-center",children:[le.jsx("h2",{className:"text-md font-bold text-neon-purple mb-2 text-center",children:" Top Rated from the Previous Night "}),le.jsx("h3",{className:"text-white font-bold text-3xl mt-2 mb-1 text-center",children:oe.club}),le.jsxs("p",{className:"text-yellow-400",children:["Average Rating: ",oe.average.toFixed(1)]})]}),le.jsx("div",{className:"w-full max-w-md mb-6",children:le.jsx("input",{type:"text",className:"w-full p-2 rounded bg-gray-800 text-white",placeholder:"Search for a club...",value:De,onChange:V=>Re(V.target.value)})}),le.jsx("div",{className:"w-screen max-w-2xl bg-gray-900 shadow-lg rounded-lg p-4 sm:p-6 md:p-8",children:Oe.map(V=>{var P;const D=s[V];let G=null;D&&D.count>0&&(G=D.total/D.count);const F=G?SS(G):0;return be[V],le.jsxs("div",{className:"border-b border-neon-purple py-4",children:[le.jsx("button",{className:"float-right px-4 py-2 text-sm sm:text-base sm:px-6 sm:py-3 bg-neon-purple text-black rounded hover:bg-purple-800 disabled:opacity-50",onClick:()=>p(V),children:"View Comments"}),le.jsxs("h2",{className:"text-2xl font-semibold text-white mb-2",children:[V,G&&le.jsx("span",{style:{marginLeft:"0.5rem",opacity:F},"aria-label":"Fire Emoji",children:""})]}),le.jsxs("p",{className:"text-gray-400 mb-2",children:["Average Rating: ",Vt(V)]}),le.jsx("div",{className:"flex flex-wrap space-x-1 mb-2",children:[1,2,3,4,5,6,7,8,9,10].map(B=>le.jsx("button",{onClick:()=>$e(V,B),className:"px-2 py-0.5 bg-neon-purple text-black rounded hover:bg-purple-800 disabled:opacity-50",disabled:r.has(V),children:B},B))}),le.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[le.jsx("button",{onClick:()=>Qe(V),className:"bg-blue-600 px-3 py-1 rounded hover:bg-blue-700 text-white",children:"Check In"}),le.jsxs("p",{className:"text-white",children:["Crowd Meter: ",le.jsx("span",{className:"text-yellow-400 font-bold",children:((P=be[V])==null?void 0:P.count)||0})," people"]})]})]},V)})}),le.jsx(yS,{userLocations:Et}),le.jsx("footer",{className:"mt-6 text-gray-400 text-sm text-center",children:"Ratings, Comments, & Check-Ins reset daily at 6:00 AM PST"}),le.jsx("button",{className:"mt-4 bg-neon-purple px-4 py-2 rounded hover:bg-purple-800 text-black",onClick:()=>k(!0),children:"Request a Bar/Club to be Added"}),h&&le.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-end z-50",children:le.jsxs("div",{className:"bg-gray-900 text-white w-80 h-full shadow-lg overflow-y-auto p-4 relative",children:[le.jsx("button",{className:"float-right top-4 right-4 text-gray-400 hover:text-gray-200",onClick:()=>p(null),children:"Close"}),le.jsx("h2",{className:"text-2xl font-bold mb-4",children:h}),le.jsxs("div",{className:"mt-4",children:[le.jsx("textarea",{className:"w-full bg-gray-800 text-white rounded p-2",rows:"3",value:C,onChange:V=>S(V.target.value),placeholder:"Add a comment..."}),le.jsx("button",{className:"mt-2 bg-neon-purple px-4 py-2 rounded hover:bg-purple-800",onClick:Ke,children:"Submit"})]}),le.jsx("div",{className:"flex flex-col space-y-4 mt-4",children:m[h].map((V,D)=>le.jsxs("div",{className:"border-b border-gray-700 pb-2",children:[le.jsx("p",{children:V.text}),le.jsx("p",{className:"text-sm text-gray-500",children:new Date(V.timestamp).toLocaleString()})]},D))})]})}),R&&le.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:le.jsxs("div",{className:"bg-gray-900 text-white w-80 rounded-lg shadow-lg p-4 relative",children:[le.jsx("button",{className:"float-right top-2 right-2 text-gray-400 hover:text-gray-200",onClick:()=>k(!1),children:"Close"}),le.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Request a New Club/Bar"}),le.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Your Email:"}),le.jsx("input",{type:"email",value:N,onChange:V=>Z(V.target.value),className:"w-full mb-4 p-2 rounded bg-gray-800 text-white",placeholder:"email@example.com"}),le.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Club/Bar Name & Message:"}),le.jsx("textarea",{value:Y,onChange:V=>K(V.target.value),rows:3,className:"w-full mb-4 p-2 rounded bg-gray-800 text-white",placeholder:"Tell us which club/bar you want added..."}),le.jsx("button",{onClick:xt,className:"bg-neon-purple px-4 py-2 rounded hover:bg-purple-800 text-black",children:"Submit"})]})})]})};jg.createRoot(document.getElementById("root")).render(le.jsx(ye.StrictMode,{children:le.jsx(ES,{})}));
