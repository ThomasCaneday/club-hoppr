(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function Kh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lf={exports:{}},vu={},Nf={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function K0(){if(Ng)return nt;Ng=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),A=Symbol.iterator;function R(k){return k===null||typeof k!="object"?null:(k=A&&k[A]||k["@@iterator"],typeof k=="function"?k:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,ne={};function ie(k,G,oe){this.props=k,this.context=G,this.refs=ne,this.updater=oe||U}ie.prototype.isReactComponent={},ie.prototype.setState=function(k,G){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,G,"setState")},ie.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function Ae(){}Ae.prototype=ie.prototype;function De(k,G,oe){this.props=k,this.context=G,this.refs=ne,this.updater=oe||U}var Pe=De.prototype=new Ae;Pe.constructor=De,J(Pe,ie.prototype),Pe.isPureReactComponent=!0;var Ue=Array.isArray,tt=Object.prototype.hasOwnProperty,Oe={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function D(k,G,oe){var fe,me={},de=null,Ve=null;if(G!=null)for(fe in G.ref!==void 0&&(Ve=G.ref),G.key!==void 0&&(de=""+G.key),G)tt.call(G,fe)&&!j.hasOwnProperty(fe)&&(me[fe]=G[fe]);var be=arguments.length-2;if(be===1)me.children=oe;else if(1<be){for(var Ke=Array(be),st=0;st<be;st++)Ke[st]=arguments[st+2];me.children=Ke}if(k&&k.defaultProps)for(fe in be=k.defaultProps,be)me[fe]===void 0&&(me[fe]=be[fe]);return{$$typeof:n,type:k,key:de,ref:Ve,props:me,_owner:Oe.current}}function b(k,G){return{$$typeof:n,type:k.type,key:G,ref:k.ref,props:k.props,_owner:k._owner}}function F(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function O(k){var G={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(oe){return G[oe]})}var q=/\/+/g;function M(k,G){return typeof k=="object"&&k!==null&&k.key!=null?O(""+k.key):G.toString(36)}function we(k,G,oe,fe,me){var de=typeof k;(de==="undefined"||de==="boolean")&&(k=null);var Ve=!1;if(k===null)Ve=!0;else switch(de){case"string":case"number":Ve=!0;break;case"object":switch(k.$$typeof){case n:case e:Ve=!0}}if(Ve)return Ve=k,me=me(Ve),k=fe===""?"."+M(Ve,0):fe,Ue(me)?(oe="",k!=null&&(oe=k.replace(q,"$&/")+"/"),we(me,G,oe,"",function(st){return st})):me!=null&&(F(me)&&(me=b(me,oe+(!me.key||Ve&&Ve.key===me.key?"":(""+me.key).replace(q,"$&/")+"/")+k)),G.push(me)),1;if(Ve=0,fe=fe===""?".":fe+":",Ue(k))for(var be=0;be<k.length;be++){de=k[be];var Ke=fe+M(de,be);Ve+=we(de,G,oe,Ke,me)}else if(Ke=R(k),typeof Ke=="function")for(k=Ke.call(k),be=0;!(de=k.next()).done;)de=de.value,Ke=fe+M(de,be++),Ve+=we(de,G,oe,Ke,me);else if(de==="object")throw G=String(k),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ve}function _e(k,G,oe){if(k==null)return k;var fe=[],me=0;return we(k,fe,"","",function(de){return G.call(oe,de,me++)}),fe}function ae(k){if(k._status===-1){var G=k._result;G=G(),G.then(function(oe){(k._status===0||k._status===-1)&&(k._status=1,k._result=oe)},function(oe){(k._status===0||k._status===-1)&&(k._status=2,k._result=oe)}),k._status===-1&&(k._status=0,k._result=G)}if(k._status===1)return k._result.default;throw k._result}var ce={current:null},B={transition:null},Z={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:B,ReactCurrentOwner:Oe};function W(){throw Error("act(...) is not supported in production builds of React.")}return nt.Children={map:_e,forEach:function(k,G,oe){_e(k,function(){G.apply(this,arguments)},oe)},count:function(k){var G=0;return _e(k,function(){G++}),G},toArray:function(k){return _e(k,function(G){return G})||[]},only:function(k){if(!F(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},nt.Component=ie,nt.Fragment=t,nt.Profiler=a,nt.PureComponent=De,nt.StrictMode=r,nt.Suspense=y,nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,nt.act=W,nt.cloneElement=function(k,G,oe){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var fe=J({},k.props),me=k.key,de=k.ref,Ve=k._owner;if(G!=null){if(G.ref!==void 0&&(de=G.ref,Ve=Oe.current),G.key!==void 0&&(me=""+G.key),k.type&&k.type.defaultProps)var be=k.type.defaultProps;for(Ke in G)tt.call(G,Ke)&&!j.hasOwnProperty(Ke)&&(fe[Ke]=G[Ke]===void 0&&be!==void 0?be[Ke]:G[Ke])}var Ke=arguments.length-2;if(Ke===1)fe.children=oe;else if(1<Ke){be=Array(Ke);for(var st=0;st<Ke;st++)be[st]=arguments[st+2];fe.children=be}return{$$typeof:n,type:k.type,key:me,ref:de,props:fe,_owner:Ve}},nt.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:c,_context:k},k.Consumer=k},nt.createElement=D,nt.createFactory=function(k){var G=D.bind(null,k);return G.type=k,G},nt.createRef=function(){return{current:null}},nt.forwardRef=function(k){return{$$typeof:m,render:k}},nt.isValidElement=F,nt.lazy=function(k){return{$$typeof:I,_payload:{_status:-1,_result:k},_init:ae}},nt.memo=function(k,G){return{$$typeof:T,type:k,compare:G===void 0?null:G}},nt.startTransition=function(k){var G=B.transition;B.transition={};try{k()}finally{B.transition=G}},nt.unstable_act=W,nt.useCallback=function(k,G){return ce.current.useCallback(k,G)},nt.useContext=function(k){return ce.current.useContext(k)},nt.useDebugValue=function(){},nt.useDeferredValue=function(k){return ce.current.useDeferredValue(k)},nt.useEffect=function(k,G){return ce.current.useEffect(k,G)},nt.useId=function(){return ce.current.useId()},nt.useImperativeHandle=function(k,G,oe){return ce.current.useImperativeHandle(k,G,oe)},nt.useInsertionEffect=function(k,G){return ce.current.useInsertionEffect(k,G)},nt.useLayoutEffect=function(k,G){return ce.current.useLayoutEffect(k,G)},nt.useMemo=function(k,G){return ce.current.useMemo(k,G)},nt.useReducer=function(k,G,oe){return ce.current.useReducer(k,G,oe)},nt.useRef=function(k){return ce.current.useRef(k)},nt.useState=function(k){return ce.current.useState(k)},nt.useSyncExternalStore=function(k,G,oe){return ce.current.useSyncExternalStore(k,G,oe)},nt.useTransition=function(){return ce.current.useTransition()},nt.version="18.3.1",nt}var Mg;function Zh(){return Mg||(Mg=1,Nf.exports=K0()),Nf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function Z0(){if(bg)return vu;bg=1;var n=Zh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(m,y,T){var I,A={},R=null,U=null;T!==void 0&&(R=""+T),y.key!==void 0&&(R=""+y.key),y.ref!==void 0&&(U=y.ref);for(I in y)r.call(y,I)&&!c.hasOwnProperty(I)&&(A[I]=y[I]);if(m&&m.defaultProps)for(I in y=m.defaultProps,y)A[I]===void 0&&(A[I]=y[I]);return{$$typeof:e,type:m,key:R,ref:U,props:A,_owner:a.current}}return vu.Fragment=t,vu.jsx=d,vu.jsxs=d,vu}var Og;function Q0(){return Og||(Og=1,Lf.exports=Z0()),Lf.exports}var ke=Q0(),Xe=Zh();const Jf=Kh(Xe);var ah={},Mf={exports:{}},gi={},bf={exports:{}},Of={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function Y0(){return Vg||(Vg=1,function(n){function e(B,Z){var W=B.length;B.push(Z);e:for(;0<W;){var k=W-1>>>1,G=B[k];if(0<a(G,Z))B[k]=Z,B[W]=G,W=k;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Z=B[0],W=B.pop();if(W!==Z){B[0]=W;e:for(var k=0,G=B.length,oe=G>>>1;k<oe;){var fe=2*(k+1)-1,me=B[fe],de=fe+1,Ve=B[de];if(0>a(me,W))de<G&&0>a(Ve,me)?(B[k]=Ve,B[de]=W,k=de):(B[k]=me,B[fe]=W,k=fe);else if(de<G&&0>a(Ve,W))B[k]=Ve,B[de]=W,k=de;else break e}}return Z}function a(B,Z){var W=B.sortIndex-Z.sortIndex;return W!==0?W:B.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();n.unstable_now=function(){return d.now()-m}}var y=[],T=[],I=1,A=null,R=3,U=!1,J=!1,ne=!1,ie=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,De=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Pe(B){for(var Z=t(T);Z!==null;){if(Z.callback===null)r(T);else if(Z.startTime<=B)r(T),Z.sortIndex=Z.expirationTime,e(y,Z);else break;Z=t(T)}}function Ue(B){if(ne=!1,Pe(B),!J)if(t(y)!==null)J=!0,ae(tt);else{var Z=t(T);Z!==null&&ce(Ue,Z.startTime-B)}}function tt(B,Z){J=!1,ne&&(ne=!1,Ae(D),D=-1),U=!0;var W=R;try{for(Pe(Z),A=t(y);A!==null&&(!(A.expirationTime>Z)||B&&!O());){var k=A.callback;if(typeof k=="function"){A.callback=null,R=A.priorityLevel;var G=k(A.expirationTime<=Z);Z=n.unstable_now(),typeof G=="function"?A.callback=G:A===t(y)&&r(y),Pe(Z)}else r(y);A=t(y)}if(A!==null)var oe=!0;else{var fe=t(T);fe!==null&&ce(Ue,fe.startTime-Z),oe=!1}return oe}finally{A=null,R=W,U=!1}}var Oe=!1,j=null,D=-1,b=5,F=-1;function O(){return!(n.unstable_now()-F<b)}function q(){if(j!==null){var B=n.unstable_now();F=B;var Z=!0;try{Z=j(!0,B)}finally{Z?M():(Oe=!1,j=null)}}else Oe=!1}var M;if(typeof De=="function")M=function(){De(q)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,_e=we.port2;we.port1.onmessage=q,M=function(){_e.postMessage(null)}}else M=function(){ie(q,0)};function ae(B){j=B,Oe||(Oe=!0,M())}function ce(B,Z){D=ie(function(){B(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){J||U||(J=!0,ae(tt))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return R},n.unstable_getFirstCallbackNode=function(){return t(y)},n.unstable_next=function(B){switch(R){case 1:case 2:case 3:var Z=3;break;default:Z=R}var W=R;R=Z;try{return B()}finally{R=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,Z){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var W=R;R=B;try{return Z()}finally{R=W}},n.unstable_scheduleCallback=function(B,Z,W){var k=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?k+W:k):W=k,B){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=W+G,B={id:I++,callback:Z,priorityLevel:B,startTime:W,expirationTime:G,sortIndex:-1},W>k?(B.sortIndex=W,e(T,B),t(y)===null&&B===t(T)&&(ne?(Ae(D),D=-1):ne=!0,ce(Ue,W-k))):(B.sortIndex=G,e(y,B),J||U||(J=!0,ae(tt))),B},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(B){var Z=R;return function(){var W=R;R=Z;try{return B.apply(this,arguments)}finally{R=W}}}}(Of)),Of}var Fg;function X0(){return Fg||(Fg=1,bf.exports=Y0()),bf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function J0(){if(zg)return gi;zg=1;var n=Zh(),e=X0();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function c(i,o){d(i,o),d(i+"Capture",o)}function d(i,o){for(a[i]=o,i=0;i<o.length;i++)r.add(o[i])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},A={};function R(i){return y.call(A,i)?!0:y.call(I,i)?!1:T.test(i)?A[i]=!0:(I[i]=!0,!1)}function U(i,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function J(i,o,u,p){if(o===null||typeof o>"u"||U(i,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function ne(i,o,u,p,g,w,C){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=w,this.removeEmptyString=C}var ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){ie[i]=new ne(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];ie[o]=new ne(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){ie[i]=new ne(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){ie[i]=new ne(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){ie[i]=new ne(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){ie[i]=new ne(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){ie[i]=new ne(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){ie[i]=new ne(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){ie[i]=new ne(i,5,!1,i.toLowerCase(),null,!1,!1)});var Ae=/[\-:]([a-z])/g;function De(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(Ae,De);ie[o]=new ne(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(Ae,De);ie[o]=new ne(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(Ae,De);ie[o]=new ne(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){ie[i]=new ne(i,1,!1,i.toLowerCase(),null,!1,!1)}),ie.xlinkHref=new ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){ie[i]=new ne(i,1,!1,i.toLowerCase(),null,!0,!0)});function Pe(i,o,u,p){var g=ie.hasOwnProperty(o)?ie[o]:null;(g!==null?g.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(J(o,u,g,p)&&(u=null),p||g===null?R(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,p=g.attributeNamespace,u===null?i.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?i.setAttributeNS(p,o,u):i.setAttribute(o,u))))}var Ue=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tt=Symbol.for("react.element"),Oe=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),O=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),B=Symbol.iterator;function Z(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var W=Object.assign,k;function G(i){if(k===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);k=o&&o[1]||""}return`
`+k+i}var oe=!1;function fe(i,o){if(!i||oe)return"";oe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(ee){var p=ee}Reflect.construct(i,[],o)}else{try{o.call()}catch(ee){p=ee}i.call(o.prototype)}else{try{throw Error()}catch(ee){p=ee}i()}}catch(ee){if(ee&&p&&typeof ee.stack=="string"){for(var g=ee.stack.split(`
`),w=p.stack.split(`
`),C=g.length-1,N=w.length-1;1<=C&&0<=N&&g[C]!==w[N];)N--;for(;1<=C&&0<=N;C--,N--)if(g[C]!==w[N]){if(C!==1||N!==1)do if(C--,N--,0>N||g[C]!==w[N]){var z=`
`+g[C].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=C&&0<=N);break}}}finally{oe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?G(i):""}function me(i){switch(i.tag){case 5:return G(i.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return i=fe(i.type,!1),i;case 11:return i=fe(i.type.render,!1),i;case 1:return i=fe(i.type,!0),i;default:return""}}function de(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case Oe:return"Portal";case b:return"Profiler";case D:return"StrictMode";case M:return"Suspense";case we:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case F:return(i._context.displayName||"Context")+".Provider";case q:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case _e:return o=i.displayName||null,o!==null?o:de(i.type)||"Memo";case ae:o=i._payload,i=i._init;try{return de(i(o))}catch{}}return null}function Ve(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(o);case 8:return o===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function be(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ke(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function st(i){var o=Ke(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,w=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(C){p=""+C,w.call(this,C)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(C){p=""+C},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ut(i){i._valueTracker||(i._valueTracker=st(i))}function hn(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return i&&(p=Ke(i)?i.checked?"true":"false":i.value),i=p,i!==u?(o.setValue(i),!0):!1}function Sn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function jr(i,o){var u=o.checked;return W({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Wr(i,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=be(o.value!=null?o.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ds(i,o){o=o.checked,o!=null&&Pe(i,"checked",o,!1)}function Hr(i,o){Ds(i,o);var u=be(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Ls(i,o.type,u):o.hasOwnProperty("defaultValue")&&Ls(i,o.type,be(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function qr(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Ls(i,o,u){(o!=="number"||Sn(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Ni=Array.isArray;function wi(i,o,u,p){if(i=i.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=o.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&p&&(i[u].defaultSelected=!0)}else{for(u=""+be(u),o=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,p&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function Ns(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function $r(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Ni(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:be(u)}}function Ms(i,o){var u=be(o.value),p=be(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function Ho(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Mt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Mt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Mi,qo=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,g){MSApp.execUnsafeLocalFunction(function(){return i(o,u,p,g)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Mi=Mi||document.createElement("div"),Mi.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Mi.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Qi(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gr=["Webkit","ms","Moz","O"];Object.keys(gr).forEach(function(i){Gr.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),gr[o]=gr[i]})});function bs(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||gr.hasOwnProperty(i)&&gr[i]?(""+o).trim():o+"px"}function Kr(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=bs(u,o[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,g):i[u]=g}}var Os=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $o(i,o){if(o){if(Os[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Yi(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zr=null;function Vs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qr=null,$n=null,Ei=null;function Fs(i){if(i=gs(i)){if(typeof Qr!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Za(o),Qr(i.stateNode,i.type,o))}}function bi(i){$n?Ei?Ei.push(i):Ei=[i]:$n=i}function Go(){if($n){var i=$n,o=Ei;if(Ei=$n=null,Fs(i),o)for(i=0;i<o.length;i++)Fs(o[i])}}function Yr(i,o){return i(o)}function Ko(){}var Xi=!1;function Xr(i,o,u){if(Xi)return i(o,u);Xi=!0;try{return Yr(i,o,u)}finally{Xi=!1,($n!==null||Ei!==null)&&(Ko(),Go())}}function bt(i,o){var u=i.stateNode;if(u===null)return null;var p=Za(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var zs=!1;if(m)try{var Ti={};Object.defineProperty(Ti,"passive",{get:function(){zs=!0}}),window.addEventListener("test",Ti,Ti),window.removeEventListener("test",Ti,Ti)}catch{zs=!1}function Jr(i,o,u,p,g,w,C,N,z){var ee=Array.prototype.slice.call(arguments,3);try{o.apply(u,ee)}catch(ue){this.onError(ue)}}var dn=!1,xe=null,ei=!1,Bs=null,Da={onError:function(i){dn=!0,xe=i}};function es(i,o,u,p,g,w,C,N,z){dn=!1,xe=null,Jr.apply(Da,arguments)}function Us(i,o,u,p,g,w,C,N,z){if(es.apply(this,arguments),dn){if(dn){var ee=xe;dn=!1,xe=null}else throw Error(t(198));ei||(ei=!0,Bs=ee)}}function ti(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function ni(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function ii(i){if(ti(i)!==i)throw Error(t(188))}function La(i){var o=i.alternate;if(!o){if(o=ti(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,p=o;;){var g=u.return;if(g===null)break;var w=g.alternate;if(w===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===u)return ii(g),i;if(w===p)return ii(g),o;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=w;else{for(var C=!1,N=g.child;N;){if(N===u){C=!0,u=g,p=w;break}if(N===p){C=!0,p=g,u=w;break}N=N.sibling}if(!C){for(N=w.child;N;){if(N===u){C=!0,u=w,p=g;break}if(N===p){C=!0,p=w,u=g;break}N=N.sibling}if(!C)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Zo(i){return i=La(i),i!==null?js(i):null}function js(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=js(i);if(o!==null)return o;i=i.sibling}return null}var Ws=e.unstable_scheduleCallback,Hs=e.unstable_cancelCallback,Na=e.unstable_shouldYield,qs=e.unstable_requestPaint,St=e.unstable_now,Ma=e.unstable_getCurrentPriorityLevel,ts=e.unstable_ImmediatePriority,yr=e.unstable_UserBlockingPriority,ri=e.unstable_NormalPriority,ns=e.unstable_LowPriority,vr=e.unstable_IdlePriority,wr=null,Ln=null;function Er(i){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(wr,i,void 0,(i.current.flags&128)===128)}catch{}}var He=Math.clz32?Math.clz32:Ji,wt=Math.log,is=Math.LN2;function Ji(i){return i>>>=0,i===0?32:31-(wt(i)/is|0)|0}var Si=64,Tr=4194304;function We(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Et(i,o){var u=i.pendingLanes;if(u===0)return 0;var p=0,g=i.suspendedLanes,w=i.pingedLanes,C=u&268435455;if(C!==0){var N=C&~g;N!==0?p=We(N):(w&=C,w!==0&&(p=We(w)))}else C=u&~g,C!==0?p=We(C):w!==0&&(p=We(w));if(p===0)return 0;if(o!==0&&o!==p&&!(o&g)&&(g=p&-p,w=o&-o,g>=w||g===16&&(w&4194240)!==0))return o;if(p&4&&(p|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)u=31-He(o),g=1<<u,p|=i[u],o&=~g;return p}function Qo(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function si(i,o){for(var u=i.suspendedLanes,p=i.pingedLanes,g=i.expirationTimes,w=i.pendingLanes;0<w;){var C=31-He(w),N=1<<C,z=g[C];z===-1?(!(N&u)||N&p)&&(g[C]=Qo(N,o)):z<=o&&(i.expiredLanes|=N),w&=~N}}function At(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function rs(){var i=Si;return Si<<=1,!(Si&4194240)&&(Si=64),i}function Ci(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Nn(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-He(o),i[o]=u}function qe(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-He(u),w=1<<g;o[g]=0,p[g]=-1,i[g]=-1,u&=~w}}function Mn(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var p=31-He(u),g=1<<p;g&o|i[p]&o&&(i[p]|=o),u&=~g}}var Je=0;function oi(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var $s,Oi,Gs,Ks,ss,os=!1,ai=[],Wt=null,li=null,Gn=null,Sr=new Map,Me=new Map,Kt=[],gt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yo(i,o){switch(i){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":Sr.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Me.delete(o.pointerId)}}function fn(i,o,u,p,g,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[g]},o!==null&&(o=gs(o),o!==null&&Oi(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function Xo(i,o,u,p,g){switch(o){case"focusin":return Wt=fn(Wt,i,o,u,p,g),!0;case"dragenter":return li=fn(li,i,o,u,p,g),!0;case"mouseover":return Gn=fn(Gn,i,o,u,p,g),!0;case"pointerover":var w=g.pointerId;return Sr.set(w,fn(Sr.get(w)||null,i,o,u,p,g)),!0;case"gotpointercapture":return w=g.pointerId,Me.set(w,fn(Me.get(w)||null,i,o,u,p,g)),!0}return!1}function Zs(i){var o=_s(i.target);if(o!==null){var u=ti(o);if(u!==null){if(o=u.tag,o===13){if(o=ni(u),o!==null){i.blockedOn=o,ss(i.priority,function(){Gs(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cn(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=us(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Zr=p,u.target.dispatchEvent(p),Zr=null}else return o=gs(u),o!==null&&Oi(o),i.blockedOn=u,!1;o.shift()}return!0}function er(i,o,u){Cn(i)&&u.delete(o)}function Cr(){os=!1,Wt!==null&&Cn(Wt)&&(Wt=null),li!==null&&Cn(li)&&(li=null),Gn!==null&&Cn(Gn)&&(Gn=null),Sr.forEach(er),Me.forEach(er)}function Tt(i,o){i.blockedOn===o&&(i.blockedOn=null,os||(os=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Cr)))}function on(i){function o(g){return Tt(g,i)}if(0<ai.length){Tt(ai[0],i);for(var u=1;u<ai.length;u++){var p=ai[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Wt!==null&&Tt(Wt,i),li!==null&&Tt(li,i),Gn!==null&&Tt(Gn,i),Sr.forEach(o),Me.forEach(o),u=0;u<Kt.length;u++)p=Kt[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Kt.length&&(u=Kt[0],u.blockedOn===null);)Zs(u),u.blockedOn===null&&Kt.shift()}var Vi=Ue.ReactCurrentBatchConfig,tr=!0;function Pt(i,o,u,p){var g=Je,w=Vi.transition;Vi.transition=null;try{Je=1,as(i,o,u,p)}finally{Je=g,Vi.transition=w}}function ba(i,o,u,p){var g=Je,w=Vi.transition;Vi.transition=null;try{Je=4,as(i,o,u,p)}finally{Je=g,Vi.transition=w}}function as(i,o,u,p){if(tr){var g=us(i,o,u,p);if(g===null)s(i,o,p,ls,u),Yo(i,p);else if(Xo(g,i,o,u,p))p.stopPropagation();else if(Yo(i,p),o&4&&-1<gt.indexOf(i)){for(;g!==null;){var w=gs(g);if(w!==null&&$s(w),w=us(i,o,u,p),w===null&&s(i,o,p,ls,u),w===g)break;g=w}g!==null&&p.stopPropagation()}else s(i,o,p,null,u)}}var ls=null;function us(i,o,u,p){if(ls=null,i=Vs(p),i=_s(i),i!==null)if(o=ti(i),o===null)i=null;else if(u=o.tag,u===13){if(i=ni(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ls=i,null}function et(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ma()){case ts:return 1;case yr:return 4;case ri:case ns:return 16;case vr:return 536870912;default:return 16}default:return 16}}var Kn=null,pn=null,Xt=null;function Qs(){if(Xt)return Xt;var i,o=pn,u=o.length,p,g="value"in Kn?Kn.value:Kn.textContent,w=g.length;for(i=0;i<u&&o[i]===g[i];i++);var C=u-i;for(p=1;p<=C&&o[u-p]===g[w-p];p++);return Xt=g.slice(i,1<p?1-p:void 0)}function Ys(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ui(){return!0}function Jo(){return!1}function Jt(i){function o(u,p,g,w,C){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(u=i[N],this[N]=u?u(w):w[N]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ui:Jo,this.isPropagationStopped=Jo,this}return W(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),o}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=Jt(Ii),ci=W({},Ii,{view:0,detail:0}),$l=Jt(ci),In,nr,ir,bn=W({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ir&&(ir&&i.type==="mousemove"?(In=i.screenX-ir.screenX,nr=i.screenY-ir.screenY):nr=In=0,ir=i),In)},movementY:function(i){return"movementY"in i?i.movementY:nr}}),cs=Jt(bn),Js=W({},bn,{dataTransfer:0}),eo=Jt(Js),to=W({},ci,{relatedTarget:0}),hs=Jt(to),ea=W({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),rr=Jt(ea),Oa=W({},Ii,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),no=Jt(Oa),Va=W({},Ii,{data:0}),io=Jt(Va),ds={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},en={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fa(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Fi[i])?!!o[i]:!1}function On(){return Fa}var h=W({},ci,{key:function(i){if(i.key){var o=ds[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Ys(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?en[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(i){return i.type==="keypress"?Ys(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ys(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=Jt(h),S=W({},bn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P=Jt(S),$=W({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On}),te=Jt($),ye=W({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),mt=Jt(ye),Ht=W({},bn,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),at=Jt(Ht),yt=[9,13,27,32],xt=m&&"CompositionEvent"in window,hi=null;m&&"documentMode"in document&&(hi=document.documentMode);var Ot=m&&"TextEvent"in window&&!hi,fs=m&&(!xt||hi&&8<hi&&11>=hi),xi=" ",hc=!1;function ro(i,o){switch(i){case"keyup":return yt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var sr=!1;function Td(i,o){switch(i){case"compositionend":return Gl(o);case"keypress":return o.which!==32?null:(hc=!0,xi);case"textInput":return i=o.data,i===xi&&hc?null:i;default:return null}}function Ir(i,o){if(sr)return i==="compositionend"||!xt&&ro(i,o)?(i=Qs(),Xt=pn=Kn=null,sr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return fs&&o.locale!=="ko"?null:o.data;default:return null}}var za={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!za[i.type]:o==="textarea"}function Ba(i,o,u,p){bi(p),o=f(o,"onChange"),0<o.length&&(u=new Xs("onChange","change",null,u,p),i.push({event:u,listeners:o}))}var ta=null,Zn=null;function Sd(i){nu(i,0)}function or(i){var o=ys(i);if(hn(o))return i}function Cd(i,o){if(i==="change")return o}var zi=!1;if(m){var so;if(m){var Ua="oninput"in document;if(!Ua){var ja=document.createElement("div");ja.setAttribute("oninput","return;"),Ua=typeof ja.oninput=="function"}so=Ua}else so=!1;zi=so&&(!document.documentMode||9<document.documentMode)}function na(){ta&&(ta.detachEvent("onpropertychange",Wa),Zn=ta=null)}function Wa(i){if(i.propertyName==="value"&&or(Zn)){var o=[];Ba(o,Zn,i,Vs(i)),Xr(Sd,o)}}function Ha(i,o,u){i==="focusin"?(na(),ta=o,Zn=u,ta.attachEvent("onpropertychange",Wa)):i==="focusout"&&na()}function oo(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return or(Zn)}function qa(i,o){if(i==="click")return or(o)}function Kl(i,o){if(i==="input"||i==="change")return or(o)}function fc(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Ai=typeof Object.is=="function"?Object.is:fc;function xr(i,o){if(Ai(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!y.call(o,g)||!Ai(i[g],o[g]))return!1}return!0}function pc(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Zl(i,o){var u=pc(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=o&&p>=o)return{node:u,offset:o-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=pc(u)}}function mc(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?mc(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Ql(){for(var i=window,o=Sn();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Sn(i.document)}return o}function Yl(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Bi(i){var o=Ql(),u=i.focusedElem,p=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&mc(u.ownerDocument.documentElement,u)){if(p!==null&&Yl(u)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,w=Math.min(p.start,g);p=p.end===void 0?w:Math.min(p.end,g),!i.extend&&w>p&&(g=p,p=w,w=g),g=Zl(u,w);var C=Zl(u,p);g&&C&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),w>p?(i.addRange(o),i.extend(C.node,C.offset)):(o.setEnd(C.node,C.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var $a=m&&"documentMode"in document&&11>=document.documentMode,ao=null,lo=null,ia=null,Ga=!1;function _c(i,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ga||ao==null||ao!==Sn(p)||(p=ao,"selectionStart"in p&&Yl(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ia&&xr(ia,p)||(ia=p,p=f(lo,"onSelect"),0<p.length&&(o=new Xs("onSelect","select",null,o,u),i.push({event:o,listeners:p}),o.target=ao)))}function Ar(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var uo={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionend:Ar("Transition","TransitionEnd")},Pr={},Xl={};m&&(Xl=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function ra(i){if(Pr[i])return Pr[i];if(!uo[i])return i;var o=uo[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Xl)return Pr[i]=o[u];return i}var gc=ra("animationend"),Ui=ra("animationiteration"),Jl=ra("animationstart"),eu=ra("transitionend"),co=new Map,yc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(i,o){co.set(i,o),c(o,[i])}for(var ps=0;ps<yc.length;ps++){var Ka=yc[ps],vc=Ka.toLowerCase(),Id=Ka[0].toUpperCase()+Ka.slice(1);Pi(vc,"on"+Id)}Pi(gc,"onAnimationEnd"),Pi(Ui,"onAnimationIteration"),Pi(Jl,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(eu,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wc=new Set("cancel close invalid load scroll toggle".split(" ").concat(ho));function tu(i,o,u){var p=i.type||"unknown-event";i.currentTarget=u,Us(p,o,void 0,i),i.currentTarget=null}function nu(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],g=p.event;p=p.listeners;e:{var w=void 0;if(o)for(var C=p.length-1;0<=C;C--){var N=p[C],z=N.instance,ee=N.currentTarget;if(N=N.listener,z!==w&&g.isPropagationStopped())break e;tu(g,N,ee),w=z}else for(C=0;C<p.length;C++){if(N=p[C],z=N.instance,ee=N.currentTarget,N=N.listener,z!==w&&g.isPropagationStopped())break e;tu(g,N,ee),w=z}}}if(ei)throw i=Bs,ei=!1,Bs=null,i}function Ct(i,o){var u=o[_o];u===void 0&&(u=o[_o]=new Set);var p=i+"__bubble";u.has(p)||(Ec(o,i,2,!1),u.add(p))}function iu(i,o,u){var p=0;o&&(p|=4),Ec(u,i,p,o)}var sa="_reactListening"+Math.random().toString(36).slice(2);function fo(i){if(!i[sa]){i[sa]=!0,r.forEach(function(u){u!=="selectionchange"&&(wc.has(u)||iu(u,!1,i),iu(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[sa]||(o[sa]=!0,iu("selectionchange",!1,o))}}function Ec(i,o,u,p){switch(et(o)){case 1:var g=Pt;break;case 4:g=ba;break;default:g=as}u=g.bind(null,o,u,i),g=void 0,!zs||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),p?g!==void 0?i.addEventListener(o,u,{capture:!0,passive:g}):i.addEventListener(o,u,!0):g!==void 0?i.addEventListener(o,u,{passive:g}):i.addEventListener(o,u,!1)}function s(i,o,u,p,g){var w=p;if(!(o&1)&&!(o&2)&&p!==null)e:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var N=p.stateNode.containerInfo;if(N===g||N.nodeType===8&&N.parentNode===g)break;if(C===4)for(C=p.return;C!==null;){var z=C.tag;if((z===3||z===4)&&(z=C.stateNode.containerInfo,z===g||z.nodeType===8&&z.parentNode===g))return;C=C.return}for(;N!==null;){if(C=_s(N),C===null)return;if(z=C.tag,z===5||z===6){p=w=C;continue e}N=N.parentNode}}p=p.return}Xr(function(){var ee=w,ue=Vs(u),he=[];e:{var le=co.get(i);if(le!==void 0){var Te=Xs,Ie=i;switch(i){case"keypress":if(Ys(u)===0)break e;case"keydown":case"keyup":Te=v;break;case"focusin":Ie="focus",Te=hs;break;case"focusout":Ie="blur",Te=hs;break;case"beforeblur":case"afterblur":Te=hs;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=cs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=eo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=te;break;case gc:case Ui:case Jl:Te=rr;break;case eu:Te=mt;break;case"scroll":Te=$l;break;case"wheel":Te=at;break;case"copy":case"cut":case"paste":Te=no;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=P}var Re=(o&4)!==0,Zt=!Re&&i==="scroll",Q=Re?le!==null?le+"Capture":null:le;Re=[];for(var H=ee,Y;H!==null;){Y=H;var pe=Y.stateNode;if(Y.tag===5&&pe!==null&&(Y=pe,Q!==null&&(pe=bt(H,Q),pe!=null&&Re.push(l(H,pe,Y)))),Zt)break;H=H.return}0<Re.length&&(le=new Te(le,Ie,null,u,ue),he.push({event:le,listeners:Re}))}}if(!(o&7)){e:{if(le=i==="mouseover"||i==="pointerover",Te=i==="mouseout"||i==="pointerout",le&&u!==Zr&&(Ie=u.relatedTarget||u.fromElement)&&(_s(Ie)||Ie[vt]))break e;if((Te||le)&&(le=ue.window===ue?ue:(le=ue.ownerDocument)?le.defaultView||le.parentWindow:window,Te?(Ie=u.relatedTarget||u.toElement,Te=ee,Ie=Ie?_s(Ie):null,Ie!==null&&(Zt=ti(Ie),Ie!==Zt||Ie.tag!==5&&Ie.tag!==6)&&(Ie=null)):(Te=null,Ie=ee),Te!==Ie)){if(Re=cs,pe="onMouseLeave",Q="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Re=P,pe="onPointerLeave",Q="onPointerEnter",H="pointer"),Zt=Te==null?le:ys(Te),Y=Ie==null?le:ys(Ie),le=new Re(pe,H+"leave",Te,u,ue),le.target=Zt,le.relatedTarget=Y,pe=null,_s(ue)===ee&&(Re=new Re(Q,H+"enter",Ie,u,ue),Re.target=Y,Re.relatedTarget=Zt,pe=Re),Zt=pe,Te&&Ie)t:{for(Re=Te,Q=Ie,H=0,Y=Re;Y;Y=_(Y))H++;for(Y=0,pe=Q;pe;pe=_(pe))Y++;for(;0<H-Y;)Re=_(Re),H--;for(;0<Y-H;)Q=_(Q),Y--;for(;H--;){if(Re===Q||Q!==null&&Re===Q.alternate)break t;Re=_(Re),Q=_(Q)}Re=null}else Re=null;Te!==null&&E(he,le,Te,Re,!1),Ie!==null&&Zt!==null&&E(he,Zt,Ie,Re,!0)}}e:{if(le=ee?ys(ee):window,Te=le.nodeName&&le.nodeName.toLowerCase(),Te==="select"||Te==="input"&&le.type==="file")var Le=Cd;else if(dc(le))if(zi)Le=Kl;else{Le=oo;var ze=Ha}else(Te=le.nodeName)&&Te.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(Le=qa);if(Le&&(Le=Le(i,ee))){Ba(he,Le,u,ue);break e}ze&&ze(i,le,ee),i==="focusout"&&(ze=le._wrapperState)&&ze.controlled&&le.type==="number"&&Ls(le,"number",le.value)}switch(ze=ee?ys(ee):window,i){case"focusin":(dc(ze)||ze.contentEditable==="true")&&(ao=ze,lo=ee,ia=null);break;case"focusout":ia=lo=ao=null;break;case"mousedown":Ga=!0;break;case"contextmenu":case"mouseup":case"dragend":Ga=!1,_c(he,u,ue);break;case"selectionchange":if($a)break;case"keydown":case"keyup":_c(he,u,ue)}var Be;if(xt)e:{switch(i){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else sr?ro(i,u)&&(Ge="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ge="onCompositionStart");Ge&&(fs&&u.locale!=="ko"&&(sr||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&sr&&(Be=Qs()):(Kn=ue,pn="value"in Kn?Kn.value:Kn.textContent,sr=!0)),ze=f(ee,Ge),0<ze.length&&(Ge=new io(Ge,i,null,u,ue),he.push({event:Ge,listeners:ze}),Be?Ge.data=Be:(Be=Gl(u),Be!==null&&(Ge.data=Be)))),(Be=Ot?Td(i,u):Ir(i,u))&&(ee=f(ee,"onBeforeInput"),0<ee.length&&(ue=new io("onBeforeInput","beforeinput",null,u,ue),he.push({event:ue,listeners:ee}),ue.data=Be))}nu(he,o)})}function l(i,o,u){return{instance:i,listener:o,currentTarget:u}}function f(i,o){for(var u=o+"Capture",p=[];i!==null;){var g=i,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=bt(i,u),w!=null&&p.unshift(l(i,w,g)),w=bt(i,o),w!=null&&p.push(l(i,w,g))),i=i.return}return p}function _(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function E(i,o,u,p,g){for(var w=o._reactName,C=[];u!==null&&u!==p;){var N=u,z=N.alternate,ee=N.stateNode;if(z!==null&&z===p)break;N.tag===5&&ee!==null&&(N=ee,g?(z=bt(u,w),z!=null&&C.unshift(l(u,z,N))):g||(z=bt(u,w),z!=null&&C.push(l(u,z,N)))),u=u.return}C.length!==0&&i.push({event:o,listeners:C})}var x=/\r\n?/g,V=/\u0000|\uFFFD/g;function K(i){return(typeof i=="string"?i:""+i).replace(x,`
`).replace(V,"")}function X(i,o,u){if(o=K(o),K(i)!==o&&u)throw Error(t(425))}function se(){}var Ee=null,Fe=null;function Ye(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var an=typeof setTimeout=="function"?setTimeout:void 0,tn=typeof clearTimeout=="function"?clearTimeout:void 0,Qn=typeof Promise=="function"?Promise:void 0,Vn=typeof queueMicrotask=="function"?queueMicrotask:typeof Qn<"u"?function(i){return Qn.resolve(null).then(i).catch(po)}:an;function po(i){setTimeout(function(){throw i})}function ru(i,o){var u=o,p=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){i.removeChild(g),on(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);on(o)}function Rr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Tc(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var ms=Math.random().toString(36).slice(2),ji="__reactFiber$"+ms,mo="__reactProps$"+ms,vt="__reactContainer$"+ms,_o="__reactEvents$"+ms,xd="__reactListeners$"+ms,Ad="__reactHandles$"+ms;function _s(i){var o=i[ji];if(o)return o;for(var u=i.parentNode;u;){if(o=u[vt]||u[ji]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Tc(i);i!==null;){if(u=i[ji])return u;i=Tc(i)}return o}i=u,u=i.parentNode}return null}function gs(i){return i=i[ji]||i[vt],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ys(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Za(i){return i[mo]||null}var Pd=[],Qa=-1;function go(i){return{current:i}}function Lt(i){0>Qa||(i.current=Pd[Qa],Pd[Qa]=null,Qa--)}function Rt(i,o){Qa++,Pd[Qa]=i.current,i.current=o}var yo={},Fn=go(yo),di=go(!1),oa=yo;function Ya(i,o){var u=i.type.contextTypes;if(!u)return yo;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in u)g[w]=o[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function fi(i){return i=i.childContextTypes,i!=null}function Sc(){Lt(di),Lt(Fn)}function t_(i,o,u){if(Fn.current!==yo)throw Error(t(168));Rt(Fn,o),Rt(di,u)}function n_(i,o,u){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in o))throw Error(t(108,Ve(i)||"Unknown",g));return W({},u,p)}function Cc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||yo,oa=Fn.current,Rt(Fn,i),Rt(di,di.current),!0}function i_(i,o,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=n_(i,o,oa),p.__reactInternalMemoizedMergedChildContext=i,Lt(di),Lt(Fn),Rt(Fn,i)):Lt(di),Rt(di,u)}var vs=null,Ic=!1,Rd=!1;function r_(i){vs===null?vs=[i]:vs.push(i)}function p0(i){Ic=!0,r_(i)}function vo(){if(!Rd&&vs!==null){Rd=!0;var i=0,o=Je;try{var u=vs;for(Je=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}vs=null,Ic=!1}catch(g){throw vs!==null&&(vs=vs.slice(i+1)),Ws(ts,vo),g}finally{Je=o,Rd=!1}}return null}var Xa=[],Ja=0,xc=null,Ac=0,Wi=[],Hi=0,aa=null,ws=1,Es="";function la(i,o){Xa[Ja++]=Ac,Xa[Ja++]=xc,xc=i,Ac=o}function s_(i,o,u){Wi[Hi++]=ws,Wi[Hi++]=Es,Wi[Hi++]=aa,aa=i;var p=ws;i=Es;var g=32-He(p)-1;p&=~(1<<g),u+=1;var w=32-He(o)+g;if(30<w){var C=g-g%5;w=(p&(1<<C)-1).toString(32),p>>=C,g-=C,ws=1<<32-He(o)+g|u<<g|p,Es=w+i}else ws=1<<w|u<<g|p,Es=i}function kd(i){i.return!==null&&(la(i,1),s_(i,1,0))}function Dd(i){for(;i===xc;)xc=Xa[--Ja],Xa[Ja]=null,Ac=Xa[--Ja],Xa[Ja]=null;for(;i===aa;)aa=Wi[--Hi],Wi[Hi]=null,Es=Wi[--Hi],Wi[Hi]=null,ws=Wi[--Hi],Wi[Hi]=null}var Ri=null,ki=null,Nt=!1,ar=null;function o_(i,o){var u=Ki(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function a_(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Ri=i,ki=Rr(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Ri=i,ki=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=aa!==null?{id:ws,overflow:Es}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Ki(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Ri=i,ki=null,!0):!1;default:return!1}}function Ld(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Nd(i){if(Nt){var o=ki;if(o){var u=o;if(!a_(i,o)){if(Ld(i))throw Error(t(418));o=Rr(u.nextSibling);var p=Ri;o&&a_(i,o)?o_(p,u):(i.flags=i.flags&-4097|2,Nt=!1,Ri=i)}}else{if(Ld(i))throw Error(t(418));i.flags=i.flags&-4097|2,Nt=!1,Ri=i}}}function l_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Ri=i}function Pc(i){if(i!==Ri)return!1;if(!Nt)return l_(i),Nt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ye(i.type,i.memoizedProps)),o&&(o=ki)){if(Ld(i))throw u_(),Error(t(418));for(;o;)o_(i,o),o=Rr(o.nextSibling)}if(l_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){ki=Rr(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}ki=null}}else ki=Ri?Rr(i.stateNode.nextSibling):null;return!0}function u_(){for(var i=ki;i;)i=Rr(i.nextSibling)}function el(){ki=Ri=null,Nt=!1}function Md(i){ar===null?ar=[i]:ar.push(i)}var m0=Ue.ReactCurrentBatchConfig;function su(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var g=p,w=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(C){var N=g.refs;C===null?delete N[w]:N[w]=C},o._stringRef=w,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Rc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function c_(i){var o=i._init;return o(i._payload)}function h_(i){function o(Q,H){if(i){var Y=Q.deletions;Y===null?(Q.deletions=[H],Q.flags|=16):Y.push(H)}}function u(Q,H){if(!i)return null;for(;H!==null;)o(Q,H),H=H.sibling;return null}function p(Q,H){for(Q=new Map;H!==null;)H.key!==null?Q.set(H.key,H):Q.set(H.index,H),H=H.sibling;return Q}function g(Q,H){return Q=Ao(Q,H),Q.index=0,Q.sibling=null,Q}function w(Q,H,Y){return Q.index=Y,i?(Y=Q.alternate,Y!==null?(Y=Y.index,Y<H?(Q.flags|=2,H):Y):(Q.flags|=2,H)):(Q.flags|=1048576,H)}function C(Q){return i&&Q.alternate===null&&(Q.flags|=2),Q}function N(Q,H,Y,pe){return H===null||H.tag!==6?(H=xf(Y,Q.mode,pe),H.return=Q,H):(H=g(H,Y),H.return=Q,H)}function z(Q,H,Y,pe){var Le=Y.type;return Le===j?ue(Q,H,Y.props.children,pe,Y.key):H!==null&&(H.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===ae&&c_(Le)===H.type)?(pe=g(H,Y.props),pe.ref=su(Q,H,Y),pe.return=Q,pe):(pe=Jc(Y.type,Y.key,Y.props,null,Q.mode,pe),pe.ref=su(Q,H,Y),pe.return=Q,pe)}function ee(Q,H,Y,pe){return H===null||H.tag!==4||H.stateNode.containerInfo!==Y.containerInfo||H.stateNode.implementation!==Y.implementation?(H=Af(Y,Q.mode,pe),H.return=Q,H):(H=g(H,Y.children||[]),H.return=Q,H)}function ue(Q,H,Y,pe,Le){return H===null||H.tag!==7?(H=_a(Y,Q.mode,pe,Le),H.return=Q,H):(H=g(H,Y),H.return=Q,H)}function he(Q,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return H=xf(""+H,Q.mode,Y),H.return=Q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case tt:return Y=Jc(H.type,H.key,H.props,null,Q.mode,Y),Y.ref=su(Q,null,H),Y.return=Q,Y;case Oe:return H=Af(H,Q.mode,Y),H.return=Q,H;case ae:var pe=H._init;return he(Q,pe(H._payload),Y)}if(Ni(H)||Z(H))return H=_a(H,Q.mode,Y,null),H.return=Q,H;Rc(Q,H)}return null}function le(Q,H,Y,pe){var Le=H!==null?H.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Le!==null?null:N(Q,H,""+Y,pe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case tt:return Y.key===Le?z(Q,H,Y,pe):null;case Oe:return Y.key===Le?ee(Q,H,Y,pe):null;case ae:return Le=Y._init,le(Q,H,Le(Y._payload),pe)}if(Ni(Y)||Z(Y))return Le!==null?null:ue(Q,H,Y,pe,null);Rc(Q,Y)}return null}function Te(Q,H,Y,pe,Le){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Q=Q.get(Y)||null,N(H,Q,""+pe,Le);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case tt:return Q=Q.get(pe.key===null?Y:pe.key)||null,z(H,Q,pe,Le);case Oe:return Q=Q.get(pe.key===null?Y:pe.key)||null,ee(H,Q,pe,Le);case ae:var ze=pe._init;return Te(Q,H,Y,ze(pe._payload),Le)}if(Ni(pe)||Z(pe))return Q=Q.get(Y)||null,ue(H,Q,pe,Le,null);Rc(H,pe)}return null}function Ie(Q,H,Y,pe){for(var Le=null,ze=null,Be=H,Ge=H=0,gn=null;Be!==null&&Ge<Y.length;Ge++){Be.index>Ge?(gn=Be,Be=null):gn=Be.sibling;var pt=le(Q,Be,Y[Ge],pe);if(pt===null){Be===null&&(Be=gn);break}i&&Be&&pt.alternate===null&&o(Q,Be),H=w(pt,H,Ge),ze===null?Le=pt:ze.sibling=pt,ze=pt,Be=gn}if(Ge===Y.length)return u(Q,Be),Nt&&la(Q,Ge),Le;if(Be===null){for(;Ge<Y.length;Ge++)Be=he(Q,Y[Ge],pe),Be!==null&&(H=w(Be,H,Ge),ze===null?Le=Be:ze.sibling=Be,ze=Be);return Nt&&la(Q,Ge),Le}for(Be=p(Q,Be);Ge<Y.length;Ge++)gn=Te(Be,Q,Ge,Y[Ge],pe),gn!==null&&(i&&gn.alternate!==null&&Be.delete(gn.key===null?Ge:gn.key),H=w(gn,H,Ge),ze===null?Le=gn:ze.sibling=gn,ze=gn);return i&&Be.forEach(function(Po){return o(Q,Po)}),Nt&&la(Q,Ge),Le}function Re(Q,H,Y,pe){var Le=Z(Y);if(typeof Le!="function")throw Error(t(150));if(Y=Le.call(Y),Y==null)throw Error(t(151));for(var ze=Le=null,Be=H,Ge=H=0,gn=null,pt=Y.next();Be!==null&&!pt.done;Ge++,pt=Y.next()){Be.index>Ge?(gn=Be,Be=null):gn=Be.sibling;var Po=le(Q,Be,pt.value,pe);if(Po===null){Be===null&&(Be=gn);break}i&&Be&&Po.alternate===null&&o(Q,Be),H=w(Po,H,Ge),ze===null?Le=Po:ze.sibling=Po,ze=Po,Be=gn}if(pt.done)return u(Q,Be),Nt&&la(Q,Ge),Le;if(Be===null){for(;!pt.done;Ge++,pt=Y.next())pt=he(Q,pt.value,pe),pt!==null&&(H=w(pt,H,Ge),ze===null?Le=pt:ze.sibling=pt,ze=pt);return Nt&&la(Q,Ge),Le}for(Be=p(Q,Be);!pt.done;Ge++,pt=Y.next())pt=Te(Be,Q,Ge,pt.value,pe),pt!==null&&(i&&pt.alternate!==null&&Be.delete(pt.key===null?Ge:pt.key),H=w(pt,H,Ge),ze===null?Le=pt:ze.sibling=pt,ze=pt);return i&&Be.forEach(function(G0){return o(Q,G0)}),Nt&&la(Q,Ge),Le}function Zt(Q,H,Y,pe){if(typeof Y=="object"&&Y!==null&&Y.type===j&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case tt:e:{for(var Le=Y.key,ze=H;ze!==null;){if(ze.key===Le){if(Le=Y.type,Le===j){if(ze.tag===7){u(Q,ze.sibling),H=g(ze,Y.props.children),H.return=Q,Q=H;break e}}else if(ze.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===ae&&c_(Le)===ze.type){u(Q,ze.sibling),H=g(ze,Y.props),H.ref=su(Q,ze,Y),H.return=Q,Q=H;break e}u(Q,ze);break}else o(Q,ze);ze=ze.sibling}Y.type===j?(H=_a(Y.props.children,Q.mode,pe,Y.key),H.return=Q,Q=H):(pe=Jc(Y.type,Y.key,Y.props,null,Q.mode,pe),pe.ref=su(Q,H,Y),pe.return=Q,Q=pe)}return C(Q);case Oe:e:{for(ze=Y.key;H!==null;){if(H.key===ze)if(H.tag===4&&H.stateNode.containerInfo===Y.containerInfo&&H.stateNode.implementation===Y.implementation){u(Q,H.sibling),H=g(H,Y.children||[]),H.return=Q,Q=H;break e}else{u(Q,H);break}else o(Q,H);H=H.sibling}H=Af(Y,Q.mode,pe),H.return=Q,Q=H}return C(Q);case ae:return ze=Y._init,Zt(Q,H,ze(Y._payload),pe)}if(Ni(Y))return Ie(Q,H,Y,pe);if(Z(Y))return Re(Q,H,Y,pe);Rc(Q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,H!==null&&H.tag===6?(u(Q,H.sibling),H=g(H,Y),H.return=Q,Q=H):(u(Q,H),H=xf(Y,Q.mode,pe),H.return=Q,Q=H),C(Q)):u(Q,H)}return Zt}var tl=h_(!0),d_=h_(!1),kc=go(null),Dc=null,nl=null,bd=null;function Od(){bd=nl=Dc=null}function Vd(i){var o=kc.current;Lt(kc),i._currentValue=o}function Fd(i,o,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===u)break;i=i.return}}function il(i,o){Dc=i,bd=nl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(pi=!0),i.firstContext=null)}function qi(i){var o=i._currentValue;if(bd!==i)if(i={context:i,memoizedValue:o,next:null},nl===null){if(Dc===null)throw Error(t(308));nl=i,Dc.dependencies={lanes:0,firstContext:i}}else nl=nl.next=i;return o}var ua=null;function zd(i){ua===null?ua=[i]:ua.push(i)}function f_(i,o,u,p){var g=o.interleaved;return g===null?(u.next=u,zd(o)):(u.next=g.next,g.next=u),o.interleaved=u,Ts(i,p)}function Ts(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var wo=!1;function Bd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p_(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ss(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Eo(i,o,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,dt&2){var g=p.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),p.pending=o,Ts(i,u)}return g=p.interleaved,g===null?(o.next=o,zd(p)):(o.next=g.next,g.next=o),p.interleaved=o,Ts(i,u)}function Lc(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Mn(i,u)}}function m_(i,o){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var C={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?g=w=C:w=w.next=C,u=u.next}while(u!==null);w===null?g=w=o:w=w.next=o}else g=w=o;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Nc(i,o,u,p){var g=i.updateQueue;wo=!1;var w=g.firstBaseUpdate,C=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var z=N,ee=z.next;z.next=null,C===null?w=ee:C.next=ee,C=z;var ue=i.alternate;ue!==null&&(ue=ue.updateQueue,N=ue.lastBaseUpdate,N!==C&&(N===null?ue.firstBaseUpdate=ee:N.next=ee,ue.lastBaseUpdate=z))}if(w!==null){var he=g.baseState;C=0,ue=ee=z=null,N=w;do{var le=N.lane,Te=N.eventTime;if((p&le)===le){ue!==null&&(ue=ue.next={eventTime:Te,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var Ie=i,Re=N;switch(le=o,Te=u,Re.tag){case 1:if(Ie=Re.payload,typeof Ie=="function"){he=Ie.call(Te,he,le);break e}he=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Re.payload,le=typeof Ie=="function"?Ie.call(Te,he,le):Ie,le==null)break e;he=W({},he,le);break e;case 2:wo=!0}}N.callback!==null&&N.lane!==0&&(i.flags|=64,le=g.effects,le===null?g.effects=[N]:le.push(N))}else Te={eventTime:Te,lane:le,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ue===null?(ee=ue=Te,z=he):ue=ue.next=Te,C|=le;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;le=N,N=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);if(ue===null&&(z=he),g.baseState=z,g.firstBaseUpdate=ee,g.lastBaseUpdate=ue,o=g.shared.interleaved,o!==null){g=o;do C|=g.lane,g=g.next;while(g!==o)}else w===null&&(g.shared.lanes=0);da|=C,i.lanes=C,i.memoizedState=he}}function __(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var ou={},kr=go(ou),au=go(ou),lu=go(ou);function ca(i){if(i===ou)throw Error(t(174));return i}function Ud(i,o){switch(Rt(lu,o),Rt(au,i),Rt(kr,ou),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:jt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=jt(o,i)}Lt(kr),Rt(kr,o)}function rl(){Lt(kr),Lt(au),Lt(lu)}function g_(i){ca(lu.current);var o=ca(kr.current),u=jt(o,i.type);o!==u&&(Rt(au,i),Rt(kr,u))}function jd(i){au.current===i&&(Lt(kr),Lt(au))}var Vt=go(0);function Mc(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Wd=[];function Hd(){for(var i=0;i<Wd.length;i++)Wd[i]._workInProgressVersionPrimary=null;Wd.length=0}var bc=Ue.ReactCurrentDispatcher,qd=Ue.ReactCurrentBatchConfig,ha=0,Ft=null,ln=null,mn=null,Oc=!1,uu=!1,cu=0,_0=0;function zn(){throw Error(t(321))}function $d(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Ai(i[u],o[u]))return!1;return!0}function Gd(i,o,u,p,g,w){if(ha=w,Ft=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,bc.current=i===null||i.memoizedState===null?w0:E0,i=u(p,g),uu){w=0;do{if(uu=!1,cu=0,25<=w)throw Error(t(301));w+=1,mn=ln=null,o.updateQueue=null,bc.current=T0,i=u(p,g)}while(uu)}if(bc.current=zc,o=ln!==null&&ln.next!==null,ha=0,mn=ln=Ft=null,Oc=!1,o)throw Error(t(300));return i}function Kd(){var i=cu!==0;return cu=0,i}function Dr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Ft.memoizedState=mn=i:mn=mn.next=i,mn}function $i(){if(ln===null){var i=Ft.alternate;i=i!==null?i.memoizedState:null}else i=ln.next;var o=mn===null?Ft.memoizedState:mn.next;if(o!==null)mn=o,ln=i;else{if(i===null)throw Error(t(310));ln=i,i={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},mn===null?Ft.memoizedState=mn=i:mn=mn.next=i}return mn}function hu(i,o){return typeof o=="function"?o(i):o}function Zd(i){var o=$i(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=ln,g=p.baseQueue,w=u.pending;if(w!==null){if(g!==null){var C=g.next;g.next=w.next,w.next=C}p.baseQueue=g=w,u.pending=null}if(g!==null){w=g.next,p=p.baseState;var N=C=null,z=null,ee=w;do{var ue=ee.lane;if((ha&ue)===ue)z!==null&&(z=z.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),p=ee.hasEagerState?ee.eagerState:i(p,ee.action);else{var he={lane:ue,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};z===null?(N=z=he,C=p):z=z.next=he,Ft.lanes|=ue,da|=ue}ee=ee.next}while(ee!==null&&ee!==w);z===null?C=p:z.next=N,Ai(p,o.memoizedState)||(pi=!0),o.memoizedState=p,o.baseState=C,o.baseQueue=z,u.lastRenderedState=p}if(i=u.interleaved,i!==null){g=i;do w=g.lane,Ft.lanes|=w,da|=w,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Qd(i){var o=$i(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,g=u.pending,w=o.memoizedState;if(g!==null){u.pending=null;var C=g=g.next;do w=i(w,C.action),C=C.next;while(C!==g);Ai(w,o.memoizedState)||(pi=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,p]}function y_(){}function v_(i,o){var u=Ft,p=$i(),g=o(),w=!Ai(p.memoizedState,g);if(w&&(p.memoizedState=g,pi=!0),p=p.queue,Yd(T_.bind(null,u,p,i),[i]),p.getSnapshot!==o||w||mn!==null&&mn.memoizedState.tag&1){if(u.flags|=2048,du(9,E_.bind(null,u,p,g,o),void 0,null),_n===null)throw Error(t(349));ha&30||w_(u,o,g)}return g}function w_(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ft.updateQueue,o===null?(o={lastEffect:null,stores:null},Ft.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function E_(i,o,u,p){o.value=u,o.getSnapshot=p,S_(o)&&C_(i)}function T_(i,o,u){return u(function(){S_(o)&&C_(i)})}function S_(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Ai(i,u)}catch{return!0}}function C_(i){var o=Ts(i,1);o!==null&&hr(o,i,1,-1)}function I_(i){var o=Dr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:i},o.queue=i,i=i.dispatch=v0.bind(null,Ft,i),[o.memoizedState,i]}function du(i,o,u,p){return i={tag:i,create:o,destroy:u,deps:p,next:null},o=Ft.updateQueue,o===null?(o={lastEffect:null,stores:null},Ft.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,o.lastEffect=i)),i}function x_(){return $i().memoizedState}function Vc(i,o,u,p){var g=Dr();Ft.flags|=i,g.memoizedState=du(1|o,u,void 0,p===void 0?null:p)}function Fc(i,o,u,p){var g=$i();p=p===void 0?null:p;var w=void 0;if(ln!==null){var C=ln.memoizedState;if(w=C.destroy,p!==null&&$d(p,C.deps)){g.memoizedState=du(o,u,w,p);return}}Ft.flags|=i,g.memoizedState=du(1|o,u,w,p)}function A_(i,o){return Vc(8390656,8,i,o)}function Yd(i,o){return Fc(2048,8,i,o)}function P_(i,o){return Fc(4,2,i,o)}function R_(i,o){return Fc(4,4,i,o)}function k_(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function D_(i,o,u){return u=u!=null?u.concat([i]):null,Fc(4,4,k_.bind(null,o,i),u)}function Xd(){}function L_(i,o){var u=$i();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&$d(o,p[1])?p[0]:(u.memoizedState=[i,o],i)}function N_(i,o){var u=$i();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&$d(o,p[1])?p[0]:(i=i(),u.memoizedState=[i,o],i)}function M_(i,o,u){return ha&21?(Ai(u,o)||(u=rs(),Ft.lanes|=u,da|=u,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,pi=!0),i.memoizedState=u)}function g0(i,o){var u=Je;Je=u!==0&&4>u?u:4,i(!0);var p=qd.transition;qd.transition={};try{i(!1),o()}finally{Je=u,qd.transition=p}}function b_(){return $i().memoizedState}function y0(i,o,u){var p=Io(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},O_(i))V_(o,u);else if(u=f_(i,o,u,p),u!==null){var g=Xn();hr(u,i,p,g),F_(u,o,p)}}function v0(i,o,u){var p=Io(i),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(O_(i))V_(o,g);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var C=o.lastRenderedState,N=w(C,u);if(g.hasEagerState=!0,g.eagerState=N,Ai(N,C)){var z=o.interleaved;z===null?(g.next=g,zd(o)):(g.next=z.next,z.next=g),o.interleaved=g;return}}catch{}finally{}u=f_(i,o,g,p),u!==null&&(g=Xn(),hr(u,i,p,g),F_(u,o,p))}}function O_(i){var o=i.alternate;return i===Ft||o!==null&&o===Ft}function V_(i,o){uu=Oc=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function F_(i,o,u){if(u&4194240){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Mn(i,u)}}var zc={readContext:qi,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useInsertionEffect:zn,useLayoutEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useMutableSource:zn,useSyncExternalStore:zn,useId:zn,unstable_isNewReconciler:!1},w0={readContext:qi,useCallback:function(i,o){return Dr().memoizedState=[i,o===void 0?null:o],i},useContext:qi,useEffect:A_,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Vc(4194308,4,k_.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Vc(4194308,4,i,o)},useInsertionEffect:function(i,o){return Vc(4,2,i,o)},useMemo:function(i,o){var u=Dr();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var p=Dr();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=y0.bind(null,Ft,i),[p.memoizedState,i]},useRef:function(i){var o=Dr();return i={current:i},o.memoizedState=i},useState:I_,useDebugValue:Xd,useDeferredValue:function(i){return Dr().memoizedState=i},useTransition:function(){var i=I_(!1),o=i[0];return i=g0.bind(null,i[1]),Dr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var p=Ft,g=Dr();if(Nt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),_n===null)throw Error(t(349));ha&30||w_(p,o,u)}g.memoizedState=u;var w={value:u,getSnapshot:o};return g.queue=w,A_(T_.bind(null,p,w,i),[i]),p.flags|=2048,du(9,E_.bind(null,p,w,u,o),void 0,null),u},useId:function(){var i=Dr(),o=_n.identifierPrefix;if(Nt){var u=Es,p=ws;u=(p&~(1<<32-He(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=cu++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=_0++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},E0={readContext:qi,useCallback:L_,useContext:qi,useEffect:Yd,useImperativeHandle:D_,useInsertionEffect:P_,useLayoutEffect:R_,useMemo:N_,useReducer:Zd,useRef:x_,useState:function(){return Zd(hu)},useDebugValue:Xd,useDeferredValue:function(i){var o=$i();return M_(o,ln.memoizedState,i)},useTransition:function(){var i=Zd(hu)[0],o=$i().memoizedState;return[i,o]},useMutableSource:y_,useSyncExternalStore:v_,useId:b_,unstable_isNewReconciler:!1},T0={readContext:qi,useCallback:L_,useContext:qi,useEffect:Yd,useImperativeHandle:D_,useInsertionEffect:P_,useLayoutEffect:R_,useMemo:N_,useReducer:Qd,useRef:x_,useState:function(){return Qd(hu)},useDebugValue:Xd,useDeferredValue:function(i){var o=$i();return ln===null?o.memoizedState=i:M_(o,ln.memoizedState,i)},useTransition:function(){var i=Qd(hu)[0],o=$i().memoizedState;return[i,o]},useMutableSource:y_,useSyncExternalStore:v_,useId:b_,unstable_isNewReconciler:!1};function lr(i,o){if(i&&i.defaultProps){o=W({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Jd(i,o,u,p){o=i.memoizedState,u=u(p,o),u=u==null?o:W({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Bc={isMounted:function(i){return(i=i._reactInternals)?ti(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var p=Xn(),g=Io(i),w=Ss(p,g);w.payload=o,u!=null&&(w.callback=u),o=Eo(i,w,g),o!==null&&(hr(o,i,g,p),Lc(o,i,g))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var p=Xn(),g=Io(i),w=Ss(p,g);w.tag=1,w.payload=o,u!=null&&(w.callback=u),o=Eo(i,w,g),o!==null&&(hr(o,i,g,p),Lc(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Xn(),p=Io(i),g=Ss(u,p);g.tag=2,o!=null&&(g.callback=o),o=Eo(i,g,p),o!==null&&(hr(o,i,p,u),Lc(o,i,p))}};function z_(i,o,u,p,g,w,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,C):o.prototype&&o.prototype.isPureReactComponent?!xr(u,p)||!xr(g,w):!0}function B_(i,o,u){var p=!1,g=yo,w=o.contextType;return typeof w=="object"&&w!==null?w=qi(w):(g=fi(o)?oa:Fn.current,p=o.contextTypes,w=(p=p!=null)?Ya(i,g):yo),o=new o(u,w),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Bc,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=w),o}function U_(i,o,u,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==i&&Bc.enqueueReplaceState(o,o.state,null)}function ef(i,o,u,p){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},Bd(i);var w=o.contextType;typeof w=="object"&&w!==null?g.context=qi(w):(w=fi(o)?oa:Fn.current,g.context=Ya(i,w)),g.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Jd(i,o,w,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Bc.enqueueReplaceState(g,g.state,null),Nc(i,u,g,p),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function sl(i,o){try{var u="",p=o;do u+=me(p),p=p.return;while(p);var g=u}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:o,stack:g,digest:null}}function tf(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function nf(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var S0=typeof WeakMap=="function"?WeakMap:Map;function j_(i,o,u){u=Ss(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){Gc||(Gc=!0,yf=p),nf(i,o)},u}function W_(i,o,u){u=Ss(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var g=o.value;u.payload=function(){return p(g)},u.callback=function(){nf(i,o)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){nf(i,o),typeof p!="function"&&(So===null?So=new Set([this]):So.add(this));var C=o.stack;this.componentDidCatch(o.value,{componentStack:C!==null?C:""})}),u}function H_(i,o,u){var p=i.pingCache;if(p===null){p=i.pingCache=new S0;var g=new Set;p.set(o,g)}else g=p.get(o),g===void 0&&(g=new Set,p.set(o,g));g.has(u)||(g.add(u),i=V0.bind(null,i,o,u),o.then(i,i))}function q_(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function $_(i,o,u,p,g){return i.mode&1?(i.flags|=65536,i.lanes=g,i):(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Ss(-1,1),o.tag=2,Eo(u,o,1))),u.lanes|=1),i)}var C0=Ue.ReactCurrentOwner,pi=!1;function Yn(i,o,u,p){o.child=i===null?d_(o,null,u,p):tl(o,i.child,u,p)}function G_(i,o,u,p,g){u=u.render;var w=o.ref;return il(o,g),p=Gd(i,o,u,p,w,g),u=Kd(),i!==null&&!pi?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Cs(i,o,g)):(Nt&&u&&kd(o),o.flags|=1,Yn(i,o,p,g),o.child)}function K_(i,o,u,p,g){if(i===null){var w=u.type;return typeof w=="function"&&!If(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=w,Z_(i,o,w,p,g)):(i=Jc(u.type,null,p,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,!(i.lanes&g)){var C=w.memoizedProps;if(u=u.compare,u=u!==null?u:xr,u(C,p)&&i.ref===o.ref)return Cs(i,o,g)}return o.flags|=1,i=Ao(w,p),i.ref=o.ref,i.return=o,o.child=i}function Z_(i,o,u,p,g){if(i!==null){var w=i.memoizedProps;if(xr(w,p)&&i.ref===o.ref)if(pi=!1,o.pendingProps=p=w,(i.lanes&g)!==0)i.flags&131072&&(pi=!0);else return o.lanes=i.lanes,Cs(i,o,g)}return rf(i,o,u,p,g)}function Q_(i,o,u){var p=o.pendingProps,g=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(al,Di),Di|=u;else{if(!(u&1073741824))return i=w!==null?w.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Rt(al,Di),Di|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,Rt(al,Di),Di|=p}else w!==null?(p=w.baseLanes|u,o.memoizedState=null):p=u,Rt(al,Di),Di|=p;return Yn(i,o,g,u),o.child}function Y_(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function rf(i,o,u,p,g){var w=fi(u)?oa:Fn.current;return w=Ya(o,w),il(o,g),u=Gd(i,o,u,p,w,g),p=Kd(),i!==null&&!pi?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Cs(i,o,g)):(Nt&&p&&kd(o),o.flags|=1,Yn(i,o,u,g),o.child)}function X_(i,o,u,p,g){if(fi(u)){var w=!0;Cc(o)}else w=!1;if(il(o,g),o.stateNode===null)jc(i,o),B_(o,u,p),ef(o,u,p,g),p=!0;else if(i===null){var C=o.stateNode,N=o.memoizedProps;C.props=N;var z=C.context,ee=u.contextType;typeof ee=="object"&&ee!==null?ee=qi(ee):(ee=fi(u)?oa:Fn.current,ee=Ya(o,ee));var ue=u.getDerivedStateFromProps,he=typeof ue=="function"||typeof C.getSnapshotBeforeUpdate=="function";he||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(N!==p||z!==ee)&&U_(o,C,p,ee),wo=!1;var le=o.memoizedState;C.state=le,Nc(o,p,C,g),z=o.memoizedState,N!==p||le!==z||di.current||wo?(typeof ue=="function"&&(Jd(o,u,ue,p),z=o.memoizedState),(N=wo||z_(o,u,N,p,le,z,ee))?(he||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=z),C.props=p,C.state=z,C.context=ee,p=N):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{C=o.stateNode,p_(i,o),N=o.memoizedProps,ee=o.type===o.elementType?N:lr(o.type,N),C.props=ee,he=o.pendingProps,le=C.context,z=u.contextType,typeof z=="object"&&z!==null?z=qi(z):(z=fi(u)?oa:Fn.current,z=Ya(o,z));var Te=u.getDerivedStateFromProps;(ue=typeof Te=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(N!==he||le!==z)&&U_(o,C,p,z),wo=!1,le=o.memoizedState,C.state=le,Nc(o,p,C,g);var Ie=o.memoizedState;N!==he||le!==Ie||di.current||wo?(typeof Te=="function"&&(Jd(o,u,Te,p),Ie=o.memoizedState),(ee=wo||z_(o,u,ee,p,le,Ie,z)||!1)?(ue||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,Ie,z),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,Ie,z)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||N===i.memoizedProps&&le===i.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&le===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=Ie),C.props=p,C.state=Ie,C.context=z,p=ee):(typeof C.componentDidUpdate!="function"||N===i.memoizedProps&&le===i.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&le===i.memoizedState||(o.flags|=1024),p=!1)}return sf(i,o,u,p,w,g)}function sf(i,o,u,p,g,w){Y_(i,o);var C=(o.flags&128)!==0;if(!p&&!C)return g&&i_(o,u,!1),Cs(i,o,w);p=o.stateNode,C0.current=o;var N=C&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&C?(o.child=tl(o,i.child,null,w),o.child=tl(o,null,N,w)):Yn(i,o,N,w),o.memoizedState=p.state,g&&i_(o,u,!0),o.child}function J_(i){var o=i.stateNode;o.pendingContext?t_(i,o.pendingContext,o.pendingContext!==o.context):o.context&&t_(i,o.context,!1),Ud(i,o.containerInfo)}function eg(i,o,u,p,g){return el(),Md(g),o.flags|=256,Yn(i,o,u,p),o.child}var of={dehydrated:null,treeContext:null,retryLane:0};function af(i){return{baseLanes:i,cachePool:null,transitions:null}}function tg(i,o,u){var p=o.pendingProps,g=Vt.current,w=!1,C=(o.flags&128)!==0,N;if((N=C)||(N=i!==null&&i.memoizedState===null?!1:(g&2)!==0),N?(w=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Rt(Vt,g&1),i===null)return Nd(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(C=p.children,i=p.fallback,w?(p=o.mode,w=o.child,C={mode:"hidden",children:C},!(p&1)&&w!==null?(w.childLanes=0,w.pendingProps=C):w=eh(C,p,0,null),i=_a(i,p,u,null),w.return=o,i.return=o,w.sibling=i,o.child=w,o.child.memoizedState=af(u),o.memoizedState=of,i):lf(o,C));if(g=i.memoizedState,g!==null&&(N=g.dehydrated,N!==null))return I0(i,o,C,p,N,g,u);if(w){w=p.fallback,C=o.mode,g=i.child,N=g.sibling;var z={mode:"hidden",children:p.children};return!(C&1)&&o.child!==g?(p=o.child,p.childLanes=0,p.pendingProps=z,o.deletions=null):(p=Ao(g,z),p.subtreeFlags=g.subtreeFlags&14680064),N!==null?w=Ao(N,w):(w=_a(w,C,u,null),w.flags|=2),w.return=o,p.return=o,p.sibling=w,o.child=p,p=w,w=o.child,C=i.child.memoizedState,C=C===null?af(u):{baseLanes:C.baseLanes|u,cachePool:null,transitions:C.transitions},w.memoizedState=C,w.childLanes=i.childLanes&~u,o.memoizedState=of,p}return w=i.child,i=w.sibling,p=Ao(w,{mode:"visible",children:p.children}),!(o.mode&1)&&(p.lanes=u),p.return=o,p.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=p,o.memoizedState=null,p}function lf(i,o){return o=eh({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Uc(i,o,u,p){return p!==null&&Md(p),tl(o,i.child,null,u),i=lf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function I0(i,o,u,p,g,w,C){if(u)return o.flags&256?(o.flags&=-257,p=tf(Error(t(422))),Uc(i,o,C,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(w=p.fallback,g=o.mode,p=eh({mode:"visible",children:p.children},g,0,null),w=_a(w,g,C,null),w.flags|=2,p.return=o,w.return=o,p.sibling=w,o.child=p,o.mode&1&&tl(o,i.child,null,C),o.child.memoizedState=af(C),o.memoizedState=of,w);if(!(o.mode&1))return Uc(i,o,C,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var N=p.dgst;return p=N,w=Error(t(419)),p=tf(w,p,void 0),Uc(i,o,C,p)}if(N=(C&i.childLanes)!==0,pi||N){if(p=_n,p!==null){switch(C&-C){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(p.suspendedLanes|C)?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,Ts(i,g),hr(p,i,g,-1))}return Cf(),p=tf(Error(t(421))),Uc(i,o,C,p)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=F0.bind(null,i),g._reactRetry=o,null):(i=w.treeContext,ki=Rr(g.nextSibling),Ri=o,Nt=!0,ar=null,i!==null&&(Wi[Hi++]=ws,Wi[Hi++]=Es,Wi[Hi++]=aa,ws=i.id,Es=i.overflow,aa=o),o=lf(o,p.children),o.flags|=4096,o)}function ng(i,o,u){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),Fd(i.return,o,u)}function uf(i,o,u,p,g){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=g)}function ig(i,o,u){var p=o.pendingProps,g=p.revealOrder,w=p.tail;if(Yn(i,o,p.children,u),p=Vt.current,p&2)p=p&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ng(i,u,o);else if(i.tag===19)ng(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Rt(Vt,p),!(o.mode&1))o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)i=u.alternate,i!==null&&Mc(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),uf(o,!1,g,u,w);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Mc(i)===null){o.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}uf(o,!0,u,null,w);break;case"together":uf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jc(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Cs(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),da|=o.lanes,!(u&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Ao(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Ao(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function x0(i,o,u){switch(o.tag){case 3:J_(o),el();break;case 5:g_(o);break;case 1:fi(o.type)&&Cc(o);break;case 4:Ud(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,g=o.memoizedProps.value;Rt(kc,p._currentValue),p._currentValue=g;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Rt(Vt,Vt.current&1),o.flags|=128,null):u&o.child.childLanes?tg(i,o,u):(Rt(Vt,Vt.current&1),i=Cs(i,o,u),i!==null?i.sibling:null);Rt(Vt,Vt.current&1);break;case 19:if(p=(u&o.childLanes)!==0,i.flags&128){if(p)return ig(i,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Rt(Vt,Vt.current),p)break;return null;case 22:case 23:return o.lanes=0,Q_(i,o,u)}return Cs(i,o,u)}var rg,cf,sg,og;rg=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},cf=function(){},sg=function(i,o,u,p){var g=i.memoizedProps;if(g!==p){i=o.stateNode,ca(kr.current);var w=null;switch(u){case"input":g=jr(i,g),p=jr(i,p),w=[];break;case"select":g=W({},g,{value:void 0}),p=W({},p,{value:void 0}),w=[];break;case"textarea":g=Ns(i,g),p=Ns(i,p),w=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=se)}$o(u,p);var C;u=null;for(ee in g)if(!p.hasOwnProperty(ee)&&g.hasOwnProperty(ee)&&g[ee]!=null)if(ee==="style"){var N=g[ee];for(C in N)N.hasOwnProperty(C)&&(u||(u={}),u[C]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(a.hasOwnProperty(ee)?w||(w=[]):(w=w||[]).push(ee,null));for(ee in p){var z=p[ee];if(N=g!=null?g[ee]:void 0,p.hasOwnProperty(ee)&&z!==N&&(z!=null||N!=null))if(ee==="style")if(N){for(C in N)!N.hasOwnProperty(C)||z&&z.hasOwnProperty(C)||(u||(u={}),u[C]="");for(C in z)z.hasOwnProperty(C)&&N[C]!==z[C]&&(u||(u={}),u[C]=z[C])}else u||(w||(w=[]),w.push(ee,u)),u=z;else ee==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,N=N?N.__html:void 0,z!=null&&N!==z&&(w=w||[]).push(ee,z)):ee==="children"?typeof z!="string"&&typeof z!="number"||(w=w||[]).push(ee,""+z):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(a.hasOwnProperty(ee)?(z!=null&&ee==="onScroll"&&Ct("scroll",i),w||N===z||(w=[])):(w=w||[]).push(ee,z))}u&&(w=w||[]).push("style",u);var ee=w;(o.updateQueue=ee)&&(o.flags|=4)}},og=function(i,o,u,p){u!==p&&(o.flags|=4)};function fu(i,o){if(!Nt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Bn(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(o)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=p,i.childLanes=u,o}function A0(i,o,u){var p=o.pendingProps;switch(Dd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(o),null;case 1:return fi(o.type)&&Sc(),Bn(o),null;case 3:return p=o.stateNode,rl(),Lt(di),Lt(Fn),Hd(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(Pc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,ar!==null&&(Ef(ar),ar=null))),cf(i,o),Bn(o),null;case 5:jd(o);var g=ca(lu.current);if(u=o.type,i!==null&&o.stateNode!=null)sg(i,o,u,p,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return Bn(o),null}if(i=ca(kr.current),Pc(o)){p=o.stateNode,u=o.type;var w=o.memoizedProps;switch(p[ji]=o,p[mo]=w,i=(o.mode&1)!==0,u){case"dialog":Ct("cancel",p),Ct("close",p);break;case"iframe":case"object":case"embed":Ct("load",p);break;case"video":case"audio":for(g=0;g<ho.length;g++)Ct(ho[g],p);break;case"source":Ct("error",p);break;case"img":case"image":case"link":Ct("error",p),Ct("load",p);break;case"details":Ct("toggle",p);break;case"input":Wr(p,w),Ct("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},Ct("invalid",p);break;case"textarea":$r(p,w),Ct("invalid",p)}$o(u,w),g=null;for(var C in w)if(w.hasOwnProperty(C)){var N=w[C];C==="children"?typeof N=="string"?p.textContent!==N&&(w.suppressHydrationWarning!==!0&&X(p.textContent,N,i),g=["children",N]):typeof N=="number"&&p.textContent!==""+N&&(w.suppressHydrationWarning!==!0&&X(p.textContent,N,i),g=["children",""+N]):a.hasOwnProperty(C)&&N!=null&&C==="onScroll"&&Ct("scroll",p)}switch(u){case"input":Ut(p),qr(p,w,!0);break;case"textarea":Ut(p),Ho(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=se)}p=g,o.updateQueue=p,p!==null&&(o.flags|=4)}else{C=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Mt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=C.createElement(u,{is:p.is}):(i=C.createElement(u),u==="select"&&(C=i,p.multiple?C.multiple=!0:p.size&&(C.size=p.size))):i=C.createElementNS(i,u),i[ji]=o,i[mo]=p,rg(i,o,!1,!1),o.stateNode=i;e:{switch(C=Yi(u,p),u){case"dialog":Ct("cancel",i),Ct("close",i),g=p;break;case"iframe":case"object":case"embed":Ct("load",i),g=p;break;case"video":case"audio":for(g=0;g<ho.length;g++)Ct(ho[g],i);g=p;break;case"source":Ct("error",i),g=p;break;case"img":case"image":case"link":Ct("error",i),Ct("load",i),g=p;break;case"details":Ct("toggle",i),g=p;break;case"input":Wr(i,p),g=jr(i,p),Ct("invalid",i);break;case"option":g=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},g=W({},p,{value:void 0}),Ct("invalid",i);break;case"textarea":$r(i,p),g=Ns(i,p),Ct("invalid",i);break;default:g=p}$o(u,g),N=g;for(w in N)if(N.hasOwnProperty(w)){var z=N[w];w==="style"?Kr(i,z):w==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&qo(i,z)):w==="children"?typeof z=="string"?(u!=="textarea"||z!=="")&&Qi(i,z):typeof z=="number"&&Qi(i,""+z):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(a.hasOwnProperty(w)?z!=null&&w==="onScroll"&&Ct("scroll",i):z!=null&&Pe(i,w,z,C))}switch(u){case"input":Ut(i),qr(i,p,!1);break;case"textarea":Ut(i),Ho(i);break;case"option":p.value!=null&&i.setAttribute("value",""+be(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?wi(i,!!p.multiple,w,!1):p.defaultValue!=null&&wi(i,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=se)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Bn(o),null;case 6:if(i&&o.stateNode!=null)og(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=ca(lu.current),ca(kr.current),Pc(o)){if(p=o.stateNode,u=o.memoizedProps,p[ji]=o,(w=p.nodeValue!==u)&&(i=Ri,i!==null))switch(i.tag){case 3:X(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&X(p.nodeValue,u,(i.mode&1)!==0)}w&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[ji]=o,o.stateNode=p}return Bn(o),null;case 13:if(Lt(Vt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Nt&&ki!==null&&o.mode&1&&!(o.flags&128))u_(),el(),o.flags|=98560,w=!1;else if(w=Pc(o),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[ji]=o}else el(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Bn(o),w=!1}else ar!==null&&(Ef(ar),ar=null),w=!0;if(!w)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,o.mode&1&&(i===null||Vt.current&1?un===0&&(un=3):Cf())),o.updateQueue!==null&&(o.flags|=4),Bn(o),null);case 4:return rl(),cf(i,o),i===null&&fo(o.stateNode.containerInfo),Bn(o),null;case 10:return Vd(o.type._context),Bn(o),null;case 17:return fi(o.type)&&Sc(),Bn(o),null;case 19:if(Lt(Vt),w=o.memoizedState,w===null)return Bn(o),null;if(p=(o.flags&128)!==0,C=w.rendering,C===null)if(p)fu(w,!1);else{if(un!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(C=Mc(i),C!==null){for(o.flags|=128,fu(w,!1),p=C.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)w=u,i=p,w.flags&=14680066,C=w.alternate,C===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=C.childLanes,w.lanes=C.lanes,w.child=C.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=C.memoizedProps,w.memoizedState=C.memoizedState,w.updateQueue=C.updateQueue,w.type=C.type,i=C.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Rt(Vt,Vt.current&1|2),o.child}i=i.sibling}w.tail!==null&&St()>ll&&(o.flags|=128,p=!0,fu(w,!1),o.lanes=4194304)}else{if(!p)if(i=Mc(C),i!==null){if(o.flags|=128,p=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),fu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!Nt)return Bn(o),null}else 2*St()-w.renderingStartTime>ll&&u!==1073741824&&(o.flags|=128,p=!0,fu(w,!1),o.lanes=4194304);w.isBackwards?(C.sibling=o.child,o.child=C):(u=w.last,u!==null?u.sibling=C:o.child=C,w.last=C)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=St(),o.sibling=null,u=Vt.current,Rt(Vt,p?u&1|2:u&1),o):(Bn(o),null);case 22:case 23:return Sf(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&o.mode&1?Di&1073741824&&(Bn(o),o.subtreeFlags&6&&(o.flags|=8192)):Bn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function P0(i,o){switch(Dd(o),o.tag){case 1:return fi(o.type)&&Sc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return rl(),Lt(di),Lt(Fn),Hd(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return jd(o),null;case 13:if(Lt(Vt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));el()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Lt(Vt),null;case 4:return rl(),null;case 10:return Vd(o.type._context),null;case 22:case 23:return Sf(),null;case 24:return null;default:return null}}var Wc=!1,Un=!1,R0=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function ol(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){qt(i,o,p)}else u.current=null}function hf(i,o,u){try{u()}catch(p){qt(i,o,p)}}var ag=!1;function k0(i,o){if(Ee=tr,i=Ql(),Yl(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var C=0,N=-1,z=-1,ee=0,ue=0,he=i,le=null;t:for(;;){for(var Te;he!==u||g!==0&&he.nodeType!==3||(N=C+g),he!==w||p!==0&&he.nodeType!==3||(z=C+p),he.nodeType===3&&(C+=he.nodeValue.length),(Te=he.firstChild)!==null;)le=he,he=Te;for(;;){if(he===i)break t;if(le===u&&++ee===g&&(N=C),le===w&&++ue===p&&(z=C),(Te=he.nextSibling)!==null)break;he=le,le=he.parentNode}he=Te}u=N===-1||z===-1?null:{start:N,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(Fe={focusedElem:i,selectionRange:u},tr=!1,Ce=o;Ce!==null;)if(o=Ce,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ce=i;else for(;Ce!==null;){o=Ce;try{var Ie=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ie!==null){var Re=Ie.memoizedProps,Zt=Ie.memoizedState,Q=o.stateNode,H=Q.getSnapshotBeforeUpdate(o.elementType===o.type?Re:lr(o.type,Re),Zt);Q.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var Y=o.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(pe){qt(o,o.return,pe)}if(i=o.sibling,i!==null){i.return=o.return,Ce=i;break}Ce=o.return}return Ie=ag,ag=!1,Ie}function pu(i,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&i)===i){var w=g.destroy;g.destroy=void 0,w!==void 0&&hf(o,u,w)}g=g.next}while(g!==p)}}function Hc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function df(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function lg(i){var o=i.alternate;o!==null&&(i.alternate=null,lg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[ji],delete o[mo],delete o[_o],delete o[xd],delete o[Ad])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function ug(i){return i.tag===5||i.tag===3||i.tag===4}function cg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ug(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ff(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=se));else if(p!==4&&(i=i.child,i!==null))for(ff(i,o,u),i=i.sibling;i!==null;)ff(i,o,u),i=i.sibling}function pf(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(pf(i,o,u),i=i.sibling;i!==null;)pf(i,o,u),i=i.sibling}var xn=null,ur=!1;function To(i,o,u){for(u=u.child;u!==null;)hg(i,o,u),u=u.sibling}function hg(i,o,u){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(wr,u)}catch{}switch(u.tag){case 5:Un||ol(u,o);case 6:var p=xn,g=ur;xn=null,To(i,o,u),xn=p,ur=g,xn!==null&&(ur?(i=xn,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):xn.removeChild(u.stateNode));break;case 18:xn!==null&&(ur?(i=xn,u=u.stateNode,i.nodeType===8?ru(i.parentNode,u):i.nodeType===1&&ru(i,u),on(i)):ru(xn,u.stateNode));break;case 4:p=xn,g=ur,xn=u.stateNode.containerInfo,ur=!0,To(i,o,u),xn=p,ur=g;break;case 0:case 11:case 14:case 15:if(!Un&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var w=g,C=w.destroy;w=w.tag,C!==void 0&&(w&2||w&4)&&hf(u,o,C),g=g.next}while(g!==p)}To(i,o,u);break;case 1:if(!Un&&(ol(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(N){qt(u,o,N)}To(i,o,u);break;case 21:To(i,o,u);break;case 22:u.mode&1?(Un=(p=Un)||u.memoizedState!==null,To(i,o,u),Un=p):To(i,o,u);break;default:To(i,o,u)}}function dg(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new R0),o.forEach(function(p){var g=z0.bind(null,i,p);u.has(p)||(u.add(p),p.then(g,g))})}}function cr(i,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var w=i,C=o,N=C;e:for(;N!==null;){switch(N.tag){case 5:xn=N.stateNode,ur=!1;break e;case 3:xn=N.stateNode.containerInfo,ur=!0;break e;case 4:xn=N.stateNode.containerInfo,ur=!0;break e}N=N.return}if(xn===null)throw Error(t(160));hg(w,C,g),xn=null,ur=!1;var z=g.alternate;z!==null&&(z.return=null),g.return=null}catch(ee){qt(g,o,ee)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)fg(o,i),o=o.sibling}function fg(i,o){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(cr(o,i),Lr(i),p&4){try{pu(3,i,i.return),Hc(3,i)}catch(Re){qt(i,i.return,Re)}try{pu(5,i,i.return)}catch(Re){qt(i,i.return,Re)}}break;case 1:cr(o,i),Lr(i),p&512&&u!==null&&ol(u,u.return);break;case 5:if(cr(o,i),Lr(i),p&512&&u!==null&&ol(u,u.return),i.flags&32){var g=i.stateNode;try{Qi(g,"")}catch(Re){qt(i,i.return,Re)}}if(p&4&&(g=i.stateNode,g!=null)){var w=i.memoizedProps,C=u!==null?u.memoizedProps:w,N=i.type,z=i.updateQueue;if(i.updateQueue=null,z!==null)try{N==="input"&&w.type==="radio"&&w.name!=null&&Ds(g,w),Yi(N,C);var ee=Yi(N,w);for(C=0;C<z.length;C+=2){var ue=z[C],he=z[C+1];ue==="style"?Kr(g,he):ue==="dangerouslySetInnerHTML"?qo(g,he):ue==="children"?Qi(g,he):Pe(g,ue,he,ee)}switch(N){case"input":Hr(g,w);break;case"textarea":Ms(g,w);break;case"select":var le=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var Te=w.value;Te!=null?wi(g,!!w.multiple,Te,!1):le!==!!w.multiple&&(w.defaultValue!=null?wi(g,!!w.multiple,w.defaultValue,!0):wi(g,!!w.multiple,w.multiple?[]:"",!1))}g[mo]=w}catch(Re){qt(i,i.return,Re)}}break;case 6:if(cr(o,i),Lr(i),p&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,w=i.memoizedProps;try{g.nodeValue=w}catch(Re){qt(i,i.return,Re)}}break;case 3:if(cr(o,i),Lr(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{on(o.containerInfo)}catch(Re){qt(i,i.return,Re)}break;case 4:cr(o,i),Lr(i);break;case 13:cr(o,i),Lr(i),g=i.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||(gf=St())),p&4&&dg(i);break;case 22:if(ue=u!==null&&u.memoizedState!==null,i.mode&1?(Un=(ee=Un)||ue,cr(o,i),Un=ee):cr(o,i),Lr(i),p&8192){if(ee=i.memoizedState!==null,(i.stateNode.isHidden=ee)&&!ue&&i.mode&1)for(Ce=i,ue=i.child;ue!==null;){for(he=Ce=ue;Ce!==null;){switch(le=Ce,Te=le.child,le.tag){case 0:case 11:case 14:case 15:pu(4,le,le.return);break;case 1:ol(le,le.return);var Ie=le.stateNode;if(typeof Ie.componentWillUnmount=="function"){p=le,u=le.return;try{o=p,Ie.props=o.memoizedProps,Ie.state=o.memoizedState,Ie.componentWillUnmount()}catch(Re){qt(p,u,Re)}}break;case 5:ol(le,le.return);break;case 22:if(le.memoizedState!==null){_g(he);continue}}Te!==null?(Te.return=le,Ce=Te):_g(he)}ue=ue.sibling}e:for(ue=null,he=i;;){if(he.tag===5){if(ue===null){ue=he;try{g=he.stateNode,ee?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(N=he.stateNode,z=he.memoizedProps.style,C=z!=null&&z.hasOwnProperty("display")?z.display:null,N.style.display=bs("display",C))}catch(Re){qt(i,i.return,Re)}}}else if(he.tag===6){if(ue===null)try{he.stateNode.nodeValue=ee?"":he.memoizedProps}catch(Re){qt(i,i.return,Re)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===i)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===i)break e;for(;he.sibling===null;){if(he.return===null||he.return===i)break e;ue===he&&(ue=null),he=he.return}ue===he&&(ue=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:cr(o,i),Lr(i),p&4&&dg(i);break;case 21:break;default:cr(o,i),Lr(i)}}function Lr(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(ug(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Qi(g,""),p.flags&=-33);var w=cg(i);pf(i,w,g);break;case 3:case 4:var C=p.stateNode.containerInfo,N=cg(i);ff(i,N,C);break;default:throw Error(t(161))}}catch(z){qt(i,i.return,z)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function D0(i,o,u){Ce=i,pg(i)}function pg(i,o,u){for(var p=(i.mode&1)!==0;Ce!==null;){var g=Ce,w=g.child;if(g.tag===22&&p){var C=g.memoizedState!==null||Wc;if(!C){var N=g.alternate,z=N!==null&&N.memoizedState!==null||Un;N=Wc;var ee=Un;if(Wc=C,(Un=z)&&!ee)for(Ce=g;Ce!==null;)C=Ce,z=C.child,C.tag===22&&C.memoizedState!==null?gg(g):z!==null?(z.return=C,Ce=z):gg(g);for(;w!==null;)Ce=w,pg(w),w=w.sibling;Ce=g,Wc=N,Un=ee}mg(i)}else g.subtreeFlags&8772&&w!==null?(w.return=g,Ce=w):mg(i)}}function mg(i){for(;Ce!==null;){var o=Ce;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Un||Hc(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!Un)if(u===null)p.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:lr(o.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&__(o,w,p);break;case 3:var C=o.updateQueue;if(C!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}__(o,C,u)}break;case 5:var N=o.stateNode;if(u===null&&o.flags&4){u=N;var z=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&u.focus();break;case"img":z.src&&(u.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var ee=o.alternate;if(ee!==null){var ue=ee.memoizedState;if(ue!==null){var he=ue.dehydrated;he!==null&&on(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Un||o.flags&512&&df(o)}catch(le){qt(o,o.return,le)}}if(o===i){Ce=null;break}if(u=o.sibling,u!==null){u.return=o.return,Ce=u;break}Ce=o.return}}function _g(i){for(;Ce!==null;){var o=Ce;if(o===i){Ce=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Ce=u;break}Ce=o.return}}function gg(i){for(;Ce!==null;){var o=Ce;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Hc(4,o)}catch(z){qt(o,u,z)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var g=o.return;try{p.componentDidMount()}catch(z){qt(o,g,z)}}var w=o.return;try{df(o)}catch(z){qt(o,w,z)}break;case 5:var C=o.return;try{df(o)}catch(z){qt(o,C,z)}}}catch(z){qt(o,o.return,z)}if(o===i){Ce=null;break}var N=o.sibling;if(N!==null){N.return=o.return,Ce=N;break}Ce=o.return}}var L0=Math.ceil,qc=Ue.ReactCurrentDispatcher,mf=Ue.ReactCurrentOwner,Gi=Ue.ReactCurrentBatchConfig,dt=0,_n=null,nn=null,An=0,Di=0,al=go(0),un=0,mu=null,da=0,$c=0,_f=0,_u=null,mi=null,gf=0,ll=1/0,Is=null,Gc=!1,yf=null,So=null,Kc=!1,Co=null,Zc=0,gu=0,vf=null,Qc=-1,Yc=0;function Xn(){return dt&6?St():Qc!==-1?Qc:Qc=St()}function Io(i){return i.mode&1?dt&2&&An!==0?An&-An:m0.transition!==null?(Yc===0&&(Yc=rs()),Yc):(i=Je,i!==0||(i=window.event,i=i===void 0?16:et(i.type)),i):1}function hr(i,o,u,p){if(50<gu)throw gu=0,vf=null,Error(t(185));Nn(i,u,p),(!(dt&2)||i!==_n)&&(i===_n&&(!(dt&2)&&($c|=u),un===4&&xo(i,An)),_i(i,p),u===1&&dt===0&&!(o.mode&1)&&(ll=St()+500,Ic&&vo()))}function _i(i,o){var u=i.callbackNode;si(i,o);var p=Et(i,i===_n?An:0);if(p===0)u!==null&&Hs(u),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(u!=null&&Hs(u),o===1)i.tag===0?p0(vg.bind(null,i)):r_(vg.bind(null,i)),Vn(function(){!(dt&6)&&vo()}),u=null;else{switch(oi(p)){case 1:u=ts;break;case 4:u=yr;break;case 16:u=ri;break;case 536870912:u=vr;break;default:u=ri}u=Ag(u,yg.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function yg(i,o){if(Qc=-1,Yc=0,dt&6)throw Error(t(327));var u=i.callbackNode;if(ul()&&i.callbackNode!==u)return null;var p=Et(i,i===_n?An:0);if(p===0)return null;if(p&30||p&i.expiredLanes||o)o=Xc(i,p);else{o=p;var g=dt;dt|=2;var w=Eg();(_n!==i||An!==o)&&(Is=null,ll=St()+500,pa(i,o));do try{b0();break}catch(N){wg(i,N)}while(!0);Od(),qc.current=w,dt=g,nn!==null?o=0:(_n=null,An=0,o=un)}if(o!==0){if(o===2&&(g=At(i),g!==0&&(p=g,o=wf(i,g))),o===1)throw u=mu,pa(i,0),xo(i,p),_i(i,St()),u;if(o===6)xo(i,p);else{if(g=i.current.alternate,!(p&30)&&!N0(g)&&(o=Xc(i,p),o===2&&(w=At(i),w!==0&&(p=w,o=wf(i,w))),o===1))throw u=mu,pa(i,0),xo(i,p),_i(i,St()),u;switch(i.finishedWork=g,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:ma(i,mi,Is);break;case 3:if(xo(i,p),(p&130023424)===p&&(o=gf+500-St(),10<o)){if(Et(i,0)!==0)break;if(g=i.suspendedLanes,(g&p)!==p){Xn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=an(ma.bind(null,i,mi,Is),o);break}ma(i,mi,Is);break;case 4:if(xo(i,p),(p&4194240)===p)break;for(o=i.eventTimes,g=-1;0<p;){var C=31-He(p);w=1<<C,C=o[C],C>g&&(g=C),p&=~w}if(p=g,p=St()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*L0(p/1960))-p,10<p){i.timeoutHandle=an(ma.bind(null,i,mi,Is),p);break}ma(i,mi,Is);break;case 5:ma(i,mi,Is);break;default:throw Error(t(329))}}}return _i(i,St()),i.callbackNode===u?yg.bind(null,i):null}function wf(i,o){var u=_u;return i.current.memoizedState.isDehydrated&&(pa(i,o).flags|=256),i=Xc(i,o),i!==2&&(o=mi,mi=u,o!==null&&Ef(o)),i}function Ef(i){mi===null?mi=i:mi.push.apply(mi,i)}function N0(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],w=g.getSnapshot;g=g.value;try{if(!Ai(w(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function xo(i,o){for(o&=~_f,o&=~$c,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-He(o),p=1<<u;i[u]=-1,o&=~p}}function vg(i){if(dt&6)throw Error(t(327));ul();var o=Et(i,0);if(!(o&1))return _i(i,St()),null;var u=Xc(i,o);if(i.tag!==0&&u===2){var p=At(i);p!==0&&(o=p,u=wf(i,p))}if(u===1)throw u=mu,pa(i,0),xo(i,o),_i(i,St()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,ma(i,mi,Is),_i(i,St()),null}function Tf(i,o){var u=dt;dt|=1;try{return i(o)}finally{dt=u,dt===0&&(ll=St()+500,Ic&&vo())}}function fa(i){Co!==null&&Co.tag===0&&!(dt&6)&&ul();var o=dt;dt|=1;var u=Gi.transition,p=Je;try{if(Gi.transition=null,Je=1,i)return i()}finally{Je=p,Gi.transition=u,dt=o,!(dt&6)&&vo()}}function Sf(){Di=al.current,Lt(al)}function pa(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,tn(u)),nn!==null)for(u=nn.return;u!==null;){var p=u;switch(Dd(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Sc();break;case 3:rl(),Lt(di),Lt(Fn),Hd();break;case 5:jd(p);break;case 4:rl();break;case 13:Lt(Vt);break;case 19:Lt(Vt);break;case 10:Vd(p.type._context);break;case 22:case 23:Sf()}u=u.return}if(_n=i,nn=i=Ao(i.current,null),An=Di=o,un=0,mu=null,_f=$c=da=0,mi=_u=null,ua!==null){for(o=0;o<ua.length;o++)if(u=ua[o],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,w=u.pending;if(w!==null){var C=w.next;w.next=g,p.next=C}u.pending=p}ua=null}return i}function wg(i,o){do{var u=nn;try{if(Od(),bc.current=zc,Oc){for(var p=Ft.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Oc=!1}if(ha=0,mn=ln=Ft=null,uu=!1,cu=0,mf.current=null,u===null||u.return===null){un=1,mu=o,nn=null;break}e:{var w=i,C=u.return,N=u,z=o;if(o=An,N.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var ee=z,ue=N,he=ue.tag;if(!(ue.mode&1)&&(he===0||he===11||he===15)){var le=ue.alternate;le?(ue.updateQueue=le.updateQueue,ue.memoizedState=le.memoizedState,ue.lanes=le.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var Te=q_(C);if(Te!==null){Te.flags&=-257,$_(Te,C,N,w,o),Te.mode&1&&H_(w,ee,o),o=Te,z=ee;var Ie=o.updateQueue;if(Ie===null){var Re=new Set;Re.add(z),o.updateQueue=Re}else Ie.add(z);break e}else{if(!(o&1)){H_(w,ee,o),Cf();break e}z=Error(t(426))}}else if(Nt&&N.mode&1){var Zt=q_(C);if(Zt!==null){!(Zt.flags&65536)&&(Zt.flags|=256),$_(Zt,C,N,w,o),Md(sl(z,N));break e}}w=z=sl(z,N),un!==4&&(un=2),_u===null?_u=[w]:_u.push(w),w=C;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var Q=j_(w,z,o);m_(w,Q);break e;case 1:N=z;var H=w.type,Y=w.stateNode;if(!(w.flags&128)&&(typeof H.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(So===null||!So.has(Y)))){w.flags|=65536,o&=-o,w.lanes|=o;var pe=W_(w,N,o);m_(w,pe);break e}}w=w.return}while(w!==null)}Sg(u)}catch(Le){o=Le,nn===u&&u!==null&&(nn=u=u.return);continue}break}while(!0)}function Eg(){var i=qc.current;return qc.current=zc,i===null?zc:i}function Cf(){(un===0||un===3||un===2)&&(un=4),_n===null||!(da&268435455)&&!($c&268435455)||xo(_n,An)}function Xc(i,o){var u=dt;dt|=2;var p=Eg();(_n!==i||An!==o)&&(Is=null,pa(i,o));do try{M0();break}catch(g){wg(i,g)}while(!0);if(Od(),dt=u,qc.current=p,nn!==null)throw Error(t(261));return _n=null,An=0,un}function M0(){for(;nn!==null;)Tg(nn)}function b0(){for(;nn!==null&&!Na();)Tg(nn)}function Tg(i){var o=xg(i.alternate,i,Di);i.memoizedProps=i.pendingProps,o===null?Sg(i):nn=o,mf.current=null}function Sg(i){var o=i;do{var u=o.alternate;if(i=o.return,o.flags&32768){if(u=P0(u,o),u!==null){u.flags&=32767,nn=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{un=6,nn=null;return}}else if(u=A0(u,o,Di),u!==null){nn=u;return}if(o=o.sibling,o!==null){nn=o;return}nn=o=i}while(o!==null);un===0&&(un=5)}function ma(i,o,u){var p=Je,g=Gi.transition;try{Gi.transition=null,Je=1,O0(i,o,u,p)}finally{Gi.transition=g,Je=p}return null}function O0(i,o,u,p){do ul();while(Co!==null);if(dt&6)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=u.lanes|u.childLanes;if(qe(i,w),i===_n&&(nn=_n=null,An=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Kc||(Kc=!0,Ag(ri,function(){return ul(),null})),w=(u.flags&15990)!==0,u.subtreeFlags&15990||w){w=Gi.transition,Gi.transition=null;var C=Je;Je=1;var N=dt;dt|=4,mf.current=null,k0(i,u),fg(u,i),Bi(Fe),tr=!!Ee,Fe=Ee=null,i.current=u,D0(u),qs(),dt=N,Je=C,Gi.transition=w}else i.current=u;if(Kc&&(Kc=!1,Co=i,Zc=g),w=i.pendingLanes,w===0&&(So=null),Er(u.stateNode),_i(i,St()),o!==null)for(p=i.onRecoverableError,u=0;u<o.length;u++)g=o[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(Gc)throw Gc=!1,i=yf,yf=null,i;return Zc&1&&i.tag!==0&&ul(),w=i.pendingLanes,w&1?i===vf?gu++:(gu=0,vf=i):gu=0,vo(),null}function ul(){if(Co!==null){var i=oi(Zc),o=Gi.transition,u=Je;try{if(Gi.transition=null,Je=16>i?16:i,Co===null)var p=!1;else{if(i=Co,Co=null,Zc=0,dt&6)throw Error(t(331));var g=dt;for(dt|=4,Ce=i.current;Ce!==null;){var w=Ce,C=w.child;if(Ce.flags&16){var N=w.deletions;if(N!==null){for(var z=0;z<N.length;z++){var ee=N[z];for(Ce=ee;Ce!==null;){var ue=Ce;switch(ue.tag){case 0:case 11:case 15:pu(8,ue,w)}var he=ue.child;if(he!==null)he.return=ue,Ce=he;else for(;Ce!==null;){ue=Ce;var le=ue.sibling,Te=ue.return;if(lg(ue),ue===ee){Ce=null;break}if(le!==null){le.return=Te,Ce=le;break}Ce=Te}}}var Ie=w.alternate;if(Ie!==null){var Re=Ie.child;if(Re!==null){Ie.child=null;do{var Zt=Re.sibling;Re.sibling=null,Re=Zt}while(Re!==null)}}Ce=w}}if(w.subtreeFlags&2064&&C!==null)C.return=w,Ce=C;else e:for(;Ce!==null;){if(w=Ce,w.flags&2048)switch(w.tag){case 0:case 11:case 15:pu(9,w,w.return)}var Q=w.sibling;if(Q!==null){Q.return=w.return,Ce=Q;break e}Ce=w.return}}var H=i.current;for(Ce=H;Ce!==null;){C=Ce;var Y=C.child;if(C.subtreeFlags&2064&&Y!==null)Y.return=C,Ce=Y;else e:for(C=H;Ce!==null;){if(N=Ce,N.flags&2048)try{switch(N.tag){case 0:case 11:case 15:Hc(9,N)}}catch(Le){qt(N,N.return,Le)}if(N===C){Ce=null;break e}var pe=N.sibling;if(pe!==null){pe.return=N.return,Ce=pe;break e}Ce=N.return}}if(dt=g,vo(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(wr,i)}catch{}p=!0}return p}finally{Je=u,Gi.transition=o}}return!1}function Cg(i,o,u){o=sl(u,o),o=j_(i,o,1),i=Eo(i,o,1),o=Xn(),i!==null&&(Nn(i,1,o),_i(i,o))}function qt(i,o,u){if(i.tag===3)Cg(i,i,u);else for(;o!==null;){if(o.tag===3){Cg(o,i,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(So===null||!So.has(p))){i=sl(u,i),i=W_(o,i,1),o=Eo(o,i,1),i=Xn(),o!==null&&(Nn(o,1,i),_i(o,i));break}}o=o.return}}function V0(i,o,u){var p=i.pingCache;p!==null&&p.delete(o),o=Xn(),i.pingedLanes|=i.suspendedLanes&u,_n===i&&(An&u)===u&&(un===4||un===3&&(An&130023424)===An&&500>St()-gf?pa(i,0):_f|=u),_i(i,o)}function Ig(i,o){o===0&&(i.mode&1?(o=Tr,Tr<<=1,!(Tr&130023424)&&(Tr=4194304)):o=1);var u=Xn();i=Ts(i,o),i!==null&&(Nn(i,o,u),_i(i,u))}function F0(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),Ig(i,u)}function z0(i,o){var u=0;switch(i.tag){case 13:var p=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),Ig(i,u)}var xg;xg=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||di.current)pi=!0;else{if(!(i.lanes&u)&&!(o.flags&128))return pi=!1,x0(i,o,u);pi=!!(i.flags&131072)}else pi=!1,Nt&&o.flags&1048576&&s_(o,Ac,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;jc(i,o),i=o.pendingProps;var g=Ya(o,Fn.current);il(o,u),g=Gd(null,o,p,i,g,u);var w=Kd();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,fi(p)?(w=!0,Cc(o)):w=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Bd(o),g.updater=Bc,o.stateNode=g,g._reactInternals=o,ef(o,p,i,u),o=sf(null,o,p,!0,w,u)):(o.tag=0,Nt&&w&&kd(o),Yn(null,o,g,u),o=o.child),o;case 16:p=o.elementType;e:{switch(jc(i,o),i=o.pendingProps,g=p._init,p=g(p._payload),o.type=p,g=o.tag=U0(p),i=lr(p,i),g){case 0:o=rf(null,o,p,i,u);break e;case 1:o=X_(null,o,p,i,u);break e;case 11:o=G_(null,o,p,i,u);break e;case 14:o=K_(null,o,p,lr(p.type,i),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:lr(p,g),rf(i,o,p,g,u);case 1:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:lr(p,g),X_(i,o,p,g,u);case 3:e:{if(J_(o),i===null)throw Error(t(387));p=o.pendingProps,w=o.memoizedState,g=w.element,p_(i,o),Nc(o,p,null,u);var C=o.memoizedState;if(p=C.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){g=sl(Error(t(423)),o),o=eg(i,o,p,u,g);break e}else if(p!==g){g=sl(Error(t(424)),o),o=eg(i,o,p,u,g);break e}else for(ki=Rr(o.stateNode.containerInfo.firstChild),Ri=o,Nt=!0,ar=null,u=d_(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(el(),p===g){o=Cs(i,o,u);break e}Yn(i,o,p,u)}o=o.child}return o;case 5:return g_(o),i===null&&Nd(o),p=o.type,g=o.pendingProps,w=i!==null?i.memoizedProps:null,C=g.children,Ye(p,g)?C=null:w!==null&&Ye(p,w)&&(o.flags|=32),Y_(i,o),Yn(i,o,C,u),o.child;case 6:return i===null&&Nd(o),null;case 13:return tg(i,o,u);case 4:return Ud(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=tl(o,null,p,u):Yn(i,o,p,u),o.child;case 11:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:lr(p,g),G_(i,o,p,g,u);case 7:return Yn(i,o,o.pendingProps,u),o.child;case 8:return Yn(i,o,o.pendingProps.children,u),o.child;case 12:return Yn(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,g=o.pendingProps,w=o.memoizedProps,C=g.value,Rt(kc,p._currentValue),p._currentValue=C,w!==null)if(Ai(w.value,C)){if(w.children===g.children&&!di.current){o=Cs(i,o,u);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var N=w.dependencies;if(N!==null){C=w.child;for(var z=N.firstContext;z!==null;){if(z.context===p){if(w.tag===1){z=Ss(-1,u&-u),z.tag=2;var ee=w.updateQueue;if(ee!==null){ee=ee.shared;var ue=ee.pending;ue===null?z.next=z:(z.next=ue.next,ue.next=z),ee.pending=z}}w.lanes|=u,z=w.alternate,z!==null&&(z.lanes|=u),Fd(w.return,u,o),N.lanes|=u;break}z=z.next}}else if(w.tag===10)C=w.type===o.type?null:w.child;else if(w.tag===18){if(C=w.return,C===null)throw Error(t(341));C.lanes|=u,N=C.alternate,N!==null&&(N.lanes|=u),Fd(C,u,o),C=w.sibling}else C=w.child;if(C!==null)C.return=w;else for(C=w;C!==null;){if(C===o){C=null;break}if(w=C.sibling,w!==null){w.return=C.return,C=w;break}C=C.return}w=C}Yn(i,o,g.children,u),o=o.child}return o;case 9:return g=o.type,p=o.pendingProps.children,il(o,u),g=qi(g),p=p(g),o.flags|=1,Yn(i,o,p,u),o.child;case 14:return p=o.type,g=lr(p,o.pendingProps),g=lr(p.type,g),K_(i,o,p,g,u);case 15:return Z_(i,o,o.type,o.pendingProps,u);case 17:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:lr(p,g),jc(i,o),o.tag=1,fi(p)?(i=!0,Cc(o)):i=!1,il(o,u),B_(o,p,g),ef(o,p,g,u),sf(null,o,p,!0,i,u);case 19:return ig(i,o,u);case 22:return Q_(i,o,u)}throw Error(t(156,o.tag))};function Ag(i,o){return Ws(i,o)}function B0(i,o,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(i,o,u,p){return new B0(i,o,u,p)}function If(i){return i=i.prototype,!(!i||!i.isReactComponent)}function U0(i){if(typeof i=="function")return If(i)?1:0;if(i!=null){if(i=i.$$typeof,i===q)return 11;if(i===_e)return 14}return 2}function Ao(i,o){var u=i.alternate;return u===null?(u=Ki(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Jc(i,o,u,p,g,w){var C=2;if(p=i,typeof i=="function")If(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case j:return _a(u.children,g,w,o);case D:C=8,g|=8;break;case b:return i=Ki(12,u,o,g|2),i.elementType=b,i.lanes=w,i;case M:return i=Ki(13,u,o,g),i.elementType=M,i.lanes=w,i;case we:return i=Ki(19,u,o,g),i.elementType=we,i.lanes=w,i;case ce:return eh(u,g,w,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case F:C=10;break e;case O:C=9;break e;case q:C=11;break e;case _e:C=14;break e;case ae:C=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Ki(C,u,o,g),o.elementType=i,o.type=p,o.lanes=w,o}function _a(i,o,u,p){return i=Ki(7,i,p,o),i.lanes=u,i}function eh(i,o,u,p){return i=Ki(22,i,p,o),i.elementType=ce,i.lanes=u,i.stateNode={isHidden:!1},i}function xf(i,o,u){return i=Ki(6,i,null,o),i.lanes=u,i}function Af(i,o,u){return o=Ki(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function j0(i,o,u,p,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ci(0),this.expirationTimes=Ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Pf(i,o,u,p,g,w,C,N,z){return i=new j0(i,o,u,N,z),o===1?(o=1,w===!0&&(o|=8)):o=0,w=Ki(3,null,null,o),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bd(w),i}function W0(i,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oe,key:p==null?null:""+p,children:i,containerInfo:o,implementation:u}}function Pg(i){if(!i)return yo;i=i._reactInternals;e:{if(ti(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(fi(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(fi(u))return n_(i,u,o)}return o}function Rg(i,o,u,p,g,w,C,N,z){return i=Pf(u,p,!0,i,g,w,C,N,z),i.context=Pg(null),u=i.current,p=Xn(),g=Io(u),w=Ss(p,g),w.callback=o??null,Eo(u,w,g),i.current.lanes=g,Nn(i,g,p),_i(i,p),i}function th(i,o,u,p){var g=o.current,w=Xn(),C=Io(g);return u=Pg(u),o.context===null?o.context=u:o.pendingContext=u,o=Ss(w,C),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=Eo(g,o,C),i!==null&&(hr(i,g,C,w),Lc(i,g,C)),C}function nh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function kg(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Rf(i,o){kg(i,o),(i=i.alternate)&&kg(i,o)}var Dg=typeof reportError=="function"?reportError:function(i){console.error(i)};function kf(i){this._internalRoot=i}ih.prototype.render=kf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));th(i,o,null,null)},ih.prototype.unmount=kf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;fa(function(){th(null,i,null,null)}),o[vt]=null}};function ih(i){this._internalRoot=i}ih.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ks();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Kt.length&&o!==0&&o<Kt[u].priority;u++);Kt.splice(u,0,i),u===0&&Zs(i)}};function Df(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function rh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Lg(){}function H0(i,o,u,p,g){if(g){if(typeof p=="function"){var w=p;p=function(){var ee=nh(C);w.call(ee)}}var C=Rg(o,p,i,0,null,!1,!1,"",Lg);return i._reactRootContainer=C,i[vt]=C.current,fo(i.nodeType===8?i.parentNode:i),fa(),C}for(;g=i.lastChild;)i.removeChild(g);if(typeof p=="function"){var N=p;p=function(){var ee=nh(z);N.call(ee)}}var z=Pf(i,0,!1,null,null,!1,!1,"",Lg);return i._reactRootContainer=z,i[vt]=z.current,fo(i.nodeType===8?i.parentNode:i),fa(function(){th(o,z,u,p)}),z}function sh(i,o,u,p,g){var w=u._reactRootContainer;if(w){var C=w;if(typeof g=="function"){var N=g;g=function(){var z=nh(C);N.call(z)}}th(o,C,i,g)}else C=H0(u,o,i,g,p);return nh(C)}$s=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=We(o.pendingLanes);u!==0&&(Mn(o,u|1),_i(o,St()),!(dt&6)&&(ll=St()+500,vo()))}break;case 13:fa(function(){var p=Ts(i,1);if(p!==null){var g=Xn();hr(p,i,1,g)}}),Rf(i,1)}},Oi=function(i){if(i.tag===13){var o=Ts(i,134217728);if(o!==null){var u=Xn();hr(o,i,134217728,u)}Rf(i,134217728)}},Gs=function(i){if(i.tag===13){var o=Io(i),u=Ts(i,o);if(u!==null){var p=Xn();hr(u,i,o,p)}Rf(i,o)}},Ks=function(){return Je},ss=function(i,o){var u=Je;try{return Je=i,o()}finally{Je=u}},Qr=function(i,o,u){switch(o){case"input":if(Hr(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==i&&p.form===i.form){var g=Za(p);if(!g)throw Error(t(90));hn(p),Hr(p,g)}}}break;case"textarea":Ms(i,u);break;case"select":o=u.value,o!=null&&wi(i,!!u.multiple,o,!1)}},Yr=Tf,Ko=fa;var q0={usingClientEntryPoint:!1,Events:[gs,ys,Za,bi,Go,Tf]},yu={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$0={bundleType:yu.bundleType,version:yu.version,rendererPackageName:yu.rendererPackageName,rendererConfig:yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ue.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zo(i),i===null?null:i.stateNode},findFiberByHostInstance:yu.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{wr=oh.inject($0),Ln=oh}catch{}}return gi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q0,gi.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Df(o))throw Error(t(200));return W0(i,o,null,u)},gi.createRoot=function(i,o){if(!Df(i))throw Error(t(299));var u=!1,p="",g=Dg;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=Pf(i,1,!1,null,null,u,!1,p,g),i[vt]=o.current,fo(i.nodeType===8?i.parentNode:i),new kf(o)},gi.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Zo(o),i=i===null?null:i.stateNode,i},gi.flushSync=function(i){return fa(i)},gi.hydrate=function(i,o,u){if(!rh(o))throw Error(t(200));return sh(null,i,o,!0,u)},gi.hydrateRoot=function(i,o,u){if(!Df(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,w="",C=Dg;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),o=Rg(o,null,i,1,u??null,g,!1,w,C),i[vt]=o.current,fo(i),p)for(i=0;i<p.length;i++)u=p[i],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new ih(o)},gi.render=function(i,o,u){if(!rh(o))throw Error(t(200));return sh(null,i,o,!1,u)},gi.unmountComponentAtNode=function(i){if(!rh(i))throw Error(t(40));return i._reactRootContainer?(fa(function(){sh(null,null,i,!1,function(){i._reactRootContainer=null,i[vt]=null})}),!0):!1},gi.unstable_batchedUpdates=Tf,gi.unstable_renderSubtreeIntoContainer=function(i,o,u,p){if(!rh(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return sh(i,o,u,!1,p)},gi.version="18.3.1-next-f1338f8080-20240426",gi}var Bg;function Pv(){if(Bg)return Mf.exports;Bg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mf.exports=J0(),Mf.exports}var Ug;function e1(){if(Ug)return ah;Ug=1;var n=Pv();return ah.createRoot=n.createRoot,ah.hydrateRoot=n.hydrateRoot,ah}var t1=e1(),jg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge=function(n,e){if(!n)throw Ol(e)},Ol=function(n){return new Error("Firebase Database ("+Rv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},n1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const c=n[t++];e[r++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=n[t++],d=n[t++],m=n[t++],y=((a&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=n[t++],d=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Bp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const c=n[a],d=a+1<n.length,m=d?n[a+1]:0,y=a+2<n.length,T=y?n[a+2]:0,I=c>>2,A=(c&3)<<4|m>>4;let R=(m&15)<<2|T>>6,U=T&63;y||(U=64,d||(R=64)),r.push(t[I],t[A],t[R],t[U])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):n1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const c=t[n.charAt(a++)],m=a<n.length?t[n.charAt(a)]:0;++a;const T=a<n.length?t[n.charAt(a)]:64;++a;const A=a<n.length?t[n.charAt(a)]:64;if(++a,c==null||m==null||T==null||A==null)throw new i1;const R=c<<2|m>>4;if(r.push(R),T!==64){const U=m<<4&240|T>>2;if(r.push(U),A!==64){const J=T<<6&192|A;r.push(J)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class i1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dv=function(n){const e=kv(n);return Bp.encodeByteArray(e,!0)},xh=function(n){return Dv(n).replace(/\./g,"")},ep=function(n){try{return Bp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(n){return Lv(void 0,n)}function Lv(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!s1(t)||(n[t]=Lv(n[t],e[t]));return n}function s1(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=()=>o1().__FIREBASE_DEFAULTS__,l1=()=>{if(typeof process>"u"||typeof jg>"u")return;const n=jg.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},u1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ep(n[1]);return e&&JSON.parse(e)},Up=()=>{try{return a1()||l1()||u1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},c1=n=>{var e,t;return(t=(e=Up())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Nv=n=>{const e=c1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Mv=()=>{var n;return(n=Up())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xh(JSON.stringify(t)),xh(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ov())}function h1(){var n;const e=(n=Up())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function d1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f1(){return Rv.NODE_ADMIN===!0}function p1(){return!h1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m1(){try{return typeof indexedDB=="object"}catch{return!1}}function _1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="FirebaseError";class Vl extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=g1,Object.setPrototypeOf(this,Vl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fv.prototype.create)}}class Fv{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?y1(c,r):"Error",m=`${this.serviceName}: ${d} (${a}).`;return new Vl(a,m,r)}}function y1(n,e){return n.replace(v1,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const v1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(n){return JSON.parse(n)}function En(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=function(n){let e={},t={},r={},a="";try{const c=n.split(".");e=Uu(ep(c[0])||""),t=Uu(ep(c[1])||""),a=c[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:a}},w1=function(n){const e=zv(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},E1=function(n){const e=zv(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Tl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Wg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ah(n,e,t){const r={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=e.call(t,n[a],a,n));return r}function tp(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const c=n[a],d=e[a];if(Hg(c)&&Hg(d)){if(!tp(c,d))return!1}else if(c!==d)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Hg(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let A=0;A<16;A++)r[A]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let A=0;A<16;A++)r[A]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let A=16;A<80;A++){const R=r[A-3]^r[A-8]^r[A-14]^r[A-16];r[A]=(R<<1|R>>>31)&4294967295}let a=this.chain_[0],c=this.chain_[1],d=this.chain_[2],m=this.chain_[3],y=this.chain_[4],T,I;for(let A=0;A<80;A++){A<40?A<20?(T=m^c&(d^m),I=1518500249):(T=c^d^m,I=1859775393):A<60?(T=c&d|m&(c|d),I=2400959708):(T=c^d^m,I=3395469782);const R=(a<<5|a>>>27)+T+y+I+r[A]&4294967295;y=m,m=d,d=(c<<30|c>>>2)&4294967295,c=a,a=R}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+y&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let a=0;const c=this.buf_;let d=this.inbuf_;for(;a<t;){if(d===0)for(;a<=r;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(c[d]=e.charCodeAt(a),++d,++a,d===this.blockSize){this.compress_(c),d=0;break}}else for(;a<t;)if(c[d]=e[a],++d,++a,d===this.blockSize){this.compress_(c),d=0;break}}this.inbuf_=d,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let a=0;a<5;a++)for(let c=24;c>=0;c-=8)e[r]=this.chain_[a]>>c&255,++r;return e}}function Qh(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);if(a>=55296&&a<=56319){const c=a-55296;r++,ge(r<n.length,"Surrogate pair missing trail surrogate.");const d=n.charCodeAt(r)-56320;a=65536+(c<<10)+d}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Yh=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(n){return n&&n._delegate?n._delegate:n}class Sl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new nc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(A1(e))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});r.resolve(c)}catch{}}}}clearInstance(e=ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ga){return this.instances.has(e)}getOptions(e=ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&d.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),c=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:x1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ga){return this.component?this.component.multipleInstances?e:ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function x1(n){return n===ga?void 0:n}function A1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new I1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(lt||(lt={}));const R1={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},k1=lt.INFO,D1={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},L1=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=D1[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jp{constructor(e){this.name=e,this._logLevel=k1,this._logHandler=L1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?R1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const N1=(n,e)=>e.some(t=>n instanceof t);let qg,$g;function M1(){return qg||(qg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b1(){return $g||($g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bv=new WeakMap,np=new WeakMap,Uv=new WeakMap,Vf=new WeakMap,Wp=new WeakMap;function O1(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",c),n.removeEventListener("error",d)},c=()=>{t(Lo(n.result)),a()},d=()=>{r(n.error),a()};n.addEventListener("success",c),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Bv.set(t,n)}).catch(()=>{}),Wp.set(e,n),e}function V1(n){if(np.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",d),n.removeEventListener("abort",d)},c=()=>{t(),a()},d=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",c),n.addEventListener("error",d),n.addEventListener("abort",d)});np.set(n,e)}let ip={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return np.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Uv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Lo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function F1(n){ip=n(ip)}function z1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ff(this),e,...t);return Uv.set(r,e.sort?e.sort():[e]),Lo(r)}:b1().includes(n)?function(...e){return n.apply(Ff(this),e),Lo(Bv.get(this))}:function(...e){return Lo(n.apply(Ff(this),e))}}function B1(n){return typeof n=="function"?z1(n):(n instanceof IDBTransaction&&V1(n),N1(n,M1())?new Proxy(n,ip):n)}function Lo(n){if(n instanceof IDBRequest)return O1(n);if(Vf.has(n))return Vf.get(n);const e=B1(n);return e!==n&&(Vf.set(n,e),Wp.set(e,n)),e}const Ff=n=>Wp.get(n);function U1(n,e,{blocked:t,upgrade:r,blocking:a,terminated:c}={}){const d=indexedDB.open(n,e),m=Lo(d);return r&&d.addEventListener("upgradeneeded",y=>{r(Lo(d.result),y.oldVersion,y.newVersion,Lo(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",T=>a(T.oldVersion,T.newVersion,T))}).catch(()=>{}),m}const j1=["get","getKey","getAll","getAllKeys","count"],W1=["put","add","delete","clear"],zf=new Map;function Gg(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zf.get(e))return zf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=W1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||j1.includes(t)))return;const c=async function(d,...m){const y=this.transaction(d,a?"readwrite":"readonly");let T=y.store;return r&&(T=T.index(m.shift())),(await Promise.all([T[t](...m),a&&y.done]))[0]};return zf.set(e,c),c}F1(n=>({...n,get:(e,t,r)=>Gg(e,t)||n.get(e,t,r),has:(e,t)=>!!Gg(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(q1(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function q1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",Kg="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new jp("@firebase/app"),$1="@firebase/app-compat",G1="@firebase/analytics-compat",K1="@firebase/analytics",Z1="@firebase/app-check-compat",Q1="@firebase/app-check",Y1="@firebase/auth",X1="@firebase/auth-compat",J1="@firebase/database",eT="@firebase/data-connect",tT="@firebase/database-compat",nT="@firebase/functions",iT="@firebase/functions-compat",rT="@firebase/installations",sT="@firebase/installations-compat",oT="@firebase/messaging",aT="@firebase/messaging-compat",lT="@firebase/performance",uT="@firebase/performance-compat",cT="@firebase/remote-config",hT="@firebase/remote-config-compat",dT="@firebase/storage",fT="@firebase/storage-compat",pT="@firebase/firestore",mT="@firebase/vertexai",_T="@firebase/firestore-compat",gT="firebase",yT="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",vT={[rp]:"fire-core",[$1]:"fire-core-compat",[K1]:"fire-analytics",[G1]:"fire-analytics-compat",[Q1]:"fire-app-check",[Z1]:"fire-app-check-compat",[Y1]:"fire-auth",[X1]:"fire-auth-compat",[J1]:"fire-rtdb",[eT]:"fire-data-connect",[tT]:"fire-rtdb-compat",[nT]:"fire-fn",[iT]:"fire-fn-compat",[rT]:"fire-iid",[sT]:"fire-iid-compat",[oT]:"fire-fcm",[aT]:"fire-fcm-compat",[lT]:"fire-perf",[uT]:"fire-perf-compat",[cT]:"fire-rc",[hT]:"fire-rc-compat",[dT]:"fire-gcs",[fT]:"fire-gcs-compat",[pT]:"fire-fst",[_T]:"fire-fst-compat",[mT]:"fire-vertex","fire-js":"fire-js",[gT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new Map,wT=new Map,op=new Map;function Zg(n,e){try{n.container.addComponent(e)}catch(t){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wu(n){const e=n.name;if(op.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,n);for(const t of ju.values())Zg(t,n);for(const t of wT.values())Zg(t,n);return!0}function jv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},No=new Fv("app","Firebase",ET);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw No.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=yT;function Hv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sp,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw No.create("bad-app-name",{appName:String(a)});if(t||(t=Mv()),!t)throw No.create("no-options");const c=ju.get(a);if(c){if(tp(t,c.options)&&tp(r,c.config))return c;throw No.create("duplicate-app",{appName:a})}const d=new P1(a);for(const y of op.values())d.addComponent(y);const m=new TT(t,r,d);return ju.set(a,m),m}function Hp(n=sp){const e=ju.get(n);if(!e&&n===sp&&Mv())return Hv();if(!e)throw No.create("no-app",{appName:n});return e}function ST(){return Array.from(ju.values())}function Mo(n,e,t){var r;let a=(r=vT[n])!==null&&r!==void 0?r:n;t&&(a+=`-${t}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(m.join(" "));return}Wu(new Sl(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="firebase-heartbeat-database",IT=1,Hu="firebase-heartbeat-store";let Bf=null;function qv(){return Bf||(Bf=U1(CT,IT,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hu)}catch(t){console.warn(t)}}}}).catch(n=>{throw No.create("idb-open",{originalErrorMessage:n.message})})),Bf}async function xT(n){try{const t=(await qv()).transaction(Hu),r=await t.objectStore(Hu).get($v(n));return await t.done,r}catch(e){if(e instanceof Vl)Ps.warn(e.message);else{const t=No.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(t.message)}}}async function Qg(n,e){try{const r=(await qv()).transaction(Hu,"readwrite");await r.objectStore(Hu).put(e,$v(n)),await r.done}catch(t){if(t instanceof Vl)Ps.warn(t.message);else{const r=No.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ps.warn(r.message)}}}function $v(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=1024,PT=30*24*60*60*1e3;class RT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new DT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Yg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const m=new Date(d.date).valueOf();return Date.now()-m<=PT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ps.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yg(),{heartbeatsToSend:r,unsentEntries:a}=kT(this._heartbeatsCache.heartbeats),c=xh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Ps.warn(t),""}}}function Yg(){return new Date().toISOString().substring(0,10)}function kT(n,e=AT){const t=[];let r=n.slice();for(const a of n){const c=t.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),Xg(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Xg(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class DT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return m1()?_1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Qg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Qg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Xg(n){return xh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n){Wu(new Sl("platform-logger",e=>new H1(e),"PRIVATE")),Wu(new Sl("heartbeat",e=>new RT(e),"PRIVATE")),Mo(rp,Kg,n),Mo(rp,Kg,"esm2017"),Mo("fire-js","")}LT("");var Jg={};const ey="@firebase/database",ty="1.0.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gv="";function NT(n){Gv=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),En(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Uu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Br(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new MT(e)}}catch{}return new bT},va=Kv("localStorage"),OT=Kv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=new jp("@firebase/database"),VT=function(){let n=1;return function(){return n++}}(),Zv=function(n){const e=C1(n),t=new S1;t.update(e);const r=t.digest();return Bp.encodeByteArray(r)},ic=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ic.apply(null,r):typeof r=="object"?e+=En(r):e+=r,e+=" "}return e};let Lu=null,ny=!0;const FT=function(n,e){ge(!0,"Can't turn on custom loggers persistently."),ml.logLevel=lt.VERBOSE,Lu=ml.log.bind(ml)},Rn=function(...n){if(ny===!0&&(ny=!1,Lu===null&&OT.get("logging_enabled")===!0&&FT()),Lu){const e=ic.apply(null,n);Lu(e)}},rc=function(n){return function(...e){Rn(n,...e)}},ap=function(...n){const e="FIREBASE INTERNAL ERROR: "+ic(...n);ml.error(e)},Rs=function(...n){const e=`FIREBASE FATAL ERROR: ${ic(...n)}`;throw ml.error(e),new Error(e)},Jn=function(...n){const e="FIREBASE WARNING: "+ic(...n);ml.warn(e)},zT=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Jn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},qp=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},BT=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Cl="[MIN_NAME]",Sa="[MAX_NAME]",Pa=function(n,e){if(n===e)return 0;if(n===Cl||e===Sa)return-1;if(e===Cl||n===Sa)return 1;{const t=iy(n),r=iy(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},UT=function(n,e){return n===e?0:n<e?-1:1},wu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+En(e))},$p=function(n){if(typeof n!="object"||n===null)return En(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=En(e[r]),t+=":",t+=$p(n[e[r]]);return t+="}",t},Qv=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let a=0;a<t;a+=e)a+e>t?r.push(n.substring(a,t)):r.push(n.substring(a,a+e));return r};function kn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Yv=function(n){ge(!qp(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let a,c,d,m,y;n===0?(c=0,d=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(n)/Math.LN2),r),c=m+r,d=Math.round(n*Math.pow(2,t-m)-Math.pow(2,t))):(c=0,d=Math.round(n/Math.pow(2,1-r-t))));const T=[];for(y=t;y;y-=1)T.push(d%2?1:0),d=Math.floor(d/2);for(y=e;y;y-=1)T.push(c%2?1:0),c=Math.floor(c/2);T.push(a?1:0),T.reverse();const I=T.join("");let A="";for(y=0;y<64;y+=8){let R=parseInt(I.substr(y,8),2).toString(16);R.length===1&&(R="0"+R),A=A+R}return A.toLowerCase()},jT=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},WT=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function HT(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}const qT=new RegExp("^-?(0*)\\d{1,10}$"),$T=-2147483648,GT=2147483647,iy=function(n){if(qT.test(n)){const e=Number(n);if(e>=$T&&e<=GT)return e}return null},Fl=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Jn("Exception was thrown by user callback.",t),e},Math.floor(0))}},KT=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Nu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Jn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Rn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Jn(e)}}class gh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}gh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="5",Xv="v",Jv="s",ew="r",tw="f",nw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,iw="ls",rw="p",lp="ac",sw="websocket",ow="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t,r,a,c=!1,d="",m=!1,y=!1){this.secure=t,this.namespace=r,this.webSocketOnly=a,this.nodeAdmin=c,this.persistenceKey=d,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=y,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=va.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&va.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function YT(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function lw(n,e,t){ge(typeof e=="string","typeof type must == string"),ge(typeof t=="object","typeof params must == object");let r;if(e===sw)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===ow)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);YT(n)&&(t.ns=n.namespace);const a=[];return kn(t,(c,d)=>{a.push(c+"="+d)}),r+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(){this.counters_={}}incrementCounter(e,t=1){Br(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return r1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf={},jf={};function Kp(n){const e=n.toString();return Uf[e]||(Uf[e]=new XT),Uf[e]}function JT(n,e){const t=n.toString();return jf[t]||(jf[t]=e()),jf[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<r.length;++a)r[a]&&Fl(()=>{this.onMessage_(r[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="start",tS="close",nS="pLPCommand",iS="pRTLPCB",uw="id",cw="pw",hw="ser",rS="cb",sS="seg",oS="ts",aS="d",lS="dframe",dw=1870,fw=30,uS=dw-fw,cS=25e3,hS=3e4;class pl{constructor(e,t,r,a,c,d,m){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=a,this.authToken=c,this.transportSessionId=d,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rc(e),this.stats_=Kp(t),this.urlFn=y=>(this.appCheckToken&&(y[lp]=this.appCheckToken),lw(t,ow,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new eS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(hS)),BT(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zp((...c)=>{const[d,m,y,T,I]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===ry)this.id=m,this.password=y;else if(d===tS)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...c)=>{const[d,m]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(d,m)},()=>{this.onClosed_()},this.urlFn);const r={};r[ry]="t",r[hw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[rS]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Xv]=Gp,this.transportSessionId&&(r[Jv]=this.transportSessionId),this.lastSessionId&&(r[iw]=this.lastSessionId),this.applicationId&&(r[rw]=this.applicationId),this.appCheckToken&&(r[lp]=this.appCheckToken),typeof location<"u"&&location.hostname&&nw.test(location.hostname)&&(r[ew]=tw);const a=this.urlFn(r);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pl.forceAllow_=!0}static forceDisallow(){pl.forceDisallow_=!0}static isAvailable(){return pl.forceAllow_?!0:!pl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!jT()&&!WT()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=En(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=Dv(t),a=Qv(r,uS);for(let c=0;c<a.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[c]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[lS]="t",r[uw]=e,r[cw]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=En(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Zp{constructor(e,t,r,a){this.onDisconnect=r,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=VT(),window[nS+this.uniqueCallbackIdentifier]=e,window[iS+this.uniqueCallbackIdentifier]=t,this.myIFrame=Zp.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(m){Rn("frame writing exception"),m.stack&&Rn(m.stack),Rn(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Rn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[uw]=this.myID,e[cw]=this.myPW,e[hw]=this.currentSerial;let t=this.urlFn(e),r="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fw+r.length<=dw;){const d=this.pendingSegs.shift();r=r+"&"+sS+a+"="+d.seg+"&"+oS+a+"="+d.ts+"&"+aS+a+"="+d.d,a++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(r,Math.floor(cS)),c=()=>{clearTimeout(a),r()};this.addTag(e,c)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const a=r.readyState;(!a||a==="loaded"||a==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Rn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=16384,fS=45e3;let Ph=null;typeof MozWebSocket<"u"?Ph=MozWebSocket:typeof WebSocket<"u"&&(Ph=WebSocket);class Or{constructor(e,t,r,a,c,d,m){this.connId=e,this.applicationId=r,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rc(this.connId),this.stats_=Kp(t),this.connURL=Or.connectionURL_(t,d,m,a,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,a,c){const d={};return d[Xv]=Gp,typeof location<"u"&&location.hostname&&nw.test(location.hostname)&&(d[ew]=tw),t&&(d[Jv]=t),r&&(d[iw]=r),a&&(d[lp]=a),c&&(d[rw]=c),lw(e,sw,d)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,va.set("previous_websocket_failure",!0);try{let r;f1(),this.mySock=new Ph(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const a=r.message||r.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const a=r.message||r.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){Or.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ph!==null&&!Or.forceDisallow_}static previouslyFailed(){return va.isInMemoryStorage||va.get("previous_websocket_failure")===!0}markConnectionHealthy(){va.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=Uu(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ge(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=En(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=Qv(t,dS);r.length>1&&this.sendString_(String(r.length));for(let a=0;a<r.length;a++)this.sendString_(r[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(fS))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Or.responsesRequiredToBeHealthy=2;Or.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{static get ALL_TRANSPORTS(){return[pl,Or]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Or.isAvailable();let r=t&&!Or.previouslyFailed();if(e.webSocketOnly&&(t||Jn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Or];else{const a=this.transports_=[];for(const c of qu.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);qu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}qu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=6e4,mS=5e3,_S=10*1024,gS=100*1024,Wf="t",sy="d",yS="s",oy="r",vS="e",ay="o",ly="a",uy="n",cy="p",wS="h";class ES{constructor(e,t,r,a,c,d,m,y,T,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=a,this.authToken_=c,this.onMessage_=d,this.onReady_=m,this.onDisconnect_=y,this.onKill_=T,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rc("c:"+this.id+":"),this.transportManager_=new qu(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Nu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>gS?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>_S?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Wf in e){const t=e[Wf];t===ly?this.upgradeIfSecondaryHealthy_():t===oy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===ay&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=wu("t",e),r=wu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:cy,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ly,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:uy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=wu("t",e),r=wu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=wu(Wf,e);if(sy in e){const r=e[sy];if(t===wS){const a=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===uy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===yS?this.onConnectionShutdown_(r):t===oy?this.onReset_(r):t===vS?ap("Server Error: "+r):t===ay?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ap("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Gp!==r&&Jn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Nu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(pS))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(mS))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:cy,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(va.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{put(e,t,r,a){}merge(e,t,r,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.allowedEvents_=e,this.listeners_={},ge(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let a=0;a<r.length;a++)r[a].callback.apply(r[a].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const a=this.getInitialEvent(e);a&&t.apply(r,a)}off(e,t,r){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let c=0;c<a.length;c++)if(a[c].callback===t&&(!r||r===a[c].context)){a.splice(c,1);return}}validateEventType_(e){ge(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends mw{static getInstance(){return new Rh}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Vv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ge(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=32,dy=768;class It{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[r]=this.pieces_[a],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function _t(){return new It("")}function it(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Oo(n){return n.pieces_.length-n.pieceNum_}function Dt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new It(n.pieces_,e)}function Qp(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function TS(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function $u(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function _w(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new It(e,0)}function $t(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof It)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let a=0;a<r.length;a++)r[a].length>0&&t.push(r[a])}return new It(t,0)}function ot(n){return n.pieceNum_>=n.pieces_.length}function vi(n,e){const t=it(n),r=it(e);if(t===null)return e;if(t===r)return vi(Dt(n),Dt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function SS(n,e){const t=$u(n,0),r=$u(e,0);for(let a=0;a<t.length&&a<r.length;a++){const c=Pa(t[a],r[a]);if(c!==0)return c}return t.length===r.length?0:t.length<r.length?-1:1}function Yp(n,e){if(Oo(n)!==Oo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Zi(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Oo(n)>Oo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class CS{constructor(e,t){this.errorPrefix_=t,this.parts_=$u(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Yh(this.parts_[r]);gw(this)}}function IS(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Yh(e),gw(n)}function xS(n){const e=n.parts_.pop();n.byteLength_-=Yh(e),n.parts_.length>0&&(n.byteLength_-=1)}function gw(n){if(n.byteLength_>dy)throw new Error(n.errorPrefix_+"has a key path longer than "+dy+" bytes ("+n.byteLength_+").");if(n.parts_.length>hy)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hy+") or object contains a cycle "+ya(n))}function ya(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp extends mw{static getInstance(){return new Xp}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ge(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=1e3,AS=60*5*1e3,fy=30*1e3,PS=1.3,RS=3e4,kS="server_kill",py=3;class As extends pw{constructor(e,t,r,a,c,d,m,y){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=As.nextPersistentConnectionId_++,this.log_=rc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Eu,this.maxReconnectDelay_=AS,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Rh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const a=++this.requestNumber_,c={r:a,a:e,b:t};this.log_(En(c)),ge(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[a]=r)}get(e){this.initConnection_();const t=new nc,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const m=d.d;d.s==="ok"?t.resolve(m):t.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),t.promise}listen(e,t,r,a){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ge(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:t,query:e,tag:r};this.listens.get(d).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+r+" for "+a);const c={p:r},d="q";e.tag&&(c.q=t._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(d,c,m=>{const y=m.d,T=m.s;As.warnOnListenWarnings_(y,t),(this.listens.get(r)&&this.listens.get(r).get(a))===e&&(this.log_("listen response",m),T!=="ok"&&this.removeListen_(r,a),e.onComplete&&e.onComplete(T,y))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Br(e,"w")){const r=Tl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',c=t._path.toString();Jn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||E1(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fy)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=w1(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,a=>{const c=a.s,d=a.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+a),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,a)&&this.connected_&&this.sendUnlisten_(r,a,e._queryObject,t)}sendUnlisten_(e,t,r,a){this.log_("Unlisten on "+e+" for "+t);const c={p:e},d="n";a&&(c.q=r,c.t=a),this.sendRequest(d,c)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,a){const c={p:t,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(e,t,r,a){this.putInternal("p",e,t,r,a)}merge(e,t,r,a){this.putInternal("m",e,t,r,a)}putInternal(e,t,r,a,c){this.initConnection_();const d={p:t,d:r};c!==void 0&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:a}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,c=>{this.log_(t+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const c=r.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+En(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):ap("Unrecognized action received from server: "+En(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ge(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Eu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Eu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>RS&&(this.reconnectDelay_=Eu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*PS)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+As.nextConnectionId_++,c=this.lastSessionId;let d=!1,m=null;const y=function(){m?m.close():(d=!0,r())},T=function(A){ge(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(A)};this.realtime_={close:y,sendRequest:T};const I=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[A,R]=await Promise.all([this.authTokenProvider_.getToken(I),this.appCheckTokenProvider_.getToken(I)]);d?Rn("getToken() completed but was canceled"):(Rn("getToken() completed. Creating connection."),this.authToken_=A&&A.accessToken,this.appCheckToken_=R&&R.token,m=new ES(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,U=>{Jn(U+" ("+this.repoInfo_.toString()+")"),this.interrupt(kS)},c))}catch(A){this.log_("Failed to get token: "+A),d||(this.repoInfo_.nodeAdmin&&Jn(A),y())}}}interrupt(e){Rn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Rn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Wg(this.interruptReasons_)&&(this.reconnectDelay_=Eu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(c=>$p(c)).join("$"):r="default";const a=this.removeListen_(e,r);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const r=new It(e).toString();let a;if(this.listens.has(r)){const c=this.listens.get(r);a=c.get(t),c.delete(t),c.size===0&&this.listens.delete(r)}else a=void 0;return a}onAuthRevoked_(e,t){Rn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=py&&(this.reconnectDelay_=fy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Rn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=py&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Gv.replace(/\./g,"-")]=1,Vv()?e["framework.cordova"]=1:d1()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Rh.getInstance().currentlyOnline();return Wg(this.interruptReasons_)&&e}}As.nextPersistentConnectionId_=0;As.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new rt(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new rt(Cl,e),a=new rt(Cl,t);return this.compare(r,a)!==0}minPost(){return rt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh;class yw extends Xh{static get __EMPTY_NODE(){return lh}static set __EMPTY_NODE(e){lh=e}compare(e,t){return Pa(e.name,t.name)}isDefinedOn(e){throw Ol("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return rt.MIN}maxPost(){return new rt(Sa,lh)}makePost(e,t){return ge(typeof e=="string","KeyIndex indexValue must always be a string."),new rt(e,lh)}toString(){return".key"}}const _l=new yw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh=class{constructor(e,t,r,a,c=null){this.isReverse_=a,this.resultGenerator_=c,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=t?r(e.key,t):1,a&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Li=class xu{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=r??xu.RED,this.left=a??Vr.EMPTY_NODE,this.right=c??Vr.EMPTY_NODE}copy(e,t,r,a,c){return new xu(e??this.key,t??this.value,r??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return c<0?a=a.copy(null,null,null,a.left.insert(e,t,r),null):c===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,a;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return Vr.EMPTY_NODE;a=r.right.min_(),r=r.copy(a.key,a.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,xu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,xu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Li.RED=!0;Li.BLACK=!1;class DS{copy(e,t,r,a,c){return this}insert(e,t,r){return new Li(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Vr=class yh{constructor(e,t=yh.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new yh(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Li.BLACK,null,null))}remove(e){return new yh(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Li.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,a=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return a?a.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(a=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new uh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new uh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new uh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new uh(this.root_,null,this.comparator_,!0,e)}};Vr.EMPTY_NODE=new DS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(n,e){return Pa(n.name,e.name)}function Jp(n,e){return Pa(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up;function NS(n){up=n}const vw=function(n){return typeof n=="number"?"number:"+Yv(n):"string:"+n},ww=function(n){if(n.isLeafNode()){const e=n.val();ge(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Br(e,".sv"),"Priority must be a string or number.")}else ge(n===up||n.isEmpty(),"priority of unexpected type.");ge(n===up||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let my;class yn{static set __childrenNodeConstructor(e){my=e}static get __childrenNodeConstructor(){return my}constructor(e,t=yn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ge(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ww(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new yn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:yn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ot(e)?this:it(e)===".priority"?this.priorityNode_:yn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:yn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=it(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(ge(r!==".priority"||Oo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,yn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+vw(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=Yv(this.value_):e+=this.value_,this.lazyHash_=Zv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===yn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof yn.__childrenNodeConstructor?-1:(ge(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,a=yn.VALUE_TYPE_ORDER.indexOf(t),c=yn.VALUE_TYPE_ORDER.indexOf(r);return ge(a>=0,"Unknown leaf type: "+t),ge(c>=0,"Unknown leaf type: "+r),a===c?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}yn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ew,Tw;function MS(n){Ew=n}function bS(n){Tw=n}class OS extends Xh{compare(e,t){const r=e.node.getPriority(),a=t.node.getPriority(),c=r.compareTo(a);return c===0?Pa(e.name,t.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return rt.MIN}maxPost(){return new rt(Sa,new yn("[PRIORITY-POST]",Tw))}makePost(e,t){const r=Ew(e);return new rt(t,new yn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Gt=new OS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=Math.log(2);class FS{constructor(e){const t=c=>parseInt(Math.log(c)/VS,10),r=c=>parseInt(Array(c+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=r(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const kh=function(n,e,t,r){n.sort(e);const a=function(y,T){const I=T-y;let A,R;if(I===0)return null;if(I===1)return A=n[y],R=t?t(A):A,new Li(R,A.node,Li.BLACK,null,null);{const U=parseInt(I/2,10)+y,J=a(y,U),ne=a(U+1,T);return A=n[U],R=t?t(A):A,new Li(R,A.node,Li.BLACK,J,ne)}},c=function(y){let T=null,I=null,A=n.length;const R=function(J,ne){const ie=A-J,Ae=A;A-=J;const De=a(ie+1,Ae),Pe=n[ie],Ue=t?t(Pe):Pe;U(new Li(Ue,Pe.node,ne,null,De))},U=function(J){T?(T.left=J,T=J):(I=J,T=J)};for(let J=0;J<y.count;++J){const ne=y.nextBitIsOne(),ie=Math.pow(2,y.count-(J+1));ne?R(ie,Li.BLACK):(R(ie,Li.BLACK),R(ie,Li.RED))}return I},d=new FS(n.length),m=c(d);return new Vr(r||e,m)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hf;const Tu={};class xs{static get Default(){return ge(Gt,"ChildrenNode.ts has not been loaded"),Hf=Hf||new xs({".priority":Tu},{".priority":Gt}),Hf}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Tl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Vr?t:null}hasIndex(e){return Br(this.indexSet_,e.toString())}addIndex(e,t){ge(e!==_l,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let a=!1;const c=t.getIterator(rt.Wrap);let d=c.getNext();for(;d;)a=a||e.isDefinedOn(d.node),r.push(d),d=c.getNext();let m;a?m=kh(r,e.getCompare()):m=Tu;const y=e.toString(),T=Object.assign({},this.indexSet_);T[y]=e;const I=Object.assign({},this.indexes_);return I[y]=m,new xs(I,T)}addToIndexes(e,t){const r=Ah(this.indexes_,(a,c)=>{const d=Tl(this.indexSet_,c);if(ge(d,"Missing index implementation for "+c),a===Tu)if(d.isDefinedOn(e.node)){const m=[],y=t.getIterator(rt.Wrap);let T=y.getNext();for(;T;)T.name!==e.name&&m.push(T),T=y.getNext();return m.push(e),kh(m,d.getCompare())}else return Tu;else{const m=t.get(e.name);let y=a;return m&&(y=y.remove(new rt(e.name,m))),y.insert(e,e.node)}});return new xs(r,this.indexSet_)}removeFromIndexes(e,t){const r=Ah(this.indexes_,a=>{if(a===Tu)return a;{const c=t.get(e.name);return c?a.remove(new rt(e.name,c)):a}});return new xs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su;class $e{static get EMPTY_NODE(){return Su||(Su=new $e(new Vr(Jp),null,xs.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ww(this.priorityNode_),this.children_.isEmpty()&&ge(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Su}updatePriority(e){return this.children_.isEmpty()?this:new $e(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Su:t}}getChild(e){const t=it(e);return t===null?this:this.getImmediateChild(t).getChild(Dt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ge(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new rt(e,t);let a,c;t.isEmpty()?(a=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(a=this.children_.insert(e,t),c=this.indexMap_.addToIndexes(r,this.children_));const d=a.isEmpty()?Su:this.priorityNode_;return new $e(a,d,c)}}updateChild(e,t){const r=it(e);if(r===null)return t;{ge(it(e)!==".priority"||Oo(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(r).updateChild(Dt(e),t);return this.updateImmediateChild(r,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,a=0,c=!0;if(this.forEachChild(Gt,(d,m)=>{t[d]=m.val(e),r++,c&&$e.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):c=!1}),!e&&c&&a<2*r){const d=[];for(const m in t)d[m]=t[m];return d}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+vw(this.getPriority().val())+":"),this.forEachChild(Gt,(t,r)=>{const a=r.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":Zv(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const a=this.resolveIndex_(r);if(a){const c=a.getPredecessorKey(new rt(e,t));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new rt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new rt(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,rt.Wrap);let c=a.peek();for(;c!=null&&t.compare(c,e)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,rt.Wrap);let c=a.peek();for(;c!=null&&t.compare(c,e)>0;)a.getNext(),c=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===sc?-1:0}withIndex(e){if(e===_l||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new $e(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===_l||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(Gt),a=t.getIterator(Gt);let c=r.getNext(),d=a.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=a.getNext()}return c===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===_l?null:this.indexMap_.get(e.toString())}}$e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class zS extends $e{constructor(){super(new Vr(Jp),$e.EMPTY_NODE,xs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $e.EMPTY_NODE}isEmpty(){return!1}}const sc=new zS;Object.defineProperties(rt,{MIN:{value:new rt(Cl,$e.EMPTY_NODE)},MAX:{value:new rt(Sa,sc)}});yw.__EMPTY_NODE=$e.EMPTY_NODE;yn.__childrenNodeConstructor=$e;NS(sc);bS(sc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=!0;function wn(n,e=null){if(n===null)return $e.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ge(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new yn(t,wn(e))}if(!(n instanceof Array)&&BS){const t=[];let r=!1;if(kn(n,(d,m)=>{if(d.substring(0,1)!=="."){const y=wn(m);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new rt(d,y)))}}),t.length===0)return $e.EMPTY_NODE;const c=kh(t,LS,d=>d.name,Jp);if(r){const d=kh(t,Gt.getCompare());return new $e(c,wn(e),new xs({".priority":d},{".priority":Gt}))}else return new $e(c,wn(e),xs.Default)}else{let t=$e.EMPTY_NODE;return kn(n,(r,a)=>{if(Br(n,r)&&r.substring(0,1)!=="."){const c=wn(a);(c.isLeafNode()||!c.isEmpty())&&(t=t.updateImmediateChild(r,c))}}),t.updatePriority(wn(e))}}MS(wn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US extends Xh{constructor(e){super(),this.indexPath_=e,ge(!ot(e)&&it(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),a=this.extractChild(t.node),c=r.compareTo(a);return c===0?Pa(e.name,t.name):c}makePost(e,t){const r=wn(e),a=$e.EMPTY_NODE.updateChild(this.indexPath_,r);return new rt(t,a)}maxPost(){const e=$e.EMPTY_NODE.updateChild(this.indexPath_,sc);return new rt(Sa,e)}toString(){return $u(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS extends Xh{compare(e,t){const r=e.node.compareTo(t.node);return r===0?Pa(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return rt.MIN}maxPost(){return rt.MAX}makePost(e,t){const r=wn(e);return new rt(t,r)}toString(){return".value"}}const WS=new jS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(n){return{type:"value",snapshotNode:n}}function Il(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Gu(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ku(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function HS(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this.index_=e}updateChild(e,t,r,a,c,d){ge(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(t);return m.getChild(a).equals(r.getChild(a))&&m.isEmpty()===r.isEmpty()||(d!=null&&(r.isEmpty()?e.hasChild(t)?d.trackChildChange(Gu(t,m)):ge(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?d.trackChildChange(Il(t,r)):d.trackChildChange(Ku(t,r,m))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Gt,(a,c)=>{t.hasChild(a)||r.trackChildChange(Gu(a,c))}),t.isLeafNode()||t.forEachChild(Gt,(a,c)=>{if(e.hasChild(a)){const d=e.getImmediateChild(a);d.equals(c)||r.trackChildChange(Ku(a,c,d))}else r.trackChildChange(Il(a,c))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?$e.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e){this.indexedFilter_=new em(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Zu.getStartPost_(e),this.endPost_=Zu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,a,c,d){return this.matches(new rt(t,r))||(r=$e.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,a,c,d)}updateFullNode(e,t,r){t.isLeafNode()&&(t=$e.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority($e.EMPTY_NODE);const c=this;return t.forEachChild(Gt,(d,m)=>{c.matches(new rt(d,m))||(a=a.updateImmediateChild(d,$e.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Zu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,a,c,d){return this.rangedFilter_.matches(new rt(t,r))||(r=$e.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,a,c,d):this.fullLimitUpdateChild_(e,t,r,c,d)}updateFullNode(e,t,r){let a;if(t.isLeafNode()||t.isEmpty())a=$e.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=$e.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;c.hasNext()&&d<this.limit_;){const m=c.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))a=a.updateImmediateChild(m.name,m.node),d++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority($e.EMPTY_NODE);let c;this.reverse_?c=a.getReverseIterator(this.index_):c=a.getIterator(this.index_);let d=0;for(;c.hasNext();){const m=c.getNext();d<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?d++:a=a.updateImmediateChild(m.name,$e.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,a,c){let d;if(this.reverse_){const A=this.index_.getCompare();d=(R,U)=>A(U,R)}else d=this.index_.getCompare();const m=e;ge(m.numChildren()===this.limit_,"");const y=new rt(t,r),T=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),I=this.rangedFilter_.matches(y);if(m.hasChild(t)){const A=m.getImmediateChild(t);let R=a.getChildAfterChild(this.index_,T,this.reverse_);for(;R!=null&&(R.name===t||m.hasChild(R.name));)R=a.getChildAfterChild(this.index_,R,this.reverse_);const U=R==null?1:d(R,y);if(I&&!r.isEmpty()&&U>=0)return c!=null&&c.trackChildChange(Ku(t,r,A)),m.updateImmediateChild(t,r);{c!=null&&c.trackChildChange(Gu(t,A));const ne=m.updateImmediateChild(t,$e.EMPTY_NODE);return R!=null&&this.rangedFilter_.matches(R)?(c!=null&&c.trackChildChange(Il(R.name,R.node)),ne.updateImmediateChild(R.name,R.node)):ne}}else return r.isEmpty()?e:I&&d(T,y)>=0?(c!=null&&(c.trackChildChange(Gu(T.name,T.node)),c.trackChildChange(Il(t,r))),m.updateImmediateChild(t,r).updateImmediateChild(T.name,$e.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ge(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ge(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cl}hasEnd(){return this.endSet_}getIndexEndValue(){return ge(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ge(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Sa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ge(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gt}copy(){const e=new tm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $S(n){return n.loadsAllData()?new em(n.getIndex()):n.hasLimit()?new qS(n):new Zu(n)}function _y(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Gt?t="$priority":n.index_===WS?t="$value":n.index_===_l?t="$key":(ge(n.index_ instanceof US,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=En(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=En(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+En(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=En(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+En(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function gy(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Gt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh extends pw{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ge(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=a,this.log_=rc("p:rest:"),this.listens_={}}listen(e,t,r,a){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const d=Dh.getListenId_(e,r),m={};this.listens_[d]=m;const y=_y(e._queryParams);this.restRequest_(c+".json",y,(T,I)=>{let A=I;if(T===404&&(A=null,T=null),T===null&&this.onDataUpdate_(c,A,!1,r),Tl(this.listens_,d)===m){let R;T?T===401?R="permission_denied":R="rest_error:"+T:R="ok",a(R,null)}})}unlisten(e,t){const r=Dh.getListenId_(e,t);delete this.listens_[r]}get(e){const t=_y(e._queryParams),r=e._path.toString(),a=new nc;return this.restRequest_(r+".json",t,(c,d)=>{let m=d;c===404&&(m=null,c=null),c===null?(this.onDataUpdate_(r,m,!1,null),a.resolve(m)):a.reject(new Error(m))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,c])=>{a&&a.accessToken&&(t.auth=a.accessToken),c&&c.token&&(t.ac=c.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+T1(t);this.log_("Sending REST request for "+d);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&m.readyState===4){this.log_("REST Response for "+d+" received. status:",m.status,"response:",m.responseText);let y=null;if(m.status>=200&&m.status<300){try{y=Uu(m.responseText)}catch{Jn("Failed to parse JSON response for "+d+": "+m.responseText)}r(null,y)}else m.status!==401&&m.status!==404&&Jn("Got unsuccessful REST response for "+d+" Status: "+m.status),r(m.status);r=null}},m.open("GET",d,!0),m.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(){this.rootNode_=$e.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(){return{value:null,children:new Map}}function Cw(n,e,t){if(ot(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=it(e);n.children.has(r)||n.children.set(r,Lh());const a=n.children.get(r);e=Dt(e),Cw(a,e,t)}}function cp(n,e,t){n.value!==null?t(e,n.value):KS(n,(r,a)=>{const c=new It(e.toString()+"/"+r);cp(a,c,t)})}function KS(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&kn(this.last_,(r,a)=>{t[r]=t[r]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=10*1e3,QS=30*1e3,YS=5*60*1e3;class XS{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ZS(e);const r=yy+(QS-yy)*Math.random();Nu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;kn(e,(a,c)=>{c>0&&Br(this.statsToReport_,a)&&(t[a]=c,r=!0)}),r&&this.server_.reportStats(t),Nu(this.reportStats_.bind(this),Math.floor(Math.random()*2*YS))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(dr||(dr={}));function nm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function im(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function rm(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=dr.ACK_USER_WRITE,this.source=nm()}operationForChild(e){if(ot(this.path)){if(this.affectedTree.value!=null)return ge(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new It(e));return new Nh(_t(),t,this.revert)}}else return ge(it(this.path)===e,"operationForChild called for unrelated child."),new Nh(Dt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t){this.source=e,this.path=t,this.type=dr.LISTEN_COMPLETE}operationForChild(e){return ot(this.path)?new Qu(this.source,_t()):new Qu(this.source,Dt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=dr.OVERWRITE}operationForChild(e){return ot(this.path)?new Ca(this.source,_t(),this.snap.getImmediateChild(e)):new Ca(this.source,Dt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=dr.MERGE}operationForChild(e){if(ot(this.path)){const t=this.children.subtree(new It(e));return t.isEmpty()?null:t.value?new Ca(this.source,_t(),t.value):new xl(this.source,_t(),t)}else return ge(it(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xl(this.source,Dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ot(e))return this.isFullyInitialized()&&!this.filtered_;const t=it(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function eC(n,e,t,r){const a=[],c=[];return e.forEach(d=>{d.type==="child_changed"&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&c.push(HS(d.childName,d.snapshotNode))}),Cu(n,a,"child_removed",e,r,t),Cu(n,a,"child_added",e,r,t),Cu(n,a,"child_moved",c,r,t),Cu(n,a,"child_changed",e,r,t),Cu(n,a,"value",e,r,t),a}function Cu(n,e,t,r,a,c){const d=r.filter(m=>m.type===t);d.sort((m,y)=>nC(n,m,y)),d.forEach(m=>{const y=tC(n,m,c);a.forEach(T=>{T.respondsTo(m.type)&&e.push(T.createEvent(y,n.query_))})})}function tC(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function nC(n,e,t){if(e.childName==null||t.childName==null)throw Ol("Should only compare child_ events.");const r=new rt(e.childName,e.snapshotNode),a=new rt(t.childName,t.snapshotNode);return n.index_.compare(r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(n,e){return{eventCache:n,serverCache:e}}function Mu(n,e,t,r){return Jh(new Ia(e,t,r),n.serverCache)}function Iw(n,e,t,r){return Jh(n.eventCache,new Ia(e,t,r))}function hp(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function xa(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf;const iC=()=>(qf||(qf=new Vr(UT)),qf);class kt{static fromObject(e){let t=new kt(null);return kn(e,(r,a)=>{t=t.set(new It(r),a)}),t}constructor(e,t=iC()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:_t(),value:this.value};if(ot(e))return null;{const r=it(e),a=this.children.get(r);if(a!==null){const c=a.findRootMostMatchingPathAndValue(Dt(e),t);return c!=null?{path:$t(new It(r),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ot(e))return this;{const t=it(e),r=this.children.get(t);return r!==null?r.subtree(Dt(e)):new kt(null)}}set(e,t){if(ot(e))return new kt(t,this.children);{const r=it(e),c=(this.children.get(r)||new kt(null)).set(Dt(e),t),d=this.children.insert(r,c);return new kt(this.value,d)}}remove(e){if(ot(e))return this.children.isEmpty()?new kt(null):new kt(null,this.children);{const t=it(e),r=this.children.get(t);if(r){const a=r.remove(Dt(e));let c;return a.isEmpty()?c=this.children.remove(t):c=this.children.insert(t,a),this.value===null&&c.isEmpty()?new kt(null):new kt(this.value,c)}else return this}}get(e){if(ot(e))return this.value;{const t=it(e),r=this.children.get(t);return r?r.get(Dt(e)):null}}setTree(e,t){if(ot(e))return t;{const r=it(e),c=(this.children.get(r)||new kt(null)).setTree(Dt(e),t);let d;return c.isEmpty()?d=this.children.remove(r):d=this.children.insert(r,c),new kt(this.value,d)}}fold(e){return this.fold_(_t(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((a,c)=>{r[a]=c.fold_($t(e,a),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,_t(),t)}findOnPath_(e,t,r){const a=this.value?r(t,this.value):!1;if(a)return a;if(ot(e))return null;{const c=it(e),d=this.children.get(c);return d?d.findOnPath_(Dt(e),$t(t,c),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,_t(),t)}foreachOnPath_(e,t,r){if(ot(e))return this;{this.value&&r(t,this.value);const a=it(e),c=this.children.get(a);return c?c.foreachOnPath_(Dt(e),$t(t,a),r):new kt(null)}}foreach(e){this.foreach_(_t(),e)}foreach_(e,t){this.children.inorderTraversal((r,a)=>{a.foreach_($t(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.writeTree_=e}static empty(){return new fr(new kt(null))}}function bu(n,e,t){if(ot(e))return new fr(new kt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const a=r.path;let c=r.value;const d=vi(a,e);return c=c.updateChild(d,t),new fr(n.writeTree_.set(a,c))}else{const a=new kt(t),c=n.writeTree_.setTree(e,a);return new fr(c)}}}function dp(n,e,t){let r=n;return kn(t,(a,c)=>{r=bu(r,$t(e,a),c)}),r}function vy(n,e){if(ot(e))return fr.empty();{const t=n.writeTree_.setTree(e,new kt(null));return new fr(t)}}function fp(n,e){return Ra(n,e)!=null}function Ra(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(vi(t.path,e)):null}function wy(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Gt,(r,a)=>{e.push(new rt(r,a))}):n.writeTree_.children.inorderTraversal((r,a)=>{a.value!=null&&e.push(new rt(r,a.value))}),e}function bo(n,e){if(ot(e))return n;{const t=Ra(n,e);return t!=null?new fr(new kt(t)):new fr(n.writeTree_.subtree(e))}}function pp(n){return n.writeTree_.isEmpty()}function Al(n,e){return xw(_t(),n.writeTree_,e)}function xw(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((a,c)=>{a===".priority"?(ge(c.value!==null,"Priority writes must always be leaf nodes"),r=c.value):t=xw($t(n,a),c,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild($t(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(n,e){return kw(e,n)}function rC(n,e,t,r,a){ge(r>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:a}),a&&(n.visibleWrites=bu(n.visibleWrites,e,t)),n.lastWriteId=r}function sC(n,e,t,r){ge(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=dp(n.visibleWrites,e,t),n.lastWriteId=r}function oC(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function aC(n,e){const t=n.allWrites.findIndex(m=>m.writeId===e);ge(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let a=r.visible,c=!1,d=n.allWrites.length-1;for(;a&&d>=0;){const m=n.allWrites[d];m.visible&&(d>=t&&lC(m,r.path)?a=!1:Zi(r.path,m.path)&&(c=!0)),d--}if(a){if(c)return uC(n),!0;if(r.snap)n.visibleWrites=vy(n.visibleWrites,r.path);else{const m=r.children;kn(m,y=>{n.visibleWrites=vy(n.visibleWrites,$t(r.path,y))})}return!0}else return!1}function lC(n,e){if(n.snap)return Zi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Zi($t(n.path,t),e))return!0;return!1}function uC(n){n.visibleWrites=Aw(n.allWrites,cC,_t()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function cC(n){return n.visible}function Aw(n,e,t){let r=fr.empty();for(let a=0;a<n.length;++a){const c=n[a];if(e(c)){const d=c.path;let m;if(c.snap)Zi(t,d)?(m=vi(t,d),r=bu(r,m,c.snap)):Zi(d,t)&&(m=vi(d,t),r=bu(r,_t(),c.snap.getChild(m)));else if(c.children){if(Zi(t,d))m=vi(t,d),r=dp(r,m,c.children);else if(Zi(d,t))if(m=vi(d,t),ot(m))r=dp(r,_t(),c.children);else{const y=Tl(c.children,it(m));if(y){const T=y.getChild(Dt(m));r=bu(r,_t(),T)}}}else throw Ol("WriteRecord should have .snap or .children")}}return r}function Pw(n,e,t,r,a){if(!r&&!a){const c=Ra(n.visibleWrites,e);if(c!=null)return c;{const d=bo(n.visibleWrites,e);if(pp(d))return t;if(t==null&&!fp(d,_t()))return null;{const m=t||$e.EMPTY_NODE;return Al(d,m)}}}else{const c=bo(n.visibleWrites,e);if(!a&&pp(c))return t;if(!a&&t==null&&!fp(c,_t()))return null;{const d=function(T){return(T.visible||a)&&(!r||!~r.indexOf(T.writeId))&&(Zi(T.path,e)||Zi(e,T.path))},m=Aw(n.allWrites,d,e),y=t||$e.EMPTY_NODE;return Al(m,y)}}}function hC(n,e,t){let r=$e.EMPTY_NODE;const a=Ra(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(Gt,(c,d)=>{r=r.updateImmediateChild(c,d)}),r;if(t){const c=bo(n.visibleWrites,e);return t.forEachChild(Gt,(d,m)=>{const y=Al(bo(c,new It(d)),m);r=r.updateImmediateChild(d,y)}),wy(c).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}else{const c=bo(n.visibleWrites,e);return wy(c).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}}function dC(n,e,t,r,a){ge(r||a,"Either existingEventSnap or existingServerSnap must exist");const c=$t(e,t);if(fp(n.visibleWrites,c))return null;{const d=bo(n.visibleWrites,c);return pp(d)?a.getChild(t):Al(d,a.getChild(t))}}function fC(n,e,t,r){const a=$t(e,t),c=Ra(n.visibleWrites,a);if(c!=null)return c;if(r.isCompleteForChild(t)){const d=bo(n.visibleWrites,a);return Al(d,r.getNode().getImmediateChild(t))}else return null}function pC(n,e){return Ra(n.visibleWrites,e)}function mC(n,e,t,r,a,c,d){let m;const y=bo(n.visibleWrites,e),T=Ra(y,_t());if(T!=null)m=T;else if(t!=null)m=Al(y,t);else return[];if(m=m.withIndex(d),!m.isEmpty()&&!m.isLeafNode()){const I=[],A=d.getCompare(),R=c?m.getReverseIteratorFrom(r,d):m.getIteratorFrom(r,d);let U=R.getNext();for(;U&&I.length<a;)A(U,r)!==0&&I.push(U),U=R.getNext();return I}else return[]}function _C(){return{visibleWrites:fr.empty(),allWrites:[],lastWriteId:-1}}function Mh(n,e,t,r){return Pw(n.writeTree,n.treePath,e,t,r)}function om(n,e){return hC(n.writeTree,n.treePath,e)}function Ey(n,e,t,r){return dC(n.writeTree,n.treePath,e,t,r)}function bh(n,e){return pC(n.writeTree,$t(n.treePath,e))}function gC(n,e,t,r,a,c){return mC(n.writeTree,n.treePath,e,t,r,a,c)}function am(n,e,t){return fC(n.writeTree,n.treePath,e,t)}function Rw(n,e){return kw($t(n.treePath,e),n.writeTree)}function kw(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ge(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ge(r!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(r);if(a){const c=a.type;if(t==="child_added"&&c==="child_removed")this.changeMap.set(r,Ku(r,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&c==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&c==="child_changed")this.changeMap.set(r,Gu(r,a.oldSnap));else if(t==="child_changed"&&c==="child_added")this.changeMap.set(r,Il(r,e.snapshotNode));else if(t==="child_changed"&&c==="child_changed")this.changeMap.set(r,Ku(r,e.snapshotNode,a.oldSnap));else throw Ol("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const Dw=new vC;class lm{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Ia(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return am(this.writes_,e,r)}}getChildAfterChild(e,t,r){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xa(this.viewCache_),c=gC(this.writes_,a,t,1,r,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(n){return{filter:n}}function EC(n,e){ge(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ge(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function TC(n,e,t,r,a){const c=new yC;let d,m;if(t.type===dr.OVERWRITE){const T=t;T.source.fromUser?d=mp(n,e,T.path,T.snap,r,a,c):(ge(T.source.fromServer,"Unknown source."),m=T.source.tagged||e.serverCache.isFiltered()&&!ot(T.path),d=Oh(n,e,T.path,T.snap,r,a,m,c))}else if(t.type===dr.MERGE){const T=t;T.source.fromUser?d=CC(n,e,T.path,T.children,r,a,c):(ge(T.source.fromServer,"Unknown source."),m=T.source.tagged||e.serverCache.isFiltered(),d=_p(n,e,T.path,T.children,r,a,m,c))}else if(t.type===dr.ACK_USER_WRITE){const T=t;T.revert?d=AC(n,e,T.path,r,a,c):d=IC(n,e,T.path,T.affectedTree,r,a,c)}else if(t.type===dr.LISTEN_COMPLETE)d=xC(n,e,t.path,r,c);else throw Ol("Unknown operation type: "+t.type);const y=c.getChanges();return SC(e,d,y),{viewCache:d,changes:y}}function SC(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const a=r.getNode().isLeafNode()||r.getNode().isEmpty(),c=hp(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!r.getNode().equals(c)||!r.getNode().getPriority().equals(c.getPriority()))&&t.push(Sw(hp(e)))}}function Lw(n,e,t,r,a,c){const d=e.eventCache;if(bh(r,t)!=null)return e;{let m,y;if(ot(t))if(ge(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const T=xa(e),I=T instanceof $e?T:$e.EMPTY_NODE,A=om(r,I);m=n.filter.updateFullNode(e.eventCache.getNode(),A,c)}else{const T=Mh(r,xa(e));m=n.filter.updateFullNode(e.eventCache.getNode(),T,c)}else{const T=it(t);if(T===".priority"){ge(Oo(t)===1,"Can't have a priority with additional path components");const I=d.getNode();y=e.serverCache.getNode();const A=Ey(r,t,I,y);A!=null?m=n.filter.updatePriority(I,A):m=d.getNode()}else{const I=Dt(t);let A;if(d.isCompleteForChild(T)){y=e.serverCache.getNode();const R=Ey(r,t,d.getNode(),y);R!=null?A=d.getNode().getImmediateChild(T).updateChild(I,R):A=d.getNode().getImmediateChild(T)}else A=am(r,T,e.serverCache);A!=null?m=n.filter.updateChild(d.getNode(),T,A,I,a,c):m=d.getNode()}}return Mu(e,m,d.isFullyInitialized()||ot(t),n.filter.filtersNodes())}}function Oh(n,e,t,r,a,c,d,m){const y=e.serverCache;let T;const I=d?n.filter:n.filter.getIndexedFilter();if(ot(t))T=I.updateFullNode(y.getNode(),r,null);else if(I.filtersNodes()&&!y.isFiltered()){const U=y.getNode().updateChild(t,r);T=I.updateFullNode(y.getNode(),U,null)}else{const U=it(t);if(!y.isCompleteForPath(t)&&Oo(t)>1)return e;const J=Dt(t),ie=y.getNode().getImmediateChild(U).updateChild(J,r);U===".priority"?T=I.updatePriority(y.getNode(),ie):T=I.updateChild(y.getNode(),U,ie,J,Dw,null)}const A=Iw(e,T,y.isFullyInitialized()||ot(t),I.filtersNodes()),R=new lm(a,A,c);return Lw(n,A,t,a,R,m)}function mp(n,e,t,r,a,c,d){const m=e.eventCache;let y,T;const I=new lm(a,e,c);if(ot(t))T=n.filter.updateFullNode(e.eventCache.getNode(),r,d),y=Mu(e,T,!0,n.filter.filtersNodes());else{const A=it(t);if(A===".priority")T=n.filter.updatePriority(e.eventCache.getNode(),r),y=Mu(e,T,m.isFullyInitialized(),m.isFiltered());else{const R=Dt(t),U=m.getNode().getImmediateChild(A);let J;if(ot(R))J=r;else{const ne=I.getCompleteChild(A);ne!=null?Qp(R)===".priority"&&ne.getChild(_w(R)).isEmpty()?J=ne:J=ne.updateChild(R,r):J=$e.EMPTY_NODE}if(U.equals(J))y=e;else{const ne=n.filter.updateChild(m.getNode(),A,J,R,I,d);y=Mu(e,ne,m.isFullyInitialized(),n.filter.filtersNodes())}}}return y}function Ty(n,e){return n.eventCache.isCompleteForChild(e)}function CC(n,e,t,r,a,c,d){let m=e;return r.foreach((y,T)=>{const I=$t(t,y);Ty(e,it(I))&&(m=mp(n,m,I,T,a,c,d))}),r.foreach((y,T)=>{const I=$t(t,y);Ty(e,it(I))||(m=mp(n,m,I,T,a,c,d))}),m}function Sy(n,e,t){return t.foreach((r,a)=>{e=e.updateChild(r,a)}),e}function _p(n,e,t,r,a,c,d,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y=e,T;ot(t)?T=r:T=new kt(null).setTree(t,r);const I=e.serverCache.getNode();return T.children.inorderTraversal((A,R)=>{if(I.hasChild(A)){const U=e.serverCache.getNode().getImmediateChild(A),J=Sy(n,U,R);y=Oh(n,y,new It(A),J,a,c,d,m)}}),T.children.inorderTraversal((A,R)=>{const U=!e.serverCache.isCompleteForChild(A)&&R.value===null;if(!I.hasChild(A)&&!U){const J=e.serverCache.getNode().getImmediateChild(A),ne=Sy(n,J,R);y=Oh(n,y,new It(A),ne,a,c,d,m)}}),y}function IC(n,e,t,r,a,c,d){if(bh(a,t)!=null)return e;const m=e.serverCache.isFiltered(),y=e.serverCache;if(r.value!=null){if(ot(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return Oh(n,e,t,y.getNode().getChild(t),a,c,m,d);if(ot(t)){let T=new kt(null);return y.getNode().forEachChild(_l,(I,A)=>{T=T.set(new It(I),A)}),_p(n,e,t,T,a,c,m,d)}else return e}else{let T=new kt(null);return r.foreach((I,A)=>{const R=$t(t,I);y.isCompleteForPath(R)&&(T=T.set(I,y.getNode().getChild(R)))}),_p(n,e,t,T,a,c,m,d)}}function xC(n,e,t,r,a){const c=e.serverCache,d=Iw(e,c.getNode(),c.isFullyInitialized()||ot(t),c.isFiltered());return Lw(n,d,t,r,Dw,a)}function AC(n,e,t,r,a,c){let d;if(bh(r,t)!=null)return e;{const m=new lm(r,e,a),y=e.eventCache.getNode();let T;if(ot(t)||it(t)===".priority"){let I;if(e.serverCache.isFullyInitialized())I=Mh(r,xa(e));else{const A=e.serverCache.getNode();ge(A instanceof $e,"serverChildren would be complete if leaf node"),I=om(r,A)}I=I,T=n.filter.updateFullNode(y,I,c)}else{const I=it(t);let A=am(r,I,e.serverCache);A==null&&e.serverCache.isCompleteForChild(I)&&(A=y.getImmediateChild(I)),A!=null?T=n.filter.updateChild(y,I,A,Dt(t),m,c):e.eventCache.getNode().hasChild(I)?T=n.filter.updateChild(y,I,$e.EMPTY_NODE,Dt(t),m,c):T=y,T.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Mh(r,xa(e)),d.isLeafNode()&&(T=n.filter.updateFullNode(T,d,c)))}return d=e.serverCache.isFullyInitialized()||bh(r,_t())!=null,Mu(e,T,d,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,a=new em(r.getIndex()),c=$S(r);this.processor_=wC(c);const d=t.serverCache,m=t.eventCache,y=a.updateFullNode($e.EMPTY_NODE,d.getNode(),null),T=c.updateFullNode($e.EMPTY_NODE,m.getNode(),null),I=new Ia(y,d.isFullyInitialized(),a.filtersNodes()),A=new Ia(T,m.isFullyInitialized(),c.filtersNodes());this.viewCache_=Jh(A,I),this.eventGenerator_=new JS(this.query_)}get query(){return this.query_}}function RC(n){return n.viewCache_.serverCache.getNode()}function kC(n,e){const t=xa(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ot(e)&&!t.getImmediateChild(it(e)).isEmpty())?t.getChild(e):null}function Cy(n){return n.eventRegistrations_.length===0}function DC(n,e){n.eventRegistrations_.push(e)}function Iy(n,e,t){const r=[];if(t){ge(e==null,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(c=>{const d=c.createCancelEvent(t,a);d&&r.push(d)})}if(e){let a=[];for(let c=0;c<n.eventRegistrations_.length;++c){const d=n.eventRegistrations_[c];if(!d.matches(e))a.push(d);else if(e.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(c+1));break}}n.eventRegistrations_=a}else n.eventRegistrations_=[];return r}function xy(n,e,t,r){e.type===dr.MERGE&&e.source.queryId!==null&&(ge(xa(n.viewCache_),"We should always have a full cache before handling merges"),ge(hp(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,c=TC(n.processor_,a,e,t,r);return EC(n.processor_,c.viewCache),ge(c.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=c.viewCache,Nw(n,c.changes,c.viewCache.eventCache.getNode(),null)}function LC(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Gt,(c,d)=>{r.push(Il(c,d))}),t.isFullyInitialized()&&r.push(Sw(t.getNode())),Nw(n,r,t.getNode(),e)}function Nw(n,e,t,r){const a=r?[r]:n.eventRegistrations_;return eC(n.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh;class NC{constructor(){this.views=new Map}}function MC(n){ge(!Vh,"__referenceConstructor has already been defined"),Vh=n}function bC(){return ge(Vh,"Reference.ts has not been loaded"),Vh}function OC(n){return n.views.size===0}function um(n,e,t,r){const a=e.source.queryId;if(a!==null){const c=n.views.get(a);return ge(c!=null,"SyncTree gave us an op for an invalid query."),xy(c,e,t,r)}else{let c=[];for(const d of n.views.values())c=c.concat(xy(d,e,t,r));return c}}function VC(n,e,t,r,a){const c=e._queryIdentifier,d=n.views.get(c);if(!d){let m=Mh(t,a?r:null),y=!1;m?y=!0:r instanceof $e?(m=om(t,r),y=!1):(m=$e.EMPTY_NODE,y=!1);const T=Jh(new Ia(m,y,!1),new Ia(r,a,!1));return new PC(e,T)}return d}function FC(n,e,t,r,a,c){const d=VC(n,e,r,a,c);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,d),DC(d,t),LC(d,t)}function zC(n,e,t,r){const a=e._queryIdentifier,c=[];let d=[];const m=Vo(n);if(a==="default")for(const[y,T]of n.views.entries())d=d.concat(Iy(T,t,r)),Cy(T)&&(n.views.delete(y),T.query._queryParams.loadsAllData()||c.push(T.query));else{const y=n.views.get(a);y&&(d=d.concat(Iy(y,t,r)),Cy(y)&&(n.views.delete(a),y.query._queryParams.loadsAllData()||c.push(y.query)))}return m&&!Vo(n)&&c.push(new(bC())(e._repo,e._path)),{removed:c,events:d}}function Mw(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function gl(n,e){let t=null;for(const r of n.views.values())t=t||kC(r,e);return t}function bw(n,e){if(e._queryParams.loadsAllData())return ed(n);{const r=e._queryIdentifier;return n.views.get(r)}}function Ow(n,e){return bw(n,e)!=null}function Vo(n){return ed(n)!=null}function ed(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh;function BC(n){ge(!Fh,"__referenceConstructor has already been defined"),Fh=n}function UC(){return ge(Fh,"Reference.ts has not been loaded"),Fh}let jC=1;class Ay{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kt(null),this.pendingWriteTree_=_C(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Vw(n,e,t,r,a){return rC(n.pendingWriteTree_,e,t,r,a),a?zl(n,new Ca(nm(),e,t)):[]}function WC(n,e,t,r){sC(n.pendingWriteTree_,e,t,r);const a=kt.fromObject(t);return zl(n,new xl(nm(),e,a))}function Ro(n,e,t=!1){const r=oC(n.pendingWriteTree_,e);if(aC(n.pendingWriteTree_,e)){let c=new kt(null);return r.snap!=null?c=c.set(_t(),!0):kn(r.children,d=>{c=c.set(new It(d),!0)}),zl(n,new Nh(r.path,c,t))}else return[]}function td(n,e,t){return zl(n,new Ca(im(),e,t))}function HC(n,e,t){const r=kt.fromObject(t);return zl(n,new xl(im(),e,r))}function qC(n,e){return zl(n,new Qu(im(),e))}function $C(n,e,t){const r=hm(n,t);if(r){const a=dm(r),c=a.path,d=a.queryId,m=vi(c,e),y=new Qu(rm(d),m);return fm(n,c,y)}else return[]}function gp(n,e,t,r,a=!1){const c=e._path,d=n.syncPointTree_.get(c);let m=[];if(d&&(e._queryIdentifier==="default"||Ow(d,e))){const y=zC(d,e,t,r);OC(d)&&(n.syncPointTree_=n.syncPointTree_.remove(c));const T=y.removed;if(m=y.events,!a){const I=T.findIndex(R=>R._queryParams.loadsAllData())!==-1,A=n.syncPointTree_.findOnPath(c,(R,U)=>Vo(U));if(I&&!A){const R=n.syncPointTree_.subtree(c);if(!R.isEmpty()){const U=ZC(R);for(let J=0;J<U.length;++J){const ne=U[J],ie=ne.query,Ae=Bw(n,ne);n.listenProvider_.startListening(Ou(ie),zh(n,ie),Ae.hashFn,Ae.onComplete)}}}!A&&T.length>0&&!r&&(I?n.listenProvider_.stopListening(Ou(e),null):T.forEach(R=>{const U=n.queryToTagMap.get(nd(R));n.listenProvider_.stopListening(Ou(R),U)}))}QC(n,T)}return m}function GC(n,e,t,r){const a=hm(n,r);if(a!=null){const c=dm(a),d=c.path,m=c.queryId,y=vi(d,e),T=new Ca(rm(m),y,t);return fm(n,d,T)}else return[]}function KC(n,e,t,r){const a=hm(n,r);if(a){const c=dm(a),d=c.path,m=c.queryId,y=vi(d,e),T=kt.fromObject(t),I=new xl(rm(m),y,T);return fm(n,d,I)}else return[]}function Py(n,e,t,r=!1){const a=e._path;let c=null,d=!1;n.syncPointTree_.foreachOnPath(a,(R,U)=>{const J=vi(R,a);c=c||gl(U,J),d=d||Vo(U)});let m=n.syncPointTree_.get(a);m?(d=d||Vo(m),c=c||gl(m,_t())):(m=new NC,n.syncPointTree_=n.syncPointTree_.set(a,m));let y;c!=null?y=!0:(y=!1,c=$e.EMPTY_NODE,n.syncPointTree_.subtree(a).foreachChild((U,J)=>{const ne=gl(J,_t());ne&&(c=c.updateImmediateChild(U,ne))}));const T=Ow(m,e);if(!T&&!e._queryParams.loadsAllData()){const R=nd(e);ge(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const U=YC();n.queryToTagMap.set(R,U),n.tagToQueryMap.set(U,R)}const I=sm(n.pendingWriteTree_,a);let A=FC(m,e,t,I,c,y);if(!T&&!d&&!r){const R=bw(m,e);A=A.concat(XC(n,e,R))}return A}function cm(n,e,t){const a=n.pendingWriteTree_,c=n.syncPointTree_.findOnPath(e,(d,m)=>{const y=vi(d,e),T=gl(m,y);if(T)return T});return Pw(a,e,c,t,!0)}function zl(n,e){return Fw(e,n.syncPointTree_,null,sm(n.pendingWriteTree_,_t()))}function Fw(n,e,t,r){if(ot(n.path))return zw(n,e,t,r);{const a=e.get(_t());t==null&&a!=null&&(t=gl(a,_t()));let c=[];const d=it(n.path),m=n.operationForChild(d),y=e.children.get(d);if(y&&m){const T=t?t.getImmediateChild(d):null,I=Rw(r,d);c=c.concat(Fw(m,y,T,I))}return a&&(c=c.concat(um(a,n,r,t))),c}}function zw(n,e,t,r){const a=e.get(_t());t==null&&a!=null&&(t=gl(a,_t()));let c=[];return e.children.inorderTraversal((d,m)=>{const y=t?t.getImmediateChild(d):null,T=Rw(r,d),I=n.operationForChild(d);I&&(c=c.concat(zw(I,m,y,T)))}),a&&(c=c.concat(um(a,n,r,t))),c}function Bw(n,e){const t=e.query,r=zh(n,t);return{hashFn:()=>(RC(e)||$e.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return r?$C(n,t._path,r):qC(n,t._path);{const c=HT(a,t);return gp(n,t,null,c)}}}}function zh(n,e){const t=nd(e);return n.queryToTagMap.get(t)}function nd(n){return n._path.toString()+"$"+n._queryIdentifier}function hm(n,e){return n.tagToQueryMap.get(e)}function dm(n){const e=n.indexOf("$");return ge(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new It(n.substr(0,e))}}function fm(n,e,t){const r=n.syncPointTree_.get(e);ge(r,"Missing sync point for query tag that we're tracking");const a=sm(n.pendingWriteTree_,e);return um(r,t,a,null)}function ZC(n){return n.fold((e,t,r)=>{if(t&&Vo(t))return[ed(t)];{let a=[];return t&&(a=Mw(t)),kn(r,(c,d)=>{a=a.concat(d)}),a}})}function Ou(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(UC())(n._repo,n._path):n}function QC(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const a=nd(r),c=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(c)}}}function YC(){return jC++}function XC(n,e,t){const r=e._path,a=zh(n,e),c=Bw(n,t),d=n.listenProvider_.startListening(Ou(e),a,c.hashFn,c.onComplete),m=n.syncPointTree_.subtree(r);if(a)ge(!Vo(m.value),"If we're adding a query, it shouldn't be shadowed");else{const y=m.fold((T,I,A)=>{if(!ot(T)&&I&&Vo(I))return[ed(I).query];{let R=[];return I&&(R=R.concat(Mw(I).map(U=>U.query))),kn(A,(U,J)=>{R=R.concat(J)}),R}});for(let T=0;T<y.length;++T){const I=y[T];n.listenProvider_.stopListening(Ou(I),zh(n,I))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new pm(t)}node(){return this.node_}}class mm{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=$t(this.path_,e);return new mm(this.syncTree_,t)}node(){return cm(this.syncTree_,this.path_)}}const JC=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Ry=function(n,e,t){if(!n||typeof n!="object")return n;if(ge(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return eI(n[".sv"],e,t);if(typeof n[".sv"]=="object")return tI(n[".sv"],e);ge(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},eI=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ge(!1,"Unexpected server value: "+n)}},tI=function(n,e,t){n.hasOwnProperty("increment")||ge(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&ge(!1,"Unexpected increment value: "+r);const a=e.node();if(ge(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return r;const d=a.getValue();return typeof d!="number"?r:d+r},Uw=function(n,e,t,r){return _m(e,new mm(t,n),r)},jw=function(n,e,t){return _m(n,new pm(e),t)};function _m(n,e,t){const r=n.getPriority().val(),a=Ry(r,e.getImmediateChild(".priority"),t);let c;if(n.isLeafNode()){const d=n,m=Ry(d.getValue(),e,t);return m!==d.getValue()||a!==d.getPriority().val()?new yn(m,wn(a)):n}else{const d=n;return c=d,a!==d.getPriority().val()&&(c=c.updatePriority(new yn(a))),d.forEachChild(Gt,(m,y)=>{const T=_m(y,e.getImmediateChild(m),t);T!==y&&(c=c.updateImmediateChild(m,T))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ym(n,e){let t=e instanceof It?e:new It(e),r=n,a=it(t);for(;a!==null;){const c=Tl(r.node.children,a)||{children:{},childCount:0};r=new gm(a,r,c),t=Dt(t),a=it(t)}return r}function Bl(n){return n.node.value}function Ww(n,e){n.node.value=e,yp(n)}function Hw(n){return n.node.childCount>0}function nI(n){return Bl(n)===void 0&&!Hw(n)}function id(n,e){kn(n.node.children,(t,r)=>{e(new gm(t,n,r))})}function qw(n,e,t,r){t&&e(n),id(n,a=>{qw(a,e,!0)})}function iI(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function oc(n){return new It(n.parent===null?n.name:oc(n.parent)+"/"+n.name)}function yp(n){n.parent!==null&&rI(n.parent,n.name,n)}function rI(n,e,t){const r=nI(t),a=Br(n.node.children,e);r&&a?(delete n.node.children[e],n.node.childCount--,yp(n)):!r&&!a&&(n.node.children[e]=t.node,n.node.childCount++,yp(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=/[\[\].#$\/\u0000-\u001F\u007F]/,oI=/[\[\].#$\u0000-\u001F\u007F]/,$f=10*1024*1024,vm=function(n){return typeof n=="string"&&n.length!==0&&!sI.test(n)},$w=function(n){return typeof n=="string"&&n.length!==0&&!oI.test(n)},aI=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$w(n)},lI=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!qp(n)||n&&typeof n=="object"&&Br(n,".sv")},Gw=function(n,e,t,r){r&&e===void 0||rd(Qh(n,"value"),e,t)},rd=function(n,e,t){const r=t instanceof It?new CS(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ya(r));if(typeof e=="function")throw new Error(n+"contains a function "+ya(r)+" with contents = "+e.toString());if(qp(e))throw new Error(n+"contains "+e.toString()+" "+ya(r));if(typeof e=="string"&&e.length>$f/3&&Yh(e)>$f)throw new Error(n+"contains a string greater than "+$f+" utf8 bytes "+ya(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,c=!1;if(kn(e,(d,m)=>{if(d===".value")a=!0;else if(d!==".priority"&&d!==".sv"&&(c=!0,!vm(d)))throw new Error(n+" contains an invalid key ("+d+") "+ya(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);IS(r,d),rd(n,m,r),xS(r)}),a&&c)throw new Error(n+' contains ".value" child '+ya(r)+" in addition to actual children.")}},uI=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const c=$u(r);for(let d=0;d<c.length;d++)if(!(c[d]===".priority"&&d===c.length-1)){if(!vm(c[d]))throw new Error(n+"contains an invalid key ("+c[d]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(SS);let a=null;for(t=0;t<e.length;t++){if(r=e[t],a!==null&&Zi(a,r))throw new Error(n+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},cI=function(n,e,t,r){const a=Qh(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(a+" must be an object containing the children to replace.");const c=[];kn(e,(d,m)=>{const y=new It(d);if(rd(a,m,$t(t,y)),Qp(y)===".priority"&&!lI(m))throw new Error(a+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(y)}),uI(a,c)},Kw=function(n,e,t,r){if(!$w(t))throw new Error(Qh(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},hI=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Kw(n,e,t)},Zw=function(n,e){if(it(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},dI=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!vm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!aI(t))throw new Error(Qh(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sd(n,e){let t=null;for(let r=0;r<e.length;r++){const a=e[r],c=a.getPath();t!==null&&!Yp(c,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:c}),t.events.push(a)}t&&n.eventLists_.push(t)}function Qw(n,e,t){sd(n,t),Yw(n,r=>Yp(r,e))}function mr(n,e,t){sd(n,t),Yw(n,r=>Zi(r,e)||Zi(e,r))}function Yw(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const a=n.eventLists_[r];if(a){const c=a.path;e(c)?(pI(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function pI(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();Lu&&Rn("event: "+t.toString()),Fl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="repo_interrupt",_I=25;class gI{constructor(e,t,r,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lh(),this.transactionQueueTree_=new gm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yI(n,e,t){if(n.stats_=Kp(n.repoInfo_),n.forceRestClient_||KT())n.server_=new Dh(n.repoInfo_,(r,a,c,d)=>{ky(n,r,a,c,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Dy(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{En(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new As(n.repoInfo_,e,(r,a,c,d)=>{ky(n,r,a,c,d)},r=>{Dy(n,r)},r=>{vI(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=JT(n.repoInfo_,()=>new XS(n.stats_,n.server_)),n.infoData_=new GS,n.infoSyncTree_=new Ay({startListening:(r,a,c,d)=>{let m=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(m=td(n.infoSyncTree_,r._path,y),setTimeout(()=>{d("ok")},0)),m},stopListening:()=>{}}),wm(n,"connected",!1),n.serverSyncTree_=new Ay({startListening:(r,a,c,d)=>(n.server_.listen(r,c,a,(m,y)=>{const T=d(m,y);mr(n.eventQueue_,r._path,T)}),[]),stopListening:(r,a)=>{n.server_.unlisten(r,a)}})}function Xw(n){const t=n.infoData_.getNode(new It(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function od(n){return JC({timestamp:Xw(n)})}function ky(n,e,t,r,a){n.dataUpdateCount++;const c=new It(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let d=[];if(a)if(r){const y=Ah(t,T=>wn(T));d=KC(n.serverSyncTree_,c,y,a)}else{const y=wn(t);d=GC(n.serverSyncTree_,c,y,a)}else if(r){const y=Ah(t,T=>wn(T));d=HC(n.serverSyncTree_,c,y)}else{const y=wn(t);d=td(n.serverSyncTree_,c,y)}let m=c;d.length>0&&(m=Pl(n,c)),mr(n.eventQueue_,m,d)}function Dy(n,e){wm(n,"connected",e),e===!1&&TI(n)}function vI(n,e){kn(e,(t,r)=>{wm(n,t,r)})}function wm(n,e,t){const r=new It("/.info/"+e),a=wn(t);n.infoData_.updateSnapshot(r,a);const c=td(n.infoSyncTree_,r,a);mr(n.eventQueue_,r,c)}function Em(n){return n.nextWriteId_++}function wI(n,e,t,r,a){ad(n,"set",{path:e.toString(),value:t,priority:r});const c=od(n),d=wn(t,r),m=cm(n.serverSyncTree_,e),y=jw(d,m,c),T=Em(n),I=Vw(n.serverSyncTree_,e,y,T,!0);sd(n.eventQueue_,I),n.server_.put(e.toString(),d.val(!0),(R,U)=>{const J=R==="ok";J||Jn("set at "+e+" failed: "+R);const ne=Ro(n.serverSyncTree_,T,!J);mr(n.eventQueue_,e,ne),vp(n,a,R,U)});const A=Sm(n,e);Pl(n,A),mr(n.eventQueue_,A,[])}function EI(n,e,t,r){ad(n,"update",{path:e.toString(),value:t});let a=!0;const c=od(n),d={};if(kn(t,(m,y)=>{a=!1,d[m]=Uw($t(e,m),wn(y),n.serverSyncTree_,c)}),a)Rn("update() called with empty data.  Don't do anything."),vp(n,r,"ok",void 0);else{const m=Em(n),y=WC(n.serverSyncTree_,e,d,m);sd(n.eventQueue_,y),n.server_.merge(e.toString(),t,(T,I)=>{const A=T==="ok";A||Jn("update at "+e+" failed: "+T);const R=Ro(n.serverSyncTree_,m,!A),U=R.length>0?Pl(n,e):e;mr(n.eventQueue_,U,R),vp(n,r,T,I)}),kn(t,T=>{const I=Sm(n,$t(e,T));Pl(n,I)}),mr(n.eventQueue_,e,[])}}function TI(n){ad(n,"onDisconnectEvents");const e=od(n),t=Lh();cp(n.onDisconnect_,_t(),(a,c)=>{const d=Uw(a,c,n.serverSyncTree_,e);Cw(t,a,d)});let r=[];cp(t,_t(),(a,c)=>{r=r.concat(td(n.serverSyncTree_,a,c));const d=Sm(n,a);Pl(n,d)}),n.onDisconnect_=Lh(),mr(n.eventQueue_,_t(),r)}function SI(n,e,t){let r;it(e._path)===".info"?r=Py(n.infoSyncTree_,e,t):r=Py(n.serverSyncTree_,e,t),Qw(n.eventQueue_,e._path,r)}function CI(n,e,t){let r;it(e._path)===".info"?r=gp(n.infoSyncTree_,e,t):r=gp(n.serverSyncTree_,e,t),Qw(n.eventQueue_,e._path,r)}function II(n){n.persistentConnection_&&n.persistentConnection_.interrupt(mI)}function ad(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Rn(t,...e)}function vp(n,e,t,r){e&&Fl(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let c=a;r&&(c+=": "+r);const d=new Error(c);d.code=a,e(d)}})}function Jw(n,e,t){return cm(n.serverSyncTree_,e,t)||$e.EMPTY_NODE}function Tm(n,e=n.transactionQueueTree_){if(e||ld(n,e),Bl(e)){const t=tE(n,e);ge(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&xI(n,oc(e),t)}else Hw(e)&&id(e,t=>{Tm(n,t)})}function xI(n,e,t){const r=t.map(T=>T.currentWriteId),a=Jw(n,e,r);let c=a;const d=a.hash();for(let T=0;T<t.length;T++){const I=t[T];ge(I.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const A=vi(e,I.path);c=c.updateChild(A,I.currentOutputSnapshotRaw)}const m=c.val(!0),y=e;n.server_.put(y.toString(),m,T=>{ad(n,"transaction put response",{path:y.toString(),status:T});let I=[];if(T==="ok"){const A=[];for(let R=0;R<t.length;R++)t[R].status=2,I=I.concat(Ro(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&A.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();ld(n,ym(n.transactionQueueTree_,e)),Tm(n,n.transactionQueueTree_),mr(n.eventQueue_,e,I);for(let R=0;R<A.length;R++)Fl(A[R])}else{if(T==="datastale")for(let A=0;A<t.length;A++)t[A].status===3?t[A].status=4:t[A].status=0;else{Jn("transaction at "+y.toString()+" failed: "+T);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=T}Pl(n,e)}},d)}function Pl(n,e){const t=eE(n,e),r=oc(t),a=tE(n,t);return AI(n,a,r),r}function AI(n,e,t){if(e.length===0)return;const r=[];let a=[];const d=e.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const y=e[m],T=vi(t,y.path);let I=!1,A;if(ge(T!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===4)I=!0,A=y.abortReason,a=a.concat(Ro(n.serverSyncTree_,y.currentWriteId,!0));else if(y.status===0)if(y.retryCount>=_I)I=!0,A="maxretry",a=a.concat(Ro(n.serverSyncTree_,y.currentWriteId,!0));else{const R=Jw(n,y.path,d);y.currentInputSnapshot=R;const U=e[m].update(R.val());if(U!==void 0){rd("transaction failed: Data returned ",U,y.path);let J=wn(U);typeof U=="object"&&U!=null&&Br(U,".priority")||(J=J.updatePriority(R.getPriority()));const ie=y.currentWriteId,Ae=od(n),De=jw(J,R,Ae);y.currentOutputSnapshotRaw=J,y.currentOutputSnapshotResolved=De,y.currentWriteId=Em(n),d.splice(d.indexOf(ie),1),a=a.concat(Vw(n.serverSyncTree_,y.path,De,y.currentWriteId,y.applyLocally)),a=a.concat(Ro(n.serverSyncTree_,ie,!0))}else I=!0,A="nodata",a=a.concat(Ro(n.serverSyncTree_,y.currentWriteId,!0))}mr(n.eventQueue_,t,a),a=[],I&&(e[m].status=2,function(R){setTimeout(R,Math.floor(0))}(e[m].unwatcher),e[m].onComplete&&(A==="nodata"?r.push(()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot)):r.push(()=>e[m].onComplete(new Error(A),!1,null))))}ld(n,n.transactionQueueTree_);for(let m=0;m<r.length;m++)Fl(r[m]);Tm(n,n.transactionQueueTree_)}function eE(n,e){let t,r=n.transactionQueueTree_;for(t=it(e);t!==null&&Bl(r)===void 0;)r=ym(r,t),e=Dt(e),t=it(e);return r}function tE(n,e){const t=[];return nE(n,e,t),t.sort((r,a)=>r.order-a.order),t}function nE(n,e,t){const r=Bl(e);if(r)for(let a=0;a<r.length;a++)t.push(r[a]);id(e,a=>{nE(n,a,t)})}function ld(n,e){const t=Bl(e);if(t){let r=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[r]=t[a],r++);t.length=r,Ww(e,t.length>0?t:void 0)}id(e,r=>{ld(n,r)})}function Sm(n,e){const t=oc(eE(n,e)),r=ym(n.transactionQueueTree_,e);return iI(r,a=>{Gf(n,a)}),Gf(n,r),qw(r,a=>{Gf(n,a)}),t}function Gf(n,e){const t=Bl(e);if(t){const r=[];let a=[],c=-1;for(let d=0;d<t.length;d++)t[d].status===3||(t[d].status===1?(ge(c===d-1,"All SENT items should be at beginning of queue."),c=d,t[d].status=3,t[d].abortReason="set"):(ge(t[d].status===0,"Unexpected transaction status in abort"),t[d].unwatcher(),a=a.concat(Ro(n.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&r.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));c===-1?Ww(e,void 0):t.length=c+1,mr(n.eventQueue_,oc(e),a);for(let d=0;d<r.length;d++)Fl(r[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let a=t[r];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function RI(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Jn(`Invalid query segment '${t}' in query '${n}'`)}return e}const Ly=function(n,e){const t=kI(n),r=t.namespace;t.domain==="firebase.com"&&Rs(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Rs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||zT();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new aw(t.host,t.secure,r,a,e,"",r!==t.subdomain),path:new It(t.pathString)}},kI=function(n){let e="",t="",r="",a="",c="",d=!0,m="https",y=443;if(typeof n=="string"){let T=n.indexOf("//");T>=0&&(m=n.substring(0,T-1),n=n.substring(T+2));let I=n.indexOf("/");I===-1&&(I=n.length);let A=n.indexOf("?");A===-1&&(A=n.length),e=n.substring(0,Math.min(I,A)),I<A&&(a=PI(n.substring(I,A)));const R=RI(n.substring(Math.min(n.length,A)));T=e.indexOf(":"),T>=0?(d=m==="https"||m==="wss",y=parseInt(e.substring(T+1),10)):T=e.length;const U=e.slice(0,T);if(U.toLowerCase()==="localhost")t="localhost";else if(U.split(".").length<=2)t=U;else{const J=e.indexOf(".");r=e.substring(0,J).toLowerCase(),t=e.substring(J+1),c=r}"ns"in R&&(c=R.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:d,scheme:m,pathString:a,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",DI=function(){let n=0;const e=[];return function(t){const r=t===n;n=t;let a;const c=new Array(8);for(a=7;a>=0;a--)c[a]=Ny.charAt(t%64),t=Math.floor(t/64);ge(t===0,"Cannot push at time == 0");let d=c.join("");if(r){for(a=11;a>=0&&e[a]===63;a--)e[a]=0;e[a]++}else for(a=0;a<12;a++)e[a]=Math.floor(Math.random()*64);for(a=0;a<12;a++)d+=Ny.charAt(e[a]);return ge(d.length===20,"nextPushId: Length should be 20."),d}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,t,r,a){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+En(this.snapshot.exportVal())}}class NI{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ge(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t,r,a){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=a}get key(){return ot(this._path)?null:Qp(this._path)}get ref(){return new Wo(this._repo,this._path)}get _queryIdentifier(){const e=gy(this._queryParams),t=$p(e);return t==="{}"?"default":t}get _queryObject(){return gy(this._queryParams)}isEqual(e){if(e=pr(e),!(e instanceof Cm))return!1;const t=this._repo===e._repo,r=Yp(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&r&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+TS(this._path)}}class Wo extends Cm{constructor(e,t){super(e,t,new tm,!1)}get parent(){const e=_w(this._path);return e===null?null:new Wo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Bh{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new It(e),r=Yu(this.ref,e);return new Bh(this._node.getChild(t),r,Gt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,a)=>e(new Bh(a,Yu(this.ref,r),Gt)))}hasChild(e){const t=new It(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Nr(n,e){return n=pr(n),n._checkNotDeleted("ref"),e!==void 0?Yu(n._root,e):n._root}function Yu(n,e){return n=pr(n),it(n._path)===null?hI("child","path",e):Kw("child","path",e),new Wo(n._repo,$t(n._path,e))}function bI(n,e){n=pr(n),Zw("push",n._path),Gw("push",e,n._path,!0);const t=Xw(n._repo),r=DI(t),a=Yu(n,r),c=Yu(n,r);let d;return d=Promise.resolve(c),a.then=d.then.bind(d),a.catch=d.then.bind(d,void 0),a}function OI(n,e){n=pr(n),Zw("set",n._path),Gw("set",e,n._path,!1);const t=new nc;return wI(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function ch(n,e){cI("update",e,n._path);const t=new nc;return EI(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class Im{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const r=t._queryParams.getIndex();return new LI("value",this,new Bh(e.snapshotNode,new Wo(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new NI(this,e,t):null}matches(e){return e instanceof Im?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function VI(n,e,t,r,a){const c=new MI(t,void 0),d=new Im(c);return SI(n._repo,n,d),()=>CI(n._repo,n,d)}function Iu(n,e,t,r){return VI(n,"value",e)}MC(Wo);BC(Wo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="FIREBASE_DATABASE_EMULATOR_HOST",wp={};let zI=!1;function BI(n,e,t,r){n.repoInfo_=new aw(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function UI(n,e,t,r,a){let c=r||n.options.databaseURL;c===void 0&&(n.options.projectId||Rs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rn("Using default host for project ",n.options.projectId),c=`${n.options.projectId}-default-rtdb.firebaseio.com`);let d=Ly(c,a),m=d.repoInfo,y;typeof process<"u"&&Jg&&(y=Jg[FI]),y?(c=`http://${y}?ns=${m.namespace}`,d=Ly(c,a),m=d.repoInfo):d.repoInfo.secure;const T=new QT(n.name,n.options,e);dI("Invalid Firebase Database URL",d),ot(d.path)||Rs("Database URL must point to the root of a Firebase Database (not including a child path).");const I=WI(m,n,T,new ZT(n.name,t));return new HI(I,n)}function jI(n,e){const t=wp[e];(!t||t[n.key]!==n)&&Rs(`Database ${e}(${n.repoInfo_}) has already been deleted.`),II(n),delete t[n.key]}function WI(n,e,t,r){let a=wp[e.name];a||(a={},wp[e.name]=a);let c=a[n.toURLString()];return c&&Rs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new gI(n,zI,t,r),a[n.toURLString()]=c,c}class HI{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(yI(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Wo(this._repo,_t())),this._rootInternal}_delete(){return this._rootInternal!==null&&(jI(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Rs("Cannot call "+e+" on a deleted database.")}}function qI(n=Hp(),e){const t=jv(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=Nv("database");r&&$I(t,...r)}return t}function $I(n,e,t,r={}){n=pr(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Rs("Cannot call useEmulator() after instance has already been initialized.");const a=n._repoInternal;let c;if(a.repoInfo_.nodeAdmin)r.mockUserToken&&Rs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new gh(gh.OWNER);else if(r.mockUserToken){const d=typeof r.mockUserToken=="string"?r.mockUserToken:bv(r.mockUserToken,n.app.options.projectId);c=new gh(d)}BI(a,e,t,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(n){NT(Wv),Wu(new Sl("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return UI(r,a,c,t)},"PUBLIC").setMultipleInstances(!0)),Mo(ey,ty,n),Mo(ey,ty,"esm2017")}As.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};As.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};GI();var KI="firebase",ZI="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mo(KI,ZI,"app");var My=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ea,iE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,D){function b(){}b.prototype=D.prototype,j.D=D.prototype,j.prototype=new b,j.prototype.constructor=j,j.C=function(F,O,q){for(var M=Array(arguments.length-2),we=2;we<arguments.length;we++)M[we-2]=arguments[we];return D.prototype[O].apply(F,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(j,D,b){b||(b=0);var F=Array(16);if(typeof D=="string")for(var O=0;16>O;++O)F[O]=D.charCodeAt(b++)|D.charCodeAt(b++)<<8|D.charCodeAt(b++)<<16|D.charCodeAt(b++)<<24;else for(O=0;16>O;++O)F[O]=D[b++]|D[b++]<<8|D[b++]<<16|D[b++]<<24;D=j.g[0],b=j.g[1],O=j.g[2];var q=j.g[3],M=D+(q^b&(O^q))+F[0]+3614090360&4294967295;D=b+(M<<7&4294967295|M>>>25),M=q+(O^D&(b^O))+F[1]+3905402710&4294967295,q=D+(M<<12&4294967295|M>>>20),M=O+(b^q&(D^b))+F[2]+606105819&4294967295,O=q+(M<<17&4294967295|M>>>15),M=b+(D^O&(q^D))+F[3]+3250441966&4294967295,b=O+(M<<22&4294967295|M>>>10),M=D+(q^b&(O^q))+F[4]+4118548399&4294967295,D=b+(M<<7&4294967295|M>>>25),M=q+(O^D&(b^O))+F[5]+1200080426&4294967295,q=D+(M<<12&4294967295|M>>>20),M=O+(b^q&(D^b))+F[6]+2821735955&4294967295,O=q+(M<<17&4294967295|M>>>15),M=b+(D^O&(q^D))+F[7]+4249261313&4294967295,b=O+(M<<22&4294967295|M>>>10),M=D+(q^b&(O^q))+F[8]+1770035416&4294967295,D=b+(M<<7&4294967295|M>>>25),M=q+(O^D&(b^O))+F[9]+2336552879&4294967295,q=D+(M<<12&4294967295|M>>>20),M=O+(b^q&(D^b))+F[10]+4294925233&4294967295,O=q+(M<<17&4294967295|M>>>15),M=b+(D^O&(q^D))+F[11]+2304563134&4294967295,b=O+(M<<22&4294967295|M>>>10),M=D+(q^b&(O^q))+F[12]+1804603682&4294967295,D=b+(M<<7&4294967295|M>>>25),M=q+(O^D&(b^O))+F[13]+4254626195&4294967295,q=D+(M<<12&4294967295|M>>>20),M=O+(b^q&(D^b))+F[14]+2792965006&4294967295,O=q+(M<<17&4294967295|M>>>15),M=b+(D^O&(q^D))+F[15]+1236535329&4294967295,b=O+(M<<22&4294967295|M>>>10),M=D+(O^q&(b^O))+F[1]+4129170786&4294967295,D=b+(M<<5&4294967295|M>>>27),M=q+(b^O&(D^b))+F[6]+3225465664&4294967295,q=D+(M<<9&4294967295|M>>>23),M=O+(D^b&(q^D))+F[11]+643717713&4294967295,O=q+(M<<14&4294967295|M>>>18),M=b+(q^D&(O^q))+F[0]+3921069994&4294967295,b=O+(M<<20&4294967295|M>>>12),M=D+(O^q&(b^O))+F[5]+3593408605&4294967295,D=b+(M<<5&4294967295|M>>>27),M=q+(b^O&(D^b))+F[10]+38016083&4294967295,q=D+(M<<9&4294967295|M>>>23),M=O+(D^b&(q^D))+F[15]+3634488961&4294967295,O=q+(M<<14&4294967295|M>>>18),M=b+(q^D&(O^q))+F[4]+3889429448&4294967295,b=O+(M<<20&4294967295|M>>>12),M=D+(O^q&(b^O))+F[9]+568446438&4294967295,D=b+(M<<5&4294967295|M>>>27),M=q+(b^O&(D^b))+F[14]+3275163606&4294967295,q=D+(M<<9&4294967295|M>>>23),M=O+(D^b&(q^D))+F[3]+4107603335&4294967295,O=q+(M<<14&4294967295|M>>>18),M=b+(q^D&(O^q))+F[8]+1163531501&4294967295,b=O+(M<<20&4294967295|M>>>12),M=D+(O^q&(b^O))+F[13]+2850285829&4294967295,D=b+(M<<5&4294967295|M>>>27),M=q+(b^O&(D^b))+F[2]+4243563512&4294967295,q=D+(M<<9&4294967295|M>>>23),M=O+(D^b&(q^D))+F[7]+1735328473&4294967295,O=q+(M<<14&4294967295|M>>>18),M=b+(q^D&(O^q))+F[12]+2368359562&4294967295,b=O+(M<<20&4294967295|M>>>12),M=D+(b^O^q)+F[5]+4294588738&4294967295,D=b+(M<<4&4294967295|M>>>28),M=q+(D^b^O)+F[8]+2272392833&4294967295,q=D+(M<<11&4294967295|M>>>21),M=O+(q^D^b)+F[11]+1839030562&4294967295,O=q+(M<<16&4294967295|M>>>16),M=b+(O^q^D)+F[14]+4259657740&4294967295,b=O+(M<<23&4294967295|M>>>9),M=D+(b^O^q)+F[1]+2763975236&4294967295,D=b+(M<<4&4294967295|M>>>28),M=q+(D^b^O)+F[4]+1272893353&4294967295,q=D+(M<<11&4294967295|M>>>21),M=O+(q^D^b)+F[7]+4139469664&4294967295,O=q+(M<<16&4294967295|M>>>16),M=b+(O^q^D)+F[10]+3200236656&4294967295,b=O+(M<<23&4294967295|M>>>9),M=D+(b^O^q)+F[13]+681279174&4294967295,D=b+(M<<4&4294967295|M>>>28),M=q+(D^b^O)+F[0]+3936430074&4294967295,q=D+(M<<11&4294967295|M>>>21),M=O+(q^D^b)+F[3]+3572445317&4294967295,O=q+(M<<16&4294967295|M>>>16),M=b+(O^q^D)+F[6]+76029189&4294967295,b=O+(M<<23&4294967295|M>>>9),M=D+(b^O^q)+F[9]+3654602809&4294967295,D=b+(M<<4&4294967295|M>>>28),M=q+(D^b^O)+F[12]+3873151461&4294967295,q=D+(M<<11&4294967295|M>>>21),M=O+(q^D^b)+F[15]+530742520&4294967295,O=q+(M<<16&4294967295|M>>>16),M=b+(O^q^D)+F[2]+3299628645&4294967295,b=O+(M<<23&4294967295|M>>>9),M=D+(O^(b|~q))+F[0]+4096336452&4294967295,D=b+(M<<6&4294967295|M>>>26),M=q+(b^(D|~O))+F[7]+1126891415&4294967295,q=D+(M<<10&4294967295|M>>>22),M=O+(D^(q|~b))+F[14]+2878612391&4294967295,O=q+(M<<15&4294967295|M>>>17),M=b+(q^(O|~D))+F[5]+4237533241&4294967295,b=O+(M<<21&4294967295|M>>>11),M=D+(O^(b|~q))+F[12]+1700485571&4294967295,D=b+(M<<6&4294967295|M>>>26),M=q+(b^(D|~O))+F[3]+2399980690&4294967295,q=D+(M<<10&4294967295|M>>>22),M=O+(D^(q|~b))+F[10]+4293915773&4294967295,O=q+(M<<15&4294967295|M>>>17),M=b+(q^(O|~D))+F[1]+2240044497&4294967295,b=O+(M<<21&4294967295|M>>>11),M=D+(O^(b|~q))+F[8]+1873313359&4294967295,D=b+(M<<6&4294967295|M>>>26),M=q+(b^(D|~O))+F[15]+4264355552&4294967295,q=D+(M<<10&4294967295|M>>>22),M=O+(D^(q|~b))+F[6]+2734768916&4294967295,O=q+(M<<15&4294967295|M>>>17),M=b+(q^(O|~D))+F[13]+1309151649&4294967295,b=O+(M<<21&4294967295|M>>>11),M=D+(O^(b|~q))+F[4]+4149444226&4294967295,D=b+(M<<6&4294967295|M>>>26),M=q+(b^(D|~O))+F[11]+3174756917&4294967295,q=D+(M<<10&4294967295|M>>>22),M=O+(D^(q|~b))+F[2]+718787259&4294967295,O=q+(M<<15&4294967295|M>>>17),M=b+(q^(O|~D))+F[9]+3951481745&4294967295,j.g[0]=j.g[0]+D&4294967295,j.g[1]=j.g[1]+(O+(M<<21&4294967295|M>>>11))&4294967295,j.g[2]=j.g[2]+O&4294967295,j.g[3]=j.g[3]+q&4294967295}r.prototype.u=function(j,D){D===void 0&&(D=j.length);for(var b=D-this.blockSize,F=this.B,O=this.h,q=0;q<D;){if(O==0)for(;q<=b;)a(this,j,q),q+=this.blockSize;if(typeof j=="string"){for(;q<D;)if(F[O++]=j.charCodeAt(q++),O==this.blockSize){a(this,F),O=0;break}}else for(;q<D;)if(F[O++]=j[q++],O==this.blockSize){a(this,F),O=0;break}}this.h=O,this.o+=D},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var D=1;D<j.length-8;++D)j[D]=0;var b=8*this.o;for(D=j.length-8;D<j.length;++D)j[D]=b&255,b/=256;for(this.u(j),j=Array(16),D=b=0;4>D;++D)for(var F=0;32>F;F+=8)j[b++]=this.g[D]>>>F&255;return j};function c(j,D){var b=m;return Object.prototype.hasOwnProperty.call(b,j)?b[j]:b[j]=D(j)}function d(j,D){this.h=D;for(var b=[],F=!0,O=j.length-1;0<=O;O--){var q=j[O]|0;F&&q==D||(b[O]=q,F=!1)}this.g=b}var m={};function y(j){return-128<=j&&128>j?c(j,function(D){return new d([D|0],0>D?-1:0)}):new d([j|0],0>j?-1:0)}function T(j){if(isNaN(j)||!isFinite(j))return A;if(0>j)return ie(T(-j));for(var D=[],b=1,F=0;j>=b;F++)D[F]=j/b|0,b*=4294967296;return new d(D,0)}function I(j,D){if(j.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(j.charAt(0)=="-")return ie(I(j.substring(1),D));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=T(Math.pow(D,8)),F=A,O=0;O<j.length;O+=8){var q=Math.min(8,j.length-O),M=parseInt(j.substring(O,O+q),D);8>q?(q=T(Math.pow(D,q)),F=F.j(q).add(T(M))):(F=F.j(b),F=F.add(T(M)))}return F}var A=y(0),R=y(1),U=y(16777216);n=d.prototype,n.m=function(){if(ne(this))return-ie(this).m();for(var j=0,D=1,b=0;b<this.g.length;b++){var F=this.i(b);j+=(0<=F?F:4294967296+F)*D,D*=4294967296}return j},n.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(J(this))return"0";if(ne(this))return"-"+ie(this).toString(j);for(var D=T(Math.pow(j,6)),b=this,F="";;){var O=Ue(b,D).g;b=Ae(b,O.j(D));var q=((0<b.g.length?b.g[0]:b.h)>>>0).toString(j);if(b=O,J(b))return q+F;for(;6>q.length;)q="0"+q;F=q+F}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function J(j){if(j.h!=0)return!1;for(var D=0;D<j.g.length;D++)if(j.g[D]!=0)return!1;return!0}function ne(j){return j.h==-1}n.l=function(j){return j=Ae(this,j),ne(j)?-1:J(j)?0:1};function ie(j){for(var D=j.g.length,b=[],F=0;F<D;F++)b[F]=~j.g[F];return new d(b,~j.h).add(R)}n.abs=function(){return ne(this)?ie(this):this},n.add=function(j){for(var D=Math.max(this.g.length,j.g.length),b=[],F=0,O=0;O<=D;O++){var q=F+(this.i(O)&65535)+(j.i(O)&65535),M=(q>>>16)+(this.i(O)>>>16)+(j.i(O)>>>16);F=M>>>16,q&=65535,M&=65535,b[O]=M<<16|q}return new d(b,b[b.length-1]&-2147483648?-1:0)};function Ae(j,D){return j.add(ie(D))}n.j=function(j){if(J(this)||J(j))return A;if(ne(this))return ne(j)?ie(this).j(ie(j)):ie(ie(this).j(j));if(ne(j))return ie(this.j(ie(j)));if(0>this.l(U)&&0>j.l(U))return T(this.m()*j.m());for(var D=this.g.length+j.g.length,b=[],F=0;F<2*D;F++)b[F]=0;for(F=0;F<this.g.length;F++)for(var O=0;O<j.g.length;O++){var q=this.i(F)>>>16,M=this.i(F)&65535,we=j.i(O)>>>16,_e=j.i(O)&65535;b[2*F+2*O]+=M*_e,De(b,2*F+2*O),b[2*F+2*O+1]+=q*_e,De(b,2*F+2*O+1),b[2*F+2*O+1]+=M*we,De(b,2*F+2*O+1),b[2*F+2*O+2]+=q*we,De(b,2*F+2*O+2)}for(F=0;F<D;F++)b[F]=b[2*F+1]<<16|b[2*F];for(F=D;F<2*D;F++)b[F]=0;return new d(b,0)};function De(j,D){for(;(j[D]&65535)!=j[D];)j[D+1]+=j[D]>>>16,j[D]&=65535,D++}function Pe(j,D){this.g=j,this.h=D}function Ue(j,D){if(J(D))throw Error("division by zero");if(J(j))return new Pe(A,A);if(ne(j))return D=Ue(ie(j),D),new Pe(ie(D.g),ie(D.h));if(ne(D))return D=Ue(j,ie(D)),new Pe(ie(D.g),D.h);if(30<j.g.length){if(ne(j)||ne(D))throw Error("slowDivide_ only works with positive integers.");for(var b=R,F=D;0>=F.l(j);)b=tt(b),F=tt(F);var O=Oe(b,1),q=Oe(F,1);for(F=Oe(F,2),b=Oe(b,2);!J(F);){var M=q.add(F);0>=M.l(j)&&(O=O.add(b),q=M),F=Oe(F,1),b=Oe(b,1)}return D=Ae(j,O.j(D)),new Pe(O,D)}for(O=A;0<=j.l(D);){for(b=Math.max(1,Math.floor(j.m()/D.m())),F=Math.ceil(Math.log(b)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),q=T(b),M=q.j(D);ne(M)||0<M.l(j);)b-=F,q=T(b),M=q.j(D);J(q)&&(q=R),O=O.add(q),j=Ae(j,M)}return new Pe(O,j)}n.A=function(j){return Ue(this,j).h},n.and=function(j){for(var D=Math.max(this.g.length,j.g.length),b=[],F=0;F<D;F++)b[F]=this.i(F)&j.i(F);return new d(b,this.h&j.h)},n.or=function(j){for(var D=Math.max(this.g.length,j.g.length),b=[],F=0;F<D;F++)b[F]=this.i(F)|j.i(F);return new d(b,this.h|j.h)},n.xor=function(j){for(var D=Math.max(this.g.length,j.g.length),b=[],F=0;F<D;F++)b[F]=this.i(F)^j.i(F);return new d(b,this.h^j.h)};function tt(j){for(var D=j.g.length+1,b=[],F=0;F<D;F++)b[F]=j.i(F)<<1|j.i(F-1)>>>31;return new d(b,j.h)}function Oe(j,D){var b=D>>5;D%=32;for(var F=j.g.length-b,O=[],q=0;q<F;q++)O[q]=0<D?j.i(q+b)>>>D|j.i(q+b+1)<<32-D:j.i(q+b);return new d(O,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iE=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=T,d.fromString=I,Ea=d}).apply(typeof My<"u"?My:typeof self<"u"?self:typeof window<"u"?window:{});var hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rE,Au,sE,vh,Ep,oE,aE,lE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,S){return h==Array.prototype||h==Object.prototype||(h[v]=S.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof hh=="object"&&hh];for(var v=0;v<h.length;++v){var S=h[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function a(h,v){if(v)e:{var S=r;h=h.split(".");for(var P=0;P<h.length-1;P++){var $=h[P];if(!($ in S))break e;S=S[$]}h=h[h.length-1],P=S[h],v=v(P),v!=P&&v!=null&&e(S,h,{configurable:!0,writable:!0,value:v})}}function c(h,v){h instanceof String&&(h+="");var S=0,P=!1,$={next:function(){if(!P&&S<h.length){var te=S++;return{value:v(te,h[te]),done:!1}}return P=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}a("Array.prototype.values",function(h){return h||function(){return c(this,function(v,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function y(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function T(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function I(h,v,S){return h.call.apply(h.bind,arguments)}function A(h,v,S){if(!h)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,P),h.apply(v,$)}}return function(){return h.apply(v,arguments)}}function R(h,v,S){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:A,R.apply(null,arguments)}function U(h,v){var S=Array.prototype.slice.call(arguments,1);return function(){var P=S.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function J(h,v){function S(){}S.prototype=v.prototype,h.aa=v.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(P,$,te){for(var ye=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)ye[mt-2]=arguments[mt];return v.prototype[$].apply(P,ye)}}function ne(h){const v=h.length;if(0<v){const S=Array(v);for(let P=0;P<v;P++)S[P]=h[P];return S}return[]}function ie(h,v){for(let S=1;S<arguments.length;S++){const P=arguments[S];if(y(P)){const $=h.length||0,te=P.length||0;h.length=$+te;for(let ye=0;ye<te;ye++)h[$+ye]=P[ye]}else h.push(P)}}class Ae{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function De(h){return/^[\s\xa0]*$/.test(h)}function Pe(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function Ue(h){return Ue[" "](h),h}Ue[" "]=function(){};var tt=Pe().indexOf("Gecko")!=-1&&!(Pe().toLowerCase().indexOf("webkit")!=-1&&Pe().indexOf("Edge")==-1)&&!(Pe().indexOf("Trident")!=-1||Pe().indexOf("MSIE")!=-1)&&Pe().indexOf("Edge")==-1;function Oe(h,v,S){for(const P in h)v.call(S,h[P],P,h)}function j(h,v){for(const S in h)v.call(void 0,h[S],S,h)}function D(h){const v={};for(const S in h)v[S]=h[S];return v}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(h,v){let S,P;for(let $=1;$<arguments.length;$++){P=arguments[$];for(S in P)h[S]=P[S];for(let te=0;te<b.length;te++)S=b[te],Object.prototype.hasOwnProperty.call(P,S)&&(h[S]=P[S])}}function O(h){var v=1;h=h.split(":");const S=[];for(;0<v&&h.length;)S.push(h.shift()),v--;return h.length&&S.push(h.join(":")),S}function q(h){m.setTimeout(()=>{throw h},0)}function M(){var h=Z;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class we{constructor(){this.h=this.g=null}add(v,S){const P=_e.get();P.set(v,S),this.h?this.h.next=P:this.g=P,this.h=P}}var _e=new Ae(()=>new ae,h=>h.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,B=!1,Z=new we,W=()=>{const h=m.Promise.resolve(void 0);ce=()=>{h.then(k)}};var k=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(S){q(S)}var v=_e;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}B=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};m.addEventListener("test",S,v),m.removeEventListener("test",S,v)}catch{}return h}();function me(h,v){if(oe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(tt){e:{try{Ue(v.nodeName);var $=!0;break e}catch{}$=!1}$||(v=null)}}else S=="mouseover"?v=h.fromElement:S=="mouseout"&&(v=h.toElement);this.relatedTarget=v,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:de[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&me.aa.h.call(this)}}J(me,oe);var de={2:"touch",3:"pen",4:"mouse"};me.prototype.h=function(){me.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),be=0;function Ke(h,v,S,P,$){this.listener=h,this.proxy=null,this.src=v,this.type=S,this.capture=!!P,this.ha=$,this.key=++be,this.da=this.fa=!1}function st(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ut(h){this.src=h,this.g={},this.h=0}Ut.prototype.add=function(h,v,S,P,$){var te=h.toString();h=this.g[te],h||(h=this.g[te]=[],this.h++);var ye=Sn(h,v,P,$);return-1<ye?(v=h[ye],S||(v.fa=!1)):(v=new Ke(v,this.src,te,!!P,$),v.fa=S,h.push(v)),v};function hn(h,v){var S=v.type;if(S in h.g){var P=h.g[S],$=Array.prototype.indexOf.call(P,v,void 0),te;(te=0<=$)&&Array.prototype.splice.call(P,$,1),te&&(st(v),h.g[S].length==0&&(delete h.g[S],h.h--))}}function Sn(h,v,S,P){for(var $=0;$<h.length;++$){var te=h[$];if(!te.da&&te.listener==v&&te.capture==!!S&&te.ha==P)return $}return-1}var jr="closure_lm_"+(1e6*Math.random()|0),Wr={};function Ds(h,v,S,P,$){if(Array.isArray(v)){for(var te=0;te<v.length;te++)Ds(h,v[te],S,P,$);return null}return S=Ho(S),h&&h[Ve]?h.K(v,S,T(P)?!!P.capture:!1,$):Hr(h,v,S,!1,P,$)}function Hr(h,v,S,P,$,te){if(!v)throw Error("Invalid event type");var ye=T($)?!!$.capture:!!$,mt=$r(h);if(mt||(h[jr]=mt=new Ut(h)),S=mt.add(v,S,P,ye,te),S.proxy)return S;if(P=qr(),S.proxy=P,P.src=h,P.listener=S,h.addEventListener)fe||($=ye),$===void 0&&($=!1),h.addEventListener(v.toString(),P,$);else if(h.attachEvent)h.attachEvent(wi(v.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return S}function qr(){function h(S){return v.call(h.src,h.listener,S)}const v=Ns;return h}function Ls(h,v,S,P,$){if(Array.isArray(v))for(var te=0;te<v.length;te++)Ls(h,v[te],S,P,$);else P=T(P)?!!P.capture:!!P,S=Ho(S),h&&h[Ve]?(h=h.i,v=String(v).toString(),v in h.g&&(te=h.g[v],S=Sn(te,S,P,$),-1<S&&(st(te[S]),Array.prototype.splice.call(te,S,1),te.length==0&&(delete h.g[v],h.h--)))):h&&(h=$r(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Sn(v,S,P,$)),(S=-1<h?v[h]:null)&&Ni(S))}function Ni(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Ve])hn(v.i,h);else{var S=h.type,P=h.proxy;v.removeEventListener?v.removeEventListener(S,P,h.capture):v.detachEvent?v.detachEvent(wi(S),P):v.addListener&&v.removeListener&&v.removeListener(P),(S=$r(v))?(hn(S,h),S.h==0&&(S.src=null,v[jr]=null)):st(h)}}}function wi(h){return h in Wr?Wr[h]:Wr[h]="on"+h}function Ns(h,v){if(h.da)h=!0;else{v=new me(v,this);var S=h.listener,P=h.ha||h.src;h.fa&&Ni(h),h=S.call(P,v)}return h}function $r(h){return h=h[jr],h instanceof Ut?h:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ho(h){return typeof h=="function"?h:(h[Ms]||(h[Ms]=function(v){return h.handleEvent(v)}),h[Ms])}function Mt(){G.call(this),this.i=new Ut(this),this.M=this,this.F=null}J(Mt,G),Mt.prototype[Ve]=!0,Mt.prototype.removeEventListener=function(h,v,S,P){Ls(this,h,v,S,P)};function jt(h,v){var S,P=h.F;if(P)for(S=[];P;P=P.F)S.push(P);if(h=h.M,P=v.type||v,typeof v=="string")v=new oe(v,h);else if(v instanceof oe)v.target=v.target||h;else{var $=v;v=new oe(P,h),F(v,$)}if($=!0,S)for(var te=S.length-1;0<=te;te--){var ye=v.g=S[te];$=Mi(ye,P,!0,v)&&$}if(ye=v.g=h,$=Mi(ye,P,!0,v)&&$,$=Mi(ye,P,!1,v)&&$,S)for(te=0;te<S.length;te++)ye=v.g=S[te],$=Mi(ye,P,!1,v)&&$}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var S=h.g[v],P=0;P<S.length;P++)st(S[P]);delete h.g[v],h.h--}}this.F=null},Mt.prototype.K=function(h,v,S,P){return this.i.add(String(h),v,!1,S,P)},Mt.prototype.L=function(h,v,S,P){return this.i.add(String(h),v,!0,S,P)};function Mi(h,v,S,P){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var $=!0,te=0;te<v.length;++te){var ye=v[te];if(ye&&!ye.da&&ye.capture==S){var mt=ye.listener,Ht=ye.ha||ye.src;ye.fa&&hn(h.i,ye),$=mt.call(Ht,P)!==!1&&$}}return $&&!P.defaultPrevented}function qo(h,v,S){if(typeof h=="function")S&&(h=R(h,S));else if(h&&typeof h.handleEvent=="function")h=R(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(h,v||0)}function Qi(h){h.g=qo(()=>{h.g=null,h.i&&(h.i=!1,Qi(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class gr extends G{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Qi(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(h){G.call(this),this.h=h,this.g={}}J(Gr,G);var bs=[];function Kr(h){Oe(h.g,function(v,S){this.g.hasOwnProperty(S)&&Ni(v)},h),h.g={}}Gr.prototype.N=function(){Gr.aa.N.call(this),Kr(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Os=m.JSON.stringify,$o=m.JSON.parse,Yi=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function Zr(){}Zr.prototype.h=null;function Vs(h){return h.h||(h.h=h.i())}function Qr(){}var $n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ei(){oe.call(this,"d")}J(Ei,oe);function Fs(){oe.call(this,"c")}J(Fs,oe);var bi={},Go=null;function Yr(){return Go=Go||new Mt}bi.La="serverreachability";function Ko(h){oe.call(this,bi.La,h)}J(Ko,oe);function Xi(h){const v=Yr();jt(v,new Ko(v))}bi.STAT_EVENT="statevent";function Xr(h,v){oe.call(this,bi.STAT_EVENT,h),this.stat=v}J(Xr,oe);function bt(h){const v=Yr();jt(v,new Xr(v,h))}bi.Ma="timingevent";function zs(h,v){oe.call(this,bi.Ma,h),this.size=v}J(zs,oe);function Ti(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},v)}function Jr(){this.g=!0}Jr.prototype.xa=function(){this.g=!1};function dn(h,v,S,P,$,te){h.info(function(){if(h.g)if(te)for(var ye="",mt=te.split("&"),Ht=0;Ht<mt.length;Ht++){var at=mt[Ht].split("=");if(1<at.length){var yt=at[0];at=at[1];var xt=yt.split("_");ye=2<=xt.length&&xt[1]=="type"?ye+(yt+"="+at+"&"):ye+(yt+"=redacted&")}}else ye=null;else ye=te;return"XMLHTTP REQ ("+P+") [attempt "+$+"]: "+v+`
`+S+`
`+ye})}function xe(h,v,S,P,$,te,ye){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+$+"]: "+v+`
`+S+`
`+te+" "+ye})}function ei(h,v,S,P){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Da(h,S)+(P?" "+P:"")})}function Bs(h,v){h.info(function(){return"TIMEOUT: "+v})}Jr.prototype.info=function(){};function Da(h,v){if(!h.g)return v;if(!v)return null;try{var S=JSON.parse(v);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var P=S[h];if(!(2>P.length)){var $=P[1];if(Array.isArray($)&&!(1>$.length)){var te=$[0];if(te!="noop"&&te!="stop"&&te!="close")for(var ye=1;ye<$.length;ye++)$[ye]=""}}}}return Os(S)}catch{return v}}var es={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Us={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function ni(){}J(ni,Zr),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},ti=new ni;function ii(h,v,S,P){this.j=h,this.i=v,this.l=S,this.R=P||1,this.U=new Gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new La}function La(){this.i=null,this.g="",this.h=!1}var Zo={},js={};function Ws(h,v,S){h.L=1,h.v=Mn(At(v)),h.m=S,h.P=!0,Hs(h,null)}function Hs(h,v){h.F=Date.now(),St(h),h.A=At(h.v);var S=h.A,P=h.R;Array.isArray(P)||(P=[String(P)]),Sr(S.i,"t",P),h.C=0,S=h.j.J,h.h=new La,h.g=Va(h.j,S?v:null,!h.m),0<h.O&&(h.M=new gr(R(h.Y,h,h.g),h.O)),v=h.U,S=h.g,P=h.ca;var $="readystatechange";Array.isArray($)||($&&(bs[0]=$.toString()),$=bs);for(var te=0;te<$.length;te++){var ye=Ds(S,$[te],P||v.handleEvent,!1,v.h||v);if(!ye)break;v.g[ye.key]=ye}v=h.H?D(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Xi(),dn(h.i,h.u,h.A,h.l,h.R,h.m)}ii.prototype.ca=function(h){h=h.target;const v=this.M;v&&Xt(h)==3?v.j():this.Y(h)},ii.prototype.Y=function(h){try{if(h==this.g)e:{const xt=Xt(this.g);var v=this.g.Ba();const hi=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||Qs(this.g)))){this.J||xt!=4||v==7||(v==8||0>=hi?Xi(3):Xi(2)),ts(this);var S=this.g.Z();this.X=S;t:if(Na(this)){var P=Qs(this.g);h="";var $=P.length,te=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),yr(this);var ye="";break t}this.h.i=new m.TextDecoder}for(v=0;v<$;v++)this.h.h=!0,h+=this.h.i.decode(P[v],{stream:!(te&&v==$-1)});P.length=0,this.h.g+=h,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=S==200,xe(this.i,this.u,this.A,this.l,this.R,xt,S),this.o){if(this.T&&!this.K){t:{if(this.g){var mt,Ht=this.g;if((mt=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!De(mt)){var at=mt;break t}}at=null}if(S=at)ei(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ns(this,S);else{this.o=!1,this.s=3,bt(12),ri(this),yr(this);break e}}if(this.P){S=!0;let Ot;for(;!this.J&&this.C<ye.length;)if(Ot=qs(this,ye),Ot==js){xt==4&&(this.s=4,bt(14),S=!1),ei(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Zo){this.s=4,bt(15),ei(this.i,this.l,ye,"[Invalid Chunk]"),S=!1;break}else ei(this.i,this.l,Ot,null),ns(this,Ot);if(Na(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||ye.length!=0||this.h.h||(this.s=1,bt(16),S=!1),this.o=this.o&&S,!S)ei(this.i,this.l,ye,"[Invalid Chunked Response]"),ri(this),yr(this);else if(0<ye.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),Js(yt),yt.M=!0,bt(11))}}else ei(this.i,this.l,ye,null),ns(this,ye);xt==4&&ri(this),this.o&&!this.J&&(xt==4?hs(this.j,this):(this.o=!1,St(this)))}else Ys(this.g),S==400&&0<ye.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),ri(this),yr(this)}}}catch{}finally{}};function Na(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function qs(h,v){var S=h.C,P=v.indexOf(`
`,S);return P==-1?js:(S=Number(v.substring(S,P)),isNaN(S)?Zo:(P+=1,P+S>v.length?js:(v=v.slice(P,P+S),h.C=P+S,v)))}ii.prototype.cancel=function(){this.J=!0,ri(this)};function St(h){h.S=Date.now()+h.I,Ma(h,h.I)}function Ma(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ti(R(h.ba,h),v)}function ts(h){h.B&&(m.clearTimeout(h.B),h.B=null)}ii.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Bs(this.i,this.A),this.L!=2&&(Xi(),bt(17)),ri(this),this.s=2,yr(this)):Ma(this,this.S-h)};function yr(h){h.j.G==0||h.J||hs(h.j,h)}function ri(h){ts(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Kr(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function ns(h,v){try{var S=h.j;if(S.G!=0&&(S.g==h||He(S.h,h))){if(!h.K&&He(S.h,h)&&S.G==3){try{var P=S.Da.g.parse(v)}catch{P=null}if(Array.isArray(P)&&P.length==3){var $=P;if($[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)to(S),Ii(S);else break e;cs(S),bt(18)}}else S.za=$[1],0<S.za-S.T&&37500>$[2]&&S.F&&S.v==0&&!S.C&&(S.C=Ti(R(S.Za,S),6e3));if(1>=Er(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else rr(S,11)}else if((h.K||S.g==h)&&to(S),!De(v))for($=S.Da.g.parse(v),v=0;v<$.length;v++){let at=$[v];if(S.T=at[0],at=at[1],S.G==2)if(at[0]=="c"){S.K=at[1],S.ia=at[2];const yt=at[3];yt!=null&&(S.la=yt,S.j.info("VER="+S.la));const xt=at[4];xt!=null&&(S.Aa=xt,S.j.info("SVER="+S.Aa));const hi=at[5];hi!=null&&typeof hi=="number"&&0<hi&&(P=1.5*hi,S.L=P,S.j.info("backChannelRequestTimeoutMs_="+P)),P=S;const Ot=h.g;if(Ot){const fs=Ot.g?Ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fs){var te=P.h;te.g||fs.indexOf("spdy")==-1&&fs.indexOf("quic")==-1&&fs.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(wt(te,te.h),te.h=null))}if(P.D){const xi=Ot.g?Ot.g.getResponseHeader("X-HTTP-Session-Id"):null;xi&&(P.ya=xi,qe(P.I,P.D,xi))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),P=S;var ye=h;if(P.qa=no(P,P.J?P.ia:null,P.W),ye.K){is(P.h,ye);var mt=ye,Ht=P.L;Ht&&(mt.I=Ht),mt.B&&(ts(mt),St(mt)),P.g=ye}else bn(P);0<S.i.length&&ci(S)}else at[0]!="stop"&&at[0]!="close"||rr(S,7);else S.G==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?rr(S,7):Jt(S):at[0]!="noop"&&S.l&&S.l.ta(at),S.v=0)}}Xi(4)}catch{}}var vr=class{constructor(h,v){this.g=h,this.map=v}};function wr(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ln(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Er(h){return h.h?1:h.g?h.g.size:0}function He(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function wt(h,v){h.g?h.g.add(v):h.h=v}function is(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}wr.prototype.cancel=function(){if(this.i=Ji(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ji(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const S of h.g.values())v=v.concat(S.D);return v}return ne(h.i)}function Si(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(y(h)){for(var v=[],S=h.length,P=0;P<S;P++)v.push(h[P]);return v}v=[],S=0;for(P in h)v[S++]=h[P];return v}function Tr(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(y(h)||typeof h=="string"){var v=[];h=h.length;for(var S=0;S<h;S++)v.push(S);return v}v=[],S=0;for(const P in h)v[S++]=P;return v}}}function We(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(y(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var S=Tr(h),P=Si(h),$=P.length,te=0;te<$;te++)v.call(void 0,P[te],S&&S[te],h)}var Et=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qo(h,v){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var P=h[S].indexOf("="),$=null;if(0<=P){var te=h[S].substring(0,P);$=h[S].substring(P+1)}else te=h[S];v(te,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function si(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof si){this.h=h.h,rs(this,h.j),this.o=h.o,this.g=h.g,Ci(this,h.s),this.l=h.l;var v=h.i,S=new ai;S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),Nn(this,S),this.m=h.m}else h&&(v=String(h).match(Et))?(this.h=!1,rs(this,v[1]||"",!0),this.o=Je(v[2]||""),this.g=Je(v[3]||"",!0),Ci(this,v[4]),this.l=Je(v[5]||"",!0),Nn(this,v[6]||"",!0),this.m=Je(v[7]||"")):(this.h=!1,this.i=new ai(null,this.h))}si.prototype.toString=function(){var h=[],v=this.j;v&&h.push(oi(v,Oi,!0),":");var S=this.g;return(S||v=="file")&&(h.push("//"),(v=this.o)&&h.push(oi(v,Oi,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(oi(S,S.charAt(0)=="/"?Ks:Gs,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",oi(S,os)),h.join("")};function At(h){return new si(h)}function rs(h,v,S){h.j=S?Je(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ci(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Nn(h,v,S){v instanceof ai?(h.i=v,Kt(h.i,h.h)):(S||(v=oi(v,ss)),h.i=new ai(v,h.h))}function qe(h,v,S){h.i.set(v,S)}function Mn(h){return qe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Je(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function oi(h,v,S){return typeof h=="string"?(h=encodeURI(h).replace(v,$s),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function $s(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Oi=/[#\/\?@]/g,Gs=/[#\?:]/g,Ks=/[#\?]/g,ss=/[#\?@]/g,os=/#/g;function ai(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Wt(h){h.g||(h.g=new Map,h.h=0,h.i&&Qo(h.i,function(v,S){h.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}n=ai.prototype,n.add=function(h,v){Wt(this),this.i=null,h=Me(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(v),this.h+=1,this};function li(h,v){Wt(h),v=Me(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Gn(h,v){return Wt(h),v=Me(h,v),h.g.has(v)}n.forEach=function(h,v){Wt(this),this.g.forEach(function(S,P){S.forEach(function($){h.call(v,$,P,this)},this)},this)},n.na=function(){Wt(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),S=[];for(let P=0;P<v.length;P++){const $=h[P];for(let te=0;te<$.length;te++)S.push(v[P])}return S},n.V=function(h){Wt(this);let v=[];if(typeof h=="string")Gn(this,h)&&(v=v.concat(this.g.get(Me(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)v=v.concat(h[S])}return v},n.set=function(h,v){return Wt(this),this.i=null,h=Me(this,h),Gn(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function Sr(h,v,S){li(h,v),0<S.length&&(h.i=null,h.g.set(Me(h,v),ne(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var S=0;S<v.length;S++){var P=v[S];const te=encodeURIComponent(String(P)),ye=this.V(P);for(P=0;P<ye.length;P++){var $=te;ye[P]!==""&&($+="="+encodeURIComponent(String(ye[P]))),h.push($)}}return this.i=h.join("&")};function Me(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Kt(h,v){v&&!h.j&&(Wt(h),h.i=null,h.g.forEach(function(S,P){var $=P.toLowerCase();P!=$&&(li(this,P),Sr(this,$,S))},h)),h.j=v}function gt(h,v){const S=new Jr;if(m.Image){const P=new Image;P.onload=U(fn,S,"TestLoadImage: loaded",!0,v,P),P.onerror=U(fn,S,"TestLoadImage: error",!1,v,P),P.onabort=U(fn,S,"TestLoadImage: abort",!1,v,P),P.ontimeout=U(fn,S,"TestLoadImage: timeout",!1,v,P),m.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else v(!1)}function Yo(h,v){const S=new Jr,P=new AbortController,$=setTimeout(()=>{P.abort(),fn(S,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:P.signal}).then(te=>{clearTimeout($),te.ok?fn(S,"TestPingServer: ok",!0,v):fn(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout($),fn(S,"TestPingServer: error",!1,v)})}function fn(h,v,S,P,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),P(S)}catch{}}function Xo(){this.g=new Yi}function Zs(h,v,S){const P=S||"";try{We(h,function($,te){let ye=$;T($)&&(ye=Os($)),v.push(P+te+"="+encodeURIComponent(ye))})}catch($){throw v.push(P+"type="+encodeURIComponent("_badmap")),$}}function Cn(h){this.l=h.Ub||null,this.j=h.eb||!1}J(Cn,Zr),Cn.prototype.g=function(){return new er(this.l,this.j)},Cn.prototype.i=function(h){return function(){return h}}({});function er(h,v){Mt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}J(er,Mt),n=er.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,on(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tt(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,on(this)),this.g&&(this.readyState=3,on(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cr(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cr(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Tt(this):on(this),this.readyState==3&&Cr(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Tt(this))},n.Qa=function(h){this.g&&(this.response=h,Tt(this))},n.ga=function(){this.g&&Tt(this)};function Tt(h){h.readyState=4,h.l=null,h.j=null,h.v=null,on(h)}n.setRequestHeader=function(h,v){this.u.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=v.next();return h.join(`\r
`)};function on(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Vi(h){let v="";return Oe(h,function(S,P){v+=P,v+=":",v+=S,v+=`\r
`}),v}function tr(h,v,S){e:{for(P in S){var P=!1;break e}P=!0}P||(S=Vi(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):qe(h,v,S))}function Pt(h){Mt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}J(Pt,Mt);var ba=/^https?$/i,as=["POST","PUT"];n=Pt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,v,S,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?Vs(this.o):Vs(ti),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(te){ls(this,te);return}if(h=S||"",S=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var $ in P)S.set($,P[$]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const te of P.keys())S.set(te,P.get(te));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(S.keys()).find(te=>te.toLowerCase()=="content-type"),$=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(as,v,void 0))||P||$||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,ye]of S)this.g.setRequestHeader(te,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pn(this),this.u=!0,this.g.send(h),this.u=!1}catch(te){ls(this,te)}};function ls(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,us(h),Kn(h)}function us(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,jt(this,"complete"),jt(this,"abort"),Kn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kn(this,!0)),Pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?et(this):this.bb())},n.bb=function(){et(this)};function et(h){if(h.h&&typeof d<"u"&&(!h.v[1]||Xt(h)!=4||h.Z()!=2)){if(h.u&&Xt(h)==4)qo(h.Ea,0,h);else if(jt(h,"readystatechange"),Xt(h)==4){h.h=!1;try{const ye=h.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var P;if(P=ye===0){var $=String(h.D).match(Et)[1]||null;!$&&m.self&&m.self.location&&($=m.self.location.protocol.slice(0,-1)),P=!ba.test($?$.toLowerCase():"")}S=P}if(S)jt(h,"complete"),jt(h,"success");else{h.m=6;try{var te=2<Xt(h)?h.g.statusText:""}catch{te=""}h.l=te+" ["+h.Z()+"]",us(h)}}finally{Kn(h)}}}}function Kn(h,v){if(h.g){pn(h);const S=h.g,P=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||jt(h,"ready");try{S.onreadystatechange=P}catch{}}}function pn(h){h.I&&(m.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Xt(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),$o(v)}};function Qs(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ys(h){const v={};h=(h.g&&2<=Xt(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(De(h[P]))continue;var S=O(h[P]);const $=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const te=v[$]||[];v[$]=te,te.push(S)}j(v,function(P){return P.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ui(h,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||v}function Jo(h){this.Aa=0,this.i=[],this.j=new Jr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ui("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ui("baseRetryDelayMs",5e3,h),this.cb=ui("retryDelaySeedMs",1e4,h),this.Wa=ui("forwardChannelMaxRetries",2,h),this.wa=ui("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new wr(h&&h.concurrentRequestLimit),this.Da=new Xo,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Jo.prototype,n.la=8,n.G=1,n.connect=function(h,v,S,P){bt(0),this.W=h,this.H=v||{},S&&P!==void 0&&(this.H.OSID=S,this.H.OAID=P),this.F=this.X,this.I=no(this,null,this.W),ci(this)};function Jt(h){if(Xs(h),h.G==3){var v=h.U++,S=At(h.I);if(qe(S,"SID",h.K),qe(S,"RID",v),qe(S,"TYPE","terminate"),nr(h,S),v=new ii(h,h.j,v),v.L=2,v.v=Mn(At(S)),S=!1,m.navigator&&m.navigator.sendBeacon)try{S=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!S&&m.Image&&(new Image().src=v.v,S=!0),S||(v.g=Va(v.j,null),v.g.ea(v.v)),v.F=Date.now(),St(v)}Oa(h)}function Ii(h){h.g&&(Js(h),h.g.cancel(),h.g=null)}function Xs(h){Ii(h),h.u&&(m.clearTimeout(h.u),h.u=null),to(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function ci(h){if(!Ln(h.h)&&!h.s){h.s=!0;var v=h.Ga;ce||W(),B||(ce(),B=!0),Z.add(v,h),h.B=0}}function $l(h,v){return Er(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ti(R(h.Ga,h,v),ea(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const $=new ii(this,this.j,h);let te=this.o;if(this.S&&(te?(te=D(te),F(te,this.S)):te=this.S),this.m!==null||this.O||($.H=te,te=null),this.P)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var P=this.i[S];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(v+=P,4096<v){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=ir(this,$,v),S=At(this.I),qe(S,"RID",h),qe(S,"CVER",22),this.D&&qe(S,"X-HTTP-Session-Id",this.D),nr(this,S),te&&(this.O?v="headers="+encodeURIComponent(String(Vi(te)))+"&"+v:this.m&&tr(S,this.m,te)),wt(this.h,$),this.Ua&&qe(S,"TYPE","init"),this.P?(qe(S,"$req",v),qe(S,"SID","null"),$.T=!0,Ws($,S,null)):Ws($,S,v),this.G=2}}else this.G==3&&(h?In(this,h):this.i.length==0||Ln(this.h)||In(this))};function In(h,v){var S;v?S=v.l:S=h.U++;const P=At(h.I);qe(P,"SID",h.K),qe(P,"RID",S),qe(P,"AID",h.T),nr(h,P),h.m&&h.o&&tr(P,h.m,h.o),S=new ii(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),v&&(h.i=v.D.concat(h.i)),v=ir(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),wt(h.h,S),Ws(S,P,v)}function nr(h,v){h.H&&Oe(h.H,function(S,P){qe(v,P,S)}),h.l&&We({},function(S,P){qe(v,P,S)})}function ir(h,v,S){S=Math.min(h.i.length,S);var P=h.l?R(h.l.Na,h.l,h):null;e:{var $=h.i;let te=-1;for(;;){const ye=["count="+S];te==-1?0<S?(te=$[0].g,ye.push("ofs="+te)):te=0:ye.push("ofs="+te);let mt=!0;for(let Ht=0;Ht<S;Ht++){let at=$[Ht].g;const yt=$[Ht].map;if(at-=te,0>at)te=Math.max(0,$[Ht].g-100),mt=!1;else try{Zs(yt,ye,"req"+at+"_")}catch{P&&P(yt)}}if(mt){P=ye.join("&");break e}}}return h=h.i.splice(0,S),v.D=h,P}function bn(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;ce||W(),B||(ce(),B=!0),Z.add(v,h),h.v=0}}function cs(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ti(R(h.Fa,h),ea(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,eo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ti(R(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Ii(this),eo(this))};function Js(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function eo(h){h.g=new ii(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=At(h.qa);qe(v,"RID","rpc"),qe(v,"SID",h.K),qe(v,"AID",h.T),qe(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&qe(v,"TO",h.ja),qe(v,"TYPE","xmlhttp"),nr(h,v),h.m&&h.o&&tr(v,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=Mn(At(v)),S.m=null,S.P=!0,Hs(S,h)}n.Za=function(){this.C!=null&&(this.C=null,Ii(this),cs(this),bt(19))};function to(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function hs(h,v){var S=null;if(h.g==v){to(h),Js(h),h.g=null;var P=2}else if(He(h.h,v))S=v.D,is(h.h,v),P=1;else return;if(h.G!=0){if(v.o)if(P==1){S=v.m?v.m.length:0,v=Date.now()-v.F;var $=h.B;P=Yr(),jt(P,new zs(P,S)),ci(h)}else bn(h);else if($=v.s,$==3||$==0&&0<v.X||!(P==1&&$l(h,v)||P==2&&cs(h)))switch(S&&0<S.length&&(v=h.h,v.i=v.i.concat(S)),$){case 1:rr(h,5);break;case 4:rr(h,10);break;case 3:rr(h,6);break;default:rr(h,2)}}}function ea(h,v){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*v}function rr(h,v){if(h.j.info("Error code "+v),v==2){var S=R(h.fb,h),P=h.Xa;const $=!P;P=new si(P||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||rs(P,"https"),Mn(P),$?gt(P.toString(),S):Yo(P.toString(),S)}else bt(2);h.G=0,h.l&&h.l.sa(v),Oa(h),Xs(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Oa(h){if(h.G=0,h.ka=[],h.l){const v=Ji(h.h);(v.length!=0||h.i.length!=0)&&(ie(h.ka,v),ie(h.ka,h.i),h.h.i.length=0,ne(h.i),h.i.length=0),h.l.ra()}}function no(h,v,S){var P=S instanceof si?At(S):new si(S);if(P.g!="")v&&(P.g=v+"."+P.g),Ci(P,P.s);else{var $=m.location;P=$.protocol,v=v?v+"."+$.hostname:$.hostname,$=+$.port;var te=new si(null);P&&rs(te,P),v&&(te.g=v),$&&Ci(te,$),S&&(te.l=S),P=te}return S=h.D,v=h.ya,S&&v&&qe(P,S,v),qe(P,"VER",h.la),nr(h,P),P}function Va(h,v,S){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Pt(new Cn({eb:S})):new Pt(h.pa),v.Ha(h.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function io(){}n=io.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ds(){}ds.prototype.g=function(h,v){return new en(h,v)};function en(h,v){Mt.call(this),this.g=new Jo(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!De(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!De(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new On(this)}J(en,Mt),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Jt(this.g)},en.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=Os(h),h=S);v.i.push(new vr(v.Ya++,h)),v.G==3&&ci(v)},en.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,en.aa.N.call(this)};function Fi(h){Ei.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const S in v){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}J(Fi,Ei);function Fa(){Fs.call(this),this.status=1}J(Fa,Fs);function On(h){this.g=h}J(On,io),On.prototype.ua=function(){jt(this.g,"a")},On.prototype.ta=function(h){jt(this.g,new Fi(h))},On.prototype.sa=function(h){jt(this.g,new Fa)},On.prototype.ra=function(){jt(this.g,"b")},ds.prototype.createWebChannel=ds.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,lE=function(){return new ds},aE=function(){return Yr()},oE=bi,Ep={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,vh=es,Us.COMPLETE="complete",sE=Us,Qr.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,Au=Qr,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,rE=Pt}).apply(typeof hh<"u"?hh:typeof self<"u"?self:typeof window<"u"?window:{});const by="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wn.UNAUTHENTICATED=new Wn(null),Wn.GOOGLE_CREDENTIALS=new Wn("google-credentials-uid"),Wn.FIRST_PARTY=new Wn("first-party-uid"),Wn.MOCK_USER=new Wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new jp("@firebase/firestore");function cl(){return Aa.logLevel}function Se(n,...e){if(Aa.logLevel<=lt.DEBUG){const t=e.map(xm);Aa.debug(`Firestore (${Ul}): ${n}`,...t)}}function ks(n,...e){if(Aa.logLevel<=lt.ERROR){const t=e.map(xm);Aa.error(`Firestore (${Ul}): ${n}`,...t)}}function Rl(n,...e){if(Aa.logLevel<=lt.WARN){const t=e.map(xm);Aa.warn(`Firestore (${Ul}): ${n}`,...t)}}function xm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(n="Unexpected state"){const e=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: `+n;throw ks(e),new Error(e)}function Bt(n,e){n||Qe()}function ht(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Vl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wn.UNAUTHENTICATED))}shutdown(){}}class YI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class XI{constructor(e){this.t=e,this.currentUser=Wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Bt(this.o===void 0);let r=this.i;const a=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let c=new yl;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new yl,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await a(this.currentUser)})},m=y=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new yl)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Bt(typeof r.accessToken=="string"),new uE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bt(e===null||typeof e=="string"),new Wn(e)}}class JI{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Wn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ex{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new JI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Bt(this.o===void 0);const r=c=>{c.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,Se("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const a=c=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Bt(typeof t.token=="string"),this.R=t.token,new tx(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=ix(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%e.length))}return r}}function ct(n,e){return n<e?-1:n>e?1:0}function kl(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{static now(){return Tn.fromMillis(Date.now())}static fromDate(e){return Tn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Tn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new Tn(0,0))}static max(){return new Ze(new Tn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t,r){t===void 0?t=0:t>e.length&&Qe(),r===void 0?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Xu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=e.get(a),d=t.get(a);if(c<d)return-1;if(c>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class zt extends Xu{construct(e,t,r){return new zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const sx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qn extends Xu{construct(e,t,r){return new qn(e,t,r)}static isValidIdentifier(e){return sx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qn(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(r.length===0)throw new Ne(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new Ne(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Ne(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,a+=2}else m==="`"?(d=!d,a++):m!=="."||d?(r+=m,a++):(c(),a++)}if(c(),d)throw new Ne(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qn(t)}static emptyPath(){return new qn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(zt.fromString(e))}static fromName(e){return new je(zt.fromString(e).popFirst(5))}static empty(){return new je(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new zt(e.slice()))}}function ox(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Ze.fromTimestamp(r===1e9?new Tn(t+1,0):new Tn(t,r));return new Fo(a,je.empty(),e)}function ax(n){return new Fo(n.readTime,n.key,-1)}class Fo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fo(Ze.min(),je.empty(),-1)}static max(){return new Fo(Ze.max(),je.empty(),-1)}}function lx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(n.documentKey,e.documentKey),t!==0?t:ct(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ud(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==ux)throw n;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let a=0,c=0,d=!1;e.forEach(m=>{++a,m.next(()=>{++c,d&&c===a&&t()},y=>r(y))}),d=!0,c===a&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(a=>a?re.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,c)=>{r.push(t.call(this,a,c))}),this.waitFor(r)}static mapArray(e,t){return new re((r,a)=>{const c=e.length,d=new Array(c);let m=0;for(let y=0;y<c;y++){const T=y;t(e[T]).next(I=>{d[T]=I,++m,m===c&&r(d)},I=>a(I))}})}static doWhile(e,t){return new re((r,a)=>{const c=()=>{e()===!0?t().next(()=>{c()},a):r()};c()})}}function hx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function jl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}cd.oe=-1;function hd(n){return n==null}function Uh(n){return n===0&&1/n==-1/0}function dx(n){return typeof n=="number"&&Number.isInteger(n)&&!Uh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Oy(e)),e=px(n.get(t),e);return Oy(e)}function px(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const c=n.charAt(a);switch(c){case"\0":t+="";break;case"":t+="";break;default:t+=c}}return t}function Oy(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new Yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dh(this.root,e,this.comparator,!0)}}class dh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=r??Pn.RED,this.left=a??Pn.EMPTY,this.right=c??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new Pn(e??this.key,t??this.value,r??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Pn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(e,t,r,a,c){return this}insert(e,t,r){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.fields=e,e.sort(qn.comparator)}static empty(){return new ko([])}unionWith(e){let t=new cn(qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ko(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new hE("Invalid base64 string: "+c):c}}(e);return new Dn(t)}static fromUint8Array(e){const t=function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c}(e);return new Dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const mx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(n){if(Bt(!!n),typeof n=="string"){let e=0;const t=mx.exec(n);if(Bt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qt(n.seconds),nanos:Qt(n.nanos)}}function Qt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bo(n){return typeof n=="string"?Dn.fromBase64String(n):Dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function dd(n){const e=n.mapValue.fields.__previous_value__;return Am(e)?dd(e):e}function Ju(n){const e=zo(n.mapValue.fields.__local_write_time__.timestampValue);return new Tn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t,r,a,c,d,m,y,T){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=T}}class ec{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Uo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Am(n)?4:yx(n)?9007199254740991:gx(n)?10:11:Qe()}function zr(n,e){if(n===e)return!0;const t=Uo(n);if(t!==Uo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ju(n).isEqual(Ju(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=zo(a.timestampValue),m=zo(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,c){return Bo(a.bytesValue).isEqual(Bo(c.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,c){return Qt(a.geoPointValue.latitude)===Qt(c.geoPointValue.latitude)&&Qt(a.geoPointValue.longitude)===Qt(c.geoPointValue.longitude)}(n,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return Qt(a.integerValue)===Qt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=Qt(a.doubleValue),m=Qt(c.doubleValue);return d===m?Uh(d)===Uh(m):isNaN(d)&&isNaN(m)}return!1}(n,e);case 9:return kl(n.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:case 11:return function(a,c){const d=a.mapValue.fields||{},m=c.mapValue.fields||{};if(Vy(d)!==Vy(m))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(m[y]===void 0||!zr(d[y],m[y])))return!1;return!0}(n,e);default:return Qe()}}function tc(n,e){return(n.values||[]).find(t=>zr(t,e))!==void 0}function Dl(n,e){if(n===e)return 0;const t=Uo(n),r=Uo(e);if(t!==r)return ct(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ct(n.booleanValue,e.booleanValue);case 2:return function(c,d){const m=Qt(c.integerValue||c.doubleValue),y=Qt(d.integerValue||d.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(n,e);case 3:return zy(n.timestampValue,e.timestampValue);case 4:return zy(Ju(n),Ju(e));case 5:return ct(n.stringValue,e.stringValue);case 6:return function(c,d){const m=Bo(c),y=Bo(d);return m.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),y=d.split("/");for(let T=0;T<m.length&&T<y.length;T++){const I=ct(m[T],y[T]);if(I!==0)return I}return ct(m.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(c,d){const m=ct(Qt(c.latitude),Qt(d.latitude));return m!==0?m:ct(Qt(c.longitude),Qt(d.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return By(n.arrayValue,e.arrayValue);case 10:return function(c,d){var m,y,T,I;const A=c.fields||{},R=d.fields||{},U=(m=A.value)===null||m===void 0?void 0:m.arrayValue,J=(y=R.value)===null||y===void 0?void 0:y.arrayValue,ne=ct(((T=U==null?void 0:U.values)===null||T===void 0?void 0:T.length)||0,((I=J==null?void 0:J.values)===null||I===void 0?void 0:I.length)||0);return ne!==0?ne:By(U,J)}(n.mapValue,e.mapValue);case 11:return function(c,d){if(c===fh.mapValue&&d===fh.mapValue)return 0;if(c===fh.mapValue)return 1;if(d===fh.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),T=d.fields||{},I=Object.keys(T);y.sort(),I.sort();for(let A=0;A<y.length&&A<I.length;++A){const R=ct(y[A],I[A]);if(R!==0)return R;const U=Dl(m[y[A]],T[I[A]]);if(U!==0)return U}return ct(y.length,I.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function zy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ct(n,e);const t=zo(n),r=zo(e),a=ct(t.seconds,r.seconds);return a!==0?a:ct(t.nanos,r.nanos)}function By(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const c=Dl(t[a],r[a]);if(c)return c}return ct(t.length,r.length)}function Ll(n){return Tp(n)}function Tp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=zo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Bo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return je.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",a=!0;for(const c of t.values||[])a?a=!1:r+=",",r+=Tp(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const d of r)c?c=!1:a+=",",a+=`${d}:${Tp(t.fields[d])}`;return a+"}"}(n.mapValue):Qe()}function wh(n){switch(Uo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dd(n);return e?16+wh(e):16;case 5:return 2*n.stringValue.length;case 6:return Bo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,c)=>a+wh(c),0)}(n.arrayValue);case 10:case 11:return function(r){let a=0;return Wl(r.fields,(c,d)=>{a+=c.length+wh(d)}),a}(n.mapValue);default:throw Qe()}}function Uy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sp(n){return!!n&&"integerValue"in n}function Pm(n){return!!n&&"arrayValue"in n}function jy(n){return!!n&&"nullValue"in n}function Wy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kf(n){return!!n&&"mapValue"in n}function gx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Vu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.value=e}static empty(){return new br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=qn.emptyPath(),r={},a=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,r,a),r={},a=[],t=m.popLast()}d?r[m.lastSegment()]=Vu(d):a.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());Kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Kf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Wl(t,(a,c)=>e[a]=c);for(const a of r)delete e[a]}clone(){return new br(Vu(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t,r,a,c,d,m){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Hn(e,0,Ze.min(),Ze.min(),Ze.min(),br.empty(),0)}static newFoundDocument(e,t,r,a){return new Hn(e,1,t,Ze.min(),r,a,0)}static newNoDocument(e,t){return new Hn(e,2,t,Ze.min(),Ze.min(),br.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,Ze.min(),Ze.min(),br.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t){this.position=e,this.inclusive=t}}function Hy(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const c=e[a],d=n.position[a];if(c.field.isKeyField()?r=je.comparator(je.fromName(d.referenceValue),t.key):r=Dl(d,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function qy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t="asc"){this.field=e,this.dir=t}}function vx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{}class sn extends dE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ex(e,t,r):t==="array-contains"?new Cx(e,r):t==="in"?new Ix(e,r):t==="not-in"?new xx(e,r):t==="array-contains-any"?new Ax(e,r):new sn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Tx(e,r):new Sx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Dl(t,this.value)):t!==null&&Uo(this.value)===Uo(t)&&this.matchesComparison(Dl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _r extends dE{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new _r(e,t)}matches(e){return fE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fE(n){return n.op==="and"}function pE(n){return wx(n)&&fE(n)}function wx(n){for(const e of n.filters)if(e instanceof _r)return!1;return!0}function Cp(n){if(n instanceof sn)return n.field.canonicalString()+n.op.toString()+Ll(n.value);if(pE(n))return n.filters.map(e=>Cp(e)).join(",");{const e=n.filters.map(t=>Cp(t)).join(",");return`${n.op}(${e})`}}function mE(n,e){return n instanceof sn?function(r,a){return a instanceof sn&&r.op===a.op&&r.field.isEqual(a.field)&&zr(r.value,a.value)}(n,e):n instanceof _r?function(r,a){return a instanceof _r&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((c,d,m)=>c&&mE(d,a.filters[m]),!0):!1}(n,e):void Qe()}function _E(n){return n instanceof sn?function(t){return`${t.field.canonicalString()} ${t.op} ${Ll(t.value)}`}(n):n instanceof _r?function(t){return t.op.toString()+" {"+t.getFilters().map(_E).join(" ,")+"}"}(n):"Filter"}class Ex extends sn{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tx extends sn{constructor(e,t){super(e,"in",t),this.keys=gE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sx extends sn{constructor(e,t){super(e,"not-in",t),this.keys=gE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class Cx extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pm(t)&&tc(t.arrayValue,this.value)}}class Ix extends sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tc(this.value.arrayValue,t)}}class xx extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!tc(this.value.arrayValue,t)}}class Ax extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,t=null,r=[],a=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=d,this.endAt=m,this.ue=null}}function $y(n,e=null,t=[],r=[],a=null,c=null,d=null){return new Px(n,e,t,r,a,c,d)}function Rm(n){const e=ht(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Cp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ll(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ll(r)).join(",")),e.ue=t}return e.ue}function km(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qy(n.startAt,e.startAt)&&qy(n.endAt,e.endAt)}function Ip(n){return je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t=null,r=[],a=[],c=null,d="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Rx(n,e,t,r,a,c,d,m){return new ac(n,e,t,r,a,c,d,m)}function Dm(n){return new ac(n)}function Gy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yE(n){return n.collectionGroup!==null}function Fu(n){const e=ht(n);if(e.ce===null){e.ce=[];const t=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new cn(qn.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(T=>{T.isInequality()&&(m=m.add(T.field))})}),m})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.ce.push(new Wh(c,r))}),t.has(qn.keyField().canonicalString())||e.ce.push(new Wh(qn.keyField(),r))}return e.ce}function Fr(n){const e=ht(n);return e.le||(e.le=kx(e,Fu(n))),e.le}function kx(n,e){if(n.limitType==="F")return $y(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new Wh(a.field,c)});const t=n.endAt?new jh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new jh(n.startAt.position,n.startAt.inclusive):null;return $y(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xp(n,e){const t=n.filters.concat([e]);return new ac(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ap(n,e,t){return new ac(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fd(n,e){return km(Fr(n),Fr(e))&&n.limitType===e.limitType}function vE(n){return`${Rm(Fr(n))}|lt:${n.limitType}`}function hl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>_E(a)).join(", ")}]`),hd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Ll(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Ll(a)).join(",")),`Target(${r})`}(Fr(n))}; limitType=${n.limitType})`}function pd(n,e){return e.isFoundDocument()&&function(r,a){const c=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):je.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(n,e)&&function(r,a){for(const c of Fu(r))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(n,e)&&function(r,a){for(const c of r.filters)if(!c.matches(a))return!1;return!0}(n,e)&&function(r,a){return!(r.startAt&&!function(d,m,y){const T=Hy(d,m,y);return d.inclusive?T<=0:T<0}(r.startAt,Fu(r),a)||r.endAt&&!function(d,m,y){const T=Hy(d,m,y);return d.inclusive?T>=0:T>0}(r.endAt,Fu(r),a))}(n,e)}function Dx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wE(n){return(e,t)=>{let r=!1;for(const a of Fu(n)){const c=Lx(a,e,t);if(c!==0)return c;r=r||a.field.isKeyField()}return 0}}function Lx(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(c,d,m){const y=d.data.field(c),T=m.data.field(c);return y!==null&&T!==null?Dl(y,T):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,c]of r)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Wl(this.inner,(t,r)=>{for(const[a,c]of r)e(a,c)})}isEmpty(){return cE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=new Yt(je.comparator);function jo(){return Nx}const EE=new Yt(je.comparator);function Pu(...n){let e=EE;for(const t of n)e=e.insert(t.key,t);return e}function Mx(n){let e=EE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wa(){return zu()}function TE(){return zu()}function zu(){return new ka(n=>n.toString(),(n,e)=>n.isEqual(e))}const bx=new cn(je.comparator);function ft(...n){let e=bx;for(const t of n)e=e.add(t);return e}const Ox=new cn(ct);function Vx(){return Ox}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function SE(n){return{integerValue:""+n}}function Fx(n,e){return dx(e)?SE(e):Lm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this._=void 0}}function zx(n,e,t){return n instanceof Pp?function(a,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Am(c)&&(c=dd(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}}(t,e):n instanceof Hh?CE(n,e):n instanceof qh?IE(n,e):function(a,c){const d=Ux(a,c),m=Ky(d)+Ky(a.Pe);return Sp(d)&&Sp(a.Pe)?SE(m):Lm(a.serializer,m)}(n,e)}function Bx(n,e,t){return n instanceof Hh?CE(n,e):n instanceof qh?IE(n,e):t}function Ux(n,e){return n instanceof Rp?function(r){return Sp(r)||function(c){return!!c&&"doubleValue"in c}(r)}(e)?e:{integerValue:0}:null}class Pp extends md{}class Hh extends md{constructor(e){super(),this.elements=e}}function CE(n,e){const t=xE(e);for(const r of n.elements)t.some(a=>zr(a,r))||t.push(r);return{arrayValue:{values:t}}}class qh extends md{constructor(e){super(),this.elements=e}}function IE(n,e){let t=xE(e);for(const r of n.elements)t=t.filter(a=>!zr(a,r));return{arrayValue:{values:t}}}class Rp extends md{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ky(n){return Qt(n.integerValue||n.doubleValue)}function xE(n){return Pm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function jx(n,e){return n.field.isEqual(e.field)&&function(r,a){return r instanceof Hh&&a instanceof Hh||r instanceof qh&&a instanceof qh?kl(r.elements,a.elements,zr):r instanceof Rp&&a instanceof Rp?zr(r.Pe,a.Pe):r instanceof Pp&&a instanceof Pp}(n.transform,e.transform)}class Ta{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ta}static exists(e){return new Ta(void 0,e)}static updateTime(e){return new Ta(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Nm{}function AE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hx(n.key,Ta.none()):new Mm(n.key,n.data,Ta.none());{const t=n.data,r=br.empty();let a=new cn(qn.comparator);for(let c of e.fields)if(!a.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?r.delete(c):r.set(c,d),a=a.add(c)}return new _d(n.key,r,new ko(a.toArray()),Ta.none())}}function Wx(n,e,t){n instanceof Mm?function(a,c,d){const m=a.value.clone(),y=Qy(a.fieldTransforms,c,d.transformResults);m.setAll(y),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(n,e,t):n instanceof _d?function(a,c,d){if(!Eh(a.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Qy(a.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(PE(a)),y.setAll(m),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(n,e,t):function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function Bu(n,e,t,r){return n instanceof Mm?function(c,d,m,y){if(!Eh(c.precondition,d))return m;const T=c.value.clone(),I=Yy(c.fieldTransforms,y,d);return T.setAll(I),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),null}(n,e,t,r):n instanceof _d?function(c,d,m,y){if(!Eh(c.precondition,d))return m;const T=Yy(c.fieldTransforms,y,d),I=d.data;return I.setAll(PE(c)),I.setAll(T),d.convertToFoundDocument(d.version,I).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(A=>A.field))}(n,e,t,r):function(c,d,m){return Eh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(n,e,t)}function Zy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&kl(r,a,(c,d)=>jx(c,d))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Mm extends Nm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class _d extends Nm{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function PE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Qy(n,e,t){const r=new Map;Bt(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],d=c.transform,m=e.data.field(c.field);r.set(c.field,Bx(d,m,t[a]))}return r}function Yy(n,e,t){const r=new Map;for(const a of n){const c=a.transform,d=t.data.field(a.field);r.set(a.field,zx(c,d,e))}return r}class Hx extends Nm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Wx(c,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=TE();return this.mutations.forEach(a=>{const c=e.get(a.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(a.key)?null:m;const y=AE(d,m);y!==null&&r.set(a.key,y),d.isValidDocument()||d.convertToNoDocument(Ze.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ft())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,(t,r)=>Zy(t,r))&&kl(this.baseMutations,e.baseMutations,(t,r)=>Zy(t,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,ut;function RE(n){if(n===void 0)return ks("GRPC error has no .code"),ve.UNKNOWN;switch(n){case rn.OK:return ve.OK;case rn.CANCELLED:return ve.CANCELLED;case rn.UNKNOWN:return ve.UNKNOWN;case rn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case rn.INTERNAL:return ve.INTERNAL;case rn.UNAVAILABLE:return ve.UNAVAILABLE;case rn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case rn.NOT_FOUND:return ve.NOT_FOUND;case rn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case rn.ABORTED:return ve.ABORTED;case rn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case rn.DATA_LOSS:return ve.DATA_LOSS;default:return Qe()}}(ut=rn||(rn={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new Ea([4294967295,4294967295],0);function Xy(n){const e=Kx().encode(n),t=new iE;return t.update(e),new Uint8Array(t.digest())}function Jy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ea([t,r],0),new Ea([a,c],0)]}class bm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ru(`Invalid padding: ${t}`);if(r<0)throw new Ru(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ru(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ru(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Ea.fromNumber(this.Te)}Ee(e,t,r){let a=e.add(t.multiply(Ea.fromNumber(r)));return a.compare(Zx)===1&&(a=new Ea([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Xy(e),[r,a]=Jy(t);for(let c=0;c<this.hashCount;c++){const d=this.Ee(r,a,c);if(!this.de(d))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new bm(c,a,t);return r.forEach(m=>d.insert(m)),d}insert(e){if(this.Te===0)return;const t=Xy(e),[r,a]=Jy(t);for(let c=0;c<this.hashCount;c++){const d=this.Ee(r,a,c);this.Ae(d)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,lc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gd(Ze.min(),a,new Yt(ct),jo(),ft())}}class lc{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new lc(r,t,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t,r,a){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=a}}class kE{constructor(e,t){this.targetId=e,this.me=t}}class DE{constructor(e,t,r=Dn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class ev{constructor(){this.fe=0,this.ge=tv(),this.pe=Dn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ft(),t=ft(),r=ft();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Qe()}}),new lc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=tv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Qx{constructor(e){this.Le=e,this.Be=new Map,this.ke=jo(),this.qe=ph(),this.Qe=ph(),this.Ke=new Yt(ct)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,a)=>{this.je(a)&&t(a)})}Je(e){const t=e.targetId,r=e.me.count,a=this.Ye(t);if(a){const c=a.target;if(Ip(c))if(r===0){const d=new je(c.path);this.We(t,d,Hn.newNoDocument(d,Ze.min()))}else Bt(r===1);else{const d=this.Ze(t);if(d!==r){const m=this.Xe(e),y=m?this.et(m,e,d):1;if(y!==0){this.He(t);const T=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,T)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:c=0}=t;let d,m;try{d=Bo(r).toUint8Array()}catch(y){if(y instanceof hE)return Rl("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new bm(d,a,c)}catch(y){return Rl(y instanceof Ru?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Te===0?null:m}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let a=0;return r.forEach(c=>{const d=this.Le.nt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.We(t,c,null),a++)}),a}it(e){const t=new Map;this.Be.forEach((c,d)=>{const m=this.Ye(d);if(m){if(c.current&&Ip(m.target)){const y=new je(m.target.path);this.st(y).has(d)||this.ot(d,y)||this.We(d,y,Hn.newNoDocument(y,e))}c.be&&(t.set(d,c.ve()),c.Ce())}});let r=ft();this.Qe.forEach((c,d)=>{let m=!0;d.forEachWhile(y=>{const T=this.Ye(y);return!T||T.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(c))}),this.ke.forEach((c,d)=>d.setReadTime(e));const a=new gd(e,t,this.Ke,this.ke,r);return this.ke=jo(),this.qe=ph(),this.Qe=ph(),this.Ke=new Yt(ct),a}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const a=this.ze(e);this.ot(e,t)?a.Fe(t,1):a.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new ev,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new cn(ct),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new cn(ct),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new ev),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ph(){return new Yt(je.comparator)}function tv(){return new Yt(je.comparator)}const Yx={asc:"ASCENDING",desc:"DESCENDING"},Xx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jx={and:"AND",or:"OR"};class eA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function kp(n,e){return n.useProto3Json||hd(e)?e:{value:e}}function Dp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vl(n){return Bt(!!n),Ze.fromTimestamp(function(t){const r=zo(t);return new Tn(r.seconds,r.nanos)}(n))}function NE(n,e){return Lp(n,e).canonicalString()}function Lp(n,e){const t=function(a){return new zt(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ME(n){const e=zt.fromString(n);return Bt(zE(e)),e}function Zf(n,e){const t=ME(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(OE(t))}function bE(n,e){return NE(n.databaseId,e)}function tA(n){const e=ME(n);return e.length===4?zt.emptyPath():OE(e)}function nv(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OE(n){return Bt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function nA(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:Qe()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(T,I){return T.useProto3Json?(Bt(I===void 0||typeof I=="string"),Dn.fromBase64String(I||"")):(Bt(I===void 0||I instanceof Buffer||I instanceof Uint8Array),Dn.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(T){const I=T.code===void 0?ve.UNKNOWN:RE(T.code);return new Ne(I,T.message||"")}(d);t=new DE(r,a,c,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Zf(n,r.document.name),c=vl(r.document.updateTime),d=r.document.createTime?vl(r.document.createTime):Ze.min(),m=new br({mapValue:{fields:r.document.fields}}),y=Hn.newFoundDocument(a,c,d,m),T=r.targetIds||[],I=r.removedTargetIds||[];t=new Th(T,I,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Zf(n,r.document),c=r.readTime?vl(r.readTime):Ze.min(),d=Hn.newNoDocument(a,c),m=r.removedTargetIds||[];t=new Th([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Zf(n,r.document),c=r.removedTargetIds||[];t=new Th([],c,a,null)}else{if(!("filter"in e))return Qe();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:c}=r,d=new Gx(a,c),m=r.targetId;t=new kE(m,d)}}return t}function iA(n,e){return{documents:[bE(n,e.path)]}}function rA(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=bE(n,a);const c=function(T){if(T.length!==0)return FE(_r.create(T,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const d=function(T){if(T.length!==0)return T.map(I=>function(R){return{field:dl(R.field),direction:aA(R.dir)}}(I))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=kp(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(T){return{before:T.inclusive,values:T.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(T){return{before:!T.inclusive,values:T.position}}(e.endAt)),{ct:t,parent:a}}function sA(n){let e=tA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Bt(r===1);const I=t.from[0];I.allDescendants?a=I.collectionId:e=e.child(I.collectionId)}let c=[];t.where&&(c=function(A){const R=VE(A);return R instanceof _r&&pE(R)?R.getFilters():[R]}(t.where));let d=[];t.orderBy&&(d=function(A){return A.map(R=>function(J){return new Wh(fl(J.field),function(ie){switch(ie){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(J.direction))}(R))}(t.orderBy));let m=null;t.limit&&(m=function(A){let R;return R=typeof A=="object"?A.value:A,hd(R)?null:R}(t.limit));let y=null;t.startAt&&(y=function(A){const R=!!A.before,U=A.values||[];return new jh(U,R)}(t.startAt));let T=null;return t.endAt&&(T=function(A){const R=!A.before,U=A.values||[];return new jh(U,R)}(t.endAt)),Rx(e,a,d,c,m,"F",y,T)}function oA(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fl(t.unaryFilter.field);return sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=fl(t.unaryFilter.field);return sn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=fl(t.unaryFilter.field);return sn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=fl(t.unaryFilter.field);return sn.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}(n):n.fieldFilter!==void 0?function(t){return sn.create(fl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return _r.create(t.compositeFilter.filters.map(r=>VE(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Qe()}}(t.compositeFilter.op))}(n):Qe()}function aA(n){return Yx[n]}function lA(n){return Xx[n]}function uA(n){return Jx[n]}function dl(n){return{fieldPath:n.canonicalString()}}function fl(n){return qn.fromServerFormat(n.fieldPath)}function FE(n){return n instanceof sn?function(t){if(t.op==="=="){if(Wy(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NAN"}};if(jy(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Wy(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NOT_NAN"}};if(jy(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dl(t.field),op:lA(t.op),value:t.value}}}(n):n instanceof _r?function(t){const r=t.getFilters().map(a=>FE(a));return r.length===1?r[0]:{compositeFilter:{op:uA(t.op),filters:r}}}(n):Qe()}function zE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t,r,a,c=Ze.min(),d=Ze.min(),m=Dn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Do(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.ht=e}}function hA(n){const e=sA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ap(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.ln=new fA}addToCollectionParentIndex(e,t){return this.ln.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Fo.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class fA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new cn(zt.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new cn(zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yi{static withCacheSize(e){return new yi(e,yi.DEFAULT_COLLECTION_PERCENTILE,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yi.DEFAULT_COLLECTION_PERCENTILE=10,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yi.DEFAULT=new yi(41943040,yi.DEFAULT_COLLECTION_PERCENTILE,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yi.DISABLED=new yi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Nl(0)}static Qn(){return new Nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv([n,e],[t,r]){const a=ct(n,t);return a===0?ct(e,r):a}class pA{constructor(e){this.Gn=e,this.buffer=new cn(rv),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();rv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){jl(t)?Se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await ud(t)}await this.Yn(3e5)})}}class _A{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return re.resolve(cd.oe);const r=new pA(t);return this.Zn.forEachTarget(e,a=>r.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>r.Hn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(iv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iv):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,a,c,d,m,y,T;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),a=this.params.maximumSequenceNumbersToCollect):a=A,d=Date.now(),this.nthSequenceNumber(e,a))).next(A=>(r=A,m=Date.now(),this.removeTargets(e,r,t))).next(A=>(c=A,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(T=Date.now(),cl()<=lt.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-I}ms
	Determined least recently used ${a} in `+(m-d)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${A} documents in `+(T-y)+`ms
Total Duration: ${T-I}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:A})))}}function gA(n,e){return new _A(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.changes=new ka(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&Bu(r.mutation,a,ko.empty(),Tn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ft()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ft()){const a=wa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(c=>{let d=Pu();return c.forEach((m,y)=>{d=d.insert(m,y.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=wa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ft()))}populateOverlays(e,t,r){const a=[];return r.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,a){let c=jo();const d=zu(),m=function(){return zu()}();return t.forEach((y,T)=>{const I=r.get(T.key);a.has(T.key)&&(I===void 0||I.mutation instanceof _d)?c=c.insert(T.key,T):I!==void 0?(d.set(T.key,I.mutation.getFieldMask()),Bu(I.mutation,T,I.mutation.getFieldMask(),Tn.now())):d.set(T.key,ko.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((T,I)=>d.set(T,I)),t.forEach((T,I)=>{var A;return m.set(T,new vA(I,(A=d.get(T))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(e,t){const r=zu();let a=new Yt((d,m)=>d-m),c=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(y=>{const T=t.get(y);if(T===null)return;let I=r.get(y)||ko.empty();I=m.applyToLocalView(T,I),r.set(y,I);const A=(a.get(m.batchId)||ft()).add(y);a=a.insert(m.batchId,A)})}).next(()=>{const d=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),T=y.key,I=y.value,A=TE();I.forEach(R=>{if(!c.has(R)){const U=AE(t.get(R),r.get(R));U!==null&&A.set(R,U),c=c.add(R)}}),d.push(this.documentOverlayCache.saveOverlays(e,T,A))}return re.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(d){return je.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-c.size):re.resolve(wa());let m=-1,y=c;return d.next(T=>re.forEach(T,(I,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),c.get(I)?re.resolve():this.remoteDocumentCache.getEntry(e,I).next(R=>{y=y.insert(I,R)}))).next(()=>this.populateOverlays(e,T,c)).next(()=>this.computeViews(e,y,T,ft())).next(I=>({batchId:m,changes:Mx(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(r=>{let a=Pu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const c=t.collectionGroup;let d=Pu();return this.indexManager.getCollectionParents(e,c).next(m=>re.forEach(m,y=>{const T=function(A,R){return new ac(R,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(t,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,T,r,a).next(I=>{I.forEach((A,R)=>{d=d.insert(A,R)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,r,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,a))).next(d=>{c.forEach((y,T)=>{const I=T.getKey();d.get(I)===null&&(d=d.insert(I,Hn.newInvalidDocument(I)))});let m=Pu();return d.forEach((y,T)=>{const I=c.get(y);I!==void 0&&Bu(I.mutation,T,ko.empty(),Tn.now()),pd(t,T)&&(m=m.insert(y,T))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return re.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:vl(a.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(a){return{name:a.name,query:hA(a.bundledQuery),readTime:vl(a.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.overlays=new Yt(je.comparator),this.Er=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=wa();return re.forEach(t,a=>this.getOverlay(e,a).next(c=>{c!==null&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,c)=>{this.Tt(e,t,c)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Er.get(r);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Er.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const a=wa(),c=t.length+1,d=new je(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const y=m.getNext().value,T=y.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&y.largestBatchId>r&&a.set(y.getKey(),y)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let c=new Yt((T,I)=>T-I);const d=this.overlays.getIterator();for(;d.hasNext();){const T=d.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>r){let I=c.get(T.largestBatchId);I===null&&(I=wa(),c=c.insert(T.largestBatchId,I)),I.set(T.getKey(),T)}}const m=wa(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((T,I)=>m.set(T,I)),!(m.size()>=a)););return re.resolve(m)}Tt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const d=this.Er.get(a.largestBatchId).delete(r.key);this.Er.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new $x(t,r));let c=this.Er.get(t);c===void 0&&(c=ft(),this.Er.set(t,c)),this.Er.set(t,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.dr=new cn(vn.Ar),this.Rr=new cn(vn.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new vn(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new vn(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new je(new zt([])),r=new vn(t,e),a=new vn(t,e+1),c=[];return this.Rr.forEachInRange([r,a],d=>{this.gr(d),c.push(d.key)}),c}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new je(new zt([])),r=new vn(t,e),a=new vn(t,e+1);let c=ft();return this.Rr.forEachInRange([r,a],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new vn(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class vn{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return je.comparator(e.key,t.key)||ct(e.br,t.br)}static Vr(e,t){return ct(e.br,t.br)||je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new cn(vn.Ar)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new qx(c,t,r,a);this.mutationQueue.push(d);for(const m of a)this.vr=this.vr.add(new vn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(d)}lookupMutationBatch(e,t){return re.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Fr(r),c=a<0?0:a;return re.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vn(t,0),a=new vn(t,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([r,a],d=>{const m=this.Cr(d.br);c.push(m)}),re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(ct);return t.forEach(a=>{const c=new vn(a,0),d=new vn(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,d],m=>{r=r.add(m.br)})}),re.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;je.isDocumentKey(c)||(c=c.child(""));const d=new vn(new je(c),0);let m=new cn(ct);return this.vr.forEachWhile(y=>{const T=y.key.path;return!!r.isPrefixOf(T)&&(T.length===a&&(m=m.add(y.br)),!0)},d),re.resolve(this.Mr(m))}Mr(e){const t=[];return e.forEach(r=>{const a=this.Cr(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Bt(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return re.forEach(t.mutations,a=>{const c=new vn(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new vn(t,0),a=this.vr.firstAfterOrEqual(r);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.Nr=e,this.docs=function(){return new Yt(je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),c=a?a.size:0,d=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=jo();return t.forEach(a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():Hn.newInvalidDocument(a))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let c=jo();const d=t.path,m=new je(d.child("")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:T,value:{document:I}}=y.getNext();if(!d.isPrefixOf(T.path))break;T.path.length>d.length+1||lx(ax(I),r)<=0||(a.has(I.key)||pd(t,I))&&(c=c.insert(I.key,I.mutableCopy()))}return re.resolve(c)}getAllFromCollectionGroup(e,t,r,a){Qe()}Lr(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xA(this)}getSize(e){return re.resolve(this.size)}}class xA extends yA{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.hr.addEntry(e,a)):this.hr.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.persistence=e,this.Br=new ka(t=>Rm(t),km),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.kr=0,this.qr=new Om,this.targetCount=0,this.Qr=Nl.qn()}forEachTarget(e,t){return this.Br.forEach((r,a)=>t(a)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),re.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Nl(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Un(t),re.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.Br.forEach((d,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.Br.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),re.waitFor(c).next(()=>a)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(d=>{c.push(a.markPotentiallyOrphaned(e,d))}),re.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t){this.Kr={},this.overlays={},this.$r=new cd(0),this.Ur=!1,this.Ur=!0,this.Wr=new SA,this.referenceDelegate=e(this),this.Gr=new AA(this),this.indexManager=new dA,this.remoteDocumentCache=function(a){return new IA(a)}(r=>this.referenceDelegate.zr(r)),this.serializer=new cA(t),this.jr=new EA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new CA(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){Se("MemoryPersistence","Starting transaction:",e);const a=new PA(this.$r.next());return this.referenceDelegate.Hr(),r(a).next(c=>this.referenceDelegate.Jr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Yr(e,t){return re.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class PA extends cx{constructor(e){super(),this.currentSequenceNumber=e}}class Vm{constructor(e){this.persistence=e,this.Zr=new Om,this.Xr=null}static ei(e){return new Vm(e)}get ti(){if(this.Xr)return this.Xr;throw Qe()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),re.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(a=>this.ti.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.ti.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.ti,r=>{const a=je.fromPath(r);return this.ni(e,a).next(c=>{c||t.removeEntry(a,Ze.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return re.or([()=>re.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class $h{constructor(e,t){this.persistence=e,this.ri=new ka(r=>fx(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=gA(this,t)}static ei(e,t){return new $h(e,t)}Hr(){}Jr(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return re.forEach(this.ri,(r,a)=>this.ir(e,r,a).next(c=>c?re.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.Lr(e,d=>this.ir(e,d,t).next(m=>{m||(r++,c.removeEntry(d,Ze.min()))})).next(()=>c.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),re.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wh(e.data.value)),t}ir(e,t,r){return re.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.ri.get(t);return re.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=a}static zi(e,t){let r=ft(),a=ft();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Fm(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return p1()?8:hx(Ov())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,a){const c={result:null};return this.Xi(e,t).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.es(e,t,a,r).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new RA;return this.ts(e,t,d).next(m=>{if(c.result=m,this.Hi)return this.ns(e,t,d,m.size)})}).next(()=>c.result)}ns(e,t,r,a){return r.documentReadCount<this.Ji?(cl()<=lt.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",hl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),re.resolve()):(cl()<=lt.DEBUG&&Se("QueryEngine","Query:",hl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.Yi*a?(cl()<=lt.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",hl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):re.resolve())}Xi(e,t){if(Gy(t))return re.resolve(null);let r=Fr(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Ap(t,null,"F"),r=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const d=ft(...c);return this.Zi.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(y=>{const T=this.rs(t,m);return this.ss(t,T,d,y.readTime)?this.Xi(e,Ap(t,null,"F")):this.os(e,T,t,y)}))})))}es(e,t,r,a){return Gy(t)||a.isEqual(Ze.min())?re.resolve(null):this.Zi.getDocuments(e,r).next(c=>{const d=this.rs(t,c);return this.ss(t,d,r,a)?re.resolve(null):(cl()<=lt.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),hl(t)),this.os(e,d,t,ox(a,-1)).next(m=>m))})}rs(e,t){let r=new cn(wE(e));return t.forEach((a,c)=>{pd(e,c)&&(r=r.add(c))}),r}ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ts(e,t,r){return cl()<=lt.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",hl(t)),this.Zi.getDocumentsMatchingQuery(e,t,Fo.min(),r)}os(e,t,r,a){return this.Zi.getDocumentsMatchingQuery(e,r,a).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,t,r,a){this.persistence=e,this._s=t,this.serializer=a,this.us=new Yt(ct),this.cs=new ka(c=>Rm(c),km),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wA(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function LA(n,e,t,r){return new DA(n,e,t,r)}async function UE(n,e){const t=ht(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(c=>(a=c,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const d=[],m=[];let y=ft();for(const T of a){d.push(T.batchId);for(const I of T.mutations)y=y.add(I.key)}for(const T of c){m.push(T.batchId);for(const I of T.mutations)y=y.add(I.key)}return t.localDocuments.getDocuments(r,y).next(T=>({Ts:T,removedBatchIds:d,addedBatchIds:m}))})})}function jE(n){const e=ht(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function NA(n,e){const t=ht(n),r=e.snapshotVersion;let a=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.hs.newChangeBuffer({trackRemovals:!0});a=t.us;const m=[];e.targetChanges.forEach((I,A)=>{const R=a.get(A);if(!R)return;m.push(t.Gr.removeMatchingKeys(c,I.removedDocuments,A).next(()=>t.Gr.addMatchingKeys(c,I.addedDocuments,A)));let U=R.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?U=U.withResumeToken(Dn.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):I.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(I.resumeToken,r)),a=a.insert(A,U),function(ne,ie,Ae){return ne.resumeToken.approximateByteSize()===0||ie.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8?!0:Ae.addedDocuments.size+Ae.modifiedDocuments.size+Ae.removedDocuments.size>0}(R,U,I)&&m.push(t.Gr.updateTargetData(c,U))});let y=jo(),T=ft();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,I))}),m.push(MA(c,d,e.documentUpdates).next(I=>{y=I.Is,T=I.Es})),!r.isEqual(Ze.min())){const I=t.Gr.getLastRemoteSnapshotVersion(c).next(A=>t.Gr.setTargetsMetadata(c,c.currentSequenceNumber,r));m.push(I)}return re.waitFor(m).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,y,T)).next(()=>y)}).then(c=>(t.us=a,c))}function MA(n,e,t){let r=ft(),a=ft();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let d=jo();return t.forEach((m,y)=>{const T=c.get(m);y.isFoundDocument()!==T.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(Ze.min())?(e.removeEntry(m,y.readTime),d=d.insert(m,y)):!T.isValidDocument()||y.version.compareTo(T.version)>0||y.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(y),d=d.insert(m,y)):Se("LocalStore","Ignoring outdated watch update for ",m,". Current version:",T.version," Watch version:",y.version)}),{Is:d,Es:a}})}function bA(n,e){const t=ht(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Gr.getTargetData(r,e).next(c=>c?(a=c,re.resolve(a)):t.Gr.allocateTargetId(r).next(d=>(a=new Do(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.us.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function Np(n,e,t){const r=ht(n),a=r.us.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,a))}catch(d){if(!jl(d))throw d;Se("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.us=r.us.remove(e),r.cs.delete(a.target)}function sv(n,e,t){const r=ht(n);let a=Ze.min(),c=ft();return r.persistence.runTransaction("Execute query","readwrite",d=>function(y,T,I){const A=ht(y),R=A.cs.get(I);return R!==void 0?re.resolve(A.us.get(R)):A.Gr.getTargetData(T,I)}(r,d,Fr(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(d,m.targetId).next(y=>{c=y})}).next(()=>r._s.getDocumentsMatchingQuery(d,e,t?a:Ze.min(),t?c:ft())).next(m=>(OA(r,Dx(e),m),{documents:m,ds:c})))}function OA(n,e,t){let r=n.ls.get(e)||Ze.min();t.forEach((a,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.ls.set(e,r)}class ov{constructor(){this.activeTargetIds=Vx()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VA{constructor(){this._o=new ov,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new ov,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh=null;function Qf(){return mh===null?mh=function(){return 268435456+Math.round(2147483648*Math.random())}():mh++,"0x"+mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class UA extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${a}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}Oo(t,r,a,c,d){const m=Qf(),y=this.No(t,r.toUriEncodedString());Se("RestConnection",`Sending RPC '${t}' ${m}:`,y,a);const T={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(T,c,d),this.Bo(t,y,T,a).then(I=>(Se("RestConnection",`Received RPC '${t}' ${m}: `,I),I),I=>{throw Rl("RestConnection",`RPC '${t}' ${m} failed with error: `,I,"url: ",y,"request:",a),I})}ko(t,r,a,c,d,m){return this.Oo(t,r,a,c,d)}Lo(t,r,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ul}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((c,d)=>t[d]=c),a&&a.headers.forEach((c,d)=>t[d]=c)}No(t,r){const a=zA[t];return`${this.Fo}/v1/${r}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,a){const c=Qf();return new Promise((d,m)=>{const y=new rE;y.setWithCredentials(!0),y.listenOnce(sE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case vh.NO_ERROR:const I=y.getResponseJson();Se(jn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(I)),d(I);break;case vh.TIMEOUT:Se(jn,`RPC '${e}' ${c} timed out`),m(new Ne(ve.DEADLINE_EXCEEDED,"Request time out"));break;case vh.HTTP_ERROR:const A=y.getStatus();if(Se(jn,`RPC '${e}' ${c} failed with status:`,A,"response text:",y.getResponseText()),A>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const U=R==null?void 0:R.error;if(U&&U.status&&U.message){const J=function(ie){const Ae=ie.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(Ae)>=0?Ae:ve.UNKNOWN}(U.status);m(new Ne(J,U.message))}else m(new Ne(ve.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new Ne(ve.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{Se(jn,`RPC '${e}' ${c} completed.`)}});const T=JSON.stringify(a);Se(jn,`RPC '${e}' ${c} sending request:`,a),y.send(t,"POST",T,r,15)})}qo(e,t,r){const a=Qf(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=lE(),m=aE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(y.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Lo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const I=c.join("");Se(jn,`Creating RPC '${e}' stream ${a}: ${I}`,y);const A=d.createWebChannel(I,y);let R=!1,U=!1;const J=new BA({Eo:ie=>{U?Se(jn,`Not sending because RPC '${e}' stream ${a} is closed:`,ie):(R||(Se(jn,`Opening RPC '${e}' stream ${a} transport.`),A.open(),R=!0),Se(jn,`RPC '${e}' stream ${a} sending:`,ie),A.send(ie))},Ao:()=>A.close()}),ne=(ie,Ae,De)=>{ie.listen(Ae,Pe=>{try{De(Pe)}catch(Ue){setTimeout(()=>{throw Ue},0)}})};return ne(A,Au.EventType.OPEN,()=>{U||(Se(jn,`RPC '${e}' stream ${a} transport opened.`),J.So())}),ne(A,Au.EventType.CLOSE,()=>{U||(U=!0,Se(jn,`RPC '${e}' stream ${a} transport closed`),J.Do())}),ne(A,Au.EventType.ERROR,ie=>{U||(U=!0,Rl(jn,`RPC '${e}' stream ${a} transport errored:`,ie),J.Do(new Ne(ve.UNAVAILABLE,"The operation could not be completed")))}),ne(A,Au.EventType.MESSAGE,ie=>{var Ae;if(!U){const De=ie.data[0];Bt(!!De);const Pe=De,Ue=(Pe==null?void 0:Pe.error)||((Ae=Pe[0])===null||Ae===void 0?void 0:Ae.error);if(Ue){Se(jn,`RPC '${e}' stream ${a} received error:`,Ue);const tt=Ue.status;let Oe=function(b){const F=rn[b];if(F!==void 0)return RE(F)}(tt),j=Ue.message;Oe===void 0&&(Oe=ve.INTERNAL,j="Unknown error status: "+tt+" with message "+Ue.message),U=!0,J.Do(new Ne(Oe,j)),A.close()}else Se(jn,`RPC '${e}' stream ${a} received:`,De),J.vo(De)}}),ne(m,oE.STAT_EVENT,ie=>{ie.stat===Ep.PROXY?Se(jn,`RPC '${e}' stream ${a} detected buffering proxy`):ie.stat===Ep.NOPROXY&&Se(jn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{J.bo()},0),J}}function Yf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n){return new eA(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t,r=1e3,a=1.5,c=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=a,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),a=Math.max(0,t-r);a>0&&Se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t,r,a,c,d,m,y){this.li=e,this.Yo=r,this.Zo=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new WE(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(ks(t.toString()),ks("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Xo===t&&this.I_(r,a)},r=>{e(()=>{const a=new Ne(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(a)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{r(()=>this.E_(a))}),this.stream.onMessage(a=>{r(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(Se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WA extends jA{constructor(e,t,r,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,d),this.serializer=c}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=nA(this.serializer,e),r=function(c){if(!("targetChange"in c))return Ze.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ze.min():d.readTime?vl(d.readTime):Ze.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=nv(this.serializer),t.addTarget=function(c,d){let m;const y=d.target;if(m=Ip(y)?{documents:iA(c,y)}:{query:rA(c,y).ct},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=LE(c,d.resumeToken);const T=kp(c,d.expectedCount);T!==null&&(m.expectedCount=T)}else if(d.snapshotVersion.compareTo(Ze.min())>0){m.readTime=Dp(c,d.snapshotVersion.toTimestamp());const T=kp(c,d.expectedCount);T!==null&&(m.expectedCount=T)}return m}(this.serializer,e);const r=oA(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=nv(this.serializer),t.removeTarget=e,this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new Ne(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Oo(e,Lp(t,r),a,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ne(ve.UNKNOWN,c.toString())})}ko(e,t,r,a,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.ko(e,Lp(t,r),a,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ne(ve.UNKNOWN,d.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class qA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(ks(t),this.C_=!1):Se("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,t,r,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(d=>{r.enqueueAndForget(async()=>{cc(this)&&(Se("RemoteStore","Restarting streams for network reachability change."),await async function(y){const T=ht(y);T.k_.add(4),await uc(T),T.K_.set("Unknown"),T.k_.delete(4),await vd(T)}(this))})}),this.K_=new qA(r,a)}}async function vd(n){if(cc(n))for(const e of n.q_)await e(!0)}async function uc(n){for(const e of n.q_)await e(!1)}function HE(n,e){const t=ht(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),jm(t)?Um(t):Hl(t).s_()&&Bm(t,e))}function zm(n,e){const t=ht(n),r=Hl(t);t.B_.delete(e),r.s_()&&qE(t,e),t.B_.size===0&&(r.s_()?r.a_():cc(t)&&t.K_.set("Unknown"))}function Bm(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Hl(n).V_(e)}function qE(n,e){n.U_.xe(e),Hl(n).m_(e)}function Um(n){n.U_=new Qx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Hl(n).start(),n.K_.F_()}function jm(n){return cc(n)&&!Hl(n).i_()&&n.B_.size>0}function cc(n){return ht(n).k_.size===0}function $E(n){n.U_=void 0}async function GA(n){n.K_.set("Online")}async function KA(n){n.B_.forEach((e,t)=>{Bm(n,e)})}async function ZA(n,e){$E(n),jm(n)?(n.K_.O_(e),Um(n)):n.K_.set("Unknown")}async function QA(n,e,t){if(n.K_.set("Online"),e instanceof DE&&e.state===2&&e.cause)try{await async function(a,c){const d=c.cause;for(const m of c.targetIds)a.B_.has(m)&&(await a.remoteSyncer.rejectListen(m,d),a.B_.delete(m),a.U_.removeTarget(m))}(n,e)}catch(r){Se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lv(n,r)}else if(e instanceof Th?n.U_.$e(e):e instanceof kE?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Ze.min()))try{const r=await jE(n.localStore);t.compareTo(r)>=0&&await function(c,d){const m=c.U_.it(d);return m.targetChanges.forEach((y,T)=>{if(y.resumeToken.approximateByteSize()>0){const I=c.B_.get(T);I&&c.B_.set(T,I.withResumeToken(y.resumeToken,d))}}),m.targetMismatches.forEach((y,T)=>{const I=c.B_.get(y);if(!I)return;c.B_.set(y,I.withResumeToken(Dn.EMPTY_BYTE_STRING,I.snapshotVersion)),qE(c,y);const A=new Do(I.target,y,T,I.sequenceNumber);Bm(c,A)}),c.remoteSyncer.applyRemoteEvent(m)}(n,t)}catch(r){Se("RemoteStore","Failed to raise snapshot:",r),await lv(n,r)}}async function lv(n,e,t){if(!jl(e))throw e;n.k_.add(1),await uc(n),n.K_.set("Offline"),t||(t=()=>jE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Se("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await vd(n)})}async function uv(n,e){const t=ht(n);t.asyncQueue.verifyOperationInProgress(),Se("RemoteStore","RemoteStore received new credentials");const r=cc(t);t.k_.add(3),await uc(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await vd(t)}async function YA(n,e){const t=ht(n);e?(t.k_.delete(2),await vd(t)):e||(t.k_.add(2),await uc(t),t.K_.set("Unknown"))}function Hl(n){return n.W_||(n.W_=function(t,r,a){const c=ht(t);return c.b_(),new WA(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(n.datastore,n.asyncQueue,{Ro:GA.bind(null,n),mo:KA.bind(null,n),po:ZA.bind(null,n),R_:QA.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),jm(n)?Um(n):n.K_.set("Unknown")):(await n.W_.stop(),$E(n))})),n.W_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new yl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,c){const d=Date.now()+r,m=new Wm(e,t,d,a,c);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function GE(n,e){if(ks("AsyncQueue",`${e}: ${n}`),jl(n))return new Ne(ve.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Pu(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.z_=new Yt(je.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Qe():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ml{constructor(e,t,r,a,c,d,m,y,T){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=T}static fromInitialDocuments(e,t,r,a,c){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Ml(e,t,wl.emptySet(t),d,r,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class JA{constructor(){this.queries=hv(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const a=ht(t),c=a.queries;a.queries=hv(),c.forEach((d,m)=>{for(const y of m.J_)y.onError(r)})})(this,new Ne(ve.ABORTED,"Firestore shutting down"))}}function hv(){return new ka(n=>vE(n),fd)}async function eP(n,e){const t=ht(n);let r=3;const a=e.query;let c=t.queries.get(a);c?!c.Y_()&&e.Z_()&&(r=2):(c=new XA,r=e.Z_()?0:1);try{switch(r){case 0:c.H_=await t.onListen(a,!0);break;case 1:c.H_=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(d){const m=GE(d,`Initialization of query '${hl(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,c),c.J_.push(e),e.ea(t.onlineState),c.H_&&e.ta(c.H_)&&Hm(t)}async function tP(n,e){const t=ht(n),r=e.query;let a=3;const c=t.queries.get(r);if(c){const d=c.J_.indexOf(e);d>=0&&(c.J_.splice(d,1),c.J_.length===0?a=e.Z_()?0:1:!c.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function nP(n,e){const t=ht(n);let r=!1;for(const a of e){const c=a.query,d=t.queries.get(c);if(d){for(const m of d.J_)m.ta(a)&&(r=!0);d.H_=a}}r&&Hm(t)}function iP(n,e,t){const r=ht(n),a=r.queries.get(e);if(a)for(const c of a.J_)c.onError(t);r.queries.delete(e)}function Hm(n){n.X_.forEach(e=>{e.next()})}var Mp,dv;(dv=Mp||(Mp={})).na="default",dv.Cache="cache";class rP{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Mp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.key=e}}class ZE{constructor(e){this.key=e}}class sP{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ft(),this.mutatedKeys=ft(),this.Va=wE(e),this.ma=new wl(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new cv,a=t?t.ma:this.ma;let c=t?t.mutatedKeys:this.mutatedKeys,d=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,T=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((I,A)=>{const R=a.get(I),U=pd(this.query,A)?A:null,J=!!R&&this.mutatedKeys.has(R.key),ne=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let ie=!1;R&&U?R.data.isEqual(U.data)?J!==ne&&(r.track({type:3,doc:U}),ie=!0):this.ya(R,U)||(r.track({type:2,doc:U}),ie=!0,(y&&this.Va(U,y)>0||T&&this.Va(U,T)<0)&&(m=!0)):!R&&U?(r.track({type:0,doc:U}),ie=!0):R&&!U&&(r.track({type:1,doc:R}),ie=!0,(y||T)&&(m=!0)),ie&&(U?(d=d.add(U),c=ne?c.add(I):c.delete(I)):(d=d.delete(I),c=c.delete(I)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const I=this.query.limitType==="F"?d.last():d.first();d=d.delete(I.key),c=c.delete(I.key),r.track({type:1,doc:I})}return{ma:d,pa:r,ss:m,mutatedKeys:c}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const c=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const d=e.pa.j_();d.sort((I,A)=>function(U,J){const ne=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return ne(U)-ne(J)}(I.type,A.type)||this.Va(I.doc,A.doc)),this.wa(r),a=a!=null&&a;const m=t&&!a?this.Sa():[],y=this.Ra.size===0&&this.current&&!a?1:0,T=y!==this.Aa;return this.Aa=y,d.length!==0||T?{snapshot:new Ml(this.query,e.ma,c,d,e.mutatedKeys,y===0,T,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new cv,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ft(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new ZE(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new KE(r))}),t}va(e){this.da=e.ds,this.Ra=ft();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Ml.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class oP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class aP{constructor(e){this.key=e,this.Fa=!1}}class lP{constructor(e,t,r,a,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ma={},this.xa=new ka(m=>vE(m),fd),this.Oa=new Map,this.Na=new Set,this.La=new Yt(je.comparator),this.Ba=new Map,this.ka=new Om,this.qa={},this.Qa=new Map,this.Ka=Nl.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function uP(n,e,t=!0){const r=e0(n);let a;const c=r.xa.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ca()):a=await QE(r,e,t,!0),a}async function cP(n,e){const t=e0(n);await QE(t,e,!0,!1)}async function QE(n,e,t,r){const a=await bA(n.localStore,Fr(e)),c=a.targetId,d=n.sharedClientState.addLocalQueryTarget(c,t);let m;return r&&(m=await hP(n,e,c,d==="current",a.resumeToken)),n.isPrimaryClient&&t&&HE(n.remoteStore,a),m}async function hP(n,e,t,r,a){n.Ua=(A,R,U)=>async function(ne,ie,Ae,De){let Pe=ie.view.ga(Ae);Pe.ss&&(Pe=await sv(ne.localStore,ie.query,!1).then(({documents:j})=>ie.view.ga(j,Pe)));const Ue=De&&De.targetChanges.get(ie.targetId),tt=De&&De.targetMismatches.get(ie.targetId)!=null,Oe=ie.view.applyChanges(Pe,ne.isPrimaryClient,Ue,tt);return pv(ne,ie.targetId,Oe.ba),Oe.snapshot}(n,A,R,U);const c=await sv(n.localStore,e,!0),d=new sP(e,c.ds),m=d.ga(c.documents),y=lc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),T=d.applyChanges(m,n.isPrimaryClient,y);pv(n,t,T.ba);const I=new oP(e,t,d);return n.xa.set(e,I),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),T.snapshot}async function dP(n,e,t){const r=ht(n),a=r.xa.get(e),c=r.Oa.get(a.targetId);if(c.length>1)return r.Oa.set(a.targetId,c.filter(d=>!fd(d,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Np(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&zm(r.remoteStore,a.targetId),bp(r,a.targetId)}).catch(ud)):(bp(r,a.targetId),await Np(r.localStore,a.targetId,!0))}async function fP(n,e){const t=ht(n),r=t.xa.get(e),a=t.Oa.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zm(t.remoteStore,r.targetId))}async function YE(n,e){const t=ht(n);try{const r=await NA(t.localStore,e);e.targetChanges.forEach((a,c)=>{const d=t.Ba.get(c);d&&(Bt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?d.Fa=!0:a.modifiedDocuments.size>0?Bt(d.Fa):a.removedDocuments.size>0&&(Bt(d.Fa),d.Fa=!1))}),await JE(t,r,e)}catch(r){await ud(r)}}function fv(n,e,t){const r=ht(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.xa.forEach((c,d)=>{const m=d.view.ea(e);m.snapshot&&a.push(m.snapshot)}),function(d,m){const y=ht(d);y.onlineState=m;let T=!1;y.queries.forEach((I,A)=>{for(const R of A.J_)R.ea(m)&&(T=!0)}),T&&Hm(y)}(r.eventManager,e),a.length&&r.Ma.R_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pP(n,e,t){const r=ht(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Ba.get(e),c=a&&a.key;if(c){let d=new Yt(je.comparator);d=d.insert(c,Hn.newNoDocument(c,Ze.min()));const m=ft().add(c),y=new gd(Ze.min(),new Map,new Yt(ct),d,m);await YE(r,y),r.La=r.La.remove(c),r.Ba.delete(e),qm(r)}else await Np(r.localStore,e,!1).then(()=>bp(r,e,t)).catch(ud)}function bp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||XE(n,r)})}function XE(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(zm(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),qm(n))}function pv(n,e,t){for(const r of t)r instanceof KE?(n.ka.addReference(r.key,e),mP(n,r)):r instanceof ZE?(Se("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||XE(n,r.key)):Qe()}function mP(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(Se("SyncEngine","New document in limbo: "+t),n.Na.add(r),qm(n))}function qm(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new je(zt.fromString(e)),r=n.Ka.next();n.Ba.set(r,new aP(t)),n.La=n.La.insert(t,r),HE(n.remoteStore,new Do(Fr(Dm(t.path)),r,"TargetPurposeLimboResolution",cd.oe))}}async function JE(n,e,t){const r=ht(n),a=[],c=[],d=[];r.xa.isEmpty()||(r.xa.forEach((m,y)=>{d.push(r.Ua(y,e,t).then(T=>{var I;if((T||t)&&r.isPrimaryClient){const A=T?!T.fromCache:(I=t==null?void 0:t.targetChanges.get(y.targetId))===null||I===void 0?void 0:I.current;r.sharedClientState.updateQueryState(y.targetId,A?"current":"not-current")}if(T){a.push(T);const A=Fm.zi(y.targetId,T);c.push(A)}}))}),await Promise.all(d),r.Ma.R_(a),await async function(y,T){const I=ht(y);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>re.forEach(T,R=>re.forEach(R.Wi,U=>I.persistence.referenceDelegate.addReference(A,R.targetId,U)).next(()=>re.forEach(R.Gi,U=>I.persistence.referenceDelegate.removeReference(A,R.targetId,U)))))}catch(A){if(!jl(A))throw A;Se("LocalStore","Failed to update sequence numbers: "+A)}for(const A of T){const R=A.targetId;if(!A.fromCache){const U=I.us.get(R),J=U.snapshotVersion,ne=U.withLastLimboFreeSnapshotVersion(J);I.us=I.us.insert(R,ne)}}}(r.localStore,c))}async function _P(n,e){const t=ht(n);if(!t.currentUser.isEqual(e)){Se("SyncEngine","User change. New user:",e.toKey());const r=await UE(t.localStore,e);t.currentUser=e,function(c,d){c.Qa.forEach(m=>{m.forEach(y=>{y.reject(new Ne(ve.CANCELLED,d))})}),c.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await JE(t,r.Ts)}}function gP(n,e){const t=ht(n),r=t.Ba.get(e);if(r&&r.Fa)return ft().add(r.key);{let a=ft();const c=t.Oa.get(e);if(!c)return a;for(const d of c){const m=t.xa.get(d);a=a.unionWith(m.view.fa)}return a}}function e0(n){const e=ht(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pP.bind(null,e),e.Ma.R_=nP.bind(null,e.eventManager),e.Ma.Wa=iP.bind(null,e.eventManager),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yd(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return LA(this.persistence,new kA,e.initialUser,this.serializer)}ja(e){return new BE(Vm.ei,this.serializer)}za(e){return new VA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class yP extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Bt(this.persistence.referenceDelegate instanceof $h);const r=this.persistence.referenceDelegate.garbageCollector;return new mA(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?yi.withCacheSize(this.cacheSizeBytes):yi.DEFAULT;return new BE(r=>$h.ei(r,t),this.serializer)}}class Op{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_P.bind(null,this.syncEngine),await YA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JA}()}createDatastore(e){const t=yd(e.databaseInfo.databaseId),r=function(c){return new UA(c)}(e.databaseInfo);return function(c,d,m,y){return new HA(c,d,m,y)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,c,d,m){return new $A(r,a,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,t=>fv(this.syncEngine,t,0),function(){return av.p()?new av:new FA}())}createSyncEngine(e,t){return function(a,c,d,m,y,T,I){const A=new lP(a,c,d,m,y,T);return I&&(A.$a=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const c=ht(a);Se("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await uc(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Op.provider={build:()=>new Op};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):ks("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t,r,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Wn.UNAUTHENTICATED,this.clientId=rx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async d=>{Se("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(r,d=>(Se("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=GE(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xf(n,e){n.asyncQueue.verifyOperationInProgress(),Se("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async a=>{r.isEqual(a)||(await UE(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function mv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await EP(n);Se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>uv(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,a)=>uv(e.remoteStore,a)),n._onlineComponents=e}async function EP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ve.FAILED_PRECONDITION||a.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Rl("Error using user provided cache. Falling back to memory cache: "+t),await Xf(n,new Gh)}}else Se("FirestoreClient","Using default OfflineComponentProvider"),await Xf(n,new yP(void 0));return n._offlineComponents}async function TP(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Se("FirestoreClient","Using user provided OnlineComponentProvider"),await mv(n,n._uninitializedComponentsProvider._online)):(Se("FirestoreClient","Using default OnlineComponentProvider"),await mv(n,new Op))),n._onlineComponents}async function _v(n){const e=await TP(n),t=e.eventManager;return t.onListen=uP.bind(null,e.syncEngine),t.onUnlisten=dP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fP.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;function SP(n,e,t,r){if(e===!0&&r===!0)throw new Ne(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yv(n){if(je.isDocumentKey(n))throw new Ne(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Qe()}function Sh(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wd(n);throw new Ne(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ne(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=t0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Ne(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Ne(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Ne(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $m{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QI;switch(r.type){case"firstParty":return new ex(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=gv.get(t);r&&(Se("ComponentProvider","Removing Datastore"),gv.delete(t),r.terminate())}(this),Promise.resolve()}}function CP(n,e,t,r={}){var a;const c=(n=Sh(n,$m))._getSettings(),d=`${e}:${t}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&Rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),r.mockUserToken){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=Wn.MOCK_USER;else{m=bv(r.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Ne(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Wn(T)}n._authCredentials=new YI(new uE(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ql(this.firestore,e,this._query)}}class Ur{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new El(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ur(this.firestore,e,this._key)}}class El extends ql{constructor(e,t,r){super(e,t,Dm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ur(this.firestore,null,new je(e))}withConverter(e){return new El(this.firestore,e,this._path)}}function IP(n,e,...t){if(n=pr(n),n instanceof $m){const r=zt.fromString(e,...t);return yv(r),new El(n,null,r)}{if(!(n instanceof Ur||n instanceof El))throw new Ne(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return yv(r),new El(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new WE(this,"async_queue_retry"),this.fu=()=>{const r=Yf();r&&Se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Yf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Yf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new yl;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!jl(e))throw e;Se("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const a=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(r);throw ks("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const a=Wm.createAndSchedule(this,e,t,r,c=>this.Su(c));return this.du.push(a),a}pu(){this.Au&&Qe()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function Ev(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const c of r)if(c in a&&typeof a[c]=="function")return!0;return!1}(n,["next","error","complete"])}class Vp extends $m{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new wv,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wv(e),this._firestoreClient=void 0,await e}}}function xP(n,e){const t=typeof n=="object"?n:Hp(),r=typeof n=="string"?n:"(default)",a=jv(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const c=Nv("firestore");c&&CP(a,...c)}return a}function AP(n){if(n._terminated)throw new Ne(ve.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PP(n),n._firestoreClient}function PP(n){var e,t,r;const a=n._freezeSettings(),c=function(m,y,T,I){return new _x(m,y,T,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,t0(I.experimentalLongPollingOptions),I.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new wP(n._authCredentials,n._appCheckCredentials,n._queue,c,n._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bl(Dn.fromBase64String(e))}catch(t){throw new Ne(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bl(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^__.*__$/;function r0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class Zm{constructor(e,t,r,a,c,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.xu({path:r,Nu:!1});return a.Lu(e),a}Bu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.xu({path:r,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Fp(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(r0(this.Mu)&&RP.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class kP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||yd(e)}$u(e,t,r,a=!1){return new Zm({Mu:e,methodName:t,Ku:r,path:qn.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DP(n){const e=n._freezeSettings(),t=yd(n._databaseId);return new kP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function LP(n,e,t,r=!1){return Qm(t,n.$u(r?4:3,e))}function Qm(n,e){if(s0(n=pr(n)))return MP("Unsupported field value:",e,n),NP(n,e);if(n instanceof i0)return function(r,a){if(!r0(a.Mu))throw a.qu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,a){const c=[];let d=0;for(const m of r){let y=Qm(m,a.ku(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}}(n,e)}return function(r,a){if((r=pr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Fx(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Tn.fromDate(r);return{timestampValue:Dp(a.serializer,c)}}if(r instanceof Tn){const c=new Tn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dp(a.serializer,c)}}if(r instanceof Gm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bl)return{bytesValue:LE(a.serializer,r._byteString)};if(r instanceof Ur){const c=a.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw a.qu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:NE(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Km)return function(d,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw m.qu("VectorValues must only contain numeric values.");return Lm(m.serializer,y)})}}}}}}(r,a);throw a.qu(`Unsupported field value: ${wd(r)}`)}(n,e)}function NP(n,e){const t={};return cE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wl(n,(r,a)=>{const c=Qm(a,e.Ou(r));c!=null&&(t[r]=c)}),{mapValue:{fields:t}}}function s0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tn||n instanceof Gm||n instanceof bl||n instanceof Ur||n instanceof i0||n instanceof Km)}function MP(n,e,t){if(!s0(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=wd(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}const bP=new RegExp("[~\\*/\\[\\]]");function OP(n,e,t){if(e.search(bP)>=0)throw Fp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new n0(...e.split("."))._internalPath}catch{throw Fp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fp(n,e,t,r,a){const c=r&&!r.isEmpty(),d=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${r}`),d&&(y+=` in document ${a}`),y+=")"),new Ne(ve.INVALID_ARGUMENT,m+n+y)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ur(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ym("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class VP extends o0{data(){return super.data()}}function Ym(n,e){return typeof e=="string"?OP(n,e):e instanceof n0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ne(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xm{}class zP extends Xm{}function BP(n,e,...t){let r=[];e instanceof Xm&&r.push(e),r=r.concat(t),function(c){const d=c.filter(y=>y instanceof Jm).length,m=c.filter(y=>y instanceof Ed).length;if(d>1||d>0&&m>0)throw new Ne(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)n=a._apply(n);return n}class Ed extends zP{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ed(e,t,r)}_apply(e){const t=this._parse(e);return a0(e._query,t),new ql(e.firestore,e.converter,xp(e._query,t))}_parse(e){const t=DP(e.firestore);return function(c,d,m,y,T,I,A){let R;if(T.isKeyField()){if(I==="array-contains"||I==="array-contains-any")throw new Ne(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if(I==="in"||I==="not-in"){Sv(A,I);const U=[];for(const J of A)U.push(Tv(y,c,J));R={arrayValue:{values:U}}}else R=Tv(y,c,A)}else I!=="in"&&I!=="not-in"&&I!=="array-contains-any"||Sv(A,I),R=LP(m,d,A,I==="in"||I==="not-in");return sn.create(T,I,R)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function UP(n,e,t){const r=e,a=Ym("where",n);return Ed._create(a,r,t)}class Jm extends Xm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:_r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,c){let d=a;const m=c.getFlattenedFilters();for(const y of m)a0(d,y),d=xp(d,y)}(e._query,t),new ql(e.firestore,e.converter,xp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Tv(n,e,t){if(typeof(t=pr(t))=="string"){if(t==="")throw new Ne(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yE(e)&&t.indexOf("/")!==-1)throw new Ne(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zt.fromString(t));if(!je.isDocumentKey(r))throw new Ne(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uy(n,new je(r))}if(t instanceof Ur)return Uy(n,t._key);throw new Ne(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wd(t)}.`)}function Sv(n,e){if(!Array.isArray(n)||n.length===0)throw new Ne(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function a0(n,e){const t=function(a,c){for(const d of a)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ne(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jP{convertValue(e,t="none"){switch(Uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Wl(e,(a,c)=>{r[a]=this.convertValue(c,t)}),r}convertVectorValue(e){var t,r,a;const c=(a=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(d=>Qt(d.doubleValue));return new Km(c)}convertGeoPoint(e){return new Gm(Qt(e.latitude),Qt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const t=zo(e);return new Tn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zt.fromString(e);Bt(zE(r));const a=new ec(r.get(1),r.get(3)),c=new je(r.popFirst(5));return a.isEqual(t)||ks(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class l0 extends o0{constructor(e,t,r,a,c,d){super(e,t,r,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ym("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ch extends l0{data(e={}){return super.data(e)}}class WP{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ku(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ch(this._firestore,this._userDataWriter,r.key,r,new ku(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map(m=>{const y=new Ch(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ku(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}})}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const y=new Ch(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ku(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let T=-1,I=-1;return m.type!==0&&(T=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),I=d.indexOf(m.doc.key)),{type:HP(m.type),doc:y,oldIndex:T,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function HP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}class u0 extends jP{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ur(this.firestore,null,t)}}function qP(n,...e){var t,r,a;n=pr(n);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||Ev(e[d])||(c=e[d],d++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(Ev(e[d])){const A=e[d];e[d]=(t=A.next)===null||t===void 0?void 0:t.bind(A),e[d+1]=(r=A.error)===null||r===void 0?void 0:r.bind(A),e[d+2]=(a=A.complete)===null||a===void 0?void 0:a.bind(A)}let y,T,I;if(n instanceof Ur)T=Sh(n.firestore,Vp),I=Dm(n._key.path),y={next:A=>{e[d]&&e[d]($P(T,n,A))},error:e[d+1],complete:e[d+2]};else{const A=Sh(n,ql);T=Sh(A.firestore,Vp),I=A._query;const R=new u0(T);y={next:U=>{e[d]&&e[d](new WP(T,R,A,U))},error:e[d+1],complete:e[d+2]},FP(n._query)}return function(R,U,J,ne){const ie=new vP(ne),Ae=new rP(U,ie,J);return R.asyncQueue.enqueueAndForget(async()=>eP(await _v(R),Ae)),()=>{ie.eu(),R.asyncQueue.enqueueAndForget(async()=>tP(await _v(R),Ae))}}(AP(T),I,m,y)}function $P(n,e,t){const r=t.docs.get(e._key),a=new u0(n);return new l0(n,a,e._key,r,new ku(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Ul=a})(Wv),Wu(new Sl("firestore",(r,{instanceIdentifier:a,options:c})=>{const d=r.getProvider("app").getImmediate(),m=new Vp(new XI(r.getProvider("auth-internal")),new nx(r.getProvider("app-check-internal")),function(T,I){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new Ne(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(T.options.projectId,I)}(d,a),d);return c=Object.assign({useFetchStreams:t},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Mo(by,"4.7.5",e),Mo(by,"4.7.5","esm2017")})();const GP="AIzaSyAeTblY8O6XxWYrRfRl0Ar1TE-uOzPbF0M",KP="nightline-dce44.firebaseapp.com",ZP=void 0,QP="nightline-dce44",YP="nightline-dce44.firebasestorage.app",XP="610185897381",JP="1:610185897381:web:753908ea29d825a6e9344c",eR="G-EFV275663B",tR={apiKey:GP,authDomain:KP,databaseURL:ZP,projectId:QP,storageBucket:YP,messagingSenderId:XP,appId:JP,measurementId:eR},c0=ST().length?Hp():Hv(tR),nR=xP(c0),Mr=qI(c0);function iR(n,e){const t=Xe.useRef(e);Xe.useEffect(function(){e!==t.current&&n.attributionControl!=null&&(t.current!=null&&n.attributionControl.removeAttribution(t.current),e!=null&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}Pv();const rR=1;function sR(n){return Object.freeze({__version:rR,map:n})}const h0=Xe.createContext(null),oR=h0.Provider;function d0(){const n=Xe.useContext(h0);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function aR(n){function e(t,r){const{instance:a}=n(t).current;return Xe.useImperativeHandle(r,()=>a),null}return Xe.forwardRef(e)}function lR(n,e){const t=Xe.useRef();Xe.useEffect(function(){return e!=null&&n.instance.on(e),t.current=e,function(){t.current!=null&&n.instance.off(t.current),t.current=null}},[n,e])}function f0(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}var Du={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var uR=Du.exports,Cv;function cR(){return Cv||(Cv=1,function(n,e){(function(t,r){r(e)})(uR,function(t){var r="1.9.4";function a(s){var l,f,_,E;for(f=1,_=arguments.length;f<_;f++){E=arguments[f];for(l in E)s[l]=E[l]}return s}var c=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function d(s,l){var f=Array.prototype.slice;if(s.bind)return s.bind.apply(s,f.call(arguments,1));var _=f.call(arguments,2);return function(){return s.apply(l,_.length?_.concat(f.call(arguments)):arguments)}}var m=0;function y(s){return"_leaflet_id"in s||(s._leaflet_id=++m),s._leaflet_id}function T(s,l,f){var _,E,x,V;return V=function(){_=!1,E&&(x.apply(f,E),E=!1)},x=function(){_?E=arguments:(s.apply(f,arguments),setTimeout(V,l),_=!0)},x}function I(s,l,f){var _=l[1],E=l[0],x=_-E;return s===_&&f?s:((s-E)%x+x)%x+E}function A(){return!1}function R(s,l){if(l===!1)return s;var f=Math.pow(10,l===void 0?6:l);return Math.round(s*f)/f}function U(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function J(s){return U(s).split(/\s+/)}function ne(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?c(s.options):{});for(var f in l)s.options[f]=l[f];return s.options}function ie(s,l,f){var _=[];for(var E in s)_.push(encodeURIComponent(f?E.toUpperCase():E)+"="+encodeURIComponent(s[E]));return(!l||l.indexOf("?")===-1?"?":"&")+_.join("&")}var Ae=/\{ *([\w_ -]+) *\}/g;function De(s,l){return s.replace(Ae,function(f,_){var E=l[_];if(E===void 0)throw new Error("No value provided for variable "+f);return typeof E=="function"&&(E=E(l)),E})}var Pe=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function Ue(s,l){for(var f=0;f<s.length;f++)if(s[f]===l)return f;return-1}var tt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Oe(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var j=0;function D(s){var l=+new Date,f=Math.max(0,16-(l-j));return j=l+f,window.setTimeout(s,f)}var b=window.requestAnimationFrame||Oe("RequestAnimationFrame")||D,F=window.cancelAnimationFrame||Oe("CancelAnimationFrame")||Oe("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function O(s,l,f){if(f&&b===D)s.call(l);else return b.call(window,d(s,l))}function q(s){s&&F.call(window,s)}var M={__proto__:null,extend:a,create:c,bind:d,get lastId(){return m},stamp:y,throttle:T,wrapNum:I,falseFn:A,formatNum:R,trim:U,splitWords:J,setOptions:ne,getParamString:ie,template:De,isArray:Pe,indexOf:Ue,emptyImageUrl:tt,requestFn:b,cancelFn:F,requestAnimFrame:O,cancelAnimFrame:q};function we(){}we.extend=function(s){var l=function(){ne(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=l.__super__=this.prototype,_=c(f);_.constructor=l,l.prototype=_;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(l[E]=this[E]);return s.statics&&a(l,s.statics),s.includes&&(_e(s.includes),a.apply(null,[_].concat(s.includes))),a(_,s),delete _.statics,delete _.includes,_.options&&(_.options=f.options?c(f.options):{},a(_.options,s.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,V=_._initHooks.length;x<V;x++)_._initHooks[x].call(this)}},l},we.include=function(s){var l=this.prototype.options;return a(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},we.mergeOptions=function(s){return a(this.prototype.options,s),this},we.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),f=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function _e(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=Pe(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ae={on:function(s,l,f){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l);else{s=J(s);for(var E=0,x=s.length;E<x;E++)this._on(s[E],l,f)}return this},off:function(s,l,f){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var _ in s)this._off(_,s[_],l);else{s=J(s);for(var E=arguments.length===1,x=0,V=s.length;x<V;x++)E?this._off(s[x]):this._off(s[x],l,f)}return this},_on:function(s,l,f,_){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,f)===!1){f===this&&(f=void 0);var E={fn:l,ctx:f};_&&(E.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(E)}},_off:function(s,l,f){var _,E,x;if(this._events&&(_=this._events[s],!!_)){if(arguments.length===1){if(this._firingCount)for(E=0,x=_.length;E<x;E++)_[E].fn=A;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var V=this._listens(s,l,f);if(V!==!1){var K=_[V];this._firingCount&&(K.fn=A,this._events[s]=_=_.slice()),_.splice(V,1)}}},fire:function(s,l,f){if(!this.listens(s,f))return this;var _=a({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var E=this._events[s];if(E){this._firingCount=this._firingCount+1||1;for(var x=0,V=E.length;x<V;x++){var K=E[x],X=K.fn;K.once&&this.off(s,X,K.ctx),X.call(K.ctx||this,_)}this._firingCount--}}return f&&this._propagateEvent(_),this},listens:function(s,l,f,_){typeof s!="string"&&console.warn('"string" type argument expected');var E=l;typeof l!="function"&&(_=!!l,E=void 0,f=void 0);var x=this._events&&this._events[s];if(x&&x.length&&this._listens(s,E,f)!==!1)return!0;if(_){for(var V in this._eventParents)if(this._eventParents[V].listens(s,l,f,_))return!0}return!1},_listens:function(s,l,f){if(!this._events)return!1;var _=this._events[s]||[];if(!l)return!!_.length;f===this&&(f=void 0);for(var E=0,x=_.length;E<x;E++)if(_[E].fn===l&&_[E].ctx===f)return E;return!1},once:function(s,l,f){if(typeof s=="object")for(var _ in s)this._on(_,s[_],l,!0);else{s=J(s);for(var E=0,x=s.length;E<x;E++)this._on(s[E],l,f,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[y(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[y(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,a({layer:s.target,propagatedFrom:s.target},s),!0)}};ae.addEventListener=ae.on,ae.removeEventListener=ae.clearAllEventListeners=ae.off,ae.addOneTimeEventListener=ae.once,ae.fireEvent=ae.fire,ae.hasEventListeners=ae.listens;var ce=we.extend(ae);function B(s,l,f){this.x=f?Math.round(s):s,this.y=f?Math.round(l):l}var Z=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(s){return this.clone()._add(W(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(W(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new B(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new B(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Z(this.x),this.y=Z(this.y),this},distanceTo:function(s){s=W(s);var l=s.x-this.x,f=s.y-this.y;return Math.sqrt(l*l+f*f)},equals:function(s){return s=W(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=W(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+R(this.x)+", "+R(this.y)+")"}};function W(s,l,f){return s instanceof B?s:Pe(s)?new B(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new B(s.x,s.y):new B(s,l,f)}function k(s,l){if(s)for(var f=l?[s,l]:s,_=0,E=f.length;_<E;_++)this.extend(f[_])}k.prototype={extend:function(s){var l,f;if(!s)return this;if(s instanceof B||typeof s[0]=="number"||"x"in s)l=f=W(s);else if(s=G(s),l=s.min,f=s.max,!l||!f)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=f.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(s){return W((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return W(this.min.x,this.max.y)},getTopRight:function(){return W(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,f;return typeof s[0]=="number"||s instanceof B?s=W(s):s=G(s),s instanceof k?(l=s.min,f=s.max):l=f=s,l.x>=this.min.x&&f.x<=this.max.x&&l.y>=this.min.y&&f.y<=this.max.y},intersects:function(s){s=G(s);var l=this.min,f=this.max,_=s.min,E=s.max,x=E.x>=l.x&&_.x<=f.x,V=E.y>=l.y&&_.y<=f.y;return x&&V},overlaps:function(s){s=G(s);var l=this.min,f=this.max,_=s.min,E=s.max,x=E.x>l.x&&_.x<f.x,V=E.y>l.y&&_.y<f.y;return x&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,f=this.max,_=Math.abs(l.x-f.x)*s,E=Math.abs(l.y-f.y)*s;return G(W(l.x-_,l.y-E),W(f.x+_,f.y+E))},equals:function(s){return s?(s=G(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function G(s,l){return!s||s instanceof k?s:new k(s,l)}function oe(s,l){if(s)for(var f=l?[s,l]:s,_=0,E=f.length;_<E;_++)this.extend(f[_])}oe.prototype={extend:function(s){var l=this._southWest,f=this._northEast,_,E;if(s instanceof me)_=s,E=s;else if(s instanceof oe){if(_=s._southWest,E=s._northEast,!_||!E)return this}else return s?this.extend(de(s)||fe(s)):this;return!l&&!f?(this._southWest=new me(_.lat,_.lng),this._northEast=new me(E.lat,E.lng)):(l.lat=Math.min(_.lat,l.lat),l.lng=Math.min(_.lng,l.lng),f.lat=Math.max(E.lat,f.lat),f.lng=Math.max(E.lng,f.lng)),this},pad:function(s){var l=this._southWest,f=this._northEast,_=Math.abs(l.lat-f.lat)*s,E=Math.abs(l.lng-f.lng)*s;return new oe(new me(l.lat-_,l.lng-E),new me(f.lat+_,f.lng+E))},getCenter:function(){return new me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new me(this.getNorth(),this.getWest())},getSouthEast:function(){return new me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof me||"lat"in s?s=de(s):s=fe(s);var l=this._southWest,f=this._northEast,_,E;return s instanceof oe?(_=s.getSouthWest(),E=s.getNorthEast()):_=E=s,_.lat>=l.lat&&E.lat<=f.lat&&_.lng>=l.lng&&E.lng<=f.lng},intersects:function(s){s=fe(s);var l=this._southWest,f=this._northEast,_=s.getSouthWest(),E=s.getNorthEast(),x=E.lat>=l.lat&&_.lat<=f.lat,V=E.lng>=l.lng&&_.lng<=f.lng;return x&&V},overlaps:function(s){s=fe(s);var l=this._southWest,f=this._northEast,_=s.getSouthWest(),E=s.getNorthEast(),x=E.lat>l.lat&&_.lat<f.lat,V=E.lng>l.lng&&_.lng<f.lng;return x&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=fe(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(s,l){return s instanceof oe?s:new oe(s,l)}function me(s,l,f){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,f!==void 0&&(this.alt=+f)}me.prototype={equals:function(s,l){if(!s)return!1;s=de(s);var f=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return f<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+R(this.lat,s)+", "+R(this.lng,s)+")"},distanceTo:function(s){return be.distance(this,de(s))},wrap:function(){return be.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,f=l/Math.cos(Math.PI/180*this.lat);return fe([this.lat-l,this.lng-f],[this.lat+l,this.lng+f])},clone:function(){return new me(this.lat,this.lng,this.alt)}};function de(s,l,f){return s instanceof me?s:Pe(s)&&typeof s[0]!="object"?s.length===3?new me(s[0],s[1],s[2]):s.length===2?new me(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new me(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new me(s,l,f)}var Ve={latLngToPoint:function(s,l){var f=this.projection.project(s),_=this.scale(l);return this.transformation._transform(f,_)},pointToLatLng:function(s,l){var f=this.scale(l),_=this.transformation.untransform(s,f);return this.projection.unproject(_)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,f=this.scale(s),_=this.transformation.transform(l.min,f),E=this.transformation.transform(l.max,f);return new k(_,E)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?I(s.lng,this.wrapLng,!0):s.lng,f=this.wrapLat?I(s.lat,this.wrapLat,!0):s.lat,_=s.alt;return new me(f,l,_)},wrapLatLngBounds:function(s){var l=s.getCenter(),f=this.wrapLatLng(l),_=l.lat-f.lat,E=l.lng-f.lng;if(_===0&&E===0)return s;var x=s.getSouthWest(),V=s.getNorthEast(),K=new me(x.lat-_,x.lng-E),X=new me(V.lat-_,V.lng-E);return new oe(K,X)}},be=a({},Ve,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var f=Math.PI/180,_=s.lat*f,E=l.lat*f,x=Math.sin((l.lat-s.lat)*f/2),V=Math.sin((l.lng-s.lng)*f/2),K=x*x+Math.cos(_)*Math.cos(E)*V*V,X=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*X}}),Ke=6378137,st={R:Ke,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,f=this.MAX_LATITUDE,_=Math.max(Math.min(f,s.lat),-f),E=Math.sin(_*l);return new B(this.R*s.lng*l,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(s){var l=180/Math.PI;return new me((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Ke*Math.PI;return new k([-s,-s],[s,s])}()};function Ut(s,l,f,_){if(Pe(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=f,this._d=_}Ut.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new B((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function hn(s,l,f,_){return new Ut(s,l,f,_)}var Sn=a({},be,{code:"EPSG:3857",projection:st,transformation:function(){var s=.5/(Math.PI*st.R);return hn(s,.5,-s,.5)}()}),jr=a({},Sn,{code:"EPSG:900913"});function Wr(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ds(s,l){var f="",_,E,x,V,K,X;for(_=0,x=s.length;_<x;_++){for(K=s[_],E=0,V=K.length;E<V;E++)X=K[E],f+=(E?"L":"M")+X.x+" "+X.y;f+=l?xe.svg?"z":"x":""}return f||"M0 0"}var Hr=document.documentElement.style,qr="ActiveXObject"in window,Ls=qr&&!document.addEventListener,Ni="msLaunchUri"in navigator&&!("documentMode"in document),wi=dn("webkit"),Ns=dn("android"),$r=dn("android 2")||dn("android 3"),Ms=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ho=Ns&&dn("Google")&&Ms<537&&!("AudioNode"in window),Mt=!!window.opera,jt=!Ni&&dn("chrome"),Mi=dn("gecko")&&!wi&&!Mt&&!qr,qo=!jt&&dn("safari"),Qi=dn("phantom"),gr="OTransition"in Hr,Gr=navigator.platform.indexOf("Win")===0,bs=qr&&"transition"in Hr,Kr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$r,Os="MozPerspective"in Hr,$o=!window.L_DISABLE_3D&&(bs||Kr||Os)&&!gr&&!Qi,Yi=typeof orientation<"u"||dn("mobile"),Zr=Yi&&wi,Vs=Yi&&Kr,Qr=!window.PointerEvent&&window.MSPointerEvent,$n=!!(window.PointerEvent||Qr),Ei="ontouchstart"in window||!!window.TouchEvent,Fs=!window.L_NO_TOUCH&&(Ei||$n),bi=Yi&&Mt,Go=Yi&&Mi,Yr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ko=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",A,l),window.removeEventListener("testPassiveEventSupport",A,l)}catch{}return s}(),Xi=function(){return!!document.createElement("canvas").getContext}(),Xr=!!(document.createElementNS&&Wr("svg").createSVGRect),bt=!!Xr&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),zs=!Xr&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Ti=navigator.platform.indexOf("Mac")===0,Jr=navigator.platform.indexOf("Linux")===0;function dn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var xe={ie:qr,ielt9:Ls,edge:Ni,webkit:wi,android:Ns,android23:$r,androidStock:Ho,opera:Mt,chrome:jt,gecko:Mi,safari:qo,phantom:Qi,opera12:gr,win:Gr,ie3d:bs,webkit3d:Kr,gecko3d:Os,any3d:$o,mobile:Yi,mobileWebkit:Zr,mobileWebkit3d:Vs,msPointer:Qr,pointer:$n,touch:Fs,touchNative:Ei,mobileOpera:bi,mobileGecko:Go,retina:Yr,passiveEvents:Ko,canvas:Xi,svg:Xr,vml:zs,inlineSvg:bt,mac:Ti,linux:Jr},ei=xe.msPointer?"MSPointerDown":"pointerdown",Bs=xe.msPointer?"MSPointerMove":"pointermove",Da=xe.msPointer?"MSPointerUp":"pointerup",es=xe.msPointer?"MSPointerCancel":"pointercancel",Us={touchstart:ei,touchmove:Bs,touchend:Da,touchcancel:es},ti={touchstart:St,touchmove:qs,touchend:qs,touchcancel:qs},ni={},ii=!1;function La(s,l,f){return l==="touchstart"&&Na(),ti[l]?(f=ti[l].bind(this,f),s.addEventListener(Us[l],f,!1),f):(console.warn("wrong event specified:",l),A)}function Zo(s,l,f){if(!Us[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Us[l],f,!1)}function js(s){ni[s.pointerId]=s}function Ws(s){ni[s.pointerId]&&(ni[s.pointerId]=s)}function Hs(s){delete ni[s.pointerId]}function Na(){ii||(document.addEventListener(ei,js,!0),document.addEventListener(Bs,Ws,!0),document.addEventListener(Da,Hs,!0),document.addEventListener(es,Hs,!0),ii=!0)}function qs(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var f in ni)l.touches.push(ni[f]);l.changedTouches=[l],s(l)}}function St(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Tt(l),qs(s,l)}function Ma(s){var l={},f,_;for(_ in s)f=s[_],l[_]=f&&f.bind?f.bind(s):f;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var ts=200;function yr(s,l){s.addEventListener("dblclick",l);var f=0,_;function E(x){if(x.detail!==1){_=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var V=Vi(x);if(!(V.some(function(X){return X instanceof HTMLLabelElement&&X.attributes.for})&&!V.some(function(X){return X instanceof HTMLInputElement||X instanceof HTMLSelectElement}))){var K=Date.now();K-f<=ts?(_++,_===2&&l(Ma(x))):_=1,f=K}}}return s.addEventListener("click",E),{dblclick:l,simDblclick:E}}function ri(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var ns=Ci(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),vr=Ci(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),wr=vr==="webkitTransition"||vr==="OTransition"?vr+"End":"transitionend";function Ln(s){return typeof s=="string"?document.getElementById(s):s}function Er(s,l){var f=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!f||f==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(s,null);f=_?_[l]:null}return f==="auto"?null:f}function He(s,l,f){var _=document.createElement(s);return _.className=l||"",f&&f.appendChild(_),_}function wt(s){var l=s.parentNode;l&&l.removeChild(s)}function is(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Ji(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Si(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Tr(s,l){if(s.classList!==void 0)return s.classList.contains(l);var f=si(s);return f.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(f)}function We(s,l){if(s.classList!==void 0)for(var f=J(l),_=0,E=f.length;_<E;_++)s.classList.add(f[_]);else if(!Tr(s,l)){var x=si(s);Qo(s,(x?x+" ":"")+l)}}function Et(s,l){s.classList!==void 0?s.classList.remove(l):Qo(s,U((" "+si(s)+" ").replace(" "+l+" "," ")))}function Qo(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function si(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function At(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&rs(s,l)}function rs(s,l){var f=!1,_="DXImageTransform.Microsoft.Alpha";try{f=s.filters.item(_)}catch{if(l===1)return}l=Math.round(l*100),f?(f.Enabled=l!==100,f.Opacity=l):s.style.filter+=" progid:"+_+"(opacity="+l+")"}function Ci(s){for(var l=document.documentElement.style,f=0;f<s.length;f++)if(s[f]in l)return s[f];return!1}function Nn(s,l,f){var _=l||new B(0,0);s.style[ns]=(xe.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(f?" scale("+f+")":"")}function qe(s,l){s._leaflet_pos=l,xe.any3d?Nn(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Mn(s){return s._leaflet_pos||new B(0,0)}var Je,oi,$s;if("onselectstart"in document)Je=function(){Me(window,"selectstart",Tt)},oi=function(){gt(window,"selectstart",Tt)};else{var Oi=Ci(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Je=function(){if(Oi){var s=document.documentElement.style;$s=s[Oi],s[Oi]="none"}},oi=function(){Oi&&(document.documentElement.style[Oi]=$s,$s=void 0)}}function Gs(){Me(window,"dragstart",Tt)}function Ks(){gt(window,"dragstart",Tt)}var ss,os;function ai(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Wt(),ss=s,os=s.style.outlineStyle,s.style.outlineStyle="none",Me(window,"keydown",Wt))}function Wt(){ss&&(ss.style.outlineStyle=os,ss=void 0,os=void 0,gt(window,"keydown",Wt))}function li(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Gn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Sr={__proto__:null,TRANSFORM:ns,TRANSITION:vr,TRANSITION_END:wr,get:Ln,getStyle:Er,create:He,remove:wt,empty:is,toFront:Ji,toBack:Si,hasClass:Tr,addClass:We,removeClass:Et,setClass:Qo,getClass:si,setOpacity:At,testProp:Ci,setTransform:Nn,setPosition:qe,getPosition:Mn,get disableTextSelection(){return Je},get enableTextSelection(){return oi},disableImageDrag:Gs,enableImageDrag:Ks,preventOutline:ai,restoreOutline:Wt,getSizedParentNode:li,getScale:Gn};function Me(s,l,f,_){if(l&&typeof l=="object")for(var E in l)Xo(s,E,l[E],f);else{l=J(l);for(var x=0,V=l.length;x<V;x++)Xo(s,l[x],f,_)}return this}var Kt="_leaflet_events";function gt(s,l,f,_){if(arguments.length===1)Yo(s),delete s[Kt];else if(l&&typeof l=="object")for(var E in l)Zs(s,E,l[E],f);else if(l=J(l),arguments.length===2)Yo(s,function(K){return Ue(l,K)!==-1});else for(var x=0,V=l.length;x<V;x++)Zs(s,l[x],f,_);return this}function Yo(s,l){for(var f in s[Kt]){var _=f.split(/\d/)[0];(!l||l(_))&&Zs(s,_,null,null,f)}}var fn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xo(s,l,f,_){var E=l+y(f)+(_?"_"+y(_):"");if(s[Kt]&&s[Kt][E])return this;var x=function(K){return f.call(_||s,K||window.event)},V=x;!xe.touchNative&&xe.pointer&&l.indexOf("touch")===0?x=La(s,l,x):xe.touch&&l==="dblclick"?x=yr(s,x):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(fn[l]||l,x,xe.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(x=function(K){K=K||window.event,as(s,K)&&V(K)},s.addEventListener(fn[l],x,!1)):s.addEventListener(l,V,!1):s.attachEvent("on"+l,x),s[Kt]=s[Kt]||{},s[Kt][E]=x}function Zs(s,l,f,_,E){E=E||l+y(f)+(_?"_"+y(_):"");var x=s[Kt]&&s[Kt][E];if(!x)return this;!xe.touchNative&&xe.pointer&&l.indexOf("touch")===0?Zo(s,l,x):xe.touch&&l==="dblclick"?ri(s,x):"removeEventListener"in s?s.removeEventListener(fn[l]||l,x,!1):s.detachEvent("on"+l,x),s[Kt][E]=null}function Cn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function er(s){return Xo(s,"wheel",Cn),this}function Cr(s){return Me(s,"mousedown touchstart dblclick contextmenu",Cn),s._leaflet_disable_click=!0,this}function Tt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function on(s){return Tt(s),Cn(s),this}function Vi(s){if(s.composedPath)return s.composedPath();for(var l=[],f=s.target;f;)l.push(f),f=f.parentNode;return l}function tr(s,l){if(!l)return new B(s.clientX,s.clientY);var f=Gn(l),_=f.boundingClientRect;return new B((s.clientX-_.left)/f.x-l.clientLeft,(s.clientY-_.top)/f.y-l.clientTop)}var Pt=xe.linux&&xe.chrome?window.devicePixelRatio:xe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ba(s){return xe.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Pt:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function as(s,l){var f=l.relatedTarget;if(!f)return!0;try{for(;f&&f!==s;)f=f.parentNode}catch{return!1}return f!==s}var ls={__proto__:null,on:Me,off:gt,stopPropagation:Cn,disableScrollPropagation:er,disableClickPropagation:Cr,preventDefault:Tt,stop:on,getPropagationPath:Vi,getMousePosition:tr,getWheelDelta:ba,isExternalTarget:as,addListener:Me,removeListener:gt},us=ce.extend({run:function(s,l,f,_){this.stop(),this._el=s,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=Mn(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,f=this._duration*1e3;l<f?this._runFrame(this._easeOut(l/f),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var f=this._startPos.add(this._offset.multiplyBy(s));l&&f._round(),qe(this._el,f),this.fire("step")},_complete:function(){q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),et=ce.extend({options:{crs:Sn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=ne(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(de(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=vr&&xe.any3d&&!xe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Me(this._proxy,wr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,f){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(de(s),l,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=a({animate:f.animate},f.zoom),f.pan=a({animate:f.animate,duration:f.duration},f.pan));var _=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,f.zoom):this._tryAnimatedPan(s,f.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,f.pan&&f.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(xe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(xe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,f){var _=this.getZoomScale(l),E=this.getSize().divideBy(2),x=s instanceof B?s:this.latLngToContainerPoint(s),V=x.subtract(E).multiplyBy(1-1/_),K=this.containerPointToLatLng(E.add(V));return this.setView(K,l,{zoom:f})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():fe(s);var f=W(l.paddingTopLeft||l.padding||[0,0]),_=W(l.paddingBottomRight||l.padding||[0,0]),E=this.getBoundsZoom(s,!1,f.add(_));if(E=typeof l.maxZoom=="number"?Math.min(l.maxZoom,E):E,E===1/0)return{center:s.getCenter(),zoom:E};var x=_.subtract(f).divideBy(2),V=this.project(s.getSouthWest(),E),K=this.project(s.getNorthEast(),E),X=this.unproject(V.add(K).divideBy(2).add(x),E);return{center:X,zoom:E}},fitBounds:function(s,l){if(s=fe(s),!s.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(s,l);return this.setView(f.center,f.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=W(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new us,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){We(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,f,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,f){if(f=f||{},f.animate===!1||!xe.any3d)return this.setView(s,l,f);this._stop();var _=this.project(this.getCenter()),E=this.project(s),x=this.getSize(),V=this._zoom;s=de(s),l=l===void 0?V:l;var K=Math.max(x.x,x.y),X=K*this.getZoomScale(V,l),se=E.distanceTo(_)||1,Ee=1.42,Fe=Ee*Ee;function Ye(vt){var _o=vt?-1:1,xd=vt?X:K,Ad=X*X-K*K+_o*Fe*Fe*se*se,_s=2*xd*Fe*se,gs=Ad/_s,ys=Math.sqrt(gs*gs+1)-gs,Za=ys<1e-9?-18:Math.log(ys);return Za}function an(vt){return(Math.exp(vt)-Math.exp(-vt))/2}function tn(vt){return(Math.exp(vt)+Math.exp(-vt))/2}function Qn(vt){return an(vt)/tn(vt)}var Vn=Ye(0);function po(vt){return K*(tn(Vn)/tn(Vn+Ee*vt))}function ru(vt){return K*(tn(Vn)*Qn(Vn+Ee*vt)-an(Vn))/Fe}function Rr(vt){return 1-Math.pow(1-vt,1.5)}var Tc=Date.now(),ms=(Ye(1)-Vn)/Ee,ji=f.duration?1e3*f.duration:1e3*ms*.8;function mo(){var vt=(Date.now()-Tc)/ji,_o=Rr(vt)*ms;vt<=1?(this._flyToFrame=O(mo,this),this._move(this.unproject(_.add(E.subtract(_).multiplyBy(ru(_o)/se)),V),this.getScaleZoom(K/po(_o),V),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),mo.call(this),this},flyToBounds:function(s,l){var f=this._getBoundsCenterZoom(s,l);return this.flyTo(f.center,f.zoom,l)},setMaxBounds:function(s){return s=fe(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var f=this.getCenter(),_=this._limitCenter(f,this._zoom,fe(s));return f.equals(_)||this.panTo(_,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var f=W(l.paddingTopLeft||l.padding||[0,0]),_=W(l.paddingBottomRight||l.padding||[0,0]),E=this.project(this.getCenter()),x=this.project(s),V=this.getPixelBounds(),K=G([V.min.add(f),V.max.subtract(_)]),X=K.getSize();if(!K.contains(x)){this._enforcingBounds=!0;var se=x.subtract(K.getCenter()),Ee=K.extend(x).getSize().subtract(X);E.x+=se.x<0?-Ee.x:Ee.x,E.y+=se.y<0?-Ee.y:Ee.y,this.panTo(this.unproject(E),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=a({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),_=l.divideBy(2).round(),E=f.divideBy(2).round(),x=_.subtract(E);return!x.x&&!x.y?this:(s.animate&&s.pan?this.panBy(x):(s.pan&&this._rawPanBy(x),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=a({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=d(this._handleGeolocationResponse,this),f=d(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,f,s):navigator.geolocation.getCurrentPosition(l,f,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,f=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,f=s.coords.longitude,_=new me(l,f),E=_.toBounds(s.coords.accuracy*2),x=this._locateOptions;if(x.setView){var V=this.getBoundsZoom(E);this.setView(_,x.maxZoom?Math.min(V,x.maxZoom):V)}var K={latlng:_,bounds:E,timestamp:s.timestamp};for(var X in s.coords)typeof s.coords[X]=="number"&&(K[X]=s.coords[X]);this.fire("locationfound",K)}},addHandler:function(s,l){if(!l)return this;var f=this[s]=new l(this);return this._handlers.push(f),this.options[s]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)wt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var f="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),_=He("div",f,l||this._mapPane);return s&&(this._panes[s]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),f=this.unproject(s.getTopRight());return new oe(l,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,f){s=fe(s),f=W(f||[0,0]);var _=this.getZoom()||0,E=this.getMinZoom(),x=this.getMaxZoom(),V=s.getNorthWest(),K=s.getSouthEast(),X=this.getSize().subtract(f),se=G(this.project(K,_),this.project(V,_)).getSize(),Ee=xe.any3d?this.options.zoomSnap:1,Fe=X.x/se.x,Ye=X.y/se.y,an=l?Math.max(Fe,Ye):Math.min(Fe,Ye);return _=this.getScaleZoom(an,_),Ee&&(_=Math.round(_/(Ee/100))*(Ee/100),_=l?Math.ceil(_/Ee)*Ee:Math.floor(_/Ee)*Ee),Math.max(E,Math.min(x,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var f=this._getTopLeftPoint(s,l);return new k(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var f=this.options.crs;return l=l===void 0?this._zoom:l,f.scale(s)/f.scale(l)},getScaleZoom:function(s,l){var f=this.options.crs;l=l===void 0?this._zoom:l;var _=f.zoom(s*f.scale(l));return isNaN(_)?1/0:_},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(de(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(W(s),l)},layerPointToLatLng:function(s){var l=W(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(de(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(de(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(fe(s))},distance:function(s,l){return this.options.crs.distance(de(s),de(l))},containerPointToLayerPoint:function(s){return W(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return W(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(W(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(s)))},mouseEventToContainerPoint:function(s){return tr(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Ln(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Me(l,"scroll",this._onScroll,this),this._containerId=y(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&xe.any3d,We(s,"leaflet-container"+(xe.touch?" leaflet-touch":"")+(xe.retina?" leaflet-retina":"")+(xe.ielt9?" leaflet-oldie":"")+(xe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Er(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),qe(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(We(s.markerPane,"leaflet-zoom-hide"),We(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,f){qe(this._mapPane,new B(0,0));var _=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var E=this._zoom!==l;this._moveStart(E,f)._move(s,l)._moveEnd(E),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,f,_){l===void 0&&(l=this._zoom);var E=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),_?f&&f.pinch&&this.fire("zoom",f):((E||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){qe(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[y(this._container)]=this;var l=s?gt:Me;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),xe.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){q(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var f=[],_,E=l==="mouseout"||l==="mouseover",x=s.target||s.srcElement,V=!1;x;){if(_=this._targets[y(x)],_&&(l==="click"||l==="preclick")&&this._draggableMoved(_)){V=!0;break}if(_&&_.listens(l,!0)&&(E&&!as(x,s)||(f.push(_),E))||x===this._container)break;x=x.parentNode}return!f.length&&!V&&!E&&this.listens(l,!0)&&(f=[this]),f},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var f=s.type;f==="mousedown"&&ai(l),this._fireDOMEvent(s,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,f){if(s.type==="click"){var _=a({},s);_.type="preclick",this._fireDOMEvent(_,_.type,f)}var E=this._findEventTargets(s,l);if(f){for(var x=[],V=0;V<f.length;V++)f[V].listens(l,!0)&&x.push(f[V]);E=x.concat(E)}if(E.length){l==="contextmenu"&&Tt(s);var K=E[0],X={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var se=K.getLatLng&&(!K._radius||K._radius<=10);X.containerPoint=se?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(s),X.layerPoint=this.containerPointToLayerPoint(X.containerPoint),X.latlng=se?K.getLatLng():this.layerPointToLatLng(X.layerPoint)}for(V=0;V<E.length;V++)if(E[V].fire(l,X,!0),X.originalEvent._stopped||E[V].options.bubblingMouseEvents===!1&&Ue(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Mn(this._mapPane)||new B(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var f=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var f=this.getSize()._divideBy(2);return this.project(s,l)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,f){var _=this._getNewPixelOrigin(f,l);return this.project(s,l)._subtract(_)},_latLngBoundsToNewLayerBounds:function(s,l,f){var _=this._getNewPixelOrigin(f,l);return G([this.project(s.getSouthWest(),l)._subtract(_),this.project(s.getNorthWest(),l)._subtract(_),this.project(s.getSouthEast(),l)._subtract(_),this.project(s.getNorthEast(),l)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,f){if(!f)return s;var _=this.project(s,l),E=this.getSize().divideBy(2),x=new k(_.subtract(E),_.add(E)),V=this._getBoundsOffset(x,f,l);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?s:this.unproject(_.add(V),l)},_limitOffset:function(s,l){if(!l)return s;var f=this.getPixelBounds(),_=new k(f.min.add(s),f.max.add(s));return s.add(this._getBoundsOffset(_,l))},_getBoundsOffset:function(s,l,f){var _=G(this.project(l.getNorthEast(),f),this.project(l.getSouthWest(),f)),E=_.min.subtract(s.min),x=_.max.subtract(s.max),V=this._rebound(E.x,-x.x),K=this._rebound(E.y,-x.y);return new B(V,K)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),f=this.getMaxZoom(),_=xe.any3d?this.options.zoomSnap:1;return _&&(s=Math.round(s/_)*_),Math.max(l,Math.min(f,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Et(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var f=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,l),!0)},_createAnimProxy:function(){var s=this._proxy=He("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var f=ns,_=this._proxy.style[f];Nn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),_===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Nn(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(l),E=this._getCenterOffset(s)._divideBy(1-1/_);return f.animate!==!0&&!this.getSize().contains(E)?!1:(O(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,f,_){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,We(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Et(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Kn(s,l){return new et(s,l)}var pn=we.extend({options:{position:"topright"},initialize:function(s){ne(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),f=this.getPosition(),_=s._controlCorners[f];return We(l,"leaflet-control"),f.indexOf("bottom")!==-1?_.insertBefore(l,_.firstChild):_.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Xt=function(s){return new pn(s)};et.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",f=this._controlContainer=He("div",l+"control-container",this._container);function _(E,x){var V=l+E+" "+l+x;s[E+x]=He("div",V,f)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)wt(this._controlCorners[s]);wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Qs=pn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,f,_){return f<_?-1:_<f?1:0}},initialize:function(s,l,f){ne(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in s)this._addLayer(s[_],_);for(_ in l)this._addLayer(l[_],_,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return pn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(y(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){We(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(We(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Et(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Et(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=He("div",s),f=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Cr(l),er(l);var _=this._section=He("section",s+"-list");f&&(this._map.on("click",this.collapse,this),Me(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=He("a",s+"-toggle",l);E.href="#",E.title="Layers",E.setAttribute("role","button"),Me(E,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){Tt(x),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=He("div",s+"-base",_),this._separator=He("div",s+"-separator",_),this._overlaysList=He("div",s+"-overlays",_),l.appendChild(_)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&y(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,f){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:f}),this.options.sortLayers&&this._layers.sort(d(function(_,E){return this.options.sortFunction(_.layer,E.layer,_.name,E.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;is(this._baseLayersList),is(this._overlaysList),this._layerControlInputs=[];var s,l,f,_,E=0;for(f=0;f<this._layers.length;f++)_=this._layers[f],this._addItem(_),l=l||_.overlay,s=s||!_.overlay,E+=_.overlay?0:1;return this.options.hideSingleBase&&(s=s&&E>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(y(s.target)),f=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;f&&this._map.fire(f,l)},_createRadioElement:function(s,l){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=f,_.firstChild},_addItem:function(s){var l=document.createElement("label"),f=this._map.hasLayer(s.layer),_;s.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=f):_=this._createRadioElement("leaflet-base-layers_"+y(this),f),this._layerControlInputs.push(_),_.layerId=y(s.layer),Me(_,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+s.name;var x=document.createElement("span");l.appendChild(x),x.appendChild(_),x.appendChild(E);var V=s.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,f,_=[],E=[];this._handlingClick=!0;for(var x=s.length-1;x>=0;x--)l=s[x],f=this._getLayer(l.layerId).layer,l.checked?_.push(f):l.checked||E.push(f);for(x=0;x<E.length;x++)this._map.hasLayer(E[x])&&this._map.removeLayer(E[x]);for(x=0;x<_.length;x++)this._map.hasLayer(_[x])||this._map.addLayer(_[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,f,_=this._map.getZoom(),E=s.length-1;E>=0;E--)l=s[E],f=this._getLayer(l.layerId).layer,l.disabled=f.options.minZoom!==void 0&&_<f.options.minZoom||f.options.maxZoom!==void 0&&_>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Me(s,"click",Tt),this.expand();var l=this;setTimeout(function(){gt(s,"click",Tt),l._preventClick=!1})}}),Ys=function(s,l,f){return new Qs(s,l,f)},ui=pn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",f=He("div",l+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,l+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,l+"-out",f,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,f,_,E){var x=He("a",f,_);return x.innerHTML=s,x.href="#",x.title=l,x.setAttribute("role","button"),x.setAttribute("aria-label",l),Cr(x),Me(x,"click",on),Me(x,"click",E,this),Me(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Et(this._zoomInButton,l),Et(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(We(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(We(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});et.mergeOptions({zoomControl:!0}),et.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ui,this.addControl(this.zoomControl))});var Jo=function(s){return new ui(s)},Jt=pn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",f=He("div",l),_=this.options;return this._addScales(_,l+"-line",f),s.on(_.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),f},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,f){s.metric&&(this._mScale=He("div",l,f)),s.imperial&&(this._iScale=He("div",l,f))},_update:function(){var s=this._map,l=s.getSize().y/2,f=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(f)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),f=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,f,l/s)},_updateImperial:function(s){var l=s*3.2808399,f,_,E;l>5280?(f=l/5280,_=this._getRoundNum(f),this._updateScale(this._iScale,_+" mi",_/f)):(E=this._getRoundNum(l),this._updateScale(this._iScale,E+" ft",E/l))},_updateScale:function(s,l,f){s.style.width=Math.round(this.options.maxWidth*f)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),f=s/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,l*f}}),Ii=function(s){return new Jt(s)},Xs='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ci=pn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(xe.inlineSvg?Xs+" ":"")+"Leaflet</a>"},initialize:function(s){ne(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=He("div","leaflet-control-attribution"),Cr(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var f=[];this.options.prefix&&f.push(this.options.prefix),s.length&&f.push(s.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});et.mergeOptions({attributionControl:!0}),et.addInitHook(function(){this.options.attributionControl&&new ci().addTo(this)});var $l=function(s){return new ci(s)};pn.Layers=Qs,pn.Zoom=ui,pn.Scale=Jt,pn.Attribution=ci,Xt.layers=Ys,Xt.zoom=Jo,Xt.scale=Ii,Xt.attribution=$l;var In=we.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});In.addTo=function(s,l){return s.addHandler(l,this),this};var nr={Events:ae},ir=xe.touch?"touchstart mousedown":"mousedown",bn=ce.extend({options:{clickTolerance:3},initialize:function(s,l,f,_){ne(this,_),this._element=s,this._dragStartTarget=l||s,this._preventOutline=f},enable:function(){this._enabled||(Me(this._dragStartTarget,ir,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(bn._dragging===this&&this.finishDrag(!0),gt(this._dragStartTarget,ir,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Tr(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){bn._dragging===this&&this.finishDrag();return}if(!(bn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(bn._dragging=this,this._preventOutline&&ai(this._element),Gs(),Je(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,f=li(this._element);this._startPoint=new B(l.clientX,l.clientY),this._startPos=Mn(this._element),this._parentScale=Gn(f);var _=s.type==="mousedown";Me(document,_?"mousemove":"touchmove",this._onMove,this),Me(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,f=new B(l.clientX,l.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Tt(s),this._moved||(this.fire("dragstart"),this._moved=!0,We(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),We(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),qe(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Et(document.body,"leaflet-dragging"),this._lastTarget&&(Et(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),gt(document,"mousemove touchmove",this._onMove,this),gt(document,"mouseup touchend touchcancel",this._onUp,this),Ks(),oi();var l=this._moved&&this._moving;this._moving=!1,bn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function cs(s,l,f){var _,E=[1,4,2,8],x,V,K,X,se,Ee,Fe,Ye;for(x=0,Ee=s.length;x<Ee;x++)s[x]._code=Fi(s[x],l);for(K=0;K<4;K++){for(Fe=E[K],_=[],x=0,Ee=s.length,V=Ee-1;x<Ee;V=x++)X=s[x],se=s[V],X._code&Fe?se._code&Fe||(Ye=en(se,X,Fe,l,f),Ye._code=Fi(Ye,l),_.push(Ye)):(se._code&Fe&&(Ye=en(se,X,Fe,l,f),Ye._code=Fi(Ye,l),_.push(Ye)),_.push(X));s=_}return s}function Js(s,l){var f,_,E,x,V,K,X,se,Ee;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Fe=de([0,0]),Ye=fe(s),an=Ye.getNorthWest().distanceTo(Ye.getSouthWest())*Ye.getNorthEast().distanceTo(Ye.getNorthWest());an<1700&&(Fe=eo(s));var tn=s.length,Qn=[];for(f=0;f<tn;f++){var Vn=de(s[f]);Qn.push(l.project(de([Vn.lat-Fe.lat,Vn.lng-Fe.lng])))}for(K=X=se=0,f=0,_=tn-1;f<tn;_=f++)E=Qn[f],x=Qn[_],V=E.y*x.x-x.y*E.x,X+=(E.x+x.x)*V,se+=(E.y+x.y)*V,K+=V*3;K===0?Ee=Qn[0]:Ee=[X/K,se/K];var po=l.unproject(W(Ee));return de([po.lat+Fe.lat,po.lng+Fe.lng])}function eo(s){for(var l=0,f=0,_=0,E=0;E<s.length;E++){var x=de(s[E]);l+=x.lat,f+=x.lng,_++}return de([l/_,f/_])}var to={__proto__:null,clipPolygon:cs,polygonCenter:Js,centroid:eo};function hs(s,l){if(!l||!s.length)return s.slice();var f=l*l;return s=Va(s,f),s=Oa(s,f),s}function ea(s,l,f){return Math.sqrt(On(s,l,f,!0))}function rr(s,l,f){return On(s,l,f)}function Oa(s,l){var f=s.length,_=typeof Uint8Array<"u"?Uint8Array:Array,E=new _(f);E[0]=E[f-1]=1,no(s,E,l,0,f-1);var x,V=[];for(x=0;x<f;x++)E[x]&&V.push(s[x]);return V}function no(s,l,f,_,E){var x=0,V,K,X;for(K=_+1;K<=E-1;K++)X=On(s[K],s[_],s[E],!0),X>x&&(V=K,x=X);x>f&&(l[V]=1,no(s,l,f,_,V),no(s,l,f,V,E))}function Va(s,l){for(var f=[s[0]],_=1,E=0,x=s.length;_<x;_++)Fa(s[_],s[E])>l&&(f.push(s[_]),E=_);return E<x-1&&f.push(s[x-1]),f}var io;function ds(s,l,f,_,E){var x=_?io:Fi(s,f),V=Fi(l,f),K,X,se;for(io=V;;){if(!(x|V))return[s,l];if(x&V)return!1;K=x||V,X=en(s,l,K,f,E),se=Fi(X,f),K===x?(s=X,x=se):(l=X,V=se)}}function en(s,l,f,_,E){var x=l.x-s.x,V=l.y-s.y,K=_.min,X=_.max,se,Ee;return f&8?(se=s.x+x*(X.y-s.y)/V,Ee=X.y):f&4?(se=s.x+x*(K.y-s.y)/V,Ee=K.y):f&2?(se=X.x,Ee=s.y+V*(X.x-s.x)/x):f&1&&(se=K.x,Ee=s.y+V*(K.x-s.x)/x),new B(se,Ee,E)}function Fi(s,l){var f=0;return s.x<l.min.x?f|=1:s.x>l.max.x&&(f|=2),s.y<l.min.y?f|=4:s.y>l.max.y&&(f|=8),f}function Fa(s,l){var f=l.x-s.x,_=l.y-s.y;return f*f+_*_}function On(s,l,f,_){var E=l.x,x=l.y,V=f.x-E,K=f.y-x,X=V*V+K*K,se;return X>0&&(se=((s.x-E)*V+(s.y-x)*K)/X,se>1?(E=f.x,x=f.y):se>0&&(E+=V*se,x+=K*se)),V=s.x-E,K=s.y-x,_?V*V+K*K:new B(E,x)}function h(s){return!Pe(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function v(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(s)}function S(s,l){var f,_,E,x,V,K,X,se;if(!s||s.length===0)throw new Error("latlngs not passed");h(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ee=de([0,0]),Fe=fe(s),Ye=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());Ye<1700&&(Ee=eo(s));var an=s.length,tn=[];for(f=0;f<an;f++){var Qn=de(s[f]);tn.push(l.project(de([Qn.lat-Ee.lat,Qn.lng-Ee.lng])))}for(f=0,_=0;f<an-1;f++)_+=tn[f].distanceTo(tn[f+1])/2;if(_===0)se=tn[0];else for(f=0,x=0;f<an-1;f++)if(V=tn[f],K=tn[f+1],E=V.distanceTo(K),x+=E,x>_){X=(x-_)/E,se=[K.x-X*(K.x-V.x),K.y-X*(K.y-V.y)];break}var Vn=l.unproject(W(se));return de([Vn.lat+Ee.lat,Vn.lng+Ee.lng])}var P={__proto__:null,simplify:hs,pointToSegmentDistance:ea,closestPointOnSegment:rr,clipSegment:ds,_getEdgeIntersection:en,_getBitCode:Fi,_sqClosestPointOnSegment:On,isFlat:h,_flat:v,polylineCenter:S},$={project:function(s){return new B(s.lng,s.lat)},unproject:function(s){return new me(s.y,s.x)},bounds:new k([-180,-90],[180,90])},te={R:6378137,R_MINOR:6356752314245179e-9,bounds:new k([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,f=this.R,_=s.lat*l,E=this.R_MINOR/f,x=Math.sqrt(1-E*E),V=x*Math.sin(_),K=Math.tan(Math.PI/4-_/2)/Math.pow((1-V)/(1+V),x/2);return _=-f*Math.log(Math.max(K,1e-10)),new B(s.lng*l*f,_)},unproject:function(s){for(var l=180/Math.PI,f=this.R,_=this.R_MINOR/f,E=Math.sqrt(1-_*_),x=Math.exp(-s.y/f),V=Math.PI/2-2*Math.atan(x),K=0,X=.1,se;K<15&&Math.abs(X)>1e-7;K++)se=E*Math.sin(V),se=Math.pow((1-se)/(1+se),E/2),X=Math.PI/2-2*Math.atan(x*se)-V,V+=X;return new me(V*l,s.x*l/f)}},ye={__proto__:null,LonLat:$,Mercator:te,SphericalMercator:st},mt=a({},be,{code:"EPSG:3395",projection:te,transformation:function(){var s=.5/(Math.PI*te.R);return hn(s,.5,-s,.5)}()}),Ht=a({},be,{code:"EPSG:4326",projection:$,transformation:hn(1/180,1,-1/180,.5)}),at=a({},Ve,{projection:$,transformation:hn(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var f=l.lng-s.lng,_=l.lat-s.lat;return Math.sqrt(f*f+_*_)},infinite:!0});Ve.Earth=be,Ve.EPSG3395=mt,Ve.EPSG3857=Sn,Ve.EPSG900913=jr,Ve.EPSG4326=Ht,Ve.Simple=at;var yt=ce.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[y(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[y(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var f=this.getEvents();l.on(f,this),this.once("remove",function(){l.off(f,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});et.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=y(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=y(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return y(s)in this._layers},eachLayer:function(s,l){for(var f in this._layers)s.call(l,this._layers[f]);return this},_addLayers:function(s){s=s?Pe(s)?s:[s]:[];for(var l=0,f=s.length;l<f;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[y(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=y(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,f=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var E=this._zoomBoundLayers[_].options;s=E.minZoom===void 0?s:Math.min(s,E.minZoom),l=E.maxZoom===void 0?l:Math.max(l,E.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xt=yt.extend({initialize:function(s,l){ne(this,l),this._layers={};var f,_;if(s)for(f=0,_=s.length;f<_;f++)this.addLayer(s[f])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),f,_;for(f in this._layers)_=this._layers[f],_[s]&&_[s].apply(_,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var f in this._layers)s.call(l,this._layers[f]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return y(s)}}),hi=function(s,l){return new xt(s,l)},Ot=xt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),xt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),xt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new oe;for(var l in this._layers){var f=this._layers[l];s.extend(f.getBounds?f.getBounds():f.getLatLng())}return s}}),fs=function(s,l){return new Ot(s,l)},xi=we.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){ne(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var f=this._getIconUrl(s);if(!f){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(f,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(_,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(s,l){var f=this.options,_=f[l+"Size"];typeof _=="number"&&(_=[_,_]);var E=W(_),x=W(l==="shadow"&&f.shadowAnchor||f.iconAnchor||E&&E.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(f.className||""),x&&(s.style.marginLeft=-x.x+"px",s.style.marginTop=-x.y+"px"),E&&(s.style.width=E.x+"px",s.style.height=E.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return xe.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function hc(s){return new xi(s)}var ro=xi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof ro.imagePath!="string"&&(ro.imagePath=this._detectIconPath()),(this.options.imagePath||ro.imagePath)+xi.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(f,_,E){var x=_.exec(f);return x&&x[E]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=He("div","leaflet-default-icon-path",document.body),l=Er(s,"background-image")||Er(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),Gl=In.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new bn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),We(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Et(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,f=l._map,_=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,x=Mn(l._icon),V=f.getPixelBounds(),K=f.getPixelOrigin(),X=G(V.min._subtract(K).add(E),V.max._subtract(K).subtract(E));if(!X.contains(x)){var se=W((Math.max(X.max.x,x.x)-X.max.x)/(V.max.x-X.max.x)-(Math.min(X.min.x,x.x)-X.min.x)/(V.min.x-X.min.x),(Math.max(X.max.y,x.y)-X.max.y)/(V.max.y-X.max.y)-(Math.min(X.min.y,x.y)-X.min.y)/(V.min.y-X.min.y)).multiplyBy(_);f.panBy(se,{animate:!1}),this._draggable._newPos._add(se),this._draggable._startPos._add(se),qe(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=O(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(q(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,f=l._shadow,_=Mn(l._icon),E=l._map.layerPointToLatLng(_);f&&qe(f,_),l._latlng=E,s.latlng=E,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),sr=yt.extend({options:{icon:new ro,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){ne(this,l),this._latlng=de(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=de(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=s.icon.createIcon(this._icon),_=!1;f!==this._icon&&(this._icon&&this._removeIcon(),_=!0,s.title&&(f.title=s.title),f.tagName==="IMG"&&(f.alt=s.alt||"")),We(f,l),s.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Me(f,"focus",this._panOnFocus,this);var E=s.icon.createShadow(this._shadow),x=!1;E!==this._shadow&&(this._removeShadow(),x=!0),E&&(We(E,l),E.alt=""),this._shadow=E,s.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&x&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gt(this._icon,"focus",this._panOnFocus,this),wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&qe(this._icon,s),this._shadow&&qe(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(We(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gl)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gl(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&At(this._icon,s),this._shadow&&At(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,f=l.iconSize?W(l.iconSize):W(0,0),_=l.iconAnchor?W(l.iconAnchor):W(0,0);s.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:f.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Td(s,l){return new sr(s,l)}var Ir=yt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return ne(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),za=Ir.extend({options:{fill:!0,radius:10},initialize:function(s,l){ne(this,l),this._latlng=de(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=de(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Ir.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,f=this._clickTolerance(),_=[s+f,l+f];this._pxBounds=new k(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function dc(s,l){return new za(s,l)}var Ba=za.extend({initialize:function(s,l,f){if(typeof l=="number"&&(l=a({},f,{radius:l})),ne(this,l),this._latlng=de(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new oe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Ir.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,f=this._map,_=f.options.crs;if(_.distance===be.distance){var E=Math.PI/180,x=this._mRadius/be.R/E,V=f.project([l+x,s]),K=f.project([l-x,s]),X=V.add(K).divideBy(2),se=f.unproject(X).lat,Ee=Math.acos((Math.cos(x*E)-Math.sin(l*E)*Math.sin(se*E))/(Math.cos(l*E)*Math.cos(se*E)))/E;(isNaN(Ee)||Ee===0)&&(Ee=x/Math.cos(Math.PI/180*l)),this._point=X.subtract(f.getPixelOrigin()),this._radius=isNaN(Ee)?0:X.x-f.project([se,s-Ee]).x,this._radiusY=X.y-V.y}else{var Fe=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Fe).x}this._updateBounds()}});function ta(s,l,f){return new Ba(s,l,f)}var Zn=Ir.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){ne(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,f=null,_=On,E,x,V=0,K=this._parts.length;V<K;V++)for(var X=this._parts[V],se=1,Ee=X.length;se<Ee;se++){E=X[se-1],x=X[se];var Fe=_(s,E,x,!0);Fe<l&&(l=Fe,f=_(s,E,x))}return f&&(f.distance=Math.sqrt(l)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return S(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=de(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new oe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],f=h(s),_=0,E=s.length;_<E;_++)f?(l[_]=de(s[_]),this._bounds.extend(l[_])):l[_]=this._convertLatLngs(s[_]);return l},_project:function(){var s=new k;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new B(s,s);this._rawPxBounds&&(this._pxBounds=new k([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,f){var _=s[0]instanceof me,E=s.length,x,V;if(_){for(V=[],x=0;x<E;x++)V[x]=this._map.latLngToLayerPoint(s[x]),f.extend(V[x]);l.push(V)}else for(x=0;x<E;x++)this._projectLatlngs(s[x],l,f)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,f,_,E,x,V,K,X;for(f=0,E=0,x=this._rings.length;f<x;f++)for(X=this._rings[f],_=0,V=X.length;_<V-1;_++)K=ds(X[_],X[_+1],s,_,!0),K&&(l[E]=l[E]||[],l[E].push(K[0]),(K[1]!==X[_+1]||_===V-2)&&(l[E].push(K[1]),E++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,f=0,_=s.length;f<_;f++)s[f]=hs(s[f],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var f,_,E,x,V,K,X=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(f=0,x=this._parts.length;f<x;f++)for(K=this._parts[f],_=0,V=K.length,E=V-1;_<V;E=_++)if(!(!l&&_===0)&&ea(s,K[E],K[_])<=X)return!0;return!1}});function Sd(s,l){return new Zn(s,l)}Zn._flat=v;var or=Zn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Js(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Zn.prototype._convertLatLngs.call(this,s),f=l.length;return f>=2&&l[0]instanceof me&&l[0].equals(l[f-1])&&l.pop(),l},_setLatLngs:function(s){Zn.prototype._setLatLngs.call(this,s),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,f=new B(l,l);if(s=new k(s.min.subtract(f),s.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,E=this._rings.length,x;_<E;_++)x=cs(this._rings[_],s,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,f,_,E,x,V,K,X,se;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(x=0,X=this._parts.length;x<X;x++)for(f=this._parts[x],V=0,se=f.length,K=se-1;V<se;K=V++)_=f[V],E=f[K],_.y>s.y!=E.y>s.y&&s.x<(E.x-_.x)*(s.y-_.y)/(E.y-_.y)+_.x&&(l=!l);return l||Zn.prototype._containsPoint.call(this,s,!0)}});function Cd(s,l){return new or(s,l)}var zi=Ot.extend({initialize:function(s,l){ne(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=Pe(s)?s:s.features,f,_,E;if(l){for(f=0,_=l.length;f<_;f++)E=l[f],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var x=this.options;if(x.filter&&!x.filter(s))return this;var V=so(s,x);return V?(V.feature=qa(s),V.defaultOptions=V.options,this.resetStyle(V),x.onEachFeature&&x.onEachFeature(s,V),this.addLayer(V)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=a({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function so(s,l){var f=s.type==="Feature"?s.geometry:s,_=f?f.coordinates:null,E=[],x=l&&l.pointToLayer,V=l&&l.coordsToLatLng||ja,K,X,se,Ee;if(!_&&!f)return null;switch(f.type){case"Point":return K=V(_),Ua(x,s,K,l);case"MultiPoint":for(se=0,Ee=_.length;se<Ee;se++)K=V(_[se]),E.push(Ua(x,s,K,l));return new Ot(E);case"LineString":case"MultiLineString":return X=na(_,f.type==="LineString"?0:1,V),new Zn(X,l);case"Polygon":case"MultiPolygon":return X=na(_,f.type==="Polygon"?1:2,V),new or(X,l);case"GeometryCollection":for(se=0,Ee=f.geometries.length;se<Ee;se++){var Fe=so({geometry:f.geometries[se],type:"Feature",properties:s.properties},l);Fe&&E.push(Fe)}return new Ot(E);case"FeatureCollection":for(se=0,Ee=f.features.length;se<Ee;se++){var Ye=so(f.features[se],l);Ye&&E.push(Ye)}return new Ot(E);default:throw new Error("Invalid GeoJSON object.")}}function Ua(s,l,f,_){return s?s(l,f):new sr(f,_&&_.markersInheritOptions&&_)}function ja(s){return new me(s[1],s[0],s[2])}function na(s,l,f){for(var _=[],E=0,x=s.length,V;E<x;E++)V=l?na(s[E],l-1,f):(f||ja)(s[E]),_.push(V);return _}function Wa(s,l){return s=de(s),s.alt!==void 0?[R(s.lng,l),R(s.lat,l),R(s.alt,l)]:[R(s.lng,l),R(s.lat,l)]}function Ha(s,l,f,_){for(var E=[],x=0,V=s.length;x<V;x++)E.push(l?Ha(s[x],h(s[x])?0:l-1,f,_):Wa(s[x],_));return!l&&f&&E.length>0&&E.push(E[0].slice()),E}function oo(s,l){return s.feature?a({},s.feature,{geometry:l}):qa(l)}function qa(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Kl={toGeoJSON:function(s){return oo(this,{type:"Point",coordinates:Wa(this.getLatLng(),s)})}};sr.include(Kl),Ba.include(Kl),za.include(Kl),Zn.include({toGeoJSON:function(s){var l=!h(this._latlngs),f=Ha(this._latlngs,l?1:0,!1,s);return oo(this,{type:(l?"Multi":"")+"LineString",coordinates:f})}}),or.include({toGeoJSON:function(s){var l=!h(this._latlngs),f=l&&!h(this._latlngs[0]),_=Ha(this._latlngs,f?2:l?1:0,!0,s);return l||(_=[_]),oo(this,{type:(f?"Multi":"")+"Polygon",coordinates:_})}}),xt.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(f){l.push(f.toGeoJSON(s).geometry.coordinates)}),oo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var f=l==="GeometryCollection",_=[];return this.eachLayer(function(E){if(E.toGeoJSON){var x=E.toGeoJSON(s);if(f)_.push(x.geometry);else{var V=qa(x);V.type==="FeatureCollection"?_.push.apply(_,V.features):_.push(V)}}}),f?oo(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function fc(s,l){return new zi(s,l)}var Ai=fc,xr=yt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,f){this._url=s,this._bounds=fe(l),ne(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(We(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Ji(this._image),this},bringToBack:function(){return this._map&&Si(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=fe(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:He("img");if(We(l,"leaflet-image-layer"),this._zoomAnimated&&We(l,"leaflet-zoom-animated"),this.options.className&&We(l,this.options.className),l.onselectstart=A,l.onmousemove=A,l.onload=d(this.fire,this,"load"),l.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Nn(this._image,f,l)},_reset:function(){var s=this._image,l=new k(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=l.getSize();qe(s,l.min),s.style.width=f.x+"px",s.style.height=f.y+"px"},_updateOpacity:function(){At(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),pc=function(s,l,f){return new xr(s,l,f)},Zl=xr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:He("video");if(We(l,"leaflet-image-layer"),this._zoomAnimated&&We(l,"leaflet-zoom-animated"),this.options.className&&We(l,this.options.className),l.onselectstart=A,l.onmousemove=A,l.onloadeddata=d(this.fire,this,"load"),s){for(var f=l.getElementsByTagName("source"),_=[],E=0;E<f.length;E++)_.push(f[E].src);this._url=f.length>0?_:[l.src];return}Pe(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var V=He("source");V.src=this._url[x],l.appendChild(V)}}});function mc(s,l,f){return new Zl(s,l,f)}var Ql=xr.extend({_initImage:function(){var s=this._image=this._url;We(s,"leaflet-image-layer"),this._zoomAnimated&&We(s,"leaflet-zoom-animated"),this.options.className&&We(s,this.options.className),s.onselectstart=A,s.onmousemove=A}});function Yl(s,l,f){return new Ql(s,l,f)}var Bi=yt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof me||Pe(s))?(this._latlng=de(s),ne(this,l)):(ne(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&At(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&At(this._container,1),this.bringToFront(),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(At(this._container,0),this._removeTimeout=setTimeout(d(wt,void 0,this._container),200)):wt(this._container),this.options.interactive&&(Et(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=de(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ji(this._container),this},bringToBack:function(){return this._map&&Si(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Ot){l=null;var f=this._source._layers;for(var _ in f)if(f[_]._map){l=f[_];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=W(this.options.offset),f=this._getAnchor();this._zoomAnimated?qe(this._container,s.add(f)):l=l.add(s).add(f);var _=this._containerBottom=-l.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=_+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});et.include({_initOverlay:function(s,l,f,_){var E=l;return E instanceof s||(E=new s(_).setContent(l)),f&&E.setLatLng(f),E}}),yt.include({_initOverlay:function(s,l,f,_){var E=f;return E instanceof s?(ne(E,_),E._source=this):(E=l&&!_?l:new s(_,this),E.setContent(f)),E}});var $a=Bi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Bi.prototype.openOn.call(this,s)},onAdd:function(s){Bi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ir||this._source.on("preclick",Cn))},onRemove:function(s){Bi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ir||this._source.off("preclick",Cn))},getEvents:function(){var s=Bi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=He("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=He("div",s+"-content-wrapper",l);if(this._contentNode=He("div",s+"-content",f),Cr(l),er(this._contentNode),Me(l,"contextmenu",Cn),this._tipContainer=He("div",s+"-tip-container",l),this._tip=He("div",s+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=He("a",s+"-close-button",l);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',Me(_,"click",function(E){Tt(E),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var f=s.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),l.width=f+1+"px",l.whiteSpace="",l.height="";var _=s.offsetHeight,E=this.options.maxHeight,x="leaflet-popup-scrolled";E&&_>E?(l.height=E+"px",We(s,x)):Et(s,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),f=this._getAnchor();qe(this._container,l.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Er(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+l,_=this._containerWidth,E=new B(this._containerLeft,-f-this._containerBottom);E._add(Mn(this._container));var x=s.layerPointToContainerPoint(E),V=W(this.options.autoPanPadding),K=W(this.options.autoPanPaddingTopLeft||V),X=W(this.options.autoPanPaddingBottomRight||V),se=s.getSize(),Ee=0,Fe=0;x.x+_+X.x>se.x&&(Ee=x.x+_-se.x+X.x),x.x-Ee-K.x<0&&(Ee=x.x-K.x),x.y+f+X.y>se.y&&(Fe=x.y+f-se.y+X.y),x.y-Fe-K.y<0&&(Fe=x.y-K.y),(Ee||Fe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Ee,Fe]))}},_getAnchor:function(){return W(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ao=function(s,l){return new $a(s,l)};et.mergeOptions({closePopupOnClick:!0}),et.include({openPopup:function(s,l,f){return this._initOverlay($a,s,l,f).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),yt.include({bindPopup:function(s,l){return this._popup=this._initOverlay($a,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Ot||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){on(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Ir)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var lo=Bi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Bi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Bi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Bi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=He("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,f,_=this._map,E=this._container,x=_.latLngToContainerPoint(_.getCenter()),V=_.layerPointToContainerPoint(s),K=this.options.direction,X=E.offsetWidth,se=E.offsetHeight,Ee=W(this.options.offset),Fe=this._getAnchor();K==="top"?(l=X/2,f=se):K==="bottom"?(l=X/2,f=0):K==="center"?(l=X/2,f=se/2):K==="right"?(l=0,f=se/2):K==="left"?(l=X,f=se/2):V.x<x.x?(K="right",l=0,f=se/2):(K="left",l=X+(Ee.x+Fe.x)*2,f=se/2),s=s.subtract(W(l,f,!0)).add(Ee).add(Fe),Et(E,"leaflet-tooltip-right"),Et(E,"leaflet-tooltip-left"),Et(E,"leaflet-tooltip-top"),Et(E,"leaflet-tooltip-bottom"),We(E,"leaflet-tooltip-"+K),qe(E,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&At(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return W(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ia=function(s,l){return new lo(s,l)};et.include({openTooltip:function(s,l,f){return this._initOverlay(lo,s,l,f).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),yt.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(lo,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[l](f),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Ot||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Me(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Me(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,f,_;this._tooltip.options.sticky&&s.originalEvent&&(f=this._map.mouseEventToContainerPoint(s.originalEvent),_=this._map.containerPointToLayerPoint(f),l=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(l)}});var Ga=xi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),f=this.options;if(f.html instanceof Element?(is(l),l.appendChild(f.html)):l.innerHTML=f.html!==!1?f.html:"",f.bgPos){var _=W(f.bgPos);l.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function _c(s){return new Ga(s)}xi.Default=ro;var Ar=yt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:xe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){ne(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),wt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ji(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Si(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=T(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof B?s:new B(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,f=-s(-1/0,1/0),_=0,E=l.length,x;_<E;_++)x=l[_].style.zIndex,l[_]!==this._container&&x&&(f=s(f,+x));isFinite(f)&&(this.options.zIndex=f+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!xe.ielt9){At(this._container,this.options.opacity);var s=+new Date,l=!1,f=!1;for(var _ in this._tiles){var E=this._tiles[_];if(!(!E.current||!E.loaded)){var x=Math.min(1,(s-E.loaded)/200);At(E.el,x),x<1?l=!0:(E.active?f=!0:this._onOpaqueTile(E),E.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),l&&(q(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:A,_initContainer:function(){this._container||(this._container=He("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===s?(this._levels[f].el.style.zIndex=l-Math.abs(s-f),this._onUpdateLevel(f)):(wt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var _=this._levels[s],E=this._map;return _||(_=this._levels[s]={},_.el=He("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=l,_.origin=E.project(E.unproject(E.getPixelOrigin()),s).round(),_.zoom=s,this._setZoomTransform(_,E.getCenter(),E.getZoom()),A(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:A,_onRemoveLevel:A,_onCreateLevel:A,_pruneTiles:function(){if(this._map){var s,l,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var _=l.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)wt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,f,_){var E=Math.floor(s/2),x=Math.floor(l/2),V=f-1,K=new B(+E,+x);K.z=+V;var X=this._tileCoordsToKey(K),se=this._tiles[X];return se&&se.active?(se.retain=!0,!0):(se&&se.loaded&&(se.retain=!0),V>_?this._retainParent(E,x,V,_):!1)},_retainChildren:function(s,l,f,_){for(var E=2*s;E<2*s+2;E++)for(var x=2*l;x<2*l+2;x++){var V=new B(E,x);V.z=f+1;var K=this._tileCoordsToKey(V),X=this._tiles[K];if(X&&X.active){X.retain=!0;continue}else X&&X.loaded&&(X.retain=!0);f+1<_&&this._retainChildren(E,x,f+1,_)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,f,_){var E=Math.round(l);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var x=this.options.updateWhenZooming&&E!==this._tileZoom;(!_||x)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(s),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var f in this._levels)this._setZoomTransform(this._levels[f],s,l)},_setZoomTransform:function(s,l,f){var _=this._map.getZoomScale(f,s.zoom),E=s.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(l,f)).round();xe.any3d?Nn(s.el,E,_):qe(s.el,E)},_resetGrid:function(){var s=this._map,l=s.options.crs,f=this._tileSize=this.getTileSize(),_=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],_).x/f.x),Math.ceil(s.project([0,l.wrapLng[1]],_).x/f.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],_).y/f.x),Math.ceil(s.project([l.wrapLat[1],0],_).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,f=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),_=l.getZoomScale(f,this._tileZoom),E=l.project(s,this._tileZoom).floor(),x=l.getSize().divideBy(_*2);return new k(E.subtract(x),E.add(x))},_update:function(s){var l=this._map;if(l){var f=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(s),E=this._pxBoundsToTileRange(_),x=E.getCenter(),V=[],K=this.options.keepBuffer,X=new k(E.getBottomLeft().subtract([K,-K]),E.getTopRight().add([K,-K]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var se in this._tiles){var Ee=this._tiles[se].coords;(Ee.z!==this._tileZoom||!X.contains(new B(Ee.x,Ee.y)))&&(this._tiles[se].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(s,f);return}for(var Fe=E.min.y;Fe<=E.max.y;Fe++)for(var Ye=E.min.x;Ye<=E.max.x;Ye++){var an=new B(Ye,Fe);if(an.z=this._tileZoom,!!this._isValidTile(an)){var tn=this._tiles[this._tileCoordsToKey(an)];tn?tn.current=!0:V.push(an)}}if(V.sort(function(Vn,po){return Vn.distanceTo(x)-po.distanceTo(x)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qn=document.createDocumentFragment();for(Ye=0;Ye<V.length;Ye++)this._addTile(V[Ye],Qn);this._level.el.appendChild(Qn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var f=this._globalTileRange;if(!l.wrapLng&&(s.x<f.min.x||s.x>f.max.x)||!l.wrapLat&&(s.y<f.min.y||s.y>f.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(s);return fe(this.options.bounds).overlaps(_)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,f=this.getTileSize(),_=s.scaleBy(f),E=_.add(f),x=l.unproject(_,s.z),V=l.unproject(E,s.z);return[x,V]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),f=new oe(l[0],l[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),f=new B(+l[0],+l[1]);return f.z=+l[2],f},_removeTile:function(s){var l=this._tiles[s];l&&(wt(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){We(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=A,s.onmousemove=A,xe.ielt9&&this.options.opacity<1&&At(s,this.options.opacity)},_addTile:function(s,l){var f=this._getTilePos(s),_=this._tileCoordsToKey(s),E=this.createTile(this._wrapCoords(s),d(this._tileReady,this,s));this._initTile(E),this.createTile.length<2&&O(d(this._tileReady,this,s,null,E)),qe(E,f),this._tiles[_]={el:E,coords:s,current:!0},l.appendChild(E),this.fire("tileloadstart",{tile:E,coords:s})},_tileReady:function(s,l,f){l&&this.fire("tileerror",{error:l,tile:f,coords:s});var _=this._tileCoordsToKey(s);f=this._tiles[_],f&&(f.loaded=+new Date,this._map._fadeAnimated?(At(f.el,0),q(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),l||(We(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),xe.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new B(this._wrapX?I(s.x,this._wrapX):s.x,this._wrapY?I(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new k(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function uo(s){return new Ar(s)}var Pr=Ar.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=ne(this,l),l.detectRetina&&xe.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var f=document.createElement("img");return Me(f,"load",d(this._tileOnLoad,this,l,f)),Me(f,"error",d(this._tileOnError,this,l,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(s),f},getTileUrl:function(s){var l={r:xe.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=f),l["-y"]=f}return De(this._url,a(l,this.options))},_tileOnLoad:function(s,l){xe.ielt9?setTimeout(d(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,f){var _=this.options.errorTileUrl;_&&l.getAttribute("src")!==_&&(l.src=_),s(f,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,f=this.options.zoomReverse,_=this.options.zoomOffset;return f&&(s=l-s),s+_},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=A,l.onerror=A,!l.complete)){l.src=tt;var f=this._tiles[s].coords;wt(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:f})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",tt),Ar.prototype._removeTile.call(this,s)},_tileReady:function(s,l,f){if(!(!this._map||f&&f.getAttribute("src")===tt))return Ar.prototype._tileReady.call(this,s,l,f)}});function Xl(s,l){return new Pr(s,l)}var ra=Pr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var f=a({},this.defaultWmsParams);for(var _ in l)_ in this.options||(f[_]=l[_]);l=ne(this,l);var E=l.detectRetina&&xe.retina?2:1,x=this.getTileSize();f.width=x.x*E,f.height=x.y*E,this.wmsParams=f},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Pr.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),f=this._crs,_=G(f.project(l[0]),f.project(l[1])),E=_.min,x=_.max,V=(this._wmsVersion>=1.3&&this._crs===Ht?[E.y,E.x,x.y,x.x]:[E.x,E.y,x.x,x.y]).join(","),K=Pr.prototype.getTileUrl.call(this,s);return K+ie(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(s,l){return a(this.wmsParams,s),l||this.redraw(),this}});function gc(s,l){return new ra(s,l)}Pr.WMS=ra,Xl.wms=gc;var Ui=yt.extend({options:{padding:.1},initialize:function(s){ne(this,s),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),We(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var f=this._map.getZoomScale(l,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,l),x=_.multiplyBy(-f).add(E).subtract(this._map._getNewPixelOrigin(s,l));xe.any3d?Nn(this._container,x,f):qe(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),f=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new k(f,f.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jl=Ui.extend({options:{tolerance:0},getEvents:function(){var s=Ui.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Me(s,"mousemove",this._onMouseMove,this),Me(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Me(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){q(this._redrawRequest),delete this._ctx,wt(this._container),gt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var s=this._bounds,l=this._container,f=s.getSize(),_=xe.retina?2:1;qe(l,s.min),l.width=_*f.x,l.height=_*f.y,l.style.width=f.x+"px",l.style.height=f.y+"px",xe.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[y(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,f=l.next,_=l.prev;f?f.prev=_:this._drawLast=_,_?_.next=f:this._drawFirst=f,delete s._order,delete this._layers[y(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),f=[],_,E;for(E=0;E<l.length;E++){if(_=Number(l[E]),isNaN(_))return;f.push(_)}s.options._dashArray=f}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new k,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var f=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)s=_.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var f,_,E,x,V=s._parts,K=V.length,X=this._ctx;if(K){for(X.beginPath(),f=0;f<K;f++){for(_=0,E=V[f].length;_<E;_++)x=V[f][_],X[_?"lineTo":"moveTo"](x.x,x.y);l&&X.closePath()}this._fillStroke(X,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,f=this._ctx,_=Math.max(Math.round(s._radius),1),E=(Math.max(Math.round(s._radiusY),1)||_)/_;E!==1&&(f.save(),f.scale(1,E)),f.beginPath(),f.arc(l.x,l.y/E,_,0,Math.PI*2,!1),E!==1&&f.restore(),this._fillStroke(f,s)}},_fillStroke:function(s,l){var f=l.options;f.fill&&(s.globalAlpha=f.fillOpacity,s.fillStyle=f.fillColor||f.color,s.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=f.opacity,s.lineWidth=f.weight,s.strokeStyle=f.color,s.lineCap=f.lineCap,s.lineJoin=f.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),f,_,E=this._drawFirst;E;E=E.next)f=E.layer,f.options.interactive&&f._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(f))&&(_=f);this._fireEvent(_?[_]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Et(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var f,_,E=this._drawFirst;E;E=E.next)f=E.layer,f.options.interactive&&f._containsPoint(l)&&(_=f);_!==this._hoveredLayer&&(this._handleMouseOut(s),_&&(We(this._container,"leaflet-interactive"),this._fireEvent([_],s,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,f){this._map._fireDOMEvent(l,f||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var f=l.next,_=l.prev;if(f)f.prev=_;else return;_?_.next=f:f&&(this._drawFirst=f),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var f=l.next,_=l.prev;if(_)_.next=f;else return;f?f.prev=_:_&&(this._drawLast=_),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function eu(s){return xe.canvas?new Jl(s):null}var co=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),yc={_initContainer:function(){this._container=He("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ui.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=co("shape");We(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=co("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[y(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;wt(l),s.removeInteractiveTarget(l),delete this._layers[y(s)]},_updateStyle:function(s){var l=s._stroke,f=s._fill,_=s.options,E=s._container;E.stroked=!!_.stroke,E.filled=!!_.fill,_.stroke?(l||(l=s._stroke=co("stroke")),E.appendChild(l),l.weight=_.weight+"px",l.color=_.color,l.opacity=_.opacity,_.dashArray?l.dashStyle=Pe(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=_.lineCap.replace("butt","flat"),l.joinstyle=_.lineJoin):l&&(E.removeChild(l),s._stroke=null),_.fill?(f||(f=s._fill=co("fill")),E.appendChild(f),f.color=_.fillColor||_.color,f.opacity=_.fillOpacity):f&&(E.removeChild(f),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),f=Math.round(s._radius),_=Math.round(s._radiusY||f);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+f+","+_+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Ji(s._container)},_bringToBack:function(s){Si(s._container)}},Pi=xe.vml?co:Wr,ps=Ui.extend({_initContainer:function(){this._container=Pi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Pi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wt(this._container),gt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var s=this._bounds,l=s.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,f.setAttribute("width",l.x),f.setAttribute("height",l.y)),qe(f,s.min),f.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Pi("path");s.options.className&&We(l,s.options.className),s.options.interactive&&We(l,"leaflet-interactive"),this._updateStyle(s),this._layers[y(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){wt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[y(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,f=s.options;l&&(f.stroke?(l.setAttribute("stroke",f.color),l.setAttribute("stroke-opacity",f.opacity),l.setAttribute("stroke-width",f.weight),l.setAttribute("stroke-linecap",f.lineCap),l.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?l.setAttribute("stroke-dasharray",f.dashArray):l.removeAttribute("stroke-dasharray"),f.dashOffset?l.setAttribute("stroke-dashoffset",f.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),f.fill?(l.setAttribute("fill",f.fillColor||f.color),l.setAttribute("fill-opacity",f.fillOpacity),l.setAttribute("fill-rule",f.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Ds(s._parts,l))},_updateCircle:function(s){var l=s._point,f=Math.max(Math.round(s._radius),1),_=Math.max(Math.round(s._radiusY),1)||f,E="a"+f+","+_+" 0 1,0 ",x=s._empty()?"M0 0":"M"+(l.x-f)+","+l.y+E+f*2+",0 "+E+-f*2+",0 ";this._setPath(s,x)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Ji(s._path)},_bringToBack:function(s){Si(s._path)}});xe.vml&&ps.include(yc);function Ka(s){return xe.svg||xe.vml?new ps(s):null}et.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&eu(s)||Ka(s)}});var vc=or.extend({initialize:function(s,l){or.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=fe(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Id(s,l){return new vc(s,l)}ps.create=Pi,ps.pointsToPath=Ds,zi.geometryToLayer=so,zi.coordsToLatLng=ja,zi.coordsToLatLngs=na,zi.latLngToCoords=Wa,zi.latLngsToCoords=Ha,zi.getFeature=oo,zi.asFeature=qa,et.mergeOptions({boxZoom:!0});var ho=In.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){gt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Je(),Gs(),this._startPoint=this._map.mouseEventToContainerPoint(s),Me(document,{contextmenu:on,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=He("div","leaflet-zoom-box",this._container),We(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new k(this._point,this._startPoint),f=l.getSize();qe(this._box,l.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(wt(this._box),Et(this._container,"leaflet-crosshair")),oi(),Ks(),gt(document,{contextmenu:on,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var l=new oe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});et.addInitHook("addHandler","boxZoom",ho),et.mergeOptions({doubleClickZoom:!0});var wc=In.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,f=l.getZoom(),_=l.options.zoomDelta,E=s.originalEvent.shiftKey?f-_:f+_;l.options.doubleClickZoom==="center"?l.setZoom(E):l.setZoomAround(s.containerPoint,E)}});et.addInitHook("addHandler","doubleClickZoom",wc),et.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var tu=In.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new bn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}We(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Et(this._map._container,"leaflet-grab"),Et(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=fe(this._map.options.maxBounds);this._offsetLimit=G(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),f=this._initialWorldOffset,_=this._draggable._newPos.x,E=(_-l+f)%s+l-f,x=(_+l+f)%s-l-f,V=Math.abs(E+f)<Math.abs(x+f)?E:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(s){var l=this._map,f=l.options,_=!f.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),_)l.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,V=f.easeLinearity,K=E.multiplyBy(V/x),X=K.distanceTo([0,0]),se=Math.min(f.inertiaMaxSpeed,X),Ee=K.multiplyBy(se/X),Fe=se/(f.inertiaDeceleration*V),Ye=Ee.multiplyBy(-Fe/2).round();!Ye.x&&!Ye.y?l.fire("moveend"):(Ye=l._limitOffset(Ye,l.options.maxBounds),O(function(){l.panBy(Ye,{duration:Fe,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});et.addInitHook("addHandler","dragging",tu),et.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nu=In.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Me(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),gt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,f=s.scrollTop||l.scrollTop,_=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(_,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},f=this.keyCodes,_,E;for(_=0,E=f.left.length;_<E;_++)l[f.left[_]]=[-1*s,0];for(_=0,E=f.right.length;_<E;_++)l[f.right[_]]=[s,0];for(_=0,E=f.down.length;_<E;_++)l[f.down[_]]=[0,s];for(_=0,E=f.up.length;_<E;_++)l[f.up[_]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},f=this.keyCodes,_,E;for(_=0,E=f.zoomIn.length;_<E;_++)l[f.zoomIn[_]]=s;for(_=0,E=f.zoomOut.length;_<E;_++)l[f.zoomOut[_]]=-s},_addHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){gt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,f=this._map,_;if(l in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(_=this._panKeys[l],s.shiftKey&&(_=W(_).multiplyBy(3)),f.options.maxBounds&&(_=f._limitOffset(W(_),f.options.maxBounds)),f.options.worldCopyJump){var E=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(_)));f.panTo(E)}else f.panBy(_)}else if(l in this._zoomKeys)f.setZoom(f.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;on(s)}}});et.addInitHook("addHandler","keyboard",nu),et.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ct=In.extend({addHooks:function(){Me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){gt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=ba(s),f=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var _=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),_),on(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),f=this._map.options.zoomSnap||0;s._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,x=f?Math.ceil(E/f)*f:E,V=s._limitZoom(l+(this._delta>0?x:-x))-l;this._delta=0,this._startTime=null,V&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+V):s.setZoomAround(this._lastMousePos,l+V))}});et.addInitHook("addHandler","scrollWheelZoom",Ct);var iu=600;et.mergeOptions({tapHold:xe.touchNative&&xe.safari&&xe.mobile,tapTolerance:15});var sa=In.extend({addHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){gt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new B(l.clientX,l.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(Me(document,"touchend",Tt),Me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),iu),Me(document,"touchend touchcancel contextmenu",this._cancel,this),Me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){gt(document,"touchend",Tt),gt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),gt(document,"touchend touchcancel contextmenu",this._cancel,this),gt(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new B(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var f=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});f._simulated=!0,l.target.dispatchEvent(f)}});et.addInitHook("addHandler","tapHold",sa),et.mergeOptions({touchZoom:xe.touch,bounceAtZoomLimits:!0});var fo=In.extend({addHooks:function(){We(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Et(this._map._container,"leaflet-touch-zoom"),gt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var f=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(f.add(_)._divideBy(2))),this._startDist=f.distanceTo(_),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend touchcancel",this._onTouchEnd,this),Tt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,f=l.mouseEventToContainerPoint(s.touches[0]),_=l.mouseEventToContainerPoint(s.touches[1]),E=f.distanceTo(_)/this._startDist;if(this._zoom=l.getScaleZoom(E,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&E<1||this._zoom>l.getMaxZoom()&&E>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var x=f._add(_)._divideBy(2)._subtract(this._centerPoint);if(E===1&&x.x===0&&x.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),q(this._animRequest);var V=d(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(V,this,!0),Tt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,q(this._animRequest),gt(document,"touchmove",this._onTouchMove,this),gt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});et.addInitHook("addHandler","touchZoom",fo),et.BoxZoom=ho,et.DoubleClickZoom=wc,et.Drag=tu,et.Keyboard=nu,et.ScrollWheelZoom=Ct,et.TapHold=sa,et.TouchZoom=fo,t.Bounds=k,t.Browser=xe,t.CRS=Ve,t.Canvas=Jl,t.Circle=Ba,t.CircleMarker=za,t.Class=we,t.Control=pn,t.DivIcon=Ga,t.DivOverlay=Bi,t.DomEvent=ls,t.DomUtil=Sr,t.Draggable=bn,t.Evented=ce,t.FeatureGroup=Ot,t.GeoJSON=zi,t.GridLayer=Ar,t.Handler=In,t.Icon=xi,t.ImageOverlay=xr,t.LatLng=me,t.LatLngBounds=oe,t.Layer=yt,t.LayerGroup=xt,t.LineUtil=P,t.Map=et,t.Marker=sr,t.Mixin=nr,t.Path=Ir,t.Point=B,t.PolyUtil=to,t.Polygon=or,t.Polyline=Zn,t.Popup=$a,t.PosAnimation=us,t.Projection=ye,t.Rectangle=vc,t.Renderer=Ui,t.SVG=ps,t.SVGOverlay=Ql,t.TileLayer=Pr,t.Tooltip=lo,t.Transformation=Ut,t.Util=M,t.VideoOverlay=Zl,t.bind=d,t.bounds=G,t.canvas=eu,t.circle=ta,t.circleMarker=dc,t.control=Xt,t.divIcon=_c,t.extend=a,t.featureGroup=fs,t.geoJSON=fc,t.geoJson=Ai,t.gridLayer=uo,t.icon=hc,t.imageOverlay=pc,t.latLng=de,t.latLngBounds=fe,t.layerGroup=hi,t.map=Kn,t.marker=Td,t.point=W,t.polygon=Cd,t.polyline=Sd,t.popup=ao,t.rectangle=Id,t.setOptions=ne,t.stamp=y,t.svg=Ka,t.svgOverlay=Yl,t.tileLayer=Xl,t.tooltip=ia,t.transformation=hn,t.version=r,t.videoOverlay=mc;var Ec=window.L;t.noConflict=function(){return window.L=Ec,this},window.L=t})}(Du,Du.exports)),Du.exports}var e_=cR();const hR=Kh(e_);function dR(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function fR(n,e){return e==null?function(r,a){const c=Xe.useRef();return c.current||(c.current=n(r,a)),c}:function(r,a){const c=Xe.useRef();c.current||(c.current=n(r,a));const d=Xe.useRef(r),{instance:m}=c.current;return Xe.useEffect(function(){d.current!==r&&(e(m,r,d.current),d.current=r)},[m,r,a]),c}}function pR(n,e){Xe.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){var c;(c=e.layerContainer)==null||c.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function mR(n){return function(t){const r=d0(),a=n(f0(t,r),r);return iR(r.map,t.attribution),lR(a.current,t.eventHandlers),pR(a.current,r),a}}function _R(n,e){const t=fR(n,e),r=mR(t);return aR(r)}function gR(n,e,t){const{opacity:r,zIndex:a}=e;r!=null&&r!==t.opacity&&n.setOpacity(r),a!=null&&a!==t.zIndex&&n.setZIndex(a)}function yR(){return d0().map}function zp(){return zp=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zp.apply(this,arguments)}function vR({bounds:n,boundsOptions:e,center:t,children:r,className:a,id:c,placeholder:d,style:m,whenReady:y,zoom:T,...I},A){const[R]=Xe.useState({className:a,id:c,style:m}),[U,J]=Xe.useState(null);Xe.useImperativeHandle(A,()=>(U==null?void 0:U.map)??null,[U]);const ne=Xe.useCallback(Ae=>{if(Ae!==null&&U===null){const De=new e_.Map(Ae,I);t!=null&&T!=null?De.setView(t,T):n!=null&&De.fitBounds(n,e),y!=null&&De.whenReady(y),J(sR(De))}},[]);Xe.useEffect(()=>()=>{U==null||U.map.remove()},[U]);const ie=U?Jf.createElement(oR,{value:U},r):d??null;return Jf.createElement("div",zp({},R,{ref:ne}),ie)}const wR=Xe.forwardRef(vR),ER=_R(function({url:e,...t},r){const a=new e_.TileLayer(e,f0(t,r));return dR(a,r)},function(e,t,r){gR(e,t,r);const{url:a}=t;a!=null&&a!==r.url&&e.setUrl(a)});(function(){function n(e){return this instanceof n?(this._canvas=e=typeof e=="string"?document.getElementById(e):e,this._ctx=e.getContext("2d"),this._width=e.width,this._height=e.height,this._max=1,void this.clear()):new n(e)}n.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(e,t){return this._data=e,this},max:function(e){return this._max=e,this},add:function(e){return this._data.push(e),this},clear:function(){return this._data=[],this},radius:function(e,t){t=t||15;var r=this._circle=document.createElement("canvas"),a=r.getContext("2d"),c=this._r=e+t;return r.width=r.height=2*c,a.shadowOffsetX=a.shadowOffsetY=200,a.shadowBlur=t,a.shadowColor="black",a.beginPath(),a.arc(c-200,c-200,e,0,2*Math.PI,!0),a.closePath(),a.fill(),this},gradient:function(e){var t=document.createElement("canvas"),r=t.getContext("2d"),a=r.createLinearGradient(0,0,0,256);t.width=1,t.height=256;for(var c in e)a.addColorStop(c,e[c]);return r.fillStyle=a,r.fillRect(0,0,1,256),this._grad=r.getImageData(0,0,1,256).data,this},draw:function(e){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var t=this._ctx;t.clearRect(0,0,this._width,this._height);for(var r,a=0,c=this._data.length;c>a;a++)r=this._data[a],t.globalAlpha=Math.max(r[2]/this._max,e||.05),t.drawImage(this._circle,r[0]-this._r,r[1]-this._r);var d=t.getImageData(0,0,this._width,this._height);return this._colorize(d.data,this._grad),t.putImageData(d,0,0),this},_colorize:function(e,t){for(var r,a=3,c=e.length;c>a;a+=4)r=4*e[a],r&&(e[a-3]=t[r],e[a-2]=t[r+1],e[a-1]=t[r+2])}},window.simpleheat=n})(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(n,e){this._latlngs=n,L.setOptions(this,e)},setLatLngs:function(n){return this._latlngs=n,this.redraw()},addLatLng:function(n){return this._latlngs.push(n),this.redraw()},setOptions:function(n){return L.setOptions(this,n),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(n){this._map=n,this._canvas||this._initCanvas(),n._panes.overlayPane.appendChild(this._canvas),n.on("moveend",this._reset,this),n.options.zoomAnimation&&L.Browser.any3d&&n.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(n){n.getPanes().overlayPane.removeChild(this._canvas),n.off("moveend",this._reset,this),n.options.zoomAnimation&&n.off("zoomanim",this._animateZoom,this)},addTo:function(n){return n.addLayer(this),this},_initCanvas:function(){var n=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),e=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);n.style[e]="50% 50%";var t=this._map.getSize();n.width=t.x,n.height=t.y;var r=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(n,"leaflet-zoom-"+(r?"animated":"hide")),this._heat=simpleheat(n),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var n=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,n);var e=this._map.getSize();this._heat._width!==e.x&&(this._canvas.width=this._heat._width=e.x),this._heat._height!==e.y&&(this._canvas.height=this._heat._height=e.y),this._redraw()},_redraw:function(){var n,e,t,r,a,c,d,m,y,T=[],I=this._heat._r,A=this._map.getSize(),R=new L.Bounds(L.point([-I,-I]),A.add([I,I])),U=this.options.max===void 0?1:this.options.max,J=this.options.maxZoom===void 0?this._map.getMaxZoom():this.options.maxZoom,ne=1/Math.pow(2,Math.max(0,Math.min(J-this._map.getZoom(),12))),ie=I/2,Ae=[],De=this._map._getMapPanePos(),Pe=De.x%ie,Ue=De.y%ie;for(n=0,e=this._latlngs.length;e>n;n++)if(t=this._map.latLngToContainerPoint(this._latlngs[n]),R.contains(t)){a=Math.floor((t.x-Pe)/ie)+2,c=Math.floor((t.y-Ue)/ie)+2;var tt=this._latlngs[n].alt!==void 0?this._latlngs[n].alt:this._latlngs[n][2]!==void 0?+this._latlngs[n][2]:1;y=tt*ne,Ae[c]=Ae[c]||[],r=Ae[c][a],r?(r[0]=(r[0]*r[2]+t.x*y)/(r[2]+y),r[1]=(r[1]*r[2]+t.y*y)/(r[2]+y),r[2]+=y):Ae[c][a]=[t.x,t.y,y]}for(n=0,e=Ae.length;e>n;n++)if(Ae[n])for(d=0,m=Ae[n].length;m>d;d++)r=Ae[n][d],r&&T.push([Math.round(r[0]),Math.round(r[1]),Math.min(r[2],U)]);this._heat.data(T).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(n){var e=this._map.getZoomScale(n.zoom),t=this._map._getCenterOffset(n.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,t,e):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(t)+" scale("+e+")"}}),L.heatLayer=function(n,e){return new L.HeatLayer(n,e)};function TR({userLocations:n}){const e=yR();return Jf.useEffect(()=>{e.eachLayer(r=>{r.options&&r.options.pane==="overlayPane"&&e.removeLayer(r)});const t=n.map(r=>[r.lat,r.lng]);t.length>0&&hR.heatLayer(t,{radius:25,blur:1,maxZoom:17}).addTo(e)},[n,e]),null}function SR({userLocations:n}){const e=[32.75491,-117.205];return ke.jsxs("div",{className:"mb-2 mt-4 p-4 bg-gray-900 rounded-lg shadow-lg text-center w-full max-w-2xl",children:[ke.jsx("h2",{className:"text-md font-bold text-neon-purple mb-2 text-center",children:"See Where Other Users are Checked In!"}),ke.jsx("div",{className:"w-full h-96",children:ke.jsxs(wR,{center:e,zoom:12,className:"w-full h-full rounded-lg z-0",children:[ke.jsx(ER,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'}),ke.jsx(TR,{userLocations:n})]})})]})}var _h={},Iv;function CR(){if(Iv)return _h;Iv=1;function n(c){if(typeof window>"u")return;const d=document.createElement("style");return d.setAttribute("type","text/css"),d.innerHTML=c,document.head.appendChild(d),c}Object.defineProperty(_h,"__esModule",{value:!0});var e=Zh();function t(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var r=t(e);n(`.rfm-marquee-container {
  overflow-x: hidden;
  display: flex;
  flex-direction: row;
  position: relative;
  width: var(--width);
  transform: var(--transform);
}
.rfm-marquee-container:hover div {
  animation-play-state: var(--pause-on-hover);
}
.rfm-marquee-container:active div {
  animation-play-state: var(--pause-on-click);
}

.rfm-overlay {
  position: absolute;
  width: 100%;
  height: 100%;
}
.rfm-overlay::before, .rfm-overlay::after {
  background: linear-gradient(to right, var(--gradient-color), rgba(255, 255, 255, 0));
  content: "";
  height: 100%;
  position: absolute;
  width: var(--gradient-width);
  z-index: 2;
  pointer-events: none;
  touch-action: none;
}
.rfm-overlay::after {
  right: 0;
  top: 0;
  transform: rotateZ(180deg);
}
.rfm-overlay::before {
  left: 0;
  top: 0;
}

.rfm-marquee {
  flex: 0 0 auto;
  min-width: var(--min-width);
  z-index: 1;
  display: flex;
  flex-direction: row;
  align-items: center;
  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);
  animation-play-state: var(--play);
  animation-delay: var(--delay);
  animation-direction: var(--direction);
}
@keyframes scroll {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-100%);
  }
}

.rfm-initial-child-container {
  flex: 0 0 auto;
  display: flex;
  min-width: auto;
  flex-direction: row;
  align-items: center;
}

.rfm-child {
  transform: var(--transform);
}`);const a=e.forwardRef(function({style:d={},className:m="",autoFill:y=!1,play:T=!0,pauseOnHover:I=!1,pauseOnClick:A=!1,direction:R="left",speed:U=50,delay:J=0,loop:ne=0,gradient:ie=!1,gradientColor:Ae="white",gradientWidth:De=200,onFinish:Pe,onCycleComplete:Ue,onMount:tt,children:Oe},j){const[D,b]=e.useState(0),[F,O]=e.useState(0),[q,M]=e.useState(1),[we,_e]=e.useState(!1),ae=e.useRef(null),ce=j||ae,B=e.useRef(null),Z=e.useCallback(()=>{if(B.current&&ce.current){const de=ce.current.getBoundingClientRect(),Ve=B.current.getBoundingClientRect();let be=de.width,Ke=Ve.width;(R==="up"||R==="down")&&(be=de.height,Ke=Ve.height),M(y&&be&&Ke&&Ke<be?Math.ceil(be/Ke):1),b(be),O(Ke)}},[y,ce,R]);e.useEffect(()=>{if(we&&(Z(),B.current&&ce.current)){const de=new ResizeObserver(()=>Z());return de.observe(ce.current),de.observe(B.current),()=>{de&&de.disconnect()}}},[Z,ce,we]),e.useEffect(()=>{Z()},[Z,Oe]),e.useEffect(()=>{_e(!0)},[]),e.useEffect(()=>{typeof tt=="function"&&tt()},[]);const W=e.useMemo(()=>y?F*q/U:F<D?D/U:F/U,[y,D,F,q,U]),k=e.useMemo(()=>Object.assign(Object.assign({},d),{"--pause-on-hover":!T||I?"paused":"running","--pause-on-click":!T||I&&!A||A?"paused":"running","--width":R==="up"||R==="down"?"100vh":"100%","--transform":R==="up"?"rotate(-90deg)":R==="down"?"rotate(90deg)":"none"}),[d,T,I,A,R]),G=e.useMemo(()=>({"--gradient-color":Ae,"--gradient-width":typeof De=="number"?`${De}px`:De}),[Ae,De]),oe=e.useMemo(()=>({"--play":T?"running":"paused","--direction":R==="left"?"normal":"reverse","--duration":`${W}s`,"--delay":`${J}s`,"--iteration-count":ne?`${ne}`:"infinite","--min-width":y?"auto":"100%"}),[T,R,W,J,ne,y]),fe=e.useMemo(()=>({"--transform":R==="up"?"rotate(90deg)":R==="down"?"rotate(-90deg)":"none"}),[R]),me=e.useCallback(de=>[...Array(Number.isFinite(de)&&de>=0?de:0)].map((Ve,be)=>r.default.createElement(e.Fragment,{key:be},e.Children.map(Oe,Ke=>r.default.createElement("div",{style:fe,className:"rfm-child"},Ke)))),[fe,Oe]);return we?r.default.createElement("div",{ref:ce,style:k,className:"rfm-marquee-container "+m},ie&&r.default.createElement("div",{style:G,className:"rfm-overlay"}),r.default.createElement("div",{className:"rfm-marquee",style:oe,onAnimationIteration:Ue,onAnimationEnd:Pe},r.default.createElement("div",{className:"rfm-initial-child-container",ref:B},e.Children.map(Oe,de=>r.default.createElement("div",{style:fe,className:"rfm-child"},de))),me(q-1)),r.default.createElement("div",{className:"rfm-marquee",style:oe},me(q))):null});return _h.default=a,_h}var IR=CR();const xR=Kh(IR);var Ih={exports:{}},AR=Ih.exports,xv;function PR(){return xv||(xv=1,function(n,e){(function(t,r){n.exports=r()})(AR,function(){var t=1e3,r=6e4,a=36e5,c="millisecond",d="second",m="minute",y="hour",T="day",I="week",A="month",R="quarter",U="year",J="date",ne="Invalid Date",ie=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ae=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,De={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(we){var _e=["th","st","nd","rd"],ae=we%100;return"["+we+(_e[(ae-20)%10]||_e[ae]||_e[0])+"]"}},Pe=function(we,_e,ae){var ce=String(we);return!ce||ce.length>=_e?we:""+Array(_e+1-ce.length).join(ae)+we},Ue={s:Pe,z:function(we){var _e=-we.utcOffset(),ae=Math.abs(_e),ce=Math.floor(ae/60),B=ae%60;return(_e<=0?"+":"-")+Pe(ce,2,"0")+":"+Pe(B,2,"0")},m:function we(_e,ae){if(_e.date()<ae.date())return-we(ae,_e);var ce=12*(ae.year()-_e.year())+(ae.month()-_e.month()),B=_e.clone().add(ce,A),Z=ae-B<0,W=_e.clone().add(ce+(Z?-1:1),A);return+(-(ce+(ae-B)/(Z?B-W:W-B))||0)},a:function(we){return we<0?Math.ceil(we)||0:Math.floor(we)},p:function(we){return{M:A,y:U,w:I,d:T,D:J,h:y,m,s:d,ms:c,Q:R}[we]||String(we||"").toLowerCase().replace(/s$/,"")},u:function(we){return we===void 0}},tt="en",Oe={};Oe[tt]=De;var j="$isDayjsObject",D=function(we){return we instanceof q||!(!we||!we[j])},b=function we(_e,ae,ce){var B;if(!_e)return tt;if(typeof _e=="string"){var Z=_e.toLowerCase();Oe[Z]&&(B=Z),ae&&(Oe[Z]=ae,B=Z);var W=_e.split("-");if(!B&&W.length>1)return we(W[0])}else{var k=_e.name;Oe[k]=_e,B=k}return!ce&&B&&(tt=B),B||!ce&&tt},F=function(we,_e){if(D(we))return we.clone();var ae=typeof _e=="object"?_e:{};return ae.date=we,ae.args=arguments,new q(ae)},O=Ue;O.l=b,O.i=D,O.w=function(we,_e){return F(we,{locale:_e.$L,utc:_e.$u,x:_e.$x,$offset:_e.$offset})};var q=function(){function we(ae){this.$L=b(ae.locale,null,!0),this.parse(ae),this.$x=this.$x||ae.x||{},this[j]=!0}var _e=we.prototype;return _e.parse=function(ae){this.$d=function(ce){var B=ce.date,Z=ce.utc;if(B===null)return new Date(NaN);if(O.u(B))return new Date;if(B instanceof Date)return new Date(B);if(typeof B=="string"&&!/Z$/i.test(B)){var W=B.match(ie);if(W){var k=W[2]-1||0,G=(W[7]||"0").substring(0,3);return Z?new Date(Date.UTC(W[1],k,W[3]||1,W[4]||0,W[5]||0,W[6]||0,G)):new Date(W[1],k,W[3]||1,W[4]||0,W[5]||0,W[6]||0,G)}}return new Date(B)}(ae),this.init()},_e.init=function(){var ae=this.$d;this.$y=ae.getFullYear(),this.$M=ae.getMonth(),this.$D=ae.getDate(),this.$W=ae.getDay(),this.$H=ae.getHours(),this.$m=ae.getMinutes(),this.$s=ae.getSeconds(),this.$ms=ae.getMilliseconds()},_e.$utils=function(){return O},_e.isValid=function(){return this.$d.toString()!==ne},_e.isSame=function(ae,ce){var B=F(ae);return this.startOf(ce)<=B&&B<=this.endOf(ce)},_e.isAfter=function(ae,ce){return F(ae)<this.startOf(ce)},_e.isBefore=function(ae,ce){return this.endOf(ce)<F(ae)},_e.$g=function(ae,ce,B){return O.u(ae)?this[ce]:this.set(B,ae)},_e.unix=function(){return Math.floor(this.valueOf()/1e3)},_e.valueOf=function(){return this.$d.getTime()},_e.startOf=function(ae,ce){var B=this,Z=!!O.u(ce)||ce,W=O.p(ae),k=function(Ke,st){var Ut=O.w(B.$u?Date.UTC(B.$y,st,Ke):new Date(B.$y,st,Ke),B);return Z?Ut:Ut.endOf(T)},G=function(Ke,st){return O.w(B.toDate()[Ke].apply(B.toDate("s"),(Z?[0,0,0,0]:[23,59,59,999]).slice(st)),B)},oe=this.$W,fe=this.$M,me=this.$D,de="set"+(this.$u?"UTC":"");switch(W){case U:return Z?k(1,0):k(31,11);case A:return Z?k(1,fe):k(0,fe+1);case I:var Ve=this.$locale().weekStart||0,be=(oe<Ve?oe+7:oe)-Ve;return k(Z?me-be:me+(6-be),fe);case T:case J:return G(de+"Hours",0);case y:return G(de+"Minutes",1);case m:return G(de+"Seconds",2);case d:return G(de+"Milliseconds",3);default:return this.clone()}},_e.endOf=function(ae){return this.startOf(ae,!1)},_e.$set=function(ae,ce){var B,Z=O.p(ae),W="set"+(this.$u?"UTC":""),k=(B={},B[T]=W+"Date",B[J]=W+"Date",B[A]=W+"Month",B[U]=W+"FullYear",B[y]=W+"Hours",B[m]=W+"Minutes",B[d]=W+"Seconds",B[c]=W+"Milliseconds",B)[Z],G=Z===T?this.$D+(ce-this.$W):ce;if(Z===A||Z===U){var oe=this.clone().set(J,1);oe.$d[k](G),oe.init(),this.$d=oe.set(J,Math.min(this.$D,oe.daysInMonth())).$d}else k&&this.$d[k](G);return this.init(),this},_e.set=function(ae,ce){return this.clone().$set(ae,ce)},_e.get=function(ae){return this[O.p(ae)]()},_e.add=function(ae,ce){var B,Z=this;ae=Number(ae);var W=O.p(ce),k=function(fe){var me=F(Z);return O.w(me.date(me.date()+Math.round(fe*ae)),Z)};if(W===A)return this.set(A,this.$M+ae);if(W===U)return this.set(U,this.$y+ae);if(W===T)return k(1);if(W===I)return k(7);var G=(B={},B[m]=r,B[y]=a,B[d]=t,B)[W]||1,oe=this.$d.getTime()+ae*G;return O.w(oe,this)},_e.subtract=function(ae,ce){return this.add(-1*ae,ce)},_e.format=function(ae){var ce=this,B=this.$locale();if(!this.isValid())return B.invalidDate||ne;var Z=ae||"YYYY-MM-DDTHH:mm:ssZ",W=O.z(this),k=this.$H,G=this.$m,oe=this.$M,fe=B.weekdays,me=B.months,de=B.meridiem,Ve=function(st,Ut,hn,Sn){return st&&(st[Ut]||st(ce,Z))||hn[Ut].slice(0,Sn)},be=function(st){return O.s(k%12||12,st,"0")},Ke=de||function(st,Ut,hn){var Sn=st<12?"AM":"PM";return hn?Sn.toLowerCase():Sn};return Z.replace(Ae,function(st,Ut){return Ut||function(hn){switch(hn){case"YY":return String(ce.$y).slice(-2);case"YYYY":return O.s(ce.$y,4,"0");case"M":return oe+1;case"MM":return O.s(oe+1,2,"0");case"MMM":return Ve(B.monthsShort,oe,me,3);case"MMMM":return Ve(me,oe);case"D":return ce.$D;case"DD":return O.s(ce.$D,2,"0");case"d":return String(ce.$W);case"dd":return Ve(B.weekdaysMin,ce.$W,fe,2);case"ddd":return Ve(B.weekdaysShort,ce.$W,fe,3);case"dddd":return fe[ce.$W];case"H":return String(k);case"HH":return O.s(k,2,"0");case"h":return be(1);case"hh":return be(2);case"a":return Ke(k,G,!0);case"A":return Ke(k,G,!1);case"m":return String(G);case"mm":return O.s(G,2,"0");case"s":return String(ce.$s);case"ss":return O.s(ce.$s,2,"0");case"SSS":return O.s(ce.$ms,3,"0");case"Z":return W}return null}(st)||W.replace(":","")})},_e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_e.diff=function(ae,ce,B){var Z,W=this,k=O.p(ce),G=F(ae),oe=(G.utcOffset()-this.utcOffset())*r,fe=this-G,me=function(){return O.m(W,G)};switch(k){case U:Z=me()/12;break;case A:Z=me();break;case R:Z=me()/3;break;case I:Z=(fe-oe)/6048e5;break;case T:Z=(fe-oe)/864e5;break;case y:Z=fe/a;break;case m:Z=fe/r;break;case d:Z=fe/t;break;default:Z=fe}return B?Z:O.a(Z)},_e.daysInMonth=function(){return this.endOf(A).$D},_e.$locale=function(){return Oe[this.$L]},_e.locale=function(ae,ce){if(!ae)return this.$L;var B=this.clone(),Z=b(ae,ce,!0);return Z&&(B.$L=Z),B},_e.clone=function(){return O.w(this.$d,this)},_e.toDate=function(){return new Date(this.valueOf())},_e.toJSON=function(){return this.isValid()?this.toISOString():null},_e.toISOString=function(){return this.$d.toISOString()},_e.toString=function(){return this.$d.toUTCString()},we}(),M=q.prototype;return F.prototype=M,[["$ms",c],["$s",d],["$m",m],["$H",y],["$W",T],["$M",A],["$y",U],["$D",J]].forEach(function(we){M[we[1]]=function(_e){return this.$g(_e,we[0],we[1])}}),F.extend=function(we,_e){return we.$i||(we(_e,q,F),we.$i=!0),F},F.locale=b,F.isDayjs=D,F.unix=function(we){return F(1e3*we)},F.en=Oe[tt],F.Ls=Oe,F.p={},F})}(Ih)),Ih.exports}var RR=PR();const kR=Kh(RR);function DR(){const[n,e]=Xe.useState([]);return Xe.useEffect(()=>{const t=BP(IP(nR,"events"),UP("startTime",">=",Date.now()));return qP(t,r=>e(r.docs.map(a=>({id:a.id,...a.data()}))))},[]),n.length?ke.jsx("div",{className:"w-screen bg-black",children:ke.jsx(xR,{pauseOnHover:!0,gradient:!1,className:"text-yellow-300 text-sm py-1",children:n.map(t=>ke.jsx("span",{className:"mx-4 whitespace-nowrap",children:ke.jsxs("a",{href:t.url??"#",target:"_blank",rel:"noreferrer",children:[t.title," @ ",t.club,"  ",kR(t.startTime).format("h:mm A")]})},t.id))})}):null}const Av=["The Owl San Diego","Mavericks Beach Club","Nova SD","Hideaway","PB Shore Club","Parq","The Duck Dive","Side Bar","Phantom Lounge and Nightclub","The Casbah","The Rail","Oxford Social Club","The Tipsy Crow","Onyx","F6ix","Bloom","Omert","Sevilla","Mr Tempo","TORO","Prohibition Lounge","Spin","Moonshine Flats","710 Beach Club","Lahaina Beach House","PB Avenue","Moonshine Beach","Thrusters Lounge","The Local","Open Bar","Tavern at the Beach","Silver Fox Lounge","The Collective","Firehouse","Nolita Hall","Camino Riviera","Waterfront","Waterbar","Beachcomber","Sidecar","Park & Rec","American Junkie","Lafayette"],LR={"The Owl San Diego":"https://www.google.com/maps/dir//420+E+St,+San+Diego,+CA+92101/@32.7147923,-117.2430872,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80d9534cb0a81c6d:0x5019f947b72d2e76!2m2!1d-117.160686!2d32.7148192?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Mavericks Beach Club":"https://www.google.com/maps/dir//860+Garnet+Ave,+San+Diego,+CA+92109/@32.7969665,-117.33696,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80dc01ed4a33ca67:0xe5ccf145c43dc856!2m2!1d-117.2545606!2d32.79694?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Nova SD":"https://www.google.com/maps/dir//NOVA+SD,+Sixth+Avenue,+San+Diego,+CA/@32.7101391,-117.200703,13z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80d953f3984d8373:0xb88af52513d84244!2m2!1d-117.1594389!2d32.7103071?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Hideaway:"https://www.google.com/maps/dir//4474+Mission+Blvd,+San+Diego,+CA+92109/@32.7961665,-117.3379473,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80dc01001f5b1d7f:0x668aa995fcd00ddf!2m2!1d-117.2555461!2d32.7961935?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","PB Shore Club":"https://www.google.com/maps/dir//4343+Ocean+Blvd,+San+Diego,+CA+92109/@32.7941901,-117.3382093,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80dc01f27f56f293:0x97c43960eb48a464!2m2!1d-117.2558081!2d32.7942171?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Parq:"https://www.google.com/maps?rlz=1C5CHFA_enUS920US923&gs_lcrp=EgZjaHJvbWUqFggBEC4YgwEYrwEYxwEYsQMYgAQYjgUyEAgAEAAYgwEY4wIYsQMYgAQyFggBEC4YgwEYrwEYxwEYsQMYgAQYjgUyEAgCEC4YrwEYxwEYgAQYjgUyCQgDEAAYChiABDINCAQQABiSAxiABBiKBTINCAUQABiSAxiABBiKBTIJCAYQABgKGIAEMg0IBxAAGIMBGLEDGIAEMgcICBAAGI8CMgcICRAAGI8C0gEIMjU1MGowajeoAgCwAgA&um=1&ie=UTF-8&fb=1&gl=us&sa=X&geocode=KYMRw4OnVNmAMZCeW4E7HeND&daddr=615+Broadway,+San+Diego,+CA+92101","The Duck Dive":"https://www.google.com/maps/dir//4650+Mission+Blvd,+San+Diego,+CA+92109/@32.7985183,-117.3387285,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80dc018d6698aebd:0x4cbe323a6529d2b8!2m2!1d-117.2562648!2d32.7985589?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Side Bar":"https://www.google.com/maps/dir//Side+Bar,+6th+St,+San+Diego,+CA/@32.711662,-117.2006022,13z/data=!3m1!5s0x80d95359a4e152fb:0xf3c479bdd8d3d169!4m8!4m7!1m0!1m5!1m1!1s0x80d95359a4f71dad:0xd2b90b558faaa352!2m2!1d-117.1594024!2d32.7116687?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Phantom Lounge and Nightclub":"https://www.google.com/maps/dir//Phantom+Lounge+and+Nightclub,+Fifth+Avenue,+San+Diego,+CA/@32.7161033,-117.2015132,13z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80d954a7eb148127:0x44196b16bdd29423!2m2!1d-117.1603191!2d32.7161098?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","The Casbah":"https://www.google.com/maps/dir//2501+Kettner+Blvd,+San+Diego,+CA+92101/@32.7302243,-117.254322,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80d954b4e0c59087:0x9856d4b4f58e630d!2m2!1d-117.1719232!2d32.7302504?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","The Rail":"https://www.google.com/maps/dir//The+Rail,+Fifth+Avenue,+San+Diego,+CA/@32.7468236,-117.2019392,13z/data=!3m1!5s0x80d954daba064b2d:0xfac8d05b29e51124!4m8!4m7!1m0!1m5!1m1!1s0x80d954dab76bd2c1:0x1a9b56ef49ce662!2m2!1d-117.1607394!2d32.7468303?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Oxford Social Club":"https://www.google.com/maps/dir//Oxford+Social+Club,+Fifth+Avenue,+San+Diego,+CA/@32.7099353,-117.2011073,13z/data=!3m1!5s0x80d954daba064b2d:0xfac8d05b29e51124!4m8!4m7!1m0!1m5!1m1!1s0x80d953598b01edd1:0x70fd57ffd095aa19!2m2!1d-117.1599652!2d32.7099594?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","The Tipsy Crow":"https://www.google.com/maps/dir//The+Tipsy+Crow,+Fifth+Avenue,+San+Diego,+CA/@32.7134629,-117.2015364,13z/data=!3m2!4b1!5s0x80d954daba064b2d:0xfac8d05b29e51124!4m8!4m7!1m0!1m5!1m1!1s0x80d953584079c39f:0x6b62100a8ea8f55b!2m2!1d-117.1603229!2d32.7134995?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Onyx:"https://www.google.com/maps/dir//Onyx+Nightclub,+Fifth+Avenue,+San+Diego,+CA/@32.7143675,-117.2015212,13z/data=!3m2!4b1!5s0x80d954daba064b2d:0xfac8d05b29e51124!4m8!4m7!1m0!1m5!1m1!1s0x80d9535872cb4d5f:0xb235e251e95ae194!2m2!1d-117.1603214!2d32.7143742?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",F6ix:"https://www.google.com/maps/dir//F6ix,+F+Street,+San+Diego,+CA/@32.7137283,-117.2008865,13z/data=!3m2!4b1!5s0x80d954daba064b2d:0xfac8d05b29e51124!4m8!4m7!1m0!1m5!1m1!1s0x80d9535842863f95:0xd8e8315e4f2df1f0!2m2!1d-117.1596867!2d32.713735?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Bloom:"https://www.google.com/maps/dir//Bloom+Nightclub,+Fourth+Avenue,+San+Diego,+CA/@32.7147662,-117.2018293,13z/data=!3m2!4b1!5s0x80d954daba064b2d:0xfac8d05b29e51124!4m8!4m7!1m0!1m5!1m1!1s0x80d955738175f68b:0xa29e164aa485c40b!2m2!1d-117.1606295!2d32.7147729?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Omert:"https://www.google.com/maps/dir//Omert%C3%A0,+Fifth+Avenue,+San+Diego,+CA/@32.7133939,-117.2011198,13z/data=!3m2!4b1!5s0x80d954daba064b2d:0xfac8d05b29e51124!4m8!4m7!1m0!1m5!1m1!1s0x80d953f3e4c03593:0x3cf954846d4d86f7!2m2!1d-117.15992!2d32.7134006?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Sevilla:"https://www.google.com/maps/dir//Sevilla+Nightclub+of+San+Diego,+Fifth+Avenue,+San+Diego,+CA/@32.7089068,-117.2008934,13z/data=!3m2!4b1!5s0x80d954daba064b2d:0xfac8d05b29e51124!4m8!4m7!1m0!1m5!1m1!1s0x80d9535a3bb8a035:0xf32dbb01a11ac53a!2m2!1d-117.1597593!2d32.708913?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Mr Tempo":"https://www.google.com/maps/dir//Mr+Tempo+Gaslamp+San+Diego,+Fifth+Avenue,+San+Diego,+CA/@32.7127076,-117.2011452,13z/data=!3m2!4b1!5s0x80d954daba064b2d:0xfac8d05b29e51124!4m8!4m7!1m0!1m5!1m1!1s0x80d95367ff5b792d:0x14eca75f6af381a8!2m2!1d-117.1599454!2d32.7127143?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",TORO:"https://www.google.com/maps/dir//TORO,+Fifth+Avenue,+San+Diego,+CA/@32.7124125,-117.2016055,13z/data=!3m2!4b1!5s0x80d954daba064b2d:0xfac8d05b29e51124!4m8!4m7!1m0!1m5!1m1!1s0x80d9530b1afdc975:0x43c1f338f12b2d7f!2m2!1d-117.1602967!2d32.7123966?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Prohibition Lounge":"https://www.google.com/maps/dir//Prohibition+Lounge,+Fifth+Avenue,+San+Diego,+CA/@32.7111088,-117.2015526,13z/data=!3m2!4b1!5s0x80d95359c06594ff:0x3166420b734815bc!4m8!4m7!1m0!1m5!1m1!1s0x80d95359969f1e8d:0x80cb5720a7079ba3!2m2!1d-117.1603528!2d32.7111155?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Spin:"https://www.google.com/maps/dir//Spin+Nightclub,+Hancock+Street,+San+Diego,+CA/@32.7445654,-117.2293474,13z/data=!3m1!5s0x80d95359c06594ff:0x3166420b734815bc!4m8!4m7!1m0!1m5!1m1!1s0x80deab242d3119e5:0xb8d04372de076287!2m2!1d-117.1881637!2d32.7445481?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Moonshine Flats":"https://www.google.com/maps/dir//Moonshine+Flats,+Seventh+Avenue,+San+Diego,+CA/@32.7089493,-117.199623,13z/data=!3m1!5s0x80d95359c06594ff:0x3166420b734815bc!4m8!4m7!1m0!1m5!1m1!1s0x80d9535bcbbdbbf3:0x70f8f39ad9af97b1!2m2!1d-117.1584272!2d32.708955?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","710 Beach Club":"https://www.google.com/maps/dir//710+Beach+Club,+Garnet+Avenue,+San+Diego,+CA/@32.7965157,-117.2976933,13z/data=!3m1!5s0x80d95359c06594ff:0x3166420b734815bc!4m8!4m7!1m0!1m5!1m1!1s0x80dc01f2ae65c6af:0x99146f5ac448de12!2m2!1d-117.2564872!2d32.7965637?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Lahaina Beach House":"https://www.google.com/maps/dir//Lahaina+Beach+House,+Oliver+Court,+San+Diego,+CA/@32.7917427,-117.2963409,13z/data=!3m2!4b1!5s0x80d95359c06594ff:0x3166420b734815bc!4m8!4m7!1m0!1m5!1m1!1s0x80dc01ee061546bd:0xbd48db964c21ad6c!2m2!1d-117.2550899!2d32.7917616?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","PB Avenue":"https://www.google.com/maps/dir//PB+Avenue,+Garnet+Avenue,+San+Diego,+CA/@32.7979223,-117.2918438,13z/data=!3m2!4b1!5s0x80d95359c06594ff:0x3166420b734815bc!4m8!4m7!1m0!1m5!1m1!1s0x80dc01ecade3c4b9:0x8e6a606260c46304!2m2!1d-117.250644!2d32.797929?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Moonshine Beach":"https://www.google.com/maps/dir//Moonshine+Beach,+Garnet+Avenue,+San+Diego,+CA/@32.7979634,-117.2896629,13z/data=!3m2!4b1!5s0x80d95359c06594ff:0x3166420b734815bc!4m8!4m7!1m0!1m5!1m1!1s0x80dc01eb38c46dc3:0x5808904c07a7b1f2!2m2!1d-117.2484565!2d32.797999?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Thrusters Lounge":"https://www.google.com/maps/dir//Thrusters+Lounge,+Mission+Boulevard,+San+Diego,+CA/@32.7982273,-117.2969628,13z/data=!3m2!4b1!5s0x80d95359c06594ff:0x3166420b734815bc!4m8!4m7!1m0!1m5!1m1!1s0x80dc018d5f89c50b:0xf1f9875f9b06e172!2m2!1d-117.2558522!2d32.7982176?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","The Local":"https://www.google.com/maps/dir//809+Thomas+Ave,+San+Diego,+CA+92109/@32.7936275,-117.3363491,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80dc01edbf3c2c65:0x2f493bf3ca6c6079!2m2!1d-117.2540394!2d32.7936796?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Open Bar":"https://www.google.com/maps/dir//Open+Bar,+Mission+Boulevard,+San+Diego,+CA/@32.7937911,-117.2960545,13z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80dc01ed96ac9633:0x4b0c8d05f128d28c!2m2!1d-117.2548546!2d32.7937491?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Tavern at the Beach":"https://www.google.com/maps/dir//Tavern+at+the+Beach,+Garnet+Avenue,+San+Diego,+CA/@32.7984768,-117.2892881,13z/data=!3m1!4b1!4m8!4m7!1m0!1m5!1m1!1s0x80dc01eb37514d83:0x358745da5581e5a5!2m2!1d-117.2480576!2d32.7983846?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Silver Fox Lounge":"https://www.google.com/maps/dir//The+Silver+Fox+Lounge,+Garnet+Avenue,+San+Diego,+CA/@32.8005407,-117.2774869,13z/data=!3m1!4b1!4m8!4m7!1m0!1m5!1m1!1s0x80dc01c774748387:0xa39b4fb191cf801e!2m2!1d-117.2362871!2d32.8005474?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","The Collective":"https://www.google.com/maps/dir//The+Collective,+Garnet+Avenue,+San+Diego,+CA/@32.7982636,-117.2879825,13z/data=!3m1!4b1!4m8!4m7!1m0!1m5!1m1!1s0x80dc01ce7fc3aa59:0xf2501c9f34e7985!2m2!1d-117.2468131!2d32.7983677?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Firehouse:"https://www.google.com/maps/dir//Firehouse+American+Eatery+%26+Lounge,+Grand+Avenue,+San+Diego,+CA/@32.7947957,-117.2967235,13z/data=!3m1!4b1!4m8!4m7!1m0!1m5!1m1!1s0x80dc01ed7c120c7f:0xa18cdb473d169ff1!2m2!1d-117.2555753!2d32.7947897?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Nolita Hall":"https://www.google.com/maps/dir//Nolita+Hall,+India+Street,+San+Diego,+CA/@32.728561,-117.2113885,13z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80d955913bee6bf9:0x8bf38d28551a3fd2!2m2!1d-117.1702488!2d32.7285764?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Camino Riviera":"https://www.google.com/maps/dir//Camino+Riviera,+India+Street,+San+Diego,+CA/@32.7294067,-117.2121488,13z/data=!3m1!4b1!4m8!4m7!1m0!1m5!1m1!1s0x80d954b48b162d19:0xe99ec63692a39c2e!2m2!1d-117.1709429!2d32.7294262?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Waterfront:"https://www.google.com/maps/dir//2044+Kettner+Blvd,+San+Diego,+CA+92101/@32.7256045,-117.2526514,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80d954b254babbb7:0x2ca8e2b66ea7a63b!2m2!1d-117.1702169!2d32.7256472?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Waterbar:"https://www.google.com/maps/dir//Waterbar,+Ocean+Boulevard,+San+Diego,+CA/@32.7939291,-117.2968878,13z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80dc015375084dbd:0x634c6477aeb3b63c!2m2!1d-117.255688!2d32.7939358?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Beachcomber:"https://www.google.com/maps/dir//Beachcomber,+Mission+Boulevard,+San+Diego,+CA/@32.7657266,-117.2922311,13z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80deaa11ec763f7d:0xf7912f6359f52908!2m2!1d-117.251111!2d32.7657344?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Sidecar:"https://www.google.com/maps/dir//Sidecar+Bar,+Morena+Boulevard,+San+Diego,+CA/@32.771923,-117.2435618,13z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80deaa946d2899ff:0x96ee9d4bda91acc9!2m2!1d-117.202362!2d32.7719297?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","Park & Rec":"https://www.google.com/maps/dir//Park+%26+Rec,+Park+Boulevard,+San+Diego,+CA/@32.7613763,-117.1878217,13z/data=!3m1!5s0x80d9551e48530d97:0xb1935eacdbc64fe3!4m8!4m7!1m0!1m5!1m1!1s0x80d9551e499e69ad:0x56dc709d96ebf5e5!2m2!1d-117.1466219!2d32.761383?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D","American Junkie":"https://www.google.com/maps/dir//American+Junkie,+Fifth+Avenue,+San+Diego,+CA/@32.7121188,-117.2015705,13z/data=!3m1!5s0x80d9551e48530d97:0xb1935eacdbc64fe3!4m8!4m7!1m0!1m5!1m1!1s0x80d95359ca427f0b:0xb7463c3520c7b591!2m2!1d-117.1603707!2d32.7121255?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D",Lafayette:"https://www.google.com/maps/dir//2223+El+Cajon+Blvd,+San+Diego,+CA+92104/@32.7548874,-117.2230642,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x80d954e48e9c792f:0xf683f1f59b87baf5!2m2!1d-117.1406668!2d32.7549633?entry=ttu&g_ep=EgoyMDI1MDEyOS4xIKXMDSoASAFQAw%3D%3D"},NR=n=>n>=7?"text-green-500":n<5?"text-red-500":"text-gray-200",MR=n=>n?Math.min(1,n/10):0,bR=()=>{const[n,e]=Xe.useState({}),[t,r]=Xe.useState(new Set),[a,c]=Xe.useState(null),[d,m]=Xe.useState(Av.reduce((Z,W)=>(Z[W]=[],Z),{})),[y,T]=Xe.useState(""),[I,A]=Xe.useState(!1),[R,U]=Xe.useState(""),[J,ne]=Xe.useState(""),[ie,Ae]=Xe.useState(""),[De,Pe]=Xe.useState(null),[Ue,tt]=Xe.useState(""),[Oe,j]=Xe.useState({}),[D,b]=Xe.useState(new Set),[F,O]=Xe.useState([]);Xe.useEffect(()=>{const Z=Nr(Mr,"ratings");Iu(Z,W=>{const k=W.val();k&&e(k)})},[]),Xe.useEffect(()=>{const Z=Nr(Mr,"userLocations"),W=Iu(Z,k=>{if(k.exists()){const G=k.val(),oe=Object.values(G);O(oe)}else O([])});return()=>W()},[]),Xe.useEffect(()=>{const Z=Nr(Mr,"checkIns");Iu(Z,W=>{const k=W.val()||{};j(k)})},[]),Xe.useEffect(()=>{const Z=Nr(Mr,"topRating");Iu(Z,W=>{const k=W.val();Pe(k||null)})},[]),Xe.useEffect(()=>{if(!a)return;const Z=Nr(Mr,`comments/${a}`),W=Iu(Z,k=>{const G=k.val();if(G){const oe=Object.values(G).sort((fe,me)=>me.timestamp-fe.timestamp);m(fe=>({...fe,[a]:oe}))}else m(oe=>({...oe,[a]:[]}))});return()=>W()},[a]);const q=Z=>{const W=n[Z];if(!W||W.count===0)return ke.jsx("span",{className:"text-gray-400",children:"No ratings yet"});const k=W.total/W.count,G=NR(k);return ke.jsx("span",{className:G,children:k.toFixed(1)})},M=()=>{if(!y.trim()||!a)return;const Z=Date.now(),W=Nr(Mr,`comments/${a}/${Z}`);ch(W,{text:y,timestamp:Z}),T("")},we=(Z,W)=>{if(t.has(Z)){alert("You have already rated this location.");return}const k=Nr(Mr,`ratings/${Z}`),G=n[Z]||{total:0,count:0};ch(k,{total:G.total+W,count:G.count+1}),r(oe=>new Set(oe).add(Z))},_e=()=>{if(ie.trim()){alert("Spam detected! Honeypot field was filled.");return}if(!R.trim()||!J.trim())return;const Z=Date.now(),W=Nr(Mr,`clubSubmissions/${Z}`);ch(W,{email:R,message:J,timestamp:Z}),U(""),ne(""),A(!1),alert("Your message was submitted successfully! Thank you for improving Club Hoppr!")},ae=Z=>{if(D.has(Z)){alert("You have already checked in at this location.");return}"geolocation"in navigator?navigator.geolocation.getCurrentPosition(W=>{var me;const{latitude:k,longitude:G}=W.coords,oe=bI(Nr(Mr,"userLocations"));OI(oe,{lat:k,lng:G,timestamp:Date.now()});const fe=((me=Oe[Z])==null?void 0:me.count)||0;ch(Nr(Mr,`checkIns/${Z}`),{count:fe+1}).then(()=>{console.log(`Check-in successful for ${Z}`),b(de=>new Set(de).add(Z))}).catch(de=>console.error("Check-in failed:",de))},W=>{console.error("Error getting geolocation:",W),alert("Unable to retrieve location. Check-in canceled. Check your settings to make sure your browser can access your location.")}):alert("Geolocation is not supported by your browser.")},B=[...Av].sort((Z,W)=>{const k=n[Z],G=n[W],oe=k&&k.count>0?k.total/k.count:0;return(G&&G.count>0?G.total/G.count:0)-oe}).filter(Z=>Z.toLowerCase().includes(Ue.toLowerCase()));return ke.jsxs("div",{className:"min-h-screen w-screen flex flex-col items-center bg-black pt-0 p-4",children:[ke.jsx(DR,{}),ke.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-b from-purple-500 to-violet-800 bg-clip-text text-transparent mb-6 text-center",children:"CLUB HOPPR"}),ke.jsx("h2",{className:"text-1xl font-bold text-neon-purple mb-6 text-center",children:"Give YOUR Rating of the Hottest Spots in Downtown SD & PB!"}),De&&ke.jsxs("div",{className:"mb-6 p-4 bg-gray-900 rounded-lg shadow-lg text-center",children:[ke.jsx("h2",{className:"text-md font-bold text-neon-purple mb-2 text-center",children:" Top Rated from the Previous Night "}),ke.jsx("h3",{className:"text-white font-bold text-3xl mt-2 mb-1 text-center",children:De.club}),ke.jsxs("p",{className:"text-yellow-400",children:["Average Rating: ",De.average.toFixed(1)]})]}),ke.jsx("div",{className:"w-full max-w-md mb-6",children:ke.jsx("input",{type:"text",className:"w-full p-2 rounded bg-gray-800 text-white",placeholder:"Search for a club...",value:Ue,onChange:Z=>tt(Z.target.value)})}),ke.jsx("div",{className:"w-screen max-w-2xl bg-gray-900 shadow-lg rounded-lg p-4 sm:p-6 md:p-8",children:B.map(Z=>{var oe;const W=n[Z];let k=null;W&&W.count>0&&(k=W.total/W.count);const G=k?MR(k):0;return ke.jsxs("div",{className:"border-b border-neon-purple py-4",children:[ke.jsx("button",{className:"float-right px-4 py-2 text-sm sm:text-base sm:px-6 sm:py-3 bg-neon-purple text-black rounded hover:bg-purple-800 disabled:opacity-50",onClick:()=>c(Z),children:"View Comments"}),ke.jsxs("h2",{className:"text-2xl font-semibold text-white mb-2",children:[ke.jsx("a",{href:LR[Z]||"#",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:underline",children:Z}),k&&ke.jsx("span",{style:{marginLeft:"0.5rem",opacity:G},"aria-label":"Fire Emoji",children:""})]}),ke.jsxs("p",{className:"text-gray-400 mb-2",children:["Average Rating: ",q(Z)]}),ke.jsx("div",{className:"flex flex-wrap space-x-1 mb-2",children:[1,2,3,4,5,6,7,8,9,10].map(fe=>ke.jsx("button",{onClick:()=>we(Z,fe),className:"px-2 py-0.5 bg-neon-purple text-black rounded hover:bg-purple-800 disabled:opacity-50",disabled:t.has(Z),children:fe},fe))}),ke.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[ke.jsx("button",{onClick:()=>ae(Z),className:"bg-blue-600 px-3 py-1 rounded hover:bg-blue-700 text-white",children:"Check In"}),ke.jsxs("p",{className:"text-white",children:["Crowd Meter: ",ke.jsx("span",{className:"text-yellow-400 font-bold",children:((oe=Oe[Z])==null?void 0:oe.count)||0})," people"]})]})]},Z)})}),ke.jsx(SR,{userLocations:F}),ke.jsx("footer",{className:"mt-6 text-gray-400 text-sm text-center",children:"Ratings, Comments, & Check-Ins reset daily at 6:00 AM PST"}),ke.jsx("button",{className:"mt-4 bg-neon-purple px-4 py-2 rounded hover:bg-purple-800 text-black",onClick:()=>A(!0),children:"Send Us Feedback"}),a&&ke.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-end z-50",children:ke.jsxs("div",{className:"bg-gray-900 text-white w-80 h-full shadow-lg overflow-y-auto p-4 relative",children:[ke.jsx("button",{className:"float-right top-4 right-4 text-gray-400 hover:text-gray-200",onClick:()=>c(null),children:"Close"}),ke.jsx("h2",{className:"text-2xl font-bold mb-4",children:a}),ke.jsxs("div",{className:"mt-4",children:[ke.jsx("textarea",{className:"w-full bg-gray-800 text-white rounded p-2",rows:"3",value:y,onChange:Z=>T(Z.target.value),placeholder:"Add a comment..."}),ke.jsx("button",{className:"mt-2 bg-neon-purple px-4 py-2 rounded hover:bg-purple-800",onClick:M,children:"Submit"})]}),ke.jsx("div",{className:"flex flex-col space-y-4 mt-4",children:d[a].map((Z,W)=>ke.jsxs("div",{className:"border-b border-gray-700 pb-2",children:[ke.jsx("p",{children:Z.text}),ke.jsx("p",{className:"text-sm text-gray-500",children:new Date(Z.timestamp).toLocaleString()})]},W))})]})}),I&&ke.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:ke.jsxs("div",{className:"bg-gray-900 text-white w-80 rounded-lg shadow-lg p-4 relative",children:[ke.jsx("button",{className:"float-right mr-0.5 top-2 right-2 text-gray-400 hover:text-gray-200",onClick:()=>A(!1),children:"Close"}),ke.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Submit Feedback"}),ke.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Your Email:"}),ke.jsx("input",{type:"email",value:R,onChange:Z=>U(Z.target.value),className:"w-full mb-4 p-2 rounded bg-gray-800 text-white",placeholder:"email@example.com"}),ke.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Your Message:"}),ke.jsx("textarea",{value:J,onChange:Z=>ne(Z.target.value),rows:3,className:"w-full mb-4 p-2 rounded bg-gray-800 text-white",placeholder:"Tell us which venue you want added, concerns, questions, suggestions, etc..."}),ke.jsx("input",{type:"text",name:"honeypot",value:ie,onChange:Z=>Ae(Z.target.value),style:{display:"none"},autoComplete:"off"}),ke.jsx("button",{onClick:_e,className:"bg-neon-purple px-4 py-2 rounded hover:bg-purple-800 text-black",children:"Submit"})]})})]})};t1.createRoot(document.getElementById("root")).render(ke.jsx(Xe.StrictMode,{children:ke.jsx(bR,{})}));
